var w1=Object.defineProperty,I1=Object.defineProperties;var C1=Object.getOwnPropertyDescriptors;var Db=Object.getOwnPropertySymbols,b1=Object.getPrototypeOf,D1=Object.prototype.hasOwnProperty,T1=Object.prototype.propertyIsEnumerable,S1=Reflect.get;var Tb=(n,e,t)=>e in n?w1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})D1.call(e,t)&&Tb(n,t,e[t]);if(Db)for(var t of Db(e))T1.call(e,t)&&Tb(n,t,e[t]);return n},he=(n,e)=>I1(n,C1(e));var Di=(n,e,t)=>S1(b1(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function Dm(n,e){return Object.is(n,e)}var dt=null,rd=!1,Tm=1,Dn=Symbol("SIGNAL");function ve(n){let e=dt;return dt=n,e}function Sm(){return dt}var Rc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xc(n){if(rd)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(n);let e=dt.nextProducerIndex++;if(ad(dt),e<dt.producerNode.length&&dt.producerNode[e]!==n&&Pc(dt)){let t=dt.producerNode[e];sd(t,dt.producerIndexOfThis[e])}dt.producerNode[e]!==n&&(dt.producerNode[e]=n,dt.producerIndexOfThis[e]=Pc(dt)?Ab(n,dt,e):0),dt.producerLastReadVersion[e]=n.version}function Sb(){Tm++}function Am(n){if(!(Pc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Tm)){if(!n.producerMustRecompute(n)&&!xm(n)){bm(n);return}n.producerRecomputeValue(n),bm(n)}}function Mm(n){if(n.liveConsumerNode===void 0)return;let e=rd;rd=!0;try{for(let t of n.liveConsumerNode)t.dirty||A1(t)}finally{rd=e}}function Pm(){return dt?.consumerAllowSignalWrites!==!1}function A1(n){n.dirty=!0,Mm(n),n.consumerMarkedDirty?.(n)}function bm(n){n.dirty=!1,n.lastCleanEpoch=Tm}function od(n){return n&&(n.nextProducerIndex=0),ve(n)}function Rm(n,e){if(ve(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Pc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)sd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function xm(n){ad(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Am(t),r!==t.version))return!0}return!1}function Nm(n){if(ad(n),Pc(n))for(let e=0;e<n.producerNode.length;e++)sd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ab(n,e,t){if(Mb(n),n.liveConsumerNode.length===0&&Pb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Ab(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function sd(n,e){if(Mb(n),n.liveConsumerNode.length===1&&Pb(n))for(let r=0;r<n.producerNode.length;r++)sd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];ad(i),i.producerIndexOfThis[r]=e}}function Pc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ad(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Mb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Pb(n){return n.producerNode!==void 0}function Om(n,e){let t=Object.create(M1);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Am(t),xc(t),t.value===id)throw t.error;return t.value};return r[Dn]=t,r}var Im=Symbol("UNSET"),Cm=Symbol("COMPUTING"),id=Symbol("ERRORED"),M1=he(j({},Rc),{value:Im,dirty:!0,error:null,equal:Dm,kind:"computed",producerMustRecompute(n){return n.value===Im||n.value===Cm},producerRecomputeValue(n){if(n.value===Cm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Cm;let t=od(n),r,i=!1;try{r=n.computation(),ve(null),i=e!==Im&&e!==id&&r!==id&&n.equal(e,r)}catch(o){r=id,n.error=o}finally{Rm(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function P1(){throw new Error}var Rb=P1;function xb(n){Rb(n)}function km(n){Rb=n}var R1=null;function Fm(n,e){let t=Object.create(cd);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(xc(t),t.value);return r[Dn]=t,r}function Nc(n,e){Pm()||xb(n),n.equal(n.value,e)||(n.value=e,x1(n))}function Lm(n,e){Pm()||xb(n),Nc(n,e(n.value))}var cd=he(j({},Rc),{equal:Dm,value:void 0,kind:"signal"});function x1(n){n.version++,Sb(),Mm(n),R1?.()}function Vm(n){let e=ve(null);try{return n()}finally{ve(e)}}var Um;function Oc(){return Um}function Gr(n){let e=Um;return Um=n,e}var ud=Symbol("NotFound");function ae(n){return typeof n=="function"}function bs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ld=bs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function po(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof ld?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Nb(o)}catch(s){e=e??[],s instanceof ld?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ld(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Nb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&po(t,e)}remove(e){let{_finalizers:t}=this;t&&po(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var jm=Je.EMPTY;function dd(n){return n instanceof Je||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function Nb(n){ae(n)?n():n.unsubscribe()}var qn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ds={setTimeout(n,e,...t){let{delegate:r}=Ds;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ds;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function hd(n){Ds.setTimeout(()=>{let{onUnhandledError:e}=qn;if(e)e(n);else throw n})}function kc(){}var Ob=Bm("C",void 0,void 0);function kb(n){return Bm("E",void 0,n)}function Fb(n){return Bm("N",n,void 0)}function Bm(n,e,t){return{kind:n,value:e,error:t}}var go=null;function Ts(n){if(qn.useDeprecatedSynchronousErrorHandling){let e=!go;if(e&&(go={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=go;if(go=null,t)throw r}}else n()}function Lb(n){qn.useDeprecatedSynchronousErrorHandling&&go&&(go.errorThrown=!0,go.error=n)}var mo=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dd(e)&&e.add(this)):this.destination=V1}static create(e,t,r){return new Ss(e,t,r)}next(e){this.isStopped?Hm(Fb(e),this):this._next(e)}error(e){this.isStopped?Hm(kb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hm(Ob,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},F1=Function.prototype.bind;function $m(n,e){return F1.call(n,e)}var zm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){fd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){fd(r)}else fd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){fd(t)}}},Ss=class extends mo{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&qn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$m(e.next,o),error:e.error&&$m(e.error,o),complete:e.complete&&$m(e.complete,o)}):i=e}this.destination=new zm(i)}};function fd(n){qn.useDeprecatedSynchronousErrorHandling?Lb(n):hd(n)}function L1(n){throw n}function Hm(n,e){let{onStoppedNotification:t}=qn;t&&Ds.setTimeout(()=>t(n,e))}var V1={closed:!0,next:kc,error:L1,complete:kc};var As=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fn(n){return n}function pd(...n){return qm(n)}function qm(n){return n.length===0?fn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ie=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=j1(t)?t:new Ss(t,r,i);return Ts(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Vb(r),new r((i,o)=>{let s=new Ss({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[As](){return this}pipe(...t){return qm(t)(this)}toPromise(t){return t=Vb(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Vb(n){var e;return(e=n??qn.Promise)!==null&&e!==void 0?e:Promise}function U1(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function j1(n){return n&&n instanceof mo||U1(n)&&dd(n)}function Gm(n){return ae(n?.lift)}function Ce(n){return e=>{if(Gm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new Wm(n,e,t,r,i)}var Wm=class extends mo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ms(){return Ce((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ps=class extends ie{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Gm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Je;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Je.EMPTY)}return e}refCount(){return Ms()(this)}};var Ub=bs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class n extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Ub}next(t){Ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ts(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?jm:(this.currentObservers=null,o.push(t),new Je(()=>{this.currentObservers=null,po(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ie;return t.source=this,t}}return n.create=(e,t)=>new gd(e,t),n})(),gd=class extends Ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:jm}};var ht=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Km={now(){return(Km.delegate||Date).now()},delegate:void 0};var md=class extends Je{constructor(e,t){super()}schedule(e,t=0){return this}};var Fc={setInterval(n,e,...t){let{delegate:r}=Fc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Fc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Rs=class extends md{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Fc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Fc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,po(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var xs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};xs.now=Km.now;var Ns=class extends xs{constructor(e,t=xs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Qm=new Ns(Rs);var yd=class extends Rs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var vd=class extends Ns{};var Ym=new vd(yd);var Zt=new ie(n=>n.complete());function jb(n){return n&&ae(n.schedule)}function Bb(n){return n[n.length-1]}function _d(n){return ae(Bb(n))?n.pop():void 0}function Ti(n){return jb(Bb(n))?n.pop():void 0}function Zm(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Hb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function $b(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yo(n){return this instanceof yo?(this.v=n,this):new yo(n)}function zb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(A){return Promise.resolve(A).then(m,p)}}function a(m,A){r[m]&&(i[m]=function(N){return new Promise(function(O,z){o.push([m,N,O,z])>1||u(m,N)})},A&&(i[m]=A(i[m])))}function u(m,A){try{l(r[m](A))}catch(N){y(o[0][3],N)}}function l(m){m.value instanceof yo?Promise.resolve(m.value.v).then(h,p):y(o[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function y(m,A){m(A),o.shift(),o.length&&u(o[0][0],o[0][1])}}function qb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof $b=="function"?$b(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Ed=n=>n&&typeof n.length=="number"&&typeof n!="function";function wd(n){return ae(n?.then)}function Id(n){return ae(n[As])}function Cd(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function bd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function B1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Dd=B1();function Td(n){return ae(n?.[Dd])}function Sd(n){return zb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield yo(t.read());if(i)return yield yo(void 0);yield yield yo(r)}}finally{t.releaseLock()}})}function Ad(n){return ae(n?.getReader)}function rt(n){if(n instanceof ie)return n;if(n!=null){if(Id(n))return $1(n);if(Ed(n))return H1(n);if(wd(n))return z1(n);if(Cd(n))return Gb(n);if(Td(n))return q1(n);if(Ad(n))return G1(n)}throw bd(n)}function $1(n){return new ie(e=>{let t=n[As]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function H1(n){return new ie(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function z1(n){return new ie(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,hd)})}function q1(n){return new ie(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Gb(n){return new ie(e=>{W1(n,e).catch(t=>e.error(t))})}function G1(n){return Gb(Sd(n))}function W1(n,e){var t,r,i,o;return Hb(this,void 0,void 0,function*(){try{for(t=qb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Jt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Si(n,e=0){return Ce((t,r)=>{t.subscribe(_e(r,i=>Jt(r,n,()=>r.next(i),e),()=>Jt(r,n,()=>r.complete(),e),i=>Jt(r,n,()=>r.error(i),e)))})}function Ai(n,e=0){return Ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Wb(n,e){return rt(n).pipe(Ai(e),Si(e))}function Kb(n,e){return rt(n).pipe(Ai(e),Si(e))}function Qb(n,e){return new ie(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Yb(n,e){return new ie(t=>{let r;return Jt(t,e,()=>{r=n[Dd](),Jt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Md(n,e){if(!n)throw new Error("Iterable cannot be null");return new ie(t=>{Jt(t,e,()=>{let r=n[Symbol.asyncIterator]();Jt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Zb(n,e){return Md(Sd(n),e)}function Jb(n,e){if(n!=null){if(Id(n))return Wb(n,e);if(Ed(n))return Qb(n,e);if(wd(n))return Kb(n,e);if(Cd(n))return Md(n,e);if(Td(n))return Yb(n,e);if(Ad(n))return Zb(n,e)}throw bd(n)}function Re(n,e){return e?Jb(n,e):rt(n)}function Z(...n){let e=Ti(n);return Re(n,e)}function Os(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new ie(e?i=>e.schedule(r,0,i):r)}function Jm(n){return!!n&&(n instanceof ie||ae(n.lift)&&ae(n.subscribe))}var Wr=bs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ee(n,e){return Ce((t,r)=>{let i=0;t.subscribe(_e(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:K1}=Array;function Q1(n,e){return K1(e)?n(...e):n(e)}function Pd(n){return ee(e=>Q1(n,e))}var{isArray:Y1}=Array,{getPrototypeOf:Z1,prototype:J1,keys:X1}=Object;function Rd(n){if(n.length===1){let e=n[0];if(Y1(e))return{args:e,keys:null};if(eF(e)){let t=X1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function eF(n){return n&&typeof n=="object"&&Z1(n)===J1}function xd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Lc(...n){let e=Ti(n),t=_d(n),{args:r,keys:i}=Rd(n);if(r.length===0)return Re([],e);let o=new ie(tF(r,e,i?s=>xd(i,s):fn));return t?o.pipe(Pd(t)):o}function tF(n,e,t=fn){return r=>{Xb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Xb(e,()=>{let l=Re(n[u],e),h=!1;l.subscribe(_e(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Xb(n,e,t){n?Jt(t,n,e):e()}function eD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},m=N=>l<r?A(N):u.push(N),A=N=>{o&&e.next(N),l++;let O=!1;rt(t(N,h++)).subscribe(_e(e,z=>{i?.(z),o?m(z):e.next(z)},()=>{O=!0},void 0,()=>{if(O)try{for(l--;u.length&&l<r;){let z=u.shift();s?Jt(e,s,()=>A(z)):A(z)}y()}catch(z){e.error(z)}}))};return n.subscribe(_e(e,m,()=>{p=!0,y()})),()=>{a?.()}}function tt(n,e,t=1/0){return ae(e)?tt((r,i)=>ee((o,s)=>e(r,o,i,s))(rt(n(r,i))),t):(typeof e=="number"&&(t=e),Ce((r,i)=>eD(r,i,n,t)))}function ks(n=1/0){return tt(fn,n)}function tD(){return ks(1)}function Fs(...n){return tD()(Re(n,Ti(n)))}function Nd(n){return new ie(e=>{rt(n()).subscribe(e)})}function Xm(...n){let e=_d(n),{args:t,keys:r}=Rd(n),i=new ie(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;rt(t[h]).subscribe(_e(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?xd(r,a):a),o.complete())}))}});return e?i.pipe(Pd(e)):i}function Nt(n,e){return Ce((t,r)=>{let i=0;t.subscribe(_e(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Kr(n){return Ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(_e(t,void 0,void 0,s=>{o=rt(n(s,Kr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function nD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(_e(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ur(n,e){return ae(e)?tt(n,e,1):tt(n,1)}function Mi(n){return Ce((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gn(n){return n<=0?()=>Zt:Ce((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Od(n=nF){return Ce((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function nF(){return new Wr}function Pi(n){return Ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Nt((i,o)=>n(i,o,r)):fn,Gn(1),t?Mi(e):Od(()=>new Wr))}function Ls(n){return n<=0?()=>Zt:Ce((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ey(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Nt((i,o)=>n(i,o,r)):fn,Ls(1),t?Mi(e):Od(()=>new Wr))}function kd(n,e){return Ce(nD(n,e,arguments.length>=2,!0))}function Fd(...n){let e=Ti(n);return Ce((t,r)=>{(e?Fs(n,t,e):Fs(n,t)).subscribe(r)})}function Ot(n,e){return Ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(_e(r,u=>{i?.unsubscribe();let l=0,h=o++;rt(n(u,h)).subscribe(i=_e(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ty(n){return Ce((e,t)=>{rt(n).subscribe(_e(t,()=>t.complete(),kc)),!t.closed&&e.subscribe(t)})}function Dt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(_e(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):fn}var qD="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",q=class extends Error{code;constructor(e,t){super(GD(e,t)),this.code=e}};function rF(n){return`NG0${Math.abs(n)}`}function GD(n,e){return`${rF(n)}${e?": "+e:""}`}var WD=Symbol("InputSignalNode#UNSET"),iF=he(j({},cd),{transformFn:void 0,applyValueToInputSignal(n,e){Nc(n,e)}});function KD(n,e){let t=Object.create(iF);t.value=n,t.transformFn=e?.transform;function r(){if(xc(t),t.value===WD){let i=null;throw new q(-950,i)}return t.value}return r[Dn]=t,r}function Qc(n){return{toString:n}.toString()}var Ld="__parameters__";function oF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function QD(n,e,t){return Qc(()=>{let r=oF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Ld)?u[Ld]:Object.defineProperty(u,Ld,{value:[]})[Ld];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _o=globalThis;function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function sF(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function en(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(en).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function rD(n,e){return n?e?`${n} ${e}`:n:e||""}var aF=Be({__forward_ref__:Be});function An(n){return n.__forward_ref__=An,n.toString=function(){return en(this())},n}function qt(n){return YD(n)?n():n}function YD(n){return typeof n=="function"&&n.hasOwnProperty(aF)&&n.__forward_ref__===An}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mn(n){return{providers:n.providers||[],imports:n.imports||[]}}function mh(n){return iD(n,JD)||iD(n,XD)}function ZD(n){return mh(n)!==null}function iD(n,e){return n.hasOwnProperty(e)?n[e]:null}function cF(n){let e=n&&(n[JD]||n[XD]);return e||null}function oD(n){return n&&(n.hasOwnProperty(sD)||n.hasOwnProperty(uF))?n[sD]:null}var JD=Be({\u0275prov:Be}),sD=Be({\u0275inj:Be}),XD=Be({ngInjectableDef:Be}),uF=Be({ngInjectorDef:Be}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function eT(n){return n&&!!n.\u0275providers}var lF=Be({\u0275cmp:Be}),dF=Be({\u0275dir:Be}),hF=Be({\u0275pipe:Be}),fF=Be({\u0275mod:Be}),Gd=Be({\u0275fac:Be}),Bc=Be({__NG_ELEMENT_ID__:Be}),aD=Be({__NG_ENV_ID__:Be});function zs(n){return typeof n=="string"?n:n==null?"":String(n)}function pF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():zs(n)}function tT(n,e){throw new q(-200,n)}function dv(n,e){throw new q(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),my;function nT(){return my}function Xt(n){let e=my;return my=n,e}function rT(n,e,t){let r=mh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;dv(n,"Injector")}var gF={},Eo=gF,yy="__NG_DI_FLAG__",Wd=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?ud:Eo,r)}},Kd="ngTempTokenPath",mF="ngTokenPath",yF=/\n/gm,vF="\u0275",cD="__source";function _F(n,e=pe.Default){if(Oc()===void 0)throw new q(-203,!1);if(Oc()===null)return rT(n,void 0,e);{let t=Oc(),r;return t instanceof Wd?r=t.injector:r=t,r.get(n,e&pe.Optional?null:void 0,e)}}function K(n,e=pe.Default){return(nT()||_F)(qt(n),e)}function k(n,e=pe.Default){return K(n,yh(e))}function yh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function vy(n){let e=[];for(let t=0;t<n.length;t++){let r=qt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=EF(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function iT(n,e){return n[yy]=e,n.prototype[yy]=e,n}function EF(n){return n[yy]}function wF(n,e,t,r){let i=n[Kd];throw e[cD]&&i.unshift(e[cD]),n.message=IF(`
`+n.message,i,t,r),n[mF]=i,n[Kd]=null,n}function IF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==vF?n.slice(2):n;let i=en(e);if(Array.isArray(e))i=e.map(en).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):en(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(yF,`
  `)}`}var mt=iT(QD("Optional"),8);var CF=iT(QD("SkipSelf"),4);function Io(n,e){let t=n.hasOwnProperty(Gd);return t?n[Gd]:null}function bF(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function DF(n){return n.flat(Number.POSITIVE_INFINITY)}function hv(n,e){n.forEach(t=>Array.isArray(t)?hv(t,e):e(t))}function oT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function TF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function SF(n,e,t){let r=Yc(n,e);return r>=0?n[r|1]=t:(r=~r,TF(n,r,e,t)),r}function ny(n,e){let t=Yc(n,e);if(t>=0)return n[t|1]}function Yc(n,e){return AF(n,e,1)}function AF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Co={},Tn=[],$c=new $(""),sT=new $("",-1),aT=new $(""),Yd=class{get(e,t=Eo){if(t===Eo){let r=new Error(`NullInjectorError: No provider for ${en(e)}!`);throw r.name="NullInjectorError",r}return t}};function cT(n,e){let t=n[fF]||null;if(!t&&e===!0)throw new Error(`Type ${en(n)} does not have '\u0275mod' property.`);return t}function bo(n){return n[lF]||null}function MF(n){return n[dF]||null}function PF(n){return n[hF]||null}function gn(n){return{\u0275providers:n}}function RF(...n){return{\u0275providers:uT(!0,n),\u0275fromNgModule:!0}}function uT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return hv(e,s=>{let a=s;_y(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&lT(i,o),t}function lT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];fv(i,o=>{e(o,r)})}}function _y(n,e,t,r){if(n=qt(n),!n)return!1;let i=null,o=oD(n),s=!o&&bo(n);if(!o&&!s){let u=n.ngModule;if(o=oD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)_y(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{hv(o.imports,h=>{_y(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&lT(l,e)}if(!a){let l=Io(i)||(()=>new i);e({provide:i,useFactory:l,deps:Tn},i),e({provide:aT,useValue:i,multi:!0},i),e({provide:$c,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;fv(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function fv(n,e){for(let t of n)eT(t)&&(t=t.\u0275providers),Array.isArray(t)?fv(t,e):e(t)}var xF=Be({provide:String,useValue:Be});function dT(n){return n!==null&&typeof n=="object"&&xF in n}function NF(n){return!!(n&&n.useExisting)}function OF(n){return!!(n&&n.useFactory)}function qs(n){return typeof n=="function"}function kF(n){return!!n.useClass}var vh=new $(""),jd={},uD={},ry;function pv(){return ry===void 0&&(ry=new Yd),ry}var gt=class{},Hc=class extends gt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,wy(e,s=>this.processProvider(s)),this.records.set(sT,Vs(void 0,this)),i.has("environment")&&this.records.set(gt,Vs(void 0,this));let o=this.records.get(vh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(aT,Tn,pe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?ud:Eo,r)}destroy(){Uc(this),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return Uc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Uc(this);let t=Gr(this),r=Xt(void 0),i;try{return e()}finally{Gr(t),Xt(r)}}get(e,t=Eo,r=pe.Default){if(Uc(this),e.hasOwnProperty(aD))return e[aD](this);r=yh(r);let i,o=Gr(this),s=Xt(void 0);try{if(!(r&pe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=jF(e)&&mh(e);l&&this.injectableDefInScope(l)?u=Vs(Ey(e),jd):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&pe.Self?pv():this.parent;return t=r&pe.Optional&&t===Eo?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Kd]=a[Kd]||[]).unshift(en(e)),o)throw a;return wF(a,e,"R3InjectorError",this.source)}else throw a}finally{Xt(s),Gr(o)}}resolveInjectorInitializers(){let e=ve(null),t=Gr(this),r=Xt(void 0),i;try{let o=this.get($c,Tn,pe.Self);for(let s of o)s()}finally{Gr(t),Xt(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(en(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=qt(e);let t=qs(e)?e:qt(e&&e.provide),r=LF(e);if(!qs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Vs(void 0,jd,!0),i.factory=()=>vy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ve(null);try{return t.value===uD?tT(en(e)):t.value===jd&&(t.value=uD,t.value=t.factory()),typeof t.value=="object"&&t.value&&UF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=qt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ey(n){let e=mh(n),t=e!==null?e.factory:Io(n);if(t!==null)return t;if(n instanceof $)throw new q(204,!1);if(n instanceof Function)return FF(n);throw new q(204,!1)}function FF(n){if(n.length>0)throw new q(204,!1);let t=cF(n);return t!==null?()=>t.factory(n):()=>new n}function LF(n){if(dT(n))return Vs(void 0,n.useValue);{let e=hT(n);return Vs(e,jd)}}function hT(n,e,t){let r;if(qs(n)){let i=qt(n);return Io(i)||Ey(i)}else if(dT(n))r=()=>qt(n.useValue);else if(OF(n))r=()=>n.useFactory(...vy(n.deps||[]));else if(NF(n))r=()=>K(qt(n.useExisting));else{let i=qt(n&&(n.useClass||n.provide));if(VF(n))r=()=>new i(...vy(n.deps));else return Io(i)||Ey(i)}return r}function Uc(n){if(n.destroyed)throw new q(205,!1)}function Vs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function VF(n){return!!n.deps}function UF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function jF(n){return typeof n=="function"||typeof n=="object"&&n instanceof $}function wy(n,e){for(let t of n)Array.isArray(t)?wy(t,e):t&&eT(t)?wy(t.\u0275providers,e):e(t)}function yt(n,e){let t;n instanceof Hc?(Uc(n),t=n):t=new Wd(n);let r,i=Gr(t),o=Xt(void 0);try{return e()}finally{Gr(i),Xt(o)}}function fT(){return nT()!==void 0||Oc()!=null}function gv(n){if(!fT())throw new q(-203,!1)}function BF(n){return typeof n=="function"}var ei=0,ge=1,oe=2,kt=3,Kn=4,Qn=5,Zd=6,Jd=7,tn=8,Gs=9,Yr=10,ot=11,zc=12,lD=13,ea=14,dr=15,Do=16,Us=17,Zr=18,_h=19,pT=20,Ri=21,iy=22,Xd=23,Sn=24,$s=25,nn=26,gT=1;var To=7,eh=8,Ws=9,pn=10;function xi(n){return Array.isArray(n)&&typeof n[gT]=="object"}function ti(n){return Array.isArray(n)&&n[gT]===!0}function mv(n){return(n.flags&4)!==0}function ta(n){return n.componentOffset>-1}function Eh(n){return(n.flags&1)===1}function hr(n){return!!n.template}function th(n){return(n[oe]&512)!==0}function Zc(n){return(n[oe]&256)===256}var Iy=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function mT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var yr=(()=>{let n=()=>yT;return n.ngInherit=!0,n})();function yT(n){return n.type.prototype.ngOnChanges&&(n.setInput=HF),$F}function $F(){let n=_T(this),e=n?.current;if(e){let t=n.previous;if(t===Co)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function HF(n,e,t,r,i){let o=this.declaredInputs[r],s=_T(n)||zF(n,{previous:Co,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Iy(l&&l.currentValue,t,u===Co),mT(n,e,i,t)}var vT="__ngSimpleChanges__";function _T(n){return n[vT]||null}function zF(n,e){return n[vT]=e}var dD=null;var Ve=function(n,e=null,t){dD?.(n,e,t)},qF="svg",GF="math";function fr(n){for(;Array.isArray(n);)n=n[ei];return n}function ET(n,e){return fr(e[n])}function vr(n,e){return fr(e[n.index])}function wT(n,e){return n.data[e]}function yv(n,e){return n[e]}function pr(n,e){let t=e[n];return xi(t)?t:t[ei]}function WF(n){return(n[oe]&4)===4}function vv(n){return(n[oe]&128)===128}function KF(n){return ti(n[kt])}function Ks(n,e){return e==null?null:n[e]}function IT(n){n[Us]=0}function CT(n){n[oe]&1024||(n[oe]|=1024,vv(n)&&Jc(n))}function QF(n,e){for(;n>0;)e=e[ea],n--;return e}function wh(n){return!!(n[oe]&9216||n[Sn]?.dirty)}function Cy(n){n[Yr].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),wh(n)&&Jc(n)}function Jc(n){n[Yr].changeDetectionScheduler?.notify(0);let e=So(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!vv(e)));)e=So(e)}function bT(n,e){if(Zc(n))throw new q(911,!1);n[Ri]===null&&(n[Ri]=[]),n[Ri].push(e)}function YF(n,e){if(n[Ri]===null)return;let t=n[Ri].indexOf(e);t!==-1&&n[Ri].splice(t,1)}function So(n){let e=n[kt];return ti(e)?e[kt]:e}function _v(n){return n[Jd]??=[]}function Ev(n){return n.cleanup??=[]}function ZF(n,e,t,r){let i=_v(e);i.push(t),n.firstCreatePass&&Ev(n).push(r,i.length-1)}var fe={lFrame:xT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var by=!1;function JF(){return fe.lFrame.elementDepthCount}function XF(){fe.lFrame.elementDepthCount++}function eL(){fe.lFrame.elementDepthCount--}function wv(){return fe.bindingsEnabled}function tL(){return fe.skipHydrationRootTNode!==null}function nL(n){return fe.skipHydrationRootTNode===n}function rL(){fe.skipHydrationRootTNode=null}function Ee(){return fe.lFrame.lView}function vt(){return fe.lFrame.tView}function rn(n){return fe.lFrame.contextLView=n,n[tn]}function on(n){return fe.lFrame.contextLView=null,n}function Gt(){let n=DT();for(;n!==null&&n.type===64;)n=n.parent;return n}function DT(){return fe.lFrame.currentTNode}function iL(){let n=fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ko(n,e){let t=fe.lFrame;t.currentTNode=n,t.isParent=e}function Iv(){return fe.lFrame.isParent}function TT(){fe.lFrame.isParent=!1}function oL(){return fe.lFrame.contextLView}function ST(){return by}function hD(n){let e=by;return by=n,e}function Xc(){let n=fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function sL(){return fe.lFrame.bindingIndex}function aL(n){return fe.lFrame.bindingIndex=n}function Ih(){return fe.lFrame.bindingIndex++}function AT(n){let e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function cL(){return fe.lFrame.inI18n}function uL(n,e){let t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Dy(e)}function lL(){return fe.lFrame.currentDirectiveIndex}function Dy(n){fe.lFrame.currentDirectiveIndex=n}function dL(n){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function MT(){return fe.lFrame.currentQueryIndex}function Cv(n){fe.lFrame.currentQueryIndex=n}function hL(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Qn]:null}function PT(n,e,t){if(t&pe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=hL(o),i===null||(o=o[ea],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=fe.lFrame=RT();return r.currentTNode=e,r.lView=n,!0}function bv(n){let e=RT(),t=n[ge];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function RT(){let n=fe.lFrame,e=n===null?null:n.child;return e===null?xT(n):e}function xT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function NT(){let n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var OT=NT;function Dv(){let n=NT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function fL(n){return(fe.lFrame.contextLView=QF(n,fe.lFrame.contextLView))[tn]}function Fo(){return fe.lFrame.selectedIndex}function Ao(n){fe.lFrame.selectedIndex=n}function Tv(){let n=fe.lFrame;return wT(n.tView,n.selectedIndex)}function pL(){return fe.lFrame.currentNamespace}var kT=!0;function Ch(){return kT}function bh(n){kT=n}function gL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=yT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Sv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Bd(n,e,t){FT(n,e,3,t)}function $d(n,e,t,r){(n[oe]&3)===t&&FT(n,e,t,r)}function oy(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function FT(n,e,t,r){let i=r!==void 0?n[Us]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Us]+=65536),(a<o||o==-1)&&(mL(n,t,e,u),n[Us]=(n[Us]&4294901760)+u+2),u++}function fD(n,e){Ve(4,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),Ve(5,n,e)}}function mL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[Us]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,fD(a,o)):fD(a,o)}var Hs=-1,Mo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function yL(n){return(n.flags&8)!==0}function vL(n){return(n.flags&16)!==0}function _L(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];EL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function LT(n){return n===3||n===4||n===6}function EL(n){return n.charCodeAt(0)===64}function Qs(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?pD(n,t,i,null,e[++r]):pD(n,t,i,null,null))}}return n}function pD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function VT(n){return n!==Hs}function nh(n){return n&32767}function wL(n){return n>>16}function rh(n,e){let t=wL(n),r=e;for(;t>0;)r=r[ea],t--;return r}var Ty=!0;function ih(n){let e=Ty;return Ty=n,e}var IL=256,UT=IL-1,jT=5,CL=0,lr={};function bL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Bc)&&(r=t[Bc]),r==null&&(r=t[Bc]=CL++);let i=r&UT,o=1<<i;e.data[n+(i>>jT)]|=o}function oh(n,e){let t=BT(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,sy(r.data,n),sy(e,null),sy(r.blueprint,null));let i=Av(n,e),o=n.injectorIndex;if(VT(i)){let s=nh(i),a=rh(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function sy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function BT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Av(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=GT(i),r===null)return Hs;if(t++,i=i[ea],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Hs}function Sy(n,e,t){bL(n,e,t)}function DL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(LT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function $T(n,e,t){if(t&pe.Optional||n!==void 0)return n;dv(e,"NodeInjector")}function HT(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),(t&(pe.Self|pe.Host))===0){let i=n[Gs],o=Xt(void 0);try{return i?i.get(e,r,t&pe.Optional):rT(e,r,t&pe.Optional)}finally{Xt(o)}}return $T(r,e,t)}function zT(n,e,t,r=pe.Default,i){if(n!==null){if(e[oe]&2048&&!(r&pe.Self)){let s=ML(n,e,t,r,lr);if(s!==lr)return s}let o=qT(n,e,t,r,lr);if(o!==lr)return o}return HT(e,t,r,i)}function qT(n,e,t,r,i){let o=SL(t);if(typeof o=="function"){if(!PT(e,n,r))return r&pe.Host?$T(i,t,r):HT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))dv(t);else return s}finally{OT()}}else if(typeof o=="number"){let s=null,a=BT(n,e),u=Hs,l=r&pe.Host?e[dr][Qn]:null;for((a===-1||r&pe.SkipSelf)&&(u=a===-1?Av(n,e):e[a+8],u===Hs||!mD(r,!1)?a=-1:(s=e[ge],a=nh(u),e=rh(u,e)));a!==-1;){let h=e[ge];if(gD(o,a,h.data)){let p=TL(a,e,t,s,r,l);if(p!==lr)return p}u=e[a+8],u!==Hs&&mD(r,e[ge].data[a+8]===l)&&gD(o,a,e)?(s=h,a=nh(u),e=rh(u,e)):a=-1}}return i}function TL(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?ta(a)&&Ty:r!=s&&(a.type&3)!==0,l=i&pe.Host&&o===a,h=Hd(a,s,t,u,l);return h!==null?qc(e,s,h,a):lr}function Hd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let m=p;m<y;m++){let A=s[m];if(m<u&&t===A||m>=u&&A.type===t)return m}if(i){let m=s[u];if(m&&hr(m)&&m.type===t)return u}return null}function qc(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Mo){let s=i;s.resolving&&tT(pF(o[t]));let a=ih(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Xt(s.injectImpl):null,h=PT(n,r,pe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&gL(t,o[t],e)}finally{l!==null&&Xt(l),ih(a),s.resolving=!1,OT()}}return i}function SL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Bc)?n[Bc]:void 0;return typeof e=="number"?e>=0?e&UT:AL:e}function gD(n,e,t){let r=1<<n;return!!(t[e+(n>>jT)]&r)}function mD(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var wo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return zT(this._tNode,this._lView,e,yh(r),t)}};function AL(){return new wo(Gt(),Ee())}function ni(n){return Qc(()=>{let e=n.prototype.constructor,t=e[Gd]||Ay(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Gd]||Ay(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ay(n){return YD(n)?()=>{let e=Ay(qt(n));return e&&e()}:Io(n)}function ML(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!th(s);){let a=qT(o,s,t,r|pe.Self,lr);if(a!==lr)return a;let u=o.parent;if(!u){let l=s[pT];if(l){let h=l.get(t,lr,r);if(h!==lr)return h}u=GT(s),s=s[ea]}o=u}return i}function GT(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Qn]:null}function Mv(n){return DL(Gt(),n)}function yD(n,e=null,t=null,r){let i=WT(n,e,t,r);return i.resolveInjectorInitializers(),i}function WT(n,e=null,t=null,r,i=new Set){let o=[t||Tn,RF(n)];return r=r||(typeof n=="object"?void 0:en(n)),new Hc(o,e||pv(),r||null,i)}var Qe=class n{static THROW_IF_NOT_FOUND=Eo;static NULL=new Yd;static create(e,t){if(Array.isArray(e))return yD({name:""},t,e,"");{let r=e.name??"";return yD({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>K(sT)});static __NG_ELEMENT_ID__=-1};var PL=new $("");PL.__NG_ELEMENT_ID__=n=>{let e=Gt();if(e===null)throw new q(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new q(204,!1)};var KT=!1,na=(()=>{class n{static __NG_ELEMENT_ID__=RL;static __NG_ENV_ID__=t=>t}return n})(),My=class extends na{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return bT(this._lView,e),()=>YF(this._lView,e)}};function RL(){return new My(Ee())}var Po=class{},QT=new $("",{providedIn:"root",factory:()=>!1});var YT=new $(""),ZT=new $(""),_r=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new ht(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Dh=(()=>{class n{internalPendingTasks=k(_r);scheduler=k(Po);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return _(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Py=class extends Ke{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,fT()&&(this.destroyRef=k(na,{optional:!0})??void 0,this.pendingTasks=k(_r,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},it=Py;function sh(...n){}function JT(n){let e,t;function r(){n=sh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function vD(n){return queueMicrotask(()=>n()),()=>{n=sh}}var Pv="isAngularZone",ah=Pv+"_ID",xL=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new it(!1);onMicrotaskEmpty=new it(!1);onStable=new it(!1);onError=new it(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=KT}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,kL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Pv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,NL,sh,sh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},NL={};function Rv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function OL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){JT(()=>{n.callbackScheduled=!1,Ry(n),n.isCheckStableRunning=!0,Rv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ry(n)}function kL(n){let e=()=>{OL(n)},t=xL++;n._inner=n._inner.fork({name:"angular",properties:{[Pv]:!0,[ah]:t,[ah+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(FL(u))return r.invokeTask(o,s,a,u);try{return _D(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ED(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return _D(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!LL(u)&&e(),ED(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ry(n),Rv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ry(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function _D(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ED(n){n._nesting--,Rv(n)}var xy=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new it;onMicrotaskEmpty=new it;onStable=new it;onError=new it;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function FL(n){return XT(n,"__ignore_ng_zone__")}function LL(n){return XT(n,"__scheduler_tick__")}function XT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var gr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},VL=new $("",{providedIn:"root",factory:()=>{let n=k(De),e=k(gr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function wD(n,e){return KD(n,e)}function UL(n){return KD(WD,n)}var eS=(wD.required=UL,wD);function jL(){return ra(Gt(),Ee())}function ra(n,e){return new ft(vr(n,e))}var ft=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=jL}return n})();function BL(n){return n instanceof ft?n.nativeElement:n}function $L(n){return typeof n=="function"&&n[Dn]!==void 0}function ia(n,e){let t=Fm(n,e?.equal),r=t[Dn];return t.set=i=>Nc(r,i),t.update=i=>Lm(r,i),t.asReadonly=HL.bind(t),t}function HL(){let n=this[Dn];if(n.readonlyFn===void 0){let e=()=>this();e[Dn]=n,n.readonlyFn=e}return n.readonlyFn}function tS(n){return $L(n)&&typeof n.set=="function"}function zL(){return this._results[Symbol.iterator]()}var Ny=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ke}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=DF(e);(this._changesDetected=!bF(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=zL};function nS(n){return(n.flags&128)===128}var rS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(rS||{}),iS=new Map,qL=0;function GL(){return qL++}function WL(n){iS.set(n[_h],n)}function Oy(n){iS.delete(n[_h])}var ID="__ngContext__";function oa(n,e){xi(e)?(n[ID]=e[_h],WL(e)):n[ID]=e}function oS(n){return aS(n[zc])}function sS(n){return aS(n[Kn])}function aS(n){for(;n!==null&&!ti(n);)n=n[Kn];return n}var ky;function cS(n){ky=n}function KL(){if(ky!==void 0)return ky;if(typeof document<"u")return document;throw new q(210,!1)}var xv=new $("",{providedIn:"root",factory:()=>QL}),QL="ng",Nv=new $(""),Er=new $("",{providedIn:"platform",factory:()=>"unknown"});var Ov=new $("",{providedIn:"root",factory:()=>KL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var YL="h",ZL="b";var uS=!1,JL=new $("",{providedIn:"root",factory:()=>uS});var kv=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(kv||{}),sa=new $(""),CD=new Set;function eu(n){CD.has(n)||(CD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var lS=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=XL}return n})();function XL(){return new lS(Ee(),Gt())}var js=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(js||{}),dS=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),eV=[js.EarlyRead,js.Write,js.MixedReadWrite,js.Read],tV=(()=>{class n{ngZone=k(De);scheduler=k(Po);errorHandler=k(gr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(sa,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Ve(16),this.executing=!0;for(let r of eV)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Ve(17)}register(t){let{view:r}=t;r!==void 0?((r[$s]??=[]).push(t),Jc(r),r[oe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(kv.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fy=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[$s];e&&(this.view[$s]=e.filter(t=>t!==this))}};function Fv(n,e){!e?.injector&&gv(Fv);let t=e?.injector??k(Qe);return eu("NgAfterNextRender"),rV(n,t,e,!0)}function nV(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function rV(n,e,t,r){let i=e.get(dS);i.impl??=e.get(tV);let o=e.get(sa,null,{optional:!0}),s=t?.phase??js.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(na):null,u=e.get(lS,null,{optional:!0}),l=new Fy(i.impl,nV(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var iV=()=>null;function hS(n,e,t=!1){return iV(n,e,t)}function fS(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Cv(o),a.contentQueries(2,e[s],s)}}}finally{ve(r)}}}function Ly(n,e,t){Cv(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function Lv(n,e,t){if(mv(e)){let r=ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ve(r)}}}var mr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(mr||{});var Vd;function oV(){if(Vd===void 0&&(Vd=null,_o.trustedTypes))try{Vd=_o.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Vd}function bD(n){return oV()?.createScriptURL(n)||n}var ch=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qD})`}};function Th(n){return n instanceof ch?n.changingThisBreaksApplicationSecurity:n}function pS(n,e){let t=sV(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${qD})`)}return t===e}function sV(n){return n instanceof ch&&n.getTypeName()||null}var aV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cV(n){return n=String(n),n.match(aV)?n:"unsafe:"+n}var Vv=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Vv||{});function uV(n){let e=mS();return e?e.sanitize(Vv.URL,n)||"":pS(n,"URL")?Th(n):cV(zs(n))}function lV(n){let e=mS();if(e)return bD(e.sanitize(Vv.RESOURCE_URL,n)||"");if(pS(n,"ResourceURL"))return bD(Th(n));throw new q(904,!1)}function dV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?lV:uV}function gS(n,e,t){return dV(e,t)(n)}function mS(){let n=Ee();return n&&n[Yr].sanitizer}var hV=/^>|^->|<!--|-->|--!>|<!-$/g,fV=/(<|>)/g,pV="\u200B$1\u200B";function gV(n){return n.replace(hV,e=>e.replace(fV,pV))}function yS(n){return n instanceof Function?n():n}function mV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var vS="ng-template";function yV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&mV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Uv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Uv(n){return n.type===4&&n.value!==vS}function vV(n,e,t){let r=n.type===4&&!t?vS:n.value;return e===r}function _V(n,e,t){let r=4,i=n.attrs,o=i!==null?IV(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Wn(r)&&!Wn(u))return!1;if(s&&Wn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!vV(n,u,t)||u===""&&e.length===1){if(Wn(r))return!1;s=!0}}else if(r&8){if(i===null||!yV(n,i,u,t)){if(Wn(r))return!1;s=!0}}else{let l=e[++a],h=EV(u,i,Uv(n),t);if(h===-1){if(Wn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Wn(r))return!1;s=!0}}}}return Wn(r)||s}function Wn(n){return(n&1)===0}function EV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return CV(e,n)}function wV(n,e,t=!1){for(let r=0;r<e.length;r++)if(_V(n,e[r],t))return!0;return!1}function IV(n){for(let e=0;e<n.length;e++){let t=n[e];if(LT(t))return e}return n.length}function CV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function DD(n,e){return n?":not("+e.trim()+")":e}function bV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Wn(s)&&(e+=DD(o,i),i=""),r=s,o=o||!Wn(r);t++}return i!==""&&(e+=DD(o,i)),e}function DV(n){return n.map(bV).join(",")}function TV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Wn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var wr={};function SV(n,e){return n.createText(e)}function AV(n,e,t){n.setValue(e,t)}function MV(n,e){return n.createComment(gV(e))}function _S(n,e,t){return n.createElement(e,t)}function uh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function ES(n,e,t){n.appendChild(e,t)}function TD(n,e,t,r,i){r!==null?uh(n,e,t,r,i):ES(n,e,t)}function PV(n,e,t){n.removeChild(null,e,t)}function RV(n,e,t){n.setAttribute(e,"style",t)}function xV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function wS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&_L(n,e,r),i!==null&&xV(n,e,i),o!==null&&RV(n,e,o)}function jv(n,e,t,r,i,o,s,a,u,l,h){let p=nn+r,y=p+i,m=NV(p,y),A=typeof l=="function"?l():l;return m[ge]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function NV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wr);return t}function OV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bv(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[ei]=i,p[oe]=r|4|128|8|64|1024,(l!==null||n&&n[oe]&2048)&&(p[oe]|=2048),IT(p),p[kt]=p[ea]=n,p[tn]=t,p[Yr]=s||n&&n[Yr],p[ot]=a||n&&n[ot],p[Gs]=u||n&&n[Gs]||null,p[Qn]=o,p[_h]=GL(),p[Zd]=h,p[pT]=l,p[dr]=e.type==2?n[dr]:p,p}function kV(n,e,t){let r=vr(e,n),i=OV(t),o=n[Yr].rendererFactory,s=$v(n,Bv(n,i,null,IS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function IS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function CS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function $v(n,e){return n[zc]?n[lD][Kn]=e:n[zc]=e,n[lD]=e,e}function R(n=1){bS(vt(),Ee(),Fo()+n,!1)}function bS(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Bd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&$d(e,o,0,t)}Ao(t)}var Sh=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Sh||{});function Vy(n,e,t,r){let i=ve(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Sh.SignalBased)!==0&&(u=e[o][Dn]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):mT(e,u,o,r)}finally{ve(i)}}function DS(n,e,t,r,i){let o=Fo(),s=r&2;try{Ao(-1),s&&e.length>nn&&bS(n,e,nn,!1),Ve(s?2:0,i),t(r,i)}finally{Ao(o),Ve(s?3:1,i)}}function Ah(n,e,t){BV(n,e,t),(t.flags&64)===64&&$V(n,e,t)}function Hv(n,e,t=vr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function FV(n,e,t,r){let o=r.get(JL,uS)||t===mr.ShadowDom,s=n.selectRootElement(e,o);return LV(s),s}function LV(n){VV(n)}var VV=()=>null;function UV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function TS(n,e,t,r,i,o,s,a){if(!a&&qv(e,n,t,r,i)){ta(e)&&jV(t,e.index);return}if(e.type&3){let u=vr(e,t);r=UV(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function jV(n,e){let t=pr(e,n);t[oe]&16||(t[oe]|=64)}function BV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ta(t)&&kV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||oh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=qc(e,n,s,t);if(oa(u,e),o!==null&&GV(e,s-r,u,a,t,o),hr(a)){let l=pr(t.index,e);l[tn]=qc(e,n,s,t)}}}function $V(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=lL();try{Ao(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Dy(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&HV(u,l)}}finally{Ao(-1),Dy(s)}}function HV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zv(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];wV(e,o.selectors,!1)&&(r??=[],hr(o)?r.unshift(o):r.push(o))}return r}function zV(n,e,t,r,i,o){let s=vr(n,e);qV(e[ot],s,o,n.value,t,r,i)}function qV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?zs(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function GV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Vy(r,t,u,l)}}function WV(n,e){let t=n[Gs],r=t?t.get(gr,null):null;r&&r.handleError(e)}function qv(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Vy(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Vy(h,l,r,i),a=!0}return a}function KV(n,e){let t=pr(e,n),r=t[ge];QV(r,t);let i=t[ei];i!==null&&t[Zd]===null&&(t[Zd]=hS(i,t[Gs])),Ve(18),Gv(r,t,t[tn]),Ve(19,t[tn])}function QV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Gv(n,e,t){bv(e);try{let r=n.viewQuery;r!==null&&Ly(1,r,t);let i=n.template;i!==null&&DS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Zr]?.finishViewCreation(n),n.staticContentQueries&&fS(n,e),n.staticViewQueries&&Ly(2,n.viewQuery,t);let o=n.components;o!==null&&YV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,Dv()}}function YV(n,e){for(let t=0;t<e.length;t++)KV(n,e[t])}function ZV(n,e,t,r){let i=ve(null);try{let o=e.tView,a=n[oe]&4096?4096:16,u=Bv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Do]=l;let h=n[Zr];return h!==null&&(u[Zr]=h.createEmbeddedView(o)),Gv(o,u,t),u}finally{ve(i)}}function SD(n,e){return!e||e.firstChild===null||nS(n)}var JV;function Wv(n,e){return JV(n,e)}var Jr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Jr||{});function SS(n){return(n.flags&32)===32}function Bs(n,e,t,r,i){if(r!=null){let o,s=!1;ti(r)?o=r:xi(r)&&(s=!0,r=r[ei]);let a=fr(r);n===0&&t!==null?i==null?ES(e,t,a):uh(e,t,a,i||null,!0):n===1&&t!==null?uh(e,t,a,i||null,!0):n===2?PV(e,a,s):n===3&&e.destroyNode(a),o!=null&&l2(e,n,o,t,i)}}function XV(n,e){AS(n,e),e[ei]=null,e[Qn]=null}function e2(n,e,t,r,i,o){r[ei]=i,r[Qn]=e,Ph(n,r,t,1,i,o)}function AS(n,e){e[Yr].changeDetectionScheduler?.notify(9),Ph(n,e,e[ot],2,null,null)}function t2(n){let e=n[zc];if(!e)return ay(n[ge],n);for(;e;){let t=null;if(xi(e))t=e[zc];else{let r=e[pn];r&&(t=r)}if(!t){for(;e&&!e[Kn]&&e!==n;)xi(e)&&ay(e[ge],e),e=e[kt];e===null&&(e=n),xi(e)&&ay(e[ge],e),t=e&&e[Kn]}e=t}}function Kv(n,e){let t=n[Ws],r=t.indexOf(e);t.splice(r,1)}function MS(n,e){if(Zc(e))return;let t=e[ot];t.destroyNode&&Ph(n,e,t,3,null,null),t2(e)}function ay(n,e){if(Zc(e))return;let t=ve(null);try{e[oe]&=-129,e[oe]|=256,e[Sn]&&Nm(e[Sn]),r2(n,e),n2(n,e),e[ge].type===1&&e[ot].destroy();let r=e[Do];if(r!==null&&ti(e[kt])){r!==e[kt]&&Kv(r,e);let i=e[Zr];i!==null&&i.detachView(n)}Oy(e)}finally{ve(t)}}function n2(n,e){let t=n.cleanup,r=e[Jd];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Jd]=null);let i=e[Ri];if(i!==null){e[Ri]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Xd];if(o!==null){e[Xd]=null;for(let s of o)s.destroy()}}function r2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Mo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Ve(4,a,u);try{u.call(a)}finally{Ve(5,a,u)}}else{Ve(4,i,o);try{o.call(i)}finally{Ve(5,i,o)}}}}}function i2(n,e,t){return o2(n,e.parent,t)}function o2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ei];if(ta(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===mr.None||i===mr.Emulated)return null}return vr(r,t)}function s2(n,e,t){return c2(n,e,t)}function a2(n,e,t){return n.type&40?vr(n,t):null}var c2=a2,AD;function Mh(n,e,t,r){let i=i2(n,r,e),o=e[ot],s=r.parent||e[Qn],a=s2(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)TD(o,i,t[u],a,!1);else TD(o,i,t,a,!1);AD!==void 0&&AD(o,r,e,t,i)}function jc(n,e){if(e!==null){let t=e.type;if(t&3)return vr(e,n);if(t&4)return Uy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return jc(n,r);{let i=n[e.index];return ti(i)?Uy(-1,i):fr(i)}}else{if(t&128)return jc(n,e.next);if(t&32)return Wv(e,n)()||fr(n[e.index]);{let r=PS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=So(n[dr]);return jc(i,r)}else return jc(n,e.next)}}}return null}function PS(n,e){if(e!==null){let r=n[dr][Qn],i=e.projection;return r.projection[i]}return null}function Uy(n,e){let t=pn+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return jc(r,i)}return e[To]}function Qv(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&oa(fr(a),r),t.flags|=2),!SS(t))if(u&8)Qv(n,e,t.child,r,i,o,!1),Bs(e,n,i,a,o);else if(u&32){let l=Wv(t,r),h;for(;h=l();)Bs(e,n,i,h,o);Bs(e,n,i,a,o)}else u&16?u2(n,e,r,t,i,o):Bs(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Ph(n,e,t,r,i,o){Qv(t,r,n.firstChild,e,i,o,!1)}function u2(n,e,t,r,i,o){let s=t[dr],u=s[Qn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Bs(e,n,i,h,o)}else{let l=u,h=s[kt];nS(r)&&(l.flags|=128),Qv(n,e,l,h,i,o,!0)}}function l2(n,e,t,r,i){let o=t[To],s=fr(t);o!==s&&Bs(e,n,r,o,i);for(let a=pn;a<t.length;a++){let u=t[a];Ph(u[ge],u,n,e,r,o)}}function d2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Jr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Jr.Important),n.setStyle(t,r,i,o))}}function lh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(fr(o)),ti(o)&&h2(o,r);let s=t.type;if(s&8)lh(n,e,t.child,r);else if(s&32){let a=Wv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=PS(e,t);if(Array.isArray(a))r.push(...a);else{let u=So(e[dr]);lh(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function h2(n,e){for(let t=pn;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&lh(r[ge],r,i,e)}n[To]!==n[ei]&&e.push(n[To])}function RS(n){if(n[$s]!==null){for(let e of n[$s])e.impl.addSequence(e);n[$s].length=0}}var xS=[];function f2(n){return n[Sn]??p2(n)}function p2(n){let e=xS.pop()??Object.create(m2);return e.lView=n,e}function g2(n){n.lView[Sn]!==n&&(n.lView=null,xS.push(n))}var m2=he(j({},Rc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Jc(n.lView)},consumerOnSignalRead(){this.lView[Sn]=this}});function y2(n){let e=n[Sn]??Object.create(v2);return e.lView=n,e}var v2=he(j({},Rc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=So(n.lView);for(;e&&!NS(e[ge]);)e=So(e);e&&CT(e)},consumerOnSignalRead(){this.lView[Sn]=this}});function NS(n){return n.type!==2}function OS(n){if(n[Xd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Xd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[oe]&8192)}}var _2=100;function kS(n,e=!0,t=0){let i=n[Yr].rendererFactory,o=!1;o||i.begin?.();try{E2(n,t)}catch(s){throw e&&WV(n,s),s}finally{o||i.end?.()}}function E2(n,e){let t=ST();try{hD(!0),jy(n,e);let r=0;for(;wh(n);){if(r===_2)throw new q(103,!1);r++,jy(n,1)}}finally{hD(t)}}function w2(n,e,t,r){if(Zc(e))return;let i=e[oe],o=!1,s=!1;bv(e);let a=!0,u=null,l=null;o||(NS(n)?(l=f2(e),u=od(l)):Sm()===null?(a=!1,l=y2(e),u=od(l)):e[Sn]&&(Nm(e[Sn]),e[Sn]=null));try{IT(e),aL(n.bindingStartIndex),t!==null&&DS(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let m=n.preOrderCheckHooks;m!==null&&Bd(e,m,null)}else{let m=n.preOrderHooks;m!==null&&$d(e,m,0,null),oy(e,0)}if(s||I2(e),OS(e),FS(e,0),n.contentQueries!==null&&fS(n,e),!o)if(h){let m=n.contentCheckHooks;m!==null&&Bd(e,m)}else{let m=n.contentHooks;m!==null&&$d(e,m,1),oy(e,1)}b2(n,e);let p=n.components;p!==null&&VS(e,p,0);let y=n.viewQuery;if(y!==null&&Ly(2,y,r),!o)if(h){let m=n.viewCheckHooks;m!==null&&Bd(e,m)}else{let m=n.viewHooks;m!==null&&$d(e,m,2),oy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[iy]){for(let m of e[iy])m();e[iy]=null}o||(RS(e),e[oe]&=-73)}catch(h){throw o||Jc(e),h}finally{l!==null&&(Rm(l,u),a&&g2(l)),Dv()}}function FS(n,e){for(let t=oS(n);t!==null;t=sS(t))for(let r=pn;r<t.length;r++){let i=t[r];LS(i,e)}}function I2(n){for(let e=oS(n);e!==null;e=sS(e)){if(!(e[oe]&2))continue;let t=e[Ws];for(let r=0;r<t.length;r++){let i=t[r];CT(i)}}}function C2(n,e,t){Ve(18);let r=pr(e,n);LS(r,t),Ve(19,r[tn])}function LS(n,e){vv(n)&&jy(n,e)}function jy(n,e){let r=n[ge],i=n[oe],o=n[Sn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&xm(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)w2(r,n,r.template,n[tn]);else if(i&8192){OS(n),FS(n,1);let a=r.components;a!==null&&VS(n,a,1),RS(n)}}function VS(n,e,t){for(let r=0;r<e.length;r++)C2(n,e[r],t)}function b2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ao(~i);else{let o=i,s=t[++r],a=t[++r];uL(s,o);let u=e[o];Ve(24,u),a(2,u),Ve(25,u)}}}finally{Ao(-1)}}function Yv(n,e){let t=ST()?64:1088;for(n[Yr].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=So(n);if(th(n)&&!r)return n;n=r}return null}function US(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function D2(n,e,t,r=!0){let i=e[ge];if(T2(i,e,n,t),r){let s=Uy(t,n),a=e[ot],u=a.parentNode(n[To]);u!==null&&e2(i,n[Qn],a,e,u,s)}let o=e[Zd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function By(n,e){if(n.length<=pn)return;let t=pn+e,r=n[t];if(r){let i=r[Do];i!==null&&i!==n&&Kv(i,r),e>0&&(n[t-1][Kn]=r[Kn]);let o=Qd(n,pn+e);XV(r[ge],r);let s=o[Zr];s!==null&&s.detachView(o[ge]),r[kt]=null,r[Kn]=null,r[oe]&=-129}return r}function T2(n,e,t,r){let i=pn+r,o=t.length;r>0&&(t[i-1][Kn]=e),r<o-pn?(e[Kn]=t[i],oT(t,pn+r,e)):(t.push(e),e[Kn]=null),e[kt]=t;let s=e[Do];s!==null&&t!==s&&jS(s,e);let a=e[Zr];a!==null&&a.insertView(n),Cy(e),e[oe]|=128}function jS(n,e){let t=n[Ws],r=e[kt];if(xi(r))n[oe]|=2;else{let i=r[kt][dr];e[dr]!==i&&(n[oe]|=2)}t===null?n[Ws]=[e]:t.push(e)}var Gc=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ge];return lh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[tn]}set context(e){this._lView[tn]=e}get destroyed(){return Zc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[kt];if(ti(e)){let t=e[eh],r=t?t.indexOf(this):-1;r>-1&&(By(e,r),Qd(t,r))}this._attachedToViewContainer=!1}MS(this._lView[ge],this._lView)}onDestroy(e){bT(this._lView,e)}markForCheck(){Yv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){Cy(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,kS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=th(this._lView),t=this._lView[Do];t!==null&&!e&&Kv(t,this._lView),AS(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=th(this._lView),r=this._lView[Do];r!==null&&!t&&jS(r,this._lView),Cy(this._lView)}};var Ro=(()=>{class n{static __NG_ELEMENT_ID__=M2}return n})(),S2=Ro,A2=class extends S2{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=ZV(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Gc(i)}};function M2(){return Rh(Gt(),Ee())}function Rh(n,e){return n.type&4?new A2(e,n,ra(n,e)):null}function xh(n,e,t,r,i){let o=n.data[e];if(o===null)o=P2(n,e,t,r,i),cL()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=iL();o.injectorIndex=s===null?-1:s.injectorIndex}return ko(o,!0),o}function P2(n,e,t,r,i){let o=DT(),s=Iv(),a=s?o:o&&o.parent,u=n.data[e]=x2(n,a,t,e,r,i);return R2(n,u,o,s),u}function R2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function x2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return tL()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var EJ=new RegExp(`^(\\d+)*(${ZL}|${YL})*(.*)`);var N2=()=>null;function MD(n,e){return N2(n,e)}var O2=class{},BS=class{},$y=class{resolveComponentFactory(e){throw Error(`No component factory found for ${en(e)}.`)}},Nh=class{static NULL=new $y},Ys=class{},Yn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>k2()}return n})();function k2(){let n=Ee(),e=Gt(),t=pr(e.index,n);return(xi(t)?t:n)[ot]}var F2=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var cy={},Hy=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=yh(r);let i=this.injector.get(e,cy,r);return i!==cy||t===cy?i:this.parentInjector.get(e,t,r)}};function zy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=rD(i,a);else if(o==2){let u=a,l=e[++s];r=rD(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function U(n,e=pe.Default){let t=Ee();if(t===null)return K(n,e);let r=Gt();return zT(r,t,qt(n),e)}function $S(){let n="invalid";throw new Error(n)}function Zv(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,h=V2(s);h===null?a=s:[a,u,l]=h,B2(n,e,t,a,o,u,l)}o!==null&&r!==null&&L2(t,r,o)}function L2(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new q(-301,!1);r.push(e[i],o)}}function V2(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&hr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,U2(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function U2(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function j2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function B2(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let y=0;y<a;y++){let m=r[y];!u&&hr(m)&&(u=!0,j2(n,t,y)),Sy(oh(t,e),n,m.type)}W2(t,n.data.length,a);for(let y=0;y<a;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let l=!1,h=!1,p=CS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let m=r[y];if(t.mergedAttrs=Qs(t.mergedAttrs,m.hostAttrs),H2(n,t,e,p,m),G2(p,m,i),s!==null&&s.has(m)){let[N,O]=s.get(m);t.directiveToIndex.set(m.type,[p,N+t.directiveStart,O+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let A=m.type.prototype;!l&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}$2(n,t,o)}function $2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))PD(0,e,i,r),PD(1,e,i,r),xD(e,r,!1);else{let o=t.get(i);RD(0,e,o,r),RD(1,e,o,r),xD(e,r,!0)}}}function PD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),HS(e,o)}}function RD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),HS(e,s)}}function HS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function xD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Uv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function H2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Io(i.type,!0)),s=new Mo(o,hr(i),U);n.blueprint[r]=s,t[r]=s,z2(n,e,r,CS(n,t,i.hostVars,wr),i)}function z2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;q2(s)!=a&&s.push(a),s.push(t,r,o)}}function q2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function G2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;hr(e)&&(t[""]=n)}}function W2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zS(n,e,t,r,i,o,s,a){let u=e.consts,l=Ks(u,s),h=xh(e,n,2,r,l);return o&&Zv(e,t,h,Ks(u,a),i),h.mergedAttrs=Qs(h.mergedAttrs,h.attrs),h.attrs!==null&&zy(h,h.attrs,!1),h.mergedAttrs!==null&&zy(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function qS(n,e){Sv(n,e),mv(e)&&n.queries.elementEnd(e)}var dh=class extends Nh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=bo(e);return new Zs(t,this.ngModule)}};function K2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Sh.SignalBased)!==0};return i&&(o.transform=i),o})}function Q2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Y2(n,e,t){let r=e instanceof gt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Hy(t,r):t}function Z2(n){let e=n.get(Ys,null);if(e===null)throw new q(407,!1);let t=n.get(F2,null),r=n.get(Po,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function J2(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return _S(e,t,t==="svg"?qF:t==="math"?GF:null)}var Zs=class extends BS{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=K2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Q2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=DV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Ve(22);let o=ve(null);try{let s=this.componentDef,a=r?["ng-version","19.2.6"]:TV(this.componentDef.selectors[0]),u=jv(0,null,null,1,0,null,null,null,null,[a],null),l=Y2(s,i||this.ngModule,e),h=Z2(l),p=h.rendererFactory.createRenderer(null,s),y=r?FV(p,r,s.encapsulation,l):J2(s,p),m=Bv(null,u,null,512|IS(s),null,null,h,p,l,null,hS(y,l,!0));m[nn]=y,bv(m);let A=null;try{let N=zS(nn,u,m,"#host",()=>[this.componentDef],!0,0);y&&(wS(p,y,N),oa(y,m)),Ah(u,m,N),Lv(u,N,m),qS(u,N),t!==void 0&&X2(N,this.ngContentSelectors,t),A=pr(N.index,m),m[tn]=A[tn],Gv(u,m,null)}catch(N){throw A!==null&&Oy(A),Oy(m),N}finally{Ve(23),Dv()}return new qy(this.componentType,m)}finally{ve(o)}}},qy=class extends O2{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=wT(t[ge],nn),this.location=ra(this._tNode,t),this.instance=pr(this._tNode.index,t)[tn],this.hostView=this.changeDetectorRef=new Gc(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=qv(r,i[ge],i,e,t);this.previousInputValues.set(e,t);let s=pr(r.index,i);Yv(s,1)}get injector(){return new wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function X2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ni=(()=>{class n{static __NG_ELEMENT_ID__=eU}return n})();function eU(){let n=Gt();return WS(n,Ee())}var tU=Ni,GS=class extends tU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ra(this._hostTNode,this._hostLView)}get injector(){return new wo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Av(this._hostTNode,this._hostLView);if(VT(e)){let t=rh(e,this._hostLView),r=nh(e),i=t[ge].data[r+8];return new wo(i,t)}else return new wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=ND(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-pn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=MD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,SD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!BF(e),a;if(s)a=t;else{let A=t||{};a=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}let u=s?e:new Zs(bo(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(gt,null);N&&(o=N)}let h=bo(u.componentType??{}),p=MD(this._lContainer,h?.id??null),y=p?.firstChild??null,m=u.create(l,i,y,o);return this.insertImpl(m.hostView,a,SD(this._hostTNode,p)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(KF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[kt],l=new GS(u,u[Qn],u[kt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return D2(s,i,o,r),e.attachToViewContainerRef(),oT(uy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=ND(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=By(this._lContainer,t);r&&(Qd(uy(this._lContainer),t),MS(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=By(this._lContainer,t);return r&&Qd(uy(this._lContainer),t)!=null?new Gc(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function ND(n){return n[eh]}function uy(n){return n[eh]||(n[eh]=[])}function WS(n,e){let t,r=e[n.index];return ti(r)?t=r:(t=US(r,e,null,n),e[n.index]=t,$v(e,t)),rU(t,e,n,r),new GS(t,n,e)}function nU(n,e){let t=n[ot],r=t.createComment(""),i=vr(e,n),o=t.parentNode(i);return uh(t,o,r,t.nextSibling(i),!1),r}var rU=sU,iU=()=>!1;function oU(n,e,t){return iU(n,e,t)}function sU(n,e,t,r){if(n[To])return;let i;t.type&8?i=fr(r):i=nU(e,t),n[To]=i}var Gy=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Wy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Jv(e,t).matches!==null&&this.queries[t].setDirty()}},Ky=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=pU(e):this.predicate=e}},Qy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Yy=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,aU(t,o)),this.matchTNodeWithReadOption(e,t,Hd(t,e,o,!1,!1))}else r===Ro?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Hd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ft||i===Ni||i===Ro&&t.type&4)this.addMatch(t.index,-2);else{let o=Hd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function aU(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function cU(n,e){return n.type&11?ra(n,e):n.type&4?Rh(n,e):null}function uU(n,e,t,r){return t===-1?cU(e,n):t===-2?lU(n,e,r):qc(n,n[ge],t,e)}function lU(n,e,t){if(t===ft)return ra(e,n);if(t===Ro)return Rh(e,n);if(t===Ni)return WS(e,n)}function KS(n,e,t,r){let i=e[Zr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(uU(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Zy(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=KS(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=pn;p<h.length;p++){let y=h[p];y[Do]===y[kt]&&Zy(y[ge],y,l,r)}if(h[Ws]!==null){let p=h[Ws];for(let y=0;y<p.length;y++){let m=p[y];Zy(m[ge],m,l,r)}}}}}return r}function dU(n,e){return n[Zr].queries[e].queryList}function hU(n,e,t){let r=new Ny((t&4)===4);return ZF(n,e,r,r.destroy),(e[Zr]??=new Wy).queries.push(new Gy(r))-1}function fU(n,e,t){let r=vt();return r.firstCreatePass&&(gU(r,new Ky(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),hU(r,Ee(),e)}function pU(n){return n.split(",").map(e=>e.trim())}function gU(n,e,t){n.queries===null&&(n.queries=new Qy),n.queries.track(new Yy(e,t))}function Jv(n,e){return n.queries.getByIndex(e)}function mU(n,e){let t=n[ge],r=Jv(t,e);return r.crossesNgTemplate?Zy(t,n,e,[]):KS(t,n,r,e)}var Js=class{},Xv=class{};var Jy=class extends Js{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new dh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=cT(e);this._bootstrapComponents=yS(o.bootstrap),this._r3Injector=WT(e,t,[{provide:Js,useValue:this},{provide:Nh,useValue:this.componentFactoryResolver},...r],en(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Xy=class extends Xv{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Jy(this.moduleType,e,[])}};var hh=class extends Js{injector;componentFactoryResolver=new dh(this);instance=null;constructor(e){super();let t=new Hc([...e.providers,{provide:Js,useValue:this},{provide:Nh,useValue:this.componentFactoryResolver}],e.parent||pv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tu(n,e,t=null){return new hh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var yU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=uT(!1,t.type),i=r.length>0?tu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(K(gt))})}return n})();function we(n){return Qc(()=>{let e=QS(n),t=he(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===rS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(yU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||mr.Emulated,styles:n.styles||Tn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&eu("NgStandalone"),YS(t);let r=n.dependencies;return t.directiveDefs=OD(r,!1),t.pipeDefs=OD(r,!0),t.id=IU(t),t})}function vU(n){return bo(n)||MF(n)}function _U(n){return n!==null}function Pn(n){return Qc(()=>({type:n.type,bootstrap:n.bootstrap||Tn,declarations:n.declarations||Tn,imports:n.imports||Tn,exports:n.exports||Tn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function EU(n,e){if(n==null)return Co;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Sh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function wU(n){if(n==null)return Co;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function He(n){return Qc(()=>{let e=QS(n);return YS(e),e})}function Oh(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function QS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Co,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Tn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:EU(n.inputs,e),outputs:wU(n.outputs),debugInfo:null}}function YS(n){n.features?.forEach(e=>e(n))}function OD(n,e){if(!n)return null;let t=e?PF:vU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(_U)}function IU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function CU(n){return Object.getPrototypeOf(n.prototype).constructor}function sn(n){let e=CU(n.type),t=!0,r=[n];for(;e;){let i;if(hr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ly(n.inputs),s.declaredInputs=ly(n.declaredInputs),s.outputs=ly(n.outputs);let a=i.hostBindings;a&&AU(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&TU(n,u),l&&SU(n,l),bU(n,i),sF(n.outputs,i.outputs),hr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===sn&&(t=!1)}}e=Object.getPrototypeOf(e)}DU(r)}function bU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function DU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Qs(i.hostAttrs,t=Qs(t,i.hostAttrs))}}function ly(n){return n===Co?{}:n===Tn?[]:n}function TU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function SU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function AU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function ZS(n){return PU(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function MU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function PU(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function kh(n,e,t){return n[e]=t}function JS(n,e){return n[e]}function Xr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Wc(n,e,t,r){let i=Xr(n,e,t);return Xr(n,e+1,r)||i}function RU(n,e,t,r,i){let o=Wc(n,e,t,r);return Xr(n,e+2,i)||o}function xU(n,e,t,r,i,o){let s=Wc(n,e,t,r);return Wc(n,e+2,i,o)||s}function NU(n,e,t,r,i,o,s,a,u){let l=e.consts,h=xh(e,n,4,s||null,a||null);wv()&&Zv(e,t,h,Ks(l,u),zv),h.mergedAttrs=Qs(h.mergedAttrs,h.attrs),Sv(e,h);let p=h.tView=jv(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function OU(n,e,t,r,i,o,s,a,u,l){let h=t+nn,p=e.firstCreatePass?NU(h,e,n,r,i,o,s,a,u):e.data[h];ko(p,!1);let y=kU(e,n,p,t);Ch()&&Mh(e,n,y,p),oa(y,n);let m=US(y,n,y,p);return n[h]=m,$v(n,m),oU(m,p,n),Eh(p)&&Ah(e,n,p),u!=null&&Hv(n,p,l),p}function J(n,e,t,r,i,o,s,a){let u=Ee(),l=vt(),h=Ks(l.consts,o);return OU(u,l,n,e,t,r,i,h,s,a),J}var kU=FU;function FU(n,e,t,r){return bh(!0),e[ot].createComment("")}var XS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var eA=new $("");var LU=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new ev})}return n})(),ev=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Oi(n){return!!n&&typeof n.then=="function"}function e_(n){return!!n&&typeof n.subscribe=="function"}var tA=new $("");function t_(n){return gn([{provide:tA,multi:!0,useValue:n}])}var nA=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(tA,{optional:!0})??[];injector=k(Qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=yt(this.injector,i);if(Oi(o))t.push(o);else if(e_(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fh=new $("");function VU(){km(()=>{throw new q(600,!1)})}function UU(n){return n.isBoundToModule}var jU=10;var xo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(VL);afterRenderManager=k(dS);zonelessEnabled=k(QT);rootEffectScheduler=k(LU);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ke;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(_r).hasPendingTasks.pipe(ee(t=>!t));constructor(){k(sa,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(gt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Qe.NULL){Ve(10);let o=t instanceof BS;if(!this._injector.get(nA).done){let m="";throw new q(405,m)}let a;o?a=t:a=this._injector.get(Nh).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=UU(a)?void 0:this._injector.get(Js),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,y=h.injector.get(eA,null);return y?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),zd(this.components,h),y?.unregisterApplication(p)}),this._loadComponent(h),Ve(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ve(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(kv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new q(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ve(t),this.afterTick.next(),Ve(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ys,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<jU;)Ve(14),this.synchronizeOnce(),Ve(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)BU(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;zd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Fh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function BU(n,e,t,r){if(!t&&!wh(n))return;kS(n,e,t&&!r?0:1)}function nu(n,e,t,r){let i=Ee(),o=Ih();if(Xr(i,o,e)){let s=vt(),a=Tv();zV(a,i,n,e,t,r)}return nu}function $U(n,e,t,r){return Xr(n,Ih(),t)?e+zs(t)+r:wr}function HU(n,e,t,r,i,o){let s=sL(),a=Wc(n,s,t,i);return AT(2),a?e+zs(t)+r+zs(i)+o:wr}function Ud(n,e){return n<<17|e<<2}function No(n){return n>>17&32767}function zU(n){return(n&2)==2}function qU(n,e){return n&131071|e<<17}function tv(n){return n|2}function Xs(n){return(n&131068)>>2}function dy(n,e){return n&-131069|e<<2}function GU(n){return(n&1)===1}function nv(n){return n|1}function WU(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=No(s),u=Xs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Yc(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=No(n[a+1]);n[r+1]=Ud(y,a),y!==0&&(n[y+1]=dy(n[y+1],r)),n[a+1]=qU(n[a+1],r)}else n[r+1]=Ud(a,0),a!==0&&(n[a+1]=dy(n[a+1],r)),a=r;else n[r+1]=Ud(u,0),a===0?a=r:n[u+1]=dy(n[u+1],r),u=r;l&&(n[r+1]=tv(n[r+1])),kD(n,h,r,!0),kD(n,h,r,!1),KU(e,h,n,r,o),s=Ud(a,u),o?e.classBindings=s:e.styleBindings=s}function KU(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Yc(o,e)>=0&&(t[r+1]=nv(t[r+1]))}function kD(n,e,t,r){let i=n[t+1],o=e===null,s=r?No(i):Xs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];QU(u,e)&&(a=!0,n[s+1]=r?nv(l):tv(l)),s=r?No(l):Xs(l)}a&&(n[t+1]=r?tv(i):nv(i))}function QU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Yc(n,e)>=0:!1}function F(n,e,t){let r=Ee(),i=Ih();if(Xr(r,i,e)){let o=vt(),s=Tv();TS(o,s,r,n,e,r[ot],t,!1)}return F}function FD(n,e,t,r,i){qv(e,n,t,i?"class":"style",r)}function aa(n,e){return YU(n,e,null,!0),aa}function YU(n,e,t,r){let i=Ee(),o=vt(),s=AT(2);if(o.firstUpdatePass&&JU(o,n,s,r),e!==wr&&Xr(i,s,e)){let a=o.data[Fo()];rj(o,a,i,i[ot],n,i[s+1]=ij(e,t),r,s)}}function ZU(n,e){return e>=n.expandoStartIndex}function JU(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Fo()],s=ZU(n,t);oj(o,r)&&e===null&&!s&&(e=!1),e=XU(i,o,e,r),WU(i,o,e,t,s,r)}}function XU(n,e,t,r){let i=dL(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=hy(null,n,e,t,r),t=Kc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=hy(i,n,e,t,r),o===null){let u=ej(n,e,r);u!==void 0&&Array.isArray(u)&&(u=hy(null,n,e,u[1],r),u=Kc(u,e.attrs,r),tj(n,e,r,u))}else o=nj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function ej(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Xs(r)!==0)return n[No(r)]}function tj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[No(i)]=r}function nj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Kc(r,s,t)}return Kc(r,e.attrs,t)}function hy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Kc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Kc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),SF(n,s,t?!0:e[++o]))}return n===void 0?null:n}function rj(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=GU(l)?LD(u,e,t,i,Xs(l),s):void 0;if(!fh(h)){fh(o)||zU(l)&&(o=LD(u,null,t,i,a,s));let p=ET(Fo(),t);d2(r,s,p,i,o)}}function LD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===wr&&(y=p?Tn:void 0);let m=p?ny(y,r):h===r?y:void 0;if(l&&!fh(m)&&(m=ny(u,r)),fh(m)&&(a=m,s))return a;let A=n[i+1];i=s?No(A):Xs(A)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ny(u,r))}return a}function fh(n){return n!==void 0}function ij(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=en(Th(n)))),n}function oj(n,e){return(n.flags&(e?8:16))!==0}function E(n,e,t,r){let i=Ee(),o=vt(),s=nn+n,a=i[ot],u=o.firstCreatePass?zS(s,o,i,e,zv,wv(),t,r):o.data[s],l=sj(o,i,u,a,e,n);i[s]=l;let h=Eh(u);return ko(u,!0),wS(a,l,u),!SS(u)&&Ch()&&Mh(o,i,l,u),(JF()===0||h)&&oa(l,i),XF(),h&&(Ah(o,i,u),Lv(o,u,i)),r!==null&&Hv(i,u),E}function v(){let n=Gt();Iv()?TT():(n=n.parent,ko(n,!1));let e=n;nL(e)&&rL(),eL();let t=vt();return t.firstCreatePass&&qS(t,e),e.classesWithoutHost!=null&&yL(e)&&FD(t,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&vL(e)&&FD(t,e,Ee(),e.stylesWithoutHost,!1),v}function xe(n,e,t,r){return E(n,e,t,r),v(),xe}var sj=(n,e,t,r,i,o)=>(bh(!0),_S(r,i,pL()));function aj(n,e,t,r,i){let o=e.consts,s=Ks(o,r),a=xh(e,n,8,"ng-container",s);s!==null&&zy(a,s,!0);let u=Ks(o,i);return wv()&&Zv(e,t,a,u,zv),a.mergedAttrs=Qs(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function n_(n,e,t){let r=Ee(),i=vt(),o=n+nn,s=i.firstCreatePass?aj(o,i,r,e,t):i.data[o];ko(s,!0);let a=cj(i,r,s,n);return r[o]=a,Ch()&&Mh(i,r,a,s),oa(a,r),Eh(s)&&(Ah(i,r,s),Lv(i,s,r)),t!=null&&Hv(r,s),n_}function r_(){let n=Gt(),e=vt();return Iv()?TT():(n=n.parent,ko(n,!1)),e.firstCreatePass&&(Sv(e,n),mv(n)&&e.queries.elementEnd(n)),r_}var cj=(n,e,t,r)=>(bh(!0),MV(e[ot],""));function mn(){return Ee()}var vo=void 0;function uj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var lj=["en",[["a","p"],["AM","PM"],vo],[["AM","PM"],vo,vo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vo,"{1} 'at' {0}",vo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",uj],fy={};function Rn(n){let e=dj(n),t=VD(e);if(t)return t;let r=e.split("-")[0];if(t=VD(r),t)return t;if(r==="en")return lj;throw new q(701,!1)}function VD(n){return n in fy||(fy[n]=_o.ng&&_o.ng.common&&_o.ng.common.locales&&_o.ng.common.locales[n]),fy[n]}var nt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(nt||{});function dj(n){return n.toLowerCase().replace(/_/g,"-")}var ph="en-US";var hj=ph;function fj(n){typeof n=="string"&&(hj=n.toLowerCase().replace(/_/g,"-"))}function UD(n,e,t){return function r(i){if(i===Function)return t;let o=ta(n)?pr(n.index,e):e;Yv(o,5);let s=e[tn],a=jD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=jD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function jD(n,e,t,r){let i=ve(null);try{return Ve(6,e,t),t(r)!==!1}catch(o){return pj(n,o),!1}finally{Ve(7,e,t),ve(i)}}function pj(n,e){let t=n[Gs],r=t?t.get(gr,null):null;r&&r.handleError(e)}function BD(n,e,t,r,i,o){let s=e[t],a=e[ge],l=a.data[t].outputs[r],h=s[l],p=a.firstCreatePass?Ev(a):null,y=_v(e),m=h.subscribe(o),A=y.length;y.push(o,m),p&&p.push(i,n.index,A,-(A+1))}var gj=(n,e,t)=>{};function ue(n,e,t,r){let i=Ee(),o=vt(),s=Gt();return rA(o,i,i[ot],s,n,e,r),ue}function mj(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Jd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function rA(n,e,t,r,i,o,s){let a=Eh(r),l=n.firstCreatePass?Ev(n):null,h=_v(e),p=!0;if(r.type&3||s){let y=vr(r,e),m=s?s(y):y,A=h.length,N=s?z=>s(fr(z[r.index])):r.index,O=null;if(!s&&a&&(O=mj(n,e,i,r.index)),O!==null){let z=O.__ngLastListenerFn__||O;z.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,p=!1}else{o=UD(r,e,o),gj(m,i,o);let z=t.listen(m,i,o);h.push(o,z),l&&l.push(i,N,A,A+1)}}else o=UD(r,e,o);if(p){let y=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let A=0;A<m.length;A+=2){let N=m[A],O=m[A+1];BD(r,e,N,O,i,o)}if(y&&y.length)for(let A of y)BD(r,e,A,i,i,o)}}function Q(n=1){return fL(n)}function Lh(n,e,t){fU(n,e,t)}function ru(n){let e=Ee(),t=vt(),r=MT();Cv(r+1);let i=Jv(t,r);if(n.dirty&&WF(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=mU(e,r);n.reset(o,BL),n.notifyOnChanges()}return!0}return!1}function iu(){return dU(Ee(),MT())}function yj(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ou(n){let e=oL();return yv(e,nn+n)}function w(n,e=""){let t=Ee(),r=vt(),i=n+nn,o=r.firstCreatePass?xh(r,i,1,e,null):r.data[i],s=vj(r,t,o,e,n);t[i]=s,Ch()&&Mh(r,t,s,o),ko(o,!1)}var vj=(n,e,t,r,i)=>(bh(!0),SV(e[ot],r));function Xe(n){return re("",n,""),Xe}function re(n,e,t){let r=Ee(),i=$U(r,n,e,t);return i!==wr&&iA(r,Fo(),i),re}function i_(n,e,t,r,i){let o=Ee(),s=HU(o,n,e,t,r,i);return s!==wr&&iA(o,Fo(),s),i_}function iA(n,e,t){let r=ET(e,n);AV(n[ot],r,t)}function ca(n,e,t){tS(e)&&(e=e());let r=Ee(),i=Ih();if(Xr(r,i,e)){let o=vt(),s=Tv();TS(o,s,r,n,e,r[ot],t,!1)}return ca}function su(n,e){let t=tS(n);return t&&n.set(e),t}function ua(n,e){let t=Ee(),r=vt(),i=Gt();return rA(r,t,t[ot],i,n,e),ua}function _j(n,e,t){let r=vt();if(r.firstCreatePass){let i=hr(n);rv(t,r.data,r.blueprint,i,!0),rv(e,r.data,r.blueprint,i,!1)}}function rv(n,e,t,r,i){if(n=qt(n),Array.isArray(n))for(let o=0;o<n.length;o++)rv(n[o],e,t,r,i);else{let o=vt(),s=Ee(),a=Gt(),u=qs(n)?n:qt(n.provide),l=hT(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(qs(n)||!n.multi){let m=new Mo(l,i,U),A=gy(u,e,i?h:h+y,p);A===-1?(Sy(oh(a,s),o,u),py(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[A]=m,s[A]=m)}else{let m=gy(u,e,h+y,p),A=gy(u,e,h,h+y),N=m>=0&&t[m],O=A>=0&&t[A];if(i&&!O||!i&&!N){Sy(oh(a,s),o,u);let z=Ij(i?wj:Ej,t.length,i,r,l);!i&&O&&(t[A].providerFactory=z),py(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),s.push(z)}else{let z=oA(t[i?A:m],l,!i&&r);py(o,n,m>-1?m:A,z)}!i&&r&&O&&t[A].componentProviders++}}}function py(n,e,t,r){let i=qs(e),o=kF(e);if(i||o){let u=(o?qt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function oA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function gy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Ej(n,e,t,r){return iv(this.multi,[])}function wj(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=qc(t,t[ge],this.providerFactory.index,r);o=a.slice(0,s),iv(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],iv(i,o);return o}function iv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Ij(n,e,t,r,i){let o=new Mo(n,t,U);return o.multi=[],o.index=e,o.componentProviders=0,oA(o,i,r&&!t),o}function Ir(n,e=[]){return t=>{t.providersResolver=(r,i)=>_j(r,i?i(n):n,e)}}function an(n,e,t){let r=Xc()+n,i=Ee();return i[r]===wr?kh(i,r,t?e.call(t):e()):JS(i,r)}function o_(n,e,t,r){return cA(Ee(),Xc(),n,e,t,r)}function sA(n,e,t,r,i,o,s,a,u,l){let h=Xc()+n,p=Ee(),y=xU(p,h,t,r,i,o);return RU(p,h+4,s,a,u)||y?kh(p,h+7,l?e.call(l,t,r,i,o,s,a,u):e(t,r,i,o,s,a,u)):JS(p,h+7)}function aA(n,e){let t=n[e];return t===wr?void 0:t}function cA(n,e,t,r,i,o){let s=e+t;return Xr(n,s,i)?kh(n,s+1,o?r.call(o,i):r(i)):aA(n,s+1)}function Cj(n,e,t,r,i,o,s){let a=e+t;return Wc(n,a,i,o)?kh(n,a+2,s?r.call(s,i,o):r(i,o)):aA(n,a+2)}function la(n,e){let t=vt(),r,i=n+nn;t.firstCreatePass?(r=bj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Io(r.type,!0)),s,a=Xt(U);try{let u=ih(!1),l=o();return ih(u),yj(t,Ee(),i,l),l}finally{Xt(a)}}function bj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Vh(n,e,t){let r=n+nn,i=Ee(),o=yv(i,r);return lA(i,r)?cA(i,Xc(),e,o.transform,t,o):o.transform(t)}function uA(n,e,t,r){let i=n+nn,o=Ee(),s=yv(o,i);return lA(o,i)?Cj(o,Xc(),e,s.transform,t,r,s):s.transform(t,r)}function lA(n,e){return n[ge].data[e].pure}function au(n,e){return Rh(n,e)}var Oo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},dA=new Oo("19.2.6"),ov=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Uh=(()=>{class n{compileModuleSync(t){return new Xy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=cT(t),o=yS(i.declarations).reduce((s,a)=>{let u=bo(a);return u&&s.push(new Zs(u)),s},[]);return new ov(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Dj=(()=>{class n{zone=k(De);changeDetectionScheduler=k(Po);applicationRef=k(xo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tj({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(he(j({},Sj()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:$c,multi:!0,useFactory:()=>{let r=k(Dj,{optional:!0});return()=>r.initialize()}},{provide:$c,multi:!0,useFactory:()=>{let r=k(Aj);return()=>{r.initialize()}}},e===!0?{provide:YT,useValue:!0}:[],{provide:ZT,useValue:t??KT}]}function Sj(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Aj=(()=>{class n{subscription=new Je;initialized=!1;zone=k(De);pendingTasks=k(_r);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Mj=(()=>{class n{appRef=k(xo);taskService=k(_r);ngZone=k(De);zonelessEnabled=k(QT);tracing=k(sa,{optional:!0});disableScheduling=k(YT,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ah):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(ZT,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof xy||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?vD:JT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ah+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Pj(){return typeof $localize<"u"&&$localize.locale||ph}var jh=new $("",{providedIn:"root",factory:()=>k(jh,pe.Optional|pe.SkipSelf)||Pj()});var sv=new $(""),Rj=new $("");function Vc(n){return!n.moduleRef}function xj(n){let e=Vc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{Vc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(gr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Vc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(sv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(sv);s.add(o),n.moduleRef.onDestroy(()=>{zd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Oj(r,t,()=>{let o=e.get(nA);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(jh,ph);if(fj(s||ph),!e.get(Rj,!0))return Vc(n)?e.get(xo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Vc(n)){let u=e.get(xo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return Nj(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Nj(n,e){let t=n.injector.get(xo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new q(-403,!1);e.push(n)}function Oj(n,e,t){try{let r=t();return Oi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var qd=null;function kj(n=[],e){return Qe.create({name:e,providers:[{provide:vh,useValue:"platform"},{provide:sv,useValue:new Set([()=>qd=null])},...n]})}function Fj(n=[]){if(qd)return qd;let e=kj(n);return qd=e,VU(),Lj(e),e}function Lj(n){let e=n.get(Nv,null);yt(n,()=>{e?.forEach(t=>t())})}function s_(){return!1}var ki=(()=>{class n{static __NG_ELEMENT_ID__=Vj}return n})();function Vj(n){return Uj(Gt(),Ee(),(n&16)===16)}function Uj(n,e,t){if(ta(n)&&!t){let r=pr(n.index,e);return new Gc(r,r)}else if(n.type&175){let r=e[dr];return new Gc(r,e)}return null}var av=class{constructor(){}supports(e){return ZS(e)}create(e){return new cv(e)}},jj=(n,e)=>e,cv=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||jj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<$D(r,i,o)?t:r,a=$D(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let m=y<o.length?o[y]:o[y]=0,A=m+y;h<=A&&A<l&&(o[y]=m+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ZS(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,MU(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new uv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new gh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new gh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},uv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},lv=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},gh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new lv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function $D(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function HD(){return new a_([new av])}var a_=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:HD});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||HD()),deps:[[n,new CF,new mt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function hA(n){Ve(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Fj(r),o=[Tj({}),{provide:Po,useExisting:Mj},...t||[]],s=new hh({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return xj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ve(9)}}function Fi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function xn(n){return Vm(n)}function da(n,e){return Om(n,e?.equal)}var zD=class{[Dn];constructor(e){this[Dn]=e}destroy(){this[Dn].destroy()}};function fA(n){let e=bo(n);if(!e)return null;let t=new Zs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var st=new $("");var mA=null;function Nn(){return mA}function c_(n){mA??=n}var cu=class{},uu=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(yA),providedIn:"platform"})}return n})(),u_=new $(""),yA=(()=>{class n extends uu{_location;_history;_doc=k(st);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nn().getBaseHref(this._doc)}onPopState(t){let r=Nn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Nn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Bh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function pA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Zn(n){return n&&n[0]!=="?"?`?${n}`:n}var Jn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(Hh),providedIn:"root"})}return n})(),$h=new $(""),Hh=(()=>{class n extends Jn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(st).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Bh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Zn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(uu),K($h,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Li=(()=>{class n{_subject=new Ke;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Hj(pA(gA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Zn(r))}normalize(t){return n.stripTrailingSlash($j(this._basePath,gA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Zn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Zn;static joinWithSlash=Bh;static stripTrailingSlash=pA;static \u0275fac=function(r){return new(r||n)(K(Jn))};static \u0275prov=H({token:n,factory:()=>Bj(),providedIn:"root"})}return n})();function Bj(){return new Li(K(Jn))}function $j(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function gA(n){return n.replace(/\/index.html$/,"")}function Hj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var m_=(()=>{class n extends Jn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Bh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Zn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(uu),K($h,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var Ft=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ft||{}),Ue=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ue||{}),cn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(cn||{}),ii={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function IA(n){return Rn(n)[nt.LocaleId]}function CA(n,e,t){let r=Rn(n),i=[r[nt.DayPeriodsFormat],r[nt.DayPeriodsStandalone]],o=On(i,e);return On(o,t)}function bA(n,e,t){let r=Rn(n),i=[r[nt.DaysFormat],r[nt.DaysStandalone]],o=On(i,e);return On(o,t)}function DA(n,e,t){let r=Rn(n),i=[r[nt.MonthsFormat],r[nt.MonthsStandalone]],o=On(i,e);return On(o,t)}function TA(n,e){let r=Rn(n)[nt.Eras];return On(r,e)}function lu(n,e){let t=Rn(n);return On(t[nt.DateFormat],e)}function du(n,e){let t=Rn(n);return On(t[nt.TimeFormat],e)}function hu(n,e){let r=Rn(n)[nt.DateTimeFormat];return On(r,e)}function fu(n,e){let t=Rn(n),r=t[nt.NumberSymbols][e];if(typeof r>"u"){if(e===ii.CurrencyDecimal)return t[nt.NumberSymbols][ii.Decimal];if(e===ii.CurrencyGroup)return t[nt.NumberSymbols][ii.Group]}return r}function SA(n){if(!n[nt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[nt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function AA(n){let e=Rn(n);return SA(e),(e[nt.ExtraData][2]||[]).map(r=>typeof r=="string"?l_(r):[l_(r[0]),l_(r[1])])}function MA(n,e,t){let r=Rn(n);SA(r);let i=[r[nt.ExtraData][0],r[nt.ExtraData][1]],o=On(i,e)||[];return On(o,t)||[]}function On(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function l_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var zj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,zh={},qj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function PA(n,e,t,r){let i=eB(n);e=ri(t,e)||e;let s=[],a;for(;e;)if(a=qj.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=xA(r,u),i=Xj(i,r));let l="";return s.forEach(h=>{let p=Zj(h);l+=p?p(i,t,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Qh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ri(n,e){let t=IA(n);if(zh[t]??={},zh[t][e])return zh[t][e];let r="";switch(e){case"shortDate":r=lu(n,cn.Short);break;case"mediumDate":r=lu(n,cn.Medium);break;case"longDate":r=lu(n,cn.Long);break;case"fullDate":r=lu(n,cn.Full);break;case"shortTime":r=du(n,cn.Short);break;case"mediumTime":r=du(n,cn.Medium);break;case"longTime":r=du(n,cn.Long);break;case"fullTime":r=du(n,cn.Full);break;case"short":let i=ri(n,"shortTime"),o=ri(n,"shortDate");r=qh(hu(n,cn.Short),[i,o]);break;case"medium":let s=ri(n,"mediumTime"),a=ri(n,"mediumDate");r=qh(hu(n,cn.Medium),[s,a]);break;case"long":let u=ri(n,"longTime"),l=ri(n,"longDate");r=qh(hu(n,cn.Long),[u,l]);break;case"full":let h=ri(n,"fullTime"),p=ri(n,"fullDate");r=qh(hu(n,cn.Full),[h,p]);break}return r&&(zh[t][e]=r),r}function qh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Xn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Gj(n,e){return Xn(n,3).substring(0,e)}function at(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Wj(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Gj(a,e);let u=fu(s,ii.MinusSign);return Xn(a,e,u,r,i)}}function Wj(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function ze(n,e,t=Ft.Format,r=!1){return function(i,o){return Kj(i,o,n,e,t,r)}}function Kj(n,e,t,r,i,o){switch(t){case 2:return DA(e,i,r)[n.getMonth()];case 1:return bA(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=AA(e),h=MA(e,i,r),p=l.findIndex(y=>{if(Array.isArray(y)){let[m,A]=y,N=s>=m.hours&&a>=m.minutes,O=s<A.hours||s===A.hours&&a<A.minutes;if(m.hours<A.hours){if(N&&O)return!0}else if(N||O)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return CA(e,i,r)[s<12?0:1];case 3:return TA(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Gh(n){return function(e,t,r){let i=-1*r,o=fu(t,ii.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Xn(s,2,o)+Xn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Xn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Xn(s,2,o)+":"+Xn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Xn(s,2,o)+":"+Xn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var Qj=0,Kh=4;function Yj(n){let e=Qh(n,Qj,1).getDay();return Qh(n,0,1+(e<=Kh?Kh:Kh+7)-e)}function RA(n){let e=n.getDay(),t=e===0?-3:Kh-e;return Qh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function d_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=RA(t),s=Yj(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Xn(i,n,fu(r,ii.MinusSign))}}function Wh(n,e=!1){return function(t,r){let o=RA(t).getFullYear();return Xn(o,n,fu(r,ii.MinusSign),e)}}var h_={};function Zj(n){if(h_[n])return h_[n];let e;switch(n){case"G":case"GG":case"GGG":e=ze(3,Ue.Abbreviated);break;case"GGGG":e=ze(3,Ue.Wide);break;case"GGGGG":e=ze(3,Ue.Narrow);break;case"y":e=at(0,1,0,!1,!0);break;case"yy":e=at(0,2,0,!0,!0);break;case"yyy":e=at(0,3,0,!1,!0);break;case"yyyy":e=at(0,4,0,!1,!0);break;case"Y":e=Wh(1);break;case"YY":e=Wh(2,!0);break;case"YYY":e=Wh(3);break;case"YYYY":e=Wh(4);break;case"M":case"L":e=at(1,1,1);break;case"MM":case"LL":e=at(1,2,1);break;case"MMM":e=ze(2,Ue.Abbreviated);break;case"MMMM":e=ze(2,Ue.Wide);break;case"MMMMM":e=ze(2,Ue.Narrow);break;case"LLL":e=ze(2,Ue.Abbreviated,Ft.Standalone);break;case"LLLL":e=ze(2,Ue.Wide,Ft.Standalone);break;case"LLLLL":e=ze(2,Ue.Narrow,Ft.Standalone);break;case"w":e=d_(1);break;case"ww":e=d_(2);break;case"W":e=d_(1,!0);break;case"d":e=at(2,1);break;case"dd":e=at(2,2);break;case"c":case"cc":e=at(7,1);break;case"ccc":e=ze(1,Ue.Abbreviated,Ft.Standalone);break;case"cccc":e=ze(1,Ue.Wide,Ft.Standalone);break;case"ccccc":e=ze(1,Ue.Narrow,Ft.Standalone);break;case"cccccc":e=ze(1,Ue.Short,Ft.Standalone);break;case"E":case"EE":case"EEE":e=ze(1,Ue.Abbreviated);break;case"EEEE":e=ze(1,Ue.Wide);break;case"EEEEE":e=ze(1,Ue.Narrow);break;case"EEEEEE":e=ze(1,Ue.Short);break;case"a":case"aa":case"aaa":e=ze(0,Ue.Abbreviated);break;case"aaaa":e=ze(0,Ue.Wide);break;case"aaaaa":e=ze(0,Ue.Narrow);break;case"b":case"bb":case"bbb":e=ze(0,Ue.Abbreviated,Ft.Standalone,!0);break;case"bbbb":e=ze(0,Ue.Wide,Ft.Standalone,!0);break;case"bbbbb":e=ze(0,Ue.Narrow,Ft.Standalone,!0);break;case"B":case"BB":case"BBB":e=ze(0,Ue.Abbreviated,Ft.Format,!0);break;case"BBBB":e=ze(0,Ue.Wide,Ft.Format,!0);break;case"BBBBB":e=ze(0,Ue.Narrow,Ft.Format,!0);break;case"h":e=at(3,1,-12);break;case"hh":e=at(3,2,-12);break;case"H":e=at(3,1);break;case"HH":e=at(3,2);break;case"m":e=at(4,1);break;case"mm":e=at(4,2);break;case"s":e=at(5,1);break;case"ss":e=at(5,2);break;case"S":e=at(6,1);break;case"SS":e=at(6,2);break;case"SSS":e=at(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Gh(0);break;case"ZZZZZ":e=Gh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Gh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Gh(2);break;default:return null}return h_[n]=e,e}function xA(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Jj(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Xj(n,e,t){let i=n.getTimezoneOffset(),o=xA(e,i);return Jj(n,-1*(o-i))}function eB(n){if(vA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Qh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(zj))return tB(r)}let e=new Date(n);if(!vA(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function tB(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function vA(n){return n instanceof Date&&!isNaN(n.valueOf())}var f_=/\s+/,_A=[],y_=(()=>{class n{_ngEl;_renderer;initialClasses=_A;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(f_):_A}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(f_):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(f_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(U(ft),U(Yn))};static \u0275dir=He({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Yh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},kn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Yh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),EA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);EA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(U(Ni),U(Ro),U(a_))};static \u0275dir=He({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function EA(n,e){n.context.$implicit=e.item}var Le=(()=>{class n{_viewContainer;_context=new Zh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){wA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){wA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(U(Ni),U(Ro))};static \u0275dir=He({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Zh=class{$implicit=null;ngIf=null};function wA(n,e){if(n&&!n.createEmbeddedView)throw new q(2020,!1)}function NA(n,e){return new q(2100,!1)}var p_=class{createSubscription(e,t){return xn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){xn(()=>e.unsubscribe())}},g_=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},nB=new g_,rB=new p_,v_=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Oi(t))return nB;if(e_(t))return rB;throw NA(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(U(ki,16))};static \u0275pipe=Oh({name:"async",type:n,pure:!1})}return n})();var iB="mediumDate",OA=new $(""),kA=new $(""),__=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??iB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return PA(t,s,o||this.locale,a)}catch(s){throw NA(n,s.message)}}static \u0275fac=function(r){return new(r||n)(U(jh,16),U(OA,24),U(kA,24))};static \u0275pipe=Oh({name:"date",type:n,pure:!0})}return n})();var E_=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Oh({name:"json",type:n,pure:!1})}return n})();var Ae=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=Mn({})}return n})();function pu(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var w_="browser",FA="server";function Jh(n){return n===FA}var Lo=class{};var LA=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new I_(k(st),window)})}return n})(),I_=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=oB(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function oB(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var tf=new $(""),T_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(K(tf),K(De))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),gu=class{_doc;constructor(e){this._doc=e}manager},Xh="ng-app-id";function VA(n){for(let e of n)e.remove()}function UA(n,e){let t=e.createElement("style");return t.textContent=n,t}function sB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Xh}="${e}"],link[${Xh}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Xh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function b_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var S_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Jh(o),sB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,UA);r?.forEach(i=>this.addUsage(i,this.external,b_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(VA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])VA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,UA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,b_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Xh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(K(st),K(xv),K(Ov,8),K(Er))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),C_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},A_=/%COMP%/g;var BA="%COMP%",aB=`_nghost-${BA}`,cB=`_ngcontent-${BA}`,uB=!0,lB=new $("",{providedIn:"root",factory:()=>uB});function dB(n){return cB.replace(A_,n)}function hB(n){return aB.replace(A_,n)}function $A(n,e){return e.map(t=>t.replace(A_,n))}var M_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=Jh(a),this.defaultRenderer=new mu(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===mr.ShadowDom&&(r=he(j({},r),{encapsulation:mr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof ef?i.applyToHost(t):i instanceof yu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case mr.Emulated:o=new ef(u,l,r,this.appId,h,s,a,p,y);break;case mr.ShadowDom:return new D_(u,l,t,r,s,a,this.nonce,p,y);default:o=new yu(u,l,r,h,s,a,p,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(K(T_),K(S_),K(xv),K(lB),K(st),K(Er),K(De),K(Ov),K(sa,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),mu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(C_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(jA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(jA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=C_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=C_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Jr.DashCase|Jr.Important)?e.style.setProperty(t,r,i&Jr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Jr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Nn().getGlobalEventTarget(this.doc,e),!e))throw new q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function jA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var D_=class extends mu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=$A(i.id,h);for(let y of h){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=y,this.shadowRoot.appendChild(m)}let p=i.getExternalStyles?.();if(p)for(let y of p){let m=b_(y,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yu=class extends mu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?$A(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ef=class extends yu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=dB(h),this.hostAttr=hB(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var nf=class n extends cu{supportsDOMEvents=!0;static makeCurrent(){c_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=fB();return t==null?null:pB(t)}resetBaseElement(){vu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return pu(document.cookie,e)}},vu=null;function fB(){return vu=vu||document.querySelector("base"),vu?vu.getAttribute("href"):null}function pB(n){return new URL(n,document.baseURI).pathname}var gB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),zA=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(K(st))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),HA=["alt","control","meta","shift"],mB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},qA=(()=>{class n extends gu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),HA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=mB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),HA.forEach(s=>{if(s!==i){let a=yB[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(K(st))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function P_(n,e){return hA(j({rootComponent:n},vB(e)))}function vB(n){return{appProviders:[...CB,...n?.providers??[]],platformProviders:IB}}function _B(){nf.makeCurrent()}function EB(){return new gr}function wB(){return cS(document),document}var IB=[{provide:Er,useValue:w_},{provide:Nv,useValue:_B,multi:!0},{provide:st,useFactory:wB}];var CB=[{provide:vh,useValue:"root"},{provide:gr,useFactory:EB},{provide:tf,useClass:zA,multi:!0,deps:[st]},{provide:tf,useClass:qA,multi:!0,deps:[st]},M_,S_,T_,{provide:Ys,useExisting:M_},{provide:Lo,useClass:gB},[]];var fa=class{},_u=class{},Cr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var of=class{encodeKey(e){return GA(e)}encodeValue(e){return GA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function bB(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var DB=/%(\d[a-f0-9])/gi,TB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function GA(n){return encodeURIComponent(n).replace(DB,(e,t)=>TB[t]??e)}function rf(n){return`${n}`}var oi=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new of,e.fromString){if(e.fromObject)throw new q(2805,!1);this.map=bB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(rf):[rf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(rf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(rf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var sf=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function SB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function WA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function KA(n){return typeof Blob<"u"&&n instanceof Blob}function QA(n){return typeof FormData<"u"&&n instanceof FormData}function AB(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var YA="Content-Type",ZA="Accept",XA="X-Request-URL",eM="text/plain",tM="application/json",MB=`${tM}, ${eM}, */*`,ha=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(SB(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Cr,this.context??=new sf,!this.params)this.params=new oi,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||WA(this.body)||KA(this.body)||QA(this.body)||AB(this.body)?this.body:this.body instanceof oi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||QA(this.body)?null:KA(this.body)?this.body.type||null:WA(this.body)?null:typeof this.body=="string"?eM:this.body instanceof oi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?tM:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,m)=>y.set(m,e.setHeaders[m]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,m)=>y.set(m,e.setParams[m]),h)),new n(t,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},Vo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vo||{}),pa=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Cr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},af=class n extends pa{constructor(e={}){super(e)}type=Vo.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Eu=class n extends pa{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Vo.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},wu=class extends pa{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},PB=200,RB=204;function R_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ga=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof ha)o=t;else{let u;i.headers instanceof Cr?u=i.headers:u=new Cr(i.headers);let l;i.params&&(i.params instanceof oi?l=i.params:l=new oi({fromObject:i.params})),o=new ha(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Z(o).pipe(ur(u=>this.handler.handle(u)));if(t instanceof ha||i.observe==="events")return s;let a=s.pipe(Nt(u=>u instanceof Eu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ee(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new q(2806,!1);return u.body}));case"blob":return a.pipe(ee(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new q(2807,!1);return u.body}));case"text":return a.pipe(ee(u=>{if(u.body!==null&&typeof u.body!="string")throw new q(2808,!1);return u.body}));case"json":default:return a.pipe(ee(u=>u.body))}case"response":return a;default:throw new q(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new oi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,R_(i,r))}post(t,r,i={}){return this.request("POST",t,R_(i,r))}put(t,r,i={}){return this.request("PUT",t,R_(i,r))}static \u0275fac=function(r){return new(r||n)(K(fa))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var xB=new $("");function nM(n,e){return e(n)}function NB(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function OB(n,e,t){return(r,i)=>yt(t,()=>e(r,o=>n(o,i)))}var rM=new $(""),N_=new $(""),iM=new $(""),O_=new $("",{providedIn:"root",factory:()=>!0});function kB(){let n=null;return(e,t)=>{n===null&&(n=(k(rM,{optional:!0})??[]).reduceRight(NB,nM));let r=k(_r);if(k(O_)){let o=r.add();return n(e,t).pipe(Pi(()=>r.remove(o)))}else return n(e,t)}}var cf=(()=>{class n extends fa{backend;injector;chain=null;pendingTasks=k(_r);contributeToStability=k(O_);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(N_),...this.injector.get(iM,[])]));this.chain=r.reduceRight((i,o)=>OB(i,o,this.injector),nM)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Pi(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(K(_u),K(gt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var FB=/^\)\]\}',?\n/,LB=RegExp(`^${XA}:`,"m");function VB(n){return"responseURL"in n&&n.responseURL?n.responseURL:LB.test(n.getAllResponseHeaders())?n.getResponseHeader(XA):null}var x_=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new q(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Re(r.\u0275loadImpl()):Z(null)).pipe(Ot(()=>new ie(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,O)=>s.setRequestHeader(N,O.join(","))),t.headers.has(ZA)||s.setRequestHeader(ZA,MB),!t.headers.has(YA)){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader(YA,N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=s.statusText||"OK",O=new Cr(s.getAllResponseHeaders()),z=VB(s)||t.url;return u=new af({headers:O,status:s.status,statusText:N,url:z}),u},h=()=>{let{headers:N,status:O,statusText:z,url:de}=l(),Y=null;O!==RB&&(Y=typeof s.response>"u"?s.responseText:s.response),O===0&&(O=Y?PB:0);let Fe=O>=200&&O<300;if(t.responseType==="json"&&typeof Y=="string"){let Ct=Y;Y=Y.replace(FB,"");try{Y=Y!==""?JSON.parse(Y):null}catch(Me){Y=Ct,Fe&&(Fe=!1,Y={error:Me,text:Y})}}Fe?(o.next(new Eu({body:Y,headers:N,status:O,statusText:z,url:de||void 0})),o.complete()):o.error(new wu({error:Y,headers:N,status:O,statusText:z,url:de||void 0}))},p=N=>{let{url:O}=l(),z=new wu({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:O||void 0});o.error(z)},y=!1,m=N=>{y||(o.next(l()),y=!0);let O={type:Vo.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),t.responseType==="text"&&s.responseText&&(O.partialText=s.responseText),o.next(O)},A=N=>{let O={type:Vo.UploadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),o.next(O)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",A)),s.send(a),o.next({type:Vo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",A)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(K(Lo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),oM=new $(""),UB="XSRF-TOKEN",jB=new $("",{providedIn:"root",factory:()=>UB}),BB="X-XSRF-TOKEN",$B=new $("",{providedIn:"root",factory:()=>BB}),Iu=class{},HB=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=pu(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(K(st),K(Er),K(jB))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function zB(n,e){let t=n.url.toLowerCase();if(!k(oM)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=k(Iu).getToken(),i=k($B);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var k_=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(k_||{});function qB(n,e){return{\u0275kind:n,\u0275providers:e}}function sM(...n){let e=[ga,x_,cf,{provide:fa,useExisting:cf},{provide:_u,useFactory:()=>k(xB,{optional:!0})??k(x_)},{provide:N_,useValue:zB,multi:!0},{provide:oM,useValue:!0},{provide:Iu,useClass:HB}];for(let t of n)e.push(...t.\u0275providers);return gn(e)}var JA=new $("");function aM(){return qB(k_.LegacyInterceptors,[{provide:JA,useFactory:kB},{provide:N_,useExisting:JA,multi:!0}])}var Uo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=Mn({providers:[sM(aM())]})}return n})();var uM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(K(st))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var le="primary",ku=Symbol("RouteTitle"),j_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function $o(n){return new j_(n)}function yM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function WB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!br(n[t],e[t]))return!1;return!0}function br(n,e){let t=n?B_(n):void 0,r=e?B_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!vM(n[i],e[i]))return!1;return!0}function B_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function vM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function _M(n){return n.length>0?n[n.length-1]:null}function $i(n){return Jm(n)?n:Oi(n)?Re(Promise.resolve(n)):Z(n)}var KB={exact:wM,subset:IM},EM={exact:QB,subset:YB,ignored:()=>!0};function lM(n,e,t){return KB[t.paths](n.root,e.root,t.matrixParams)&&EM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function QB(n,e){return br(n,e)}function wM(n,e,t){if(!jo(n.segments,e.segments)||!df(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!wM(n.children[r],e.children[r],t))return!1;return!0}function YB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>vM(n[t],e[t]))}function IM(n,e,t){return CM(n,e,e.segments,t)}function CM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!jo(i,t)||e.hasChildren()||!df(i,t,r))}else if(n.segments.length===t.length){if(!jo(n.segments,t)||!df(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!IM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!jo(n.segments,i)||!df(n.segments,i,r)||!n.children[le]?!1:CM(n.children[le],e,o,r)}}function df(n,e,t){return e.every((r,i)=>EM[t](n[i].parameters,r.parameters))}var Tr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Pe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){return XB.serialize(this)}},Pe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hf(this)}},Vi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=$o(this.parameters),this._parameterMap}toString(){return DM(this)}};function ZB(n,e){return jo(n,e)&&n.every((t,r)=>br(t.parameters,e[r].parameters))}function jo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function JB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var Ho=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new Ui,providedIn:"root"})}return n})(),Ui=class{parse(e){let t=new H_(e);return new Tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Cu(e.root,!0)}`,r=n$(e.queryParams),i=typeof e.fragment=="string"?`#${e$(e.fragment)}`:"";return`${t}${r}${i}`}},XB=new Ui;function hf(n){return n.segments.map(e=>DM(e)).join("/")}function Cu(n,e){if(!n.hasChildren())return hf(n);if(e){let t=n.children[le]?Cu(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${Cu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=JB(n,(r,i)=>i===le?[Cu(n.children[le],!1)]:[`${i}:${Cu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${hf(n)}/${t[0]}`:`${hf(n)}/(${t.join("//")})`}}function bM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uf(n){return bM(n).replace(/%3B/gi,";")}function e$(n){return encodeURI(n)}function $_(n){return bM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ff(n){return decodeURIComponent(n)}function dM(n){return ff(n.replace(/\+/g,"%20"))}function DM(n){return`${$_(n.path)}${t$(n.parameters)}`}function t$(n){return Object.entries(n).map(([e,t])=>`;${$_(e)}=${$_(t)}`).join("")}function n$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${uf(t)}=${uf(i)}`).join("&"):`${uf(t)}=${uf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var r$=/^[^\/()?;#]+/;function F_(n){let e=n.match(r$);return e?e[0]:""}var i$=/^[^\/()?;=#]+/;function o$(n){let e=n.match(i$);return e?e[0]:""}var s$=/^[^=?&#]+/;function a$(n){let e=n.match(s$);return e?e[0]:""}var c$=/^[^&#]+/;function u$(n){let e=n.match(c$);return e?e[0]:""}var H_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new Pe(e,t)),r}parseSegment(){let e=F_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new Vi(ff(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=o$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=F_(this.remaining);i&&(r=i,this.capture(r))}e[ff(t)]=ff(r)}parseQueryParam(e){let t=a$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=u$(this.remaining);s&&(r=s,this.capture(r))}let i=dM(t),o=dM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=F_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new Pe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function TM(n){return n.segments.length>0?new Pe([],{[le]:n}):n}function SM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=SM(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Pe(n.segments,e);return l$(t)}function l$(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new Pe(n.segments.concat(e.segments),e.children)}return n}function ji(n){return n instanceof Tr}function AM(n,e,t=null,r=null){let i=MM(n);return PM(i,e,t,r)}function MM(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Pe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=TM(r);return e??i}function PM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return L_(i,i,i,t,r);let o=d$(e);if(o.toRoot())return L_(i,i,new Pe([],{}),t,r);let s=h$(o,i,n),a=s.processChildren?Du(s.segmentGroup,s.index,o.commands):xM(s.segmentGroup,s.index,o.commands);return L_(i,s.segmentGroup,a,t,r)}function gf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Su(n){return typeof n=="object"&&n!=null&&n.outlets}function L_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=RM(n,e,t);let a=TM(SM(s));return new Tr(a,o,i)}function RM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=RM(o,e,t)}),new Pe(n.segments,r)}var mf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gf(r[0]))throw new q(4003,!1);let i=r.find(Su);if(i&&i!==_M(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function d$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new mf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new mf(t,e,r)}var va=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function h$(n,e,t){if(n.isAbsolute)return new va(e,!0,0);if(!t)return new va(e,!1,NaN);if(t.parent===null)return new va(t,!0,0);let r=gf(n.commands[0])?0:1,i=t.segments.length-1+r;return f$(t,i,n.numberOfDoubleDots)}function f$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new va(r,!1,i-o)}function p$(n){return Su(n[0])?n[0].outlets:{[le]:n}}function xM(n,e,t){if(n??=new Pe([],{}),n.segments.length===0&&n.hasChildren())return Du(n,e,t);let r=g$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Pe(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new Pe(n.segments.slice(r.pathIndex),n.children),Du(o,0,i)}else return r.match&&i.length===0?new Pe(n.segments,{}):r.match&&!n.hasChildren()?z_(n,e,t):r.match?Du(n,0,i):z_(n,e,t)}function Du(n,e,t){if(t.length===0)return new Pe(n.segments,{});{let r=p$(t),i={};if(Object.keys(r).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=Du(n.children[le],e,t);return new Pe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=xM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Pe(n.segments,i)}}function g$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Su(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!fM(u,l,s))return o;r+=2}else{if(!fM(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function z_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Su(o)){let u=m$(o.outlets);return new Pe(r,u)}if(i===0&&gf(t[0])){let u=n.segments[e];r.push(new Vi(u.path,hM(t[0]))),i++;continue}let s=Su(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&gf(a)?(r.push(new Vi(s,hM(a))),i+=2):(r.push(new Vi(s,{})),i++)}return new Pe(r,{})}function m$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=z_(new Pe([],{}),0,r))}),e}function hM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function fM(n,e,t){return n==t.path&&br(e,t.parameters)}var pf="imperative",pt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(pt||{}),vn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Bi=class extends vn{type=pt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fn=class extends vn{urlAfterRedirects;type=pt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},un=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(un||{}),Ea=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ea||{}),Dr=class extends vn{reason;code;type=pt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Sr=class extends vn{reason;code;type=pt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},wa=class extends vn{error;target;type=pt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Au=class extends vn{urlAfterRedirects;state;type=pt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yf=class extends vn{urlAfterRedirects;state;type=pt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class extends vn{urlAfterRedirects;state;shouldActivate;type=pt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_f=class extends vn{urlAfterRedirects;state;type=pt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ef=class extends vn{urlAfterRedirects;state;type=pt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wf=class{route;type=pt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},If=class{route;type=pt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cf=class{snapshot;type=pt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bf=class{snapshot;type=pt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Df=class{snapshot;type=pt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tf=class{snapshot;type=pt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ia=class{routerEvent;position;anchor;type=pt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Mu=class{},Ca=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function y$(n,e){return n.providers&&!n._injector&&(n._injector=tu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function er(n){return n.outlet||le}function v$(n,e){let t=n.filter(r=>er(r)===e);return t.push(...n.filter(r=>er(r)!==e)),t}function Fu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Sf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Fu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new zo(this.rootInjector)}},zo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Sf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(K(gt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Af=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=q_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=q_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=G_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return G_(e,this._root).map(t=>t.value)}};function q_(n,e){if(n===e.value)return e;for(let t of e.children){let r=q_(n,t);if(r)return r}return null}function G_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=G_(n,t);if(r.length)return r.unshift(e),r}return[]}var yn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ya(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Pu=class extends Af{snapshot;constructor(e,t){super(e),this.snapshot=t,eE(this,e)}toString(){return this.snapshot.toString()}};function NM(n){let e=_$(n),t=new ht([new Vi("",{})]),r=new ht({}),i=new ht({}),o=new ht({}),s=new ht(""),a=new Ln(t,r,o,s,i,le,n,e.root);return a.snapshot=e.root,new Pu(new yn(a,[]),e)}function _$(n){let e={},t={},r={},i="",o=new Bo([],e,r,i,t,le,n,null,{});return new Ru("",new yn(o,[]))}var Ln=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ee(l=>l[ku]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>$o(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>$o(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&kM(i)&&(r.resolve[ku]=i.title),r}var Bo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ku]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$o(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ru=class extends Af{url;constructor(e,t){super(t),this.url=e,eE(this,t)}toString(){return OM(this._root)}};function eE(n,e){e.value._routerState=n,e.children.forEach(t=>eE(n,t))}function OM(n){let e=n.children.length>0?` { ${n.children.map(OM).join(", ")} } `:"";return`${n.value}${e}`}function V_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,br(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),br(e.params,t.params)||n.paramsSubject.next(t.params),WB(e.url,t.url)||n.urlSubject.next(t.url),br(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function W_(n,e){let t=br(n.params,e.params)&&ZB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||W_(n.parent,e.parent))}function kM(n){return typeof n.title=="string"||n.title===null}var FM=new $(""),Lu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=le;activateEvents=new it;deactivateEvents=new it;attachEvents=new it;detachEvents=new it;routerOutletData=eS(void 0);parentContexts=k(zo);location=k(Ni);changeDetector=k(ki);inputBinder=k(Vu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new K_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=He({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[yr]})}return n})(),K_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Ln?this.route:e===zo?this.childContexts:e===FM?this.outletData:this.parent.get(e,t)}},Vu=new $(""),tE=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Lc([r.queryParams,r.params,r.data]).pipe(Ot(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=fA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function E$(n,e,t){let r=xu(n,e._root,t?t._root:void 0);return new Pu(r,e)}function xu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=w$(n,e,t);return new yn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>xu(n,a)),s}}let r=I$(e.value),i=e.children.map(o=>xu(n,o));return new yn(r,i)}}function w$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xu(n,r,i);return xu(n,r)})}function I$(n){return new Ln(new ht(n.url),new ht(n.params),new ht(n.queryParams),new ht(n.fragment),new ht(n.data),n.outlet,n.component,n)}var ba=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},LM="ngNavigationCancelingError";function Pf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ji(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VM(!1,un.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function VM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[LM]=!0,t.cancellationCode=e,t}function C$(n){return UM(n)&&ji(n.url)}function UM(n){return!!n&&n[LM]}var b$=(n,e,t,r)=>ee(i=>(new Q_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Q_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),V_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ya(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ya(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ya(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ya(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Tf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new bf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(V_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),V_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Rf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_a=class{component;route;constructor(e,t){this.component=e,this.route=t}};function D$(n,e,t){let r=n._root,i=e?e._root:null;return bu(r,i,t,[r.value])}function T$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ta(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ZD(n)?n:e.get(n):r}function bu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ya(e);return n.children.forEach(s=>{S$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Tu(a,t.getContext(s),i)),i}function S$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=A$(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Rf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?bu(n,e,a?a.children:null,r,i):bu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _a(a.outlet.component,s))}else s&&Tu(e,a,i),i.canActivateChecks.push(new Rf(r)),o.component?bu(n,null,a?a.children:null,r,i):bu(n,null,t,r,i);return i}function A$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!jo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jo(n.url,e.url)||!br(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!W_(n,e)||!br(n.queryParams,e.queryParams);case"paramsChange":default:return!W_(n,e)}}function Tu(n,e,t){let r=ya(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Tu(s,e.children.getContext(o),t):Tu(s,null,t):Tu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new _a(e.outlet.component,i)):t.canDeactivateChecks.push(new _a(null,i)):t.canDeactivateChecks.push(new _a(null,i))}function Uu(n){return typeof n=="function"}function M$(n){return typeof n=="boolean"}function P$(n){return n&&Uu(n.canLoad)}function R$(n){return n&&Uu(n.canActivate)}function x$(n){return n&&Uu(n.canActivateChild)}function N$(n){return n&&Uu(n.canDeactivate)}function O$(n){return n&&Uu(n.canMatch)}function jM(n){return n instanceof Wr||n?.name==="EmptyError"}var lf=Symbol("INITIAL_VALUE");function Da(){return Ot(n=>Lc(n.map(e=>e.pipe(Gn(1),Fd(lf)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===lf)return lf;if(t===!1||k$(t))return t}return!0}),Nt(e=>e!==lf),Gn(1)))}function k$(n){return ji(n)||n instanceof ba}function F$(n,e){return tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(he(j({},t),{guardsResult:!0})):L$(s,r,i,n).pipe(tt(a=>a&&M$(a)?V$(r,o,n,e):Z(a)),ee(a=>he(j({},t),{guardsResult:a})))})}function L$(n,e,t,r){return Re(n).pipe(tt(i=>H$(i.component,i.route,t,e,r)),Qr(i=>i!==!0,!0))}function V$(n,e,t,r){return Re(e).pipe(ur(i=>Fs(j$(i.route.parent,r),U$(i.route,r),$$(n,i.path,t),B$(n,i.route,t))),Qr(i=>i!==!0,!0))}function U$(n,e){return n!==null&&e&&e(new Df(n)),Z(!0)}function j$(n,e){return n!==null&&e&&e(new Cf(n)),Z(!0)}function B$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Nd(()=>{let s=Fu(e)??t,a=Ta(o,s),u=R$(a)?a.canActivate(e,n):yt(s,()=>a(e,n));return $i(u).pipe(Qr())}));return Z(i).pipe(Da())}function $$(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>T$(s)).filter(s=>s!==null).map(s=>Nd(()=>{let a=s.guards.map(u=>{let l=Fu(s.node)??t,h=Ta(u,l),p=x$(h)?h.canActivateChild(r,n):yt(l,()=>h(r,n));return $i(p).pipe(Qr())});return Z(a).pipe(Da())}));return Z(o).pipe(Da())}function H$(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Fu(e)??i,l=Ta(a,u),h=N$(l)?l.canDeactivate(n,e,t,r):yt(u,()=>l(n,e,t,r));return $i(h).pipe(Qr())});return Z(s).pipe(Da())}function z$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Ta(s,n),u=P$(a)?a.canLoad(e,t):yt(n,()=>a(e,t));return $i(u)});return Z(o).pipe(Da(),BM(r))}function BM(n){return pd(Dt(e=>{if(typeof e!="boolean")throw Pf(n,e)}),ee(e=>e===!0))}function q$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Ta(s,n),u=O$(a)?a.canMatch(e,t):yt(n,()=>a(e,t));return $i(u)});return Z(o).pipe(Da(),BM(r))}var Nu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ou=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ma(n){return Os(new Nu(n))}function G$(n){return Os(new q(4e3,!1))}function W$(n){return Os(VM(!1,un.GuardRejected))}var Y_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[le])return G$(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:m,data:A,title:N}=i,O=yt(o,()=>a({params:m,data:A,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:N}));if(O instanceof Tr)throw new Ou(O);t=O}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ou(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Tr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Pe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Z_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function K$(n,e,t,r,i){let o=$M(n,e,t);return o.matched?(r=y$(e,r),q$(r,e,t,i).pipe(ee(s=>s===!0?o:j({},Z_)))):Z(o)}function $M(n,e,t){if(e.path==="**")return Q$(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},Z_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||yM)(t,n,e);if(!i)return j({},Z_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Q$(n){return{matched:!0,parameters:n.length>0?_M(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function pM(n,e,t,r){return t.length>0&&J$(n,t,r)?{segmentGroup:new Pe(e,Z$(r,new Pe(t,n.children))),slicedSegments:[]}:t.length===0&&X$(n,t,r)?{segmentGroup:new Pe(n.segments,Y$(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Pe(n.segments,n.children),slicedSegments:t}}function Y$(n,e,t,r){let i={};for(let o of t)if(Nf(n,e,o)&&!r[er(o)]){let s=new Pe([],{});i[er(o)]=s}return j(j({},r),i)}function Z$(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&er(r)!==le){let i=new Pe([],{});t[er(r)]=i}return t}function J$(n,e,t){return t.some(r=>Nf(n,e,r)&&er(r)!==le)}function X$(n,e,t){return t.some(r=>Nf(n,e,r))}function Nf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function eH(n,e,t){return e.length===0&&!n.children[t]}var J_=class{};function tH(n,e,t,r,i,o,s="emptyOnly"){return new X_(n,e,t,r,i,s,o).recognize()}var nH=31,X_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Y_(this.urlSerializer,this.urlTree)}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=pM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new yn(r,t),o=new Ru("",i),s=AM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Bo([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(ee(r=>({children:r,rootSnapshot:t})),Kr(r=>{if(r instanceof Ou)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Nu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ee(s=>s instanceof yn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Re(o).pipe(ur(s=>{let a=r.children[s],u=v$(t,s);return this.processSegmentGroup(e,u,a,s,i)}),kd((s,a)=>(s.push(...a),s)),Mi(null),ey(),tt(s=>{if(s===null)return ma(r);let a=HM(s);return rH(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return Re(t).pipe(ur(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Kr(l=>{if(l instanceof Nu)return Z(null);throw l}))),Qr(u=>!!u),Kr(u=>{if(jM(u))return eH(r,i,o)?Z(new J_):ma(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return er(r)!==s&&(s===le||!Nf(i,o,r))?ma(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ma(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=$M(t,i,o);if(!u)return ma(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nH&&(this.allowRedirects=!1));let m=new Bo(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,gM(i),er(i),i.component??i._loadedComponent??null,i,mM(i)),A=Mf(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(A.params),m.data=Object.freeze(A.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,m,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(tt(O=>this.processSegment(e,r,t,O.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=K$(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ot(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ot(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:m}=u,A=new Bo(y,p,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,gM(r),er(r),r.component??r._loadedComponent??null,r,mM(r)),N=Mf(A,s,this.paramsInheritanceStrategy);A.params=Object.freeze(N.params),A.data=Object.freeze(N.data);let{segmentGroup:O,slicedSegments:z}=pM(t,y,m,l);if(z.length===0&&O.hasChildren())return this.processChildren(h,l,O,A).pipe(ee(Y=>new yn(A,Y)));if(l.length===0&&z.length===0)return Z(new yn(A,[]));let de=er(r)===o;return this.processSegment(h,l,O,z,de?le:o,!0,A).pipe(ee(Y=>new yn(A,Y instanceof yn?[Y]:[])))}))):ma(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):z$(e,t,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,t).pipe(Dt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):W$(t))):Z({routes:[],injector:e})}};function rH(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function iH(n){let e=n.value.routeConfig;return e&&e.path===""}function HM(n){let e=[],t=new Set;for(let r of n){if(!iH(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=HM(r.children);e.push(new yn(r.value,i))}return e.filter(r=>!t.has(r))}function gM(n){return n.data||{}}function mM(n){return n.resolve||{}}function oH(n,e,t,r,i,o){return tt(s=>tH(n,e,t,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:u})=>he(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function sH(n,e){return tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of zM(u))s.add(l);let a=0;return Re(s).pipe(ur(u=>o.has(u)?aH(u,r,n,e):(u.data=Mf(u,u.parent,n).resolve,Z(void 0))),Dt(()=>a++),Ls(1),tt(u=>a===s.size?Z(t):Zt))})}function zM(n){let e=n.children.map(t=>zM(t)).flat();return[n,...e]}function aH(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!kM(i)&&(o[ku]=i.title),cH(o,n,e,r).pipe(ee(s=>(n._resolvedData=s,n.data=Mf(n,n.parent,t).resolve,null)))}function cH(n,e,t,r){let i=B_(n);if(i.length===0)return Z({});let o={};return Re(i).pipe(tt(s=>uH(n[s],e,t,r).pipe(Qr(),Dt(a=>{if(a instanceof ba)throw Pf(new Ui,a);o[s]=a}))),Ls(1),ee(()=>o),Kr(s=>jM(s)?Zt:Os(s)))}function uH(n,e,t,r){let i=Fu(e)??r,o=Ta(n,i),s=o.resolve?o.resolve(e,t):yt(i,()=>o(e,t));return $i(s)}function U_(n){return Ot(e=>{let t=n(e);return t?Re(t).pipe(ee(()=>e)):Z(e)})}var nE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[ku]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(qM),providedIn:"root"})}return n})(),qM=(()=>{class n extends nE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(K(uM))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qo=new $("",{providedIn:"root",factory:()=>({})}),rE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=we({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&xe(0,"router-outlet")},dependencies:[Lu],encapsulation:2})}return n})();function iE(n){let e=n.children&&n.children.map(iE),t=e?he(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=rE),t}var Go=new $(""),Of=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(Uh);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=$i(t.loadComponent()).pipe(ee(WM),Dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Pi(()=>{this.componentLoaders.delete(t)})),i=new Ps(r,()=>new Ke).pipe(Ms());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=GM(r,this.compiler,t,this.onLoadEndListener).pipe(Pi(()=>{this.childrenLoaders.delete(r)})),s=new Ps(o,()=>new Ke).pipe(Ms());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GM(n,e,t,r){return $i(n.loadChildren()).pipe(ee(WM),tt(i=>i instanceof Xv||Array.isArray(i)?Z(i):Re(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Go,[],{optional:!0,self:!0}).flat()),{routes:s.map(iE),injector:o}}))}function lH(n){return n&&typeof n=="object"&&"default"in n}function WM(n){return lH(n)?n.default:n}var kf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(dH),providedIn:"root"})}return n})(),dH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oE=new $(""),sE=new $("");function KM(n,e,t){let r=n.get(sE),i=n.get(st);return n.get(De).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),hH(n))),{onViewTransitionCreated:u}=r;return u&&yt(n,()=>u({transition:a,from:e,to:t})),s})}function hH(n){return new Promise(e=>{Fv({read:()=>setTimeout(e)},{injector:n})})}var aE=new $(""),Ff=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ke;transitionAbortSubject=new Ke;configLoader=k(Of);environmentInjector=k(gt);destroyRef=k(na);urlSerializer=k(Ho);rootContexts=k(zo);location=k(Li);inputBindingEnabled=k(Vu,{optional:!0})!==null;titleStrategy=k(nE);options=k(qo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(kf);createViewTransition=k(oE,{optional:!0});navigationErrorHandler=k(aE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new wf(i)),r=i=>this.events.next(new If(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(he(j({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new ht(null),this.transitions.pipe(Nt(r=>r!==null),Ot(r=>{let i=!1,o=!1;return Z(r).pipe(Ot(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",un.SupersededByNewNavigation),Zt;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?he(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new Sr(s.id,this.urlSerializer.serialize(s.rawUrl),l,Ea.IgnoredSameUrlNavigation)),s.resolve(!1),Zt}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Z(s).pipe(Ot(l=>(this.events.next(new Bi(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Zt:Promise.resolve(l))),oH(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Dt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=he(j({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Au(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:y,extras:m}=s,A=new Bi(l,this.urlSerializer.serialize(h),p,y);this.events.next(A);let N=NM(this.rootComponentType).snapshot;return this.currentTransition=r=he(j({},s),{targetSnapshot:N,urlAfterRedirects:h,extras:he(j({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Z(r)}else{let l="";return this.events.next(new Sr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Ea.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Zt}}),Dt(s=>{let a=new yf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ee(s=>(this.currentTransition=r=he(j({},s),{guards:D$(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),F$(this.environmentInjector,s=>this.events.next(s)),Dt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Pf(this.urlSerializer,s.guardsResult);let a=new vf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Nt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",un.GuardRejected),!1)),U_(s=>{if(s.guards.canActivateChecks.length!==0)return Z(s).pipe(Dt(a=>{let u=new _f(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Ot(a=>{let u=!1;return Z(a).pipe(sH(this.paramsInheritanceStrategy,this.environmentInjector),Dt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",un.NoDataFromResolver)}}))}),Dt(a=>{let u=new Ef(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),U_(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Dt(h=>{u.component=h}),ee(()=>{})));for(let h of u.children)l.push(...a(h));return l};return Lc(a(s.targetSnapshot.root)).pipe(Mi(null),Gn(1))}),U_(()=>this.afterPreactivation()),Ot(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Re(u).pipe(ee(()=>r)):Z(r)}),ee(s=>{let a=E$(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=he(j({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Dt(()=>{this.events.next(new Mu)}),b$(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Gn(1),Dt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),ty(this.transitionAbortSubject.pipe(Dt(s=>{throw s}))),Pi(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",un.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Kr(s=>{if(this.destroyed)return r.resolve(!1),Zt;if(o=!0,UM(s))this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),C$(s)?this.events.next(new Ca(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new wa(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=yt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof ba){let{message:l,cancellationCode:h}=Pf(this.urlSerializer,u);this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Ca(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Zt}))}))}cancelNavigationTransition(t,r,i){let o=new Dr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fH(n){return n!==pf}var QM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(pH),providedIn:"root"})}return n})(),xf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},pH=(()=>{class n extends xf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YM=(()=>{class n{urlSerializer=k(Ho);options=k(qo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Li);urlHandlingStrategy=k(kf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Tr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Tr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=NM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(gH),providedIn:"root"})}return n})(),gH=(()=>{class n extends YM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Bi?this.updateStateMemento():t instanceof Sr?this.commitTransition(r):t instanceof Au?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Mu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Dr&&(t.code===un.GuardRejected||t.code===un.NoDataFromResolver)?this.restoreHistory(r):t instanceof wa?this.restoreHistory(r,!0):t instanceof Fn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=j(j({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=j(j({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lf(n,e){n.events.pipe(Nt(t=>t instanceof Fn||t instanceof Dr||t instanceof wa||t instanceof Sr),ee(t=>t instanceof Fn||t instanceof Sr?0:(t instanceof Dr?t.code===un.Redirect||t.code===un.SupersededByNewNavigation:!1)?2:1),Nt(t=>t!==2),Gn(1)).subscribe(()=>{e()})}var mH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Lt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(XS);stateManager=k(YM);options=k(qo,{optional:!0})||{};pendingTasks=k(_r);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(Ff);urlSerializer=k(Ho);location=k(Li);urlHandlingStrategy=k(kf);_events=new Ke;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(QM);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Go,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Vu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dr&&r.code!==un.Redirect&&r.code!==un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fn)this.navigated=!0;else if(r instanceof Ca){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fH(i.source)},s);this.scheduleNavigation(a,pf,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}_H(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(iE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=MM(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return PM(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ji(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,pf,null,r)}navigate(t,r={skipLocationChange:!1}){return vH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},mH):r===!1?i=j({},yH):i=r,ji(t))return lM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return lM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return Lf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new q(4008,!1)}function _H(n){return!(n instanceof Mu)&&!(n instanceof Ca)}var Vn=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Ke;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Fn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ji(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:gS(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ji(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(U(Lt),U(Ln),Mv("tabindex"),U(Yn),U(ft),U(Jn))};static \u0275dir=He({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ue("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&nu("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Fi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Fi],replaceUrl:[2,"replaceUrl","replaceUrl",Fi],routerLink:"routerLink"},features:[yr]})}return n})();var ju=class{};var ZM=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Nt(t=>t instanceof Fn),ur(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=tu(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Re(i).pipe(ks())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(tt(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Re([o,s]).pipe(ks())}else return o})}static \u0275fac=function(r){return new(r||n)(K(Lt),K(Uh),K(gt),K(ju),K(Of))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JM=new $(""),EH=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Bi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Sr&&t.code===Ea.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ia&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ia(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){$S()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function uE(n,...e){return gn([{provide:Go,multi:!0,useValue:n},[],{provide:Ln,useFactory:XM,deps:[Lt]},{provide:Fh,multi:!0,useFactory:eP},e.map(t=>t.\u0275providers)])}function XM(n){return n.routerState.root}function Bu(n,e){return{\u0275kind:n,\u0275providers:e}}function eP(){let n=k(Qe);return e=>{let t=n.get(xo);if(e!==t.components[0])return;let r=n.get(Lt),i=n.get(tP);n.get(lE)===1&&r.initialNavigation(),n.get(iP,null,pe.Optional)?.setUpPreloading(),n.get(JM,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var tP=new $("",{factory:()=>new Ke}),lE=new $("",{providedIn:"root",factory:()=>1});function nP(){let n=[{provide:lE,useValue:0},t_(()=>{let e=k(Qe);return e.get(u_,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Lt),o=e.get(tP);Lf(i,()=>{r(!0)}),e.get(Ff).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))})];return Bu(2,n)}function rP(){let n=[t_(()=>{k(Lt).setUpLocationChangeListener()}),{provide:lE,useValue:2}];return Bu(3,n)}var iP=new $("");function oP(n){return Bu(0,[{provide:iP,useExisting:ZM},{provide:ju,useExisting:n}])}function sP(){return Bu(8,[tE,{provide:Vu,useExisting:tE}])}function aP(n){eu("NgRouterViewTransitions");let e=[{provide:oE,useValue:KM},{provide:sE,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Bu(9,e)}var cP=[Li,{provide:Ho,useClass:Ui},Lt,zo,{provide:Ln,useFactory:XM,deps:[Lt]},Of,[]],Kt=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[cP,[],{provide:Go,multi:!0,useValue:t},[],r?.errorHandler?{provide:aE,useValue:r.errorHandler}:[],{provide:qo,useValue:r||{}},r?.useHash?IH():CH(),wH(),r?.preloadingStrategy?oP(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?bH(r):[],r?.bindToComponentInputs?sP().\u0275providers:[],r?.enableViewTransitions?aP().\u0275providers:[],DH()]}}static forChild(t){return{ngModule:n,providers:[{provide:Go,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=Mn({})}return n})();function wH(){return{provide:JM,useFactory:()=>{let n=k(LA),e=k(De),t=k(qo),r=k(Ff),i=k(Ho);return t.scrollOffset&&n.setOffset(t.scrollOffset),new EH(i,r,n,e,t)}}}function IH(){return{provide:Jn,useClass:m_}}function CH(){return{provide:Jn,useClass:Hh}}function bH(n){return[n.initialNavigation==="disabled"?rP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?nP().\u0275providers:[]]}var cE=new $("");function DH(){return[{provide:cE,useFactory:eP},{provide:Fh,multi:!0,useExisting:cE}]}var Aa=class n{toastSubject=new Ke;toastState$=this.toastSubject.asObservable();show(e,t){this.toastSubject.next({text:e,type:t.type})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function TH(n,e){if(n&1&&(E(0,"div",1),w(1),v()),n&2){let t=Q();F("ngClass",t.message==null?null:t.message.type),R(),re(" ",t.message==null?null:t.message.text,`
`)}}var Vf=class n{constructor(e){this.toastService=e}message=null;isVisible=!1;timeout;ngOnInit(){this.toastService.toastState$.subscribe(e=>{this.message=e,this.isVisible=!0,clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.isVisible=!1},3e3)})}static \u0275fac=function(t){return new(t||n)(U(Aa))};static \u0275cmp=we({type:n,selectors:[["app-toast"]],decls:1,vars:1,consts:[["class","toast",3,"ngClass",4,"ngIf"],[1,"toast",3,"ngClass"]],template:function(t,r){t&1&&J(0,TH,2,2,"div",0),t&2&&F("ngIf",r.isVisible)},dependencies:[Ae,y_,Le],styles:[".toast[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;padding:1rem 1.5rem;border-radius:8px;color:#fff;font-weight:500;box-shadow:0 6px 16px #00000040;z-index:1000;animation:_ngcontent-%COMP%_slide-up .3s ease}.toast.success[_ngcontent-%COMP%]{background-color:#2ecc71}.toast.error[_ngcontent-%COMP%]{background-color:#e74c3c}.toast.info[_ngcontent-%COMP%]{background-color:#3498db}@keyframes _ngcontent-%COMP%_slide-up{0%{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}"]})};var lP=()=>{};var hP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},SH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Uf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,m=l&63;u||(m=64,s||(y=64)),r.push(t[h],t[p],t[y],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new hE;let y=o<<2|a>>4;if(r.push(y),l!==64){let m=a<<4&240|l>>2;if(r.push(m),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},hE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},AH=function(n){let e=hP(n);return Uf.encodeByteArray(e,!0)},$u=function(n){return AH(n).replace(/\./g,"")},jf=function(n){try{return Uf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var MH=()=>fP().__FIREBASE_DEFAULTS__,PH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&jf(n[1]);return e&&JSON.parse(e)},Bf=()=>{try{return lP()||MH()||PH()||RH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pE=n=>{var e,t;return(t=(e=Bf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$f=n=>{let e=pE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gE=()=>{var n;return(n=Bf())===null||n===void 0?void 0:n.config},mE=n=>{var e;return(e=Bf())===null||e===void 0?void 0:e[`_${n}`]};var Wo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function pP(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$u(JSON.stringify(t)),$u(JSON.stringify(s)),""].join(".")}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function xH(){var n;let e=(n=Bf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function vP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _P(){let n=_t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function EP(){return!xH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hu(){try{return typeof indexedDB=="object"}catch{return!1}}function wP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var NH="FirebaseError",Qt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=NH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tr.prototype.create)}},tr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?OH(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Qt(i,a,r)}};function OH(n,e){return n.replace(kH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var kH=/\{\$([^}]+)}/g;function IP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ar(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(dP(o)&&dP(s)){if(!Ar(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function dP(n){return n!==null&&typeof n=="object"}function zu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ma(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Pa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function CP(n,e){let t=new fE(n,e);return t.subscribe.bind(t)}var fE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");FH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=dE),i.error===void 0&&(i.error=dE),i.complete===void 0&&(i.complete=dE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function FH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function dE(){}var ene=4*60*60*1e3;function qe(n){return n&&n._delegate?n._delegate:n}var Tt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ko="[DEFAULT]";var yE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Wo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VH(e))try{this.getOrInitializeService({instanceIdentifier:Ko})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ko){return this.instances.has(e)}getOptions(e=Ko){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ko){return this.component?this.component.multipleInstances?e:Ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LH(n){return n===Ko?void 0:n}function VH(n){return n.instantiationMode==="EAGER"}var Hf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new yE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var UH=[],ye=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ye||{}),jH={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},BH=ye.INFO,$H={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},HH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=$H[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mr=class{constructor(e){this.name=e,this._logLevel=BH,this._logHandler=HH,this._userLogHandler=null,UH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var zH=(n,e)=>e.some(t=>n instanceof t),bP,DP;function qH(){return bP||(bP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GH(){return DP||(DP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var TP=new WeakMap,_E=new WeakMap,SP=new WeakMap,vE=new WeakMap,wE=new WeakMap;function WH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Pr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&TP.set(t,n)}).catch(()=>{}),wE.set(e,n),e}function KH(n){if(_E.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});_E.set(n,e)}var EE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return _E.get(n);if(e==="objectStoreNames")return n.objectStoreNames||SP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AP(n){EE=n(EE)}function QH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(zf(this),e,...t);return SP.set(r,e.sort?e.sort():[e]),Pr(r)}:GH().includes(n)?function(...e){return n.apply(zf(this),e),Pr(TP.get(this))}:function(...e){return Pr(n.apply(zf(this),e))}}function YH(n){return typeof n=="function"?QH(n):(n instanceof IDBTransaction&&KH(n),zH(n,qH())?new Proxy(n,EE):n)}function Pr(n){if(n instanceof IDBRequest)return WH(n);if(vE.has(n))return vE.get(n);let e=YH(n);return e!==n&&(vE.set(n,e),wE.set(e,n)),e}var zf=n=>wE.get(n);function PP(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Pr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Pr(s.result),u.oldVersion,u.newVersion,Pr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var ZH=["get","getKey","getAll","getAllKeys","count"],JH=["put","add","delete","clear"],IE=new Map;function MP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(IE.get(e))return IE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=JH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZH.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return IE.set(e,o),o}AP(n=>he(j({},n),{get:(e,t,r)=>MP(e,t)||n.get(e,t,r),has:(e,t)=>!!MP(e,t)||n.has(e,t)}));var bE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function XH(n){let e=n.getComponent();return e?.type==="VERSION"}var DE="@firebase/app",RP="0.11.4";var si=new Mr("@firebase/app"),e4="@firebase/app-compat",t4="@firebase/analytics-compat",n4="@firebase/analytics",r4="@firebase/app-check-compat",i4="@firebase/app-check",o4="@firebase/auth",s4="@firebase/auth-compat",a4="@firebase/database",c4="@firebase/data-connect",u4="@firebase/database-compat",l4="@firebase/functions",d4="@firebase/functions-compat",h4="@firebase/installations",f4="@firebase/installations-compat",p4="@firebase/messaging",g4="@firebase/messaging-compat",m4="@firebase/performance",y4="@firebase/performance-compat",v4="@firebase/remote-config",_4="@firebase/remote-config-compat",E4="@firebase/storage",w4="@firebase/storage-compat",I4="@firebase/firestore",C4="@firebase/vertexai",b4="@firebase/firestore-compat",D4="firebase",T4="11.6.0";var TE="[DEFAULT]",S4={[DE]:"fire-core",[e4]:"fire-core-compat",[n4]:"fire-analytics",[t4]:"fire-analytics-compat",[i4]:"fire-app-check",[r4]:"fire-app-check-compat",[o4]:"fire-auth",[s4]:"fire-auth-compat",[a4]:"fire-rtdb",[c4]:"fire-data-connect",[u4]:"fire-rtdb-compat",[l4]:"fire-fn",[d4]:"fire-fn-compat",[h4]:"fire-iid",[f4]:"fire-iid-compat",[p4]:"fire-fcm",[g4]:"fire-fcm-compat",[m4]:"fire-perf",[y4]:"fire-perf-compat",[v4]:"fire-rc",[_4]:"fire-rc-compat",[E4]:"fire-gcs",[w4]:"fire-gcs-compat",[I4]:"fire-fst",[b4]:"fire-fst-compat",[C4]:"fire-vertex","fire-js":"fire-js",[D4]:"fire-js-all"};var qu=new Map,A4=new Map,SE=new Map;function xP(n,e){try{n.container.addComponent(e)}catch(t){si.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _n(n){let e=n.name;if(SE.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;SE.set(e,n);for(let t of qu.values())xP(t,n);for(let t of A4.values())xP(t,n);return!0}function zi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function St(n){return n==null?!1:n.settings!==void 0}var M4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hi=new tr("app","Firebase",M4);var AE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hi.create("app-deleted",{appName:this._name})}};var qi=T4;function RE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:TE,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Hi.create("bad-app-name",{appName:String(i)});if(t||(t=gE()),!t)throw Hi.create("no-options");let o=qu.get(i);if(o){if(Ar(t,o.options)&&Ar(r,o.config))return o;throw Hi.create("duplicate-app",{appName:i})}let s=new Hf(i);for(let u of SE.values())s.addComponent(u);let a=new AE(t,r,s);return qu.set(i,a),a}function ai(n=TE){let e=qu.get(n);if(!e&&n===TE&&gE())return RE();if(!e)throw Hi.create("no-app",{appName:n});return e}function qf(){return Array.from(qu.values())}function $e(n,e,t){var r;let i=(r=S4[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(a.join(" "));return}_n(new Tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var P4="firebase-heartbeat-database",R4=1,Gu="firebase-heartbeat-store",CE=null;function FP(){return CE||(CE=PP(P4,R4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hi.create("idb-open",{originalErrorMessage:n.message})})),CE}function x4(n){return _(this,null,function*(){try{let t=(yield FP()).transaction(Gu),r=yield t.objectStore(Gu).get(LP(n));return yield t.done,r}catch(e){if(e instanceof Qt)si.warn(e.message);else{let t=Hi.create("idb-get",{originalErrorMessage:e?.message});si.warn(t.message)}}})}function NP(n,e){return _(this,null,function*(){try{let r=(yield FP()).transaction(Gu,"readwrite");yield r.objectStore(Gu).put(e,LP(n)),yield r.done}catch(t){if(t instanceof Qt)si.warn(t.message);else{let r=Hi.create("idb-set",{originalErrorMessage:t?.message});si.warn(r.message)}}})}function LP(n){return`${n.name}!${n.options.appId}`}var N4=1024,O4=30,ME=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new PE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=OP();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>O4){let s=F4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){si.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=OP(),{heartbeatsToSend:r,unsentEntries:i}=k4(this._heartbeatsCache.heartbeats),o=$u(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return si.warn(t),""}})}};function OP(){return new Date().toISOString().substring(0,10)}function k4(n,e=N4){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),kP(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),kP(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var PE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Hu()?wP().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield x4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return NP(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function kP(n){return $u(JSON.stringify({version:2,heartbeats:n})).length}function F4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function L4(n){_n(new Tt("platform-logger",e=>new bE(e),"PRIVATE")),_n(new Tt("heartbeat",e=>new ME(e),"PRIVATE")),$e(DE,RP,n),$e(DE,RP,"esm2017"),$e("fire-js","")}L4("");var V4="firebase",U4="11.6.0";$e(V4,U4,"app");function xE(n){n===void 0&&(gv(xE),n=k(Qe));let e=n.get(Dh);return t=>new ie(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Rr=new Oo("ANGULARFIRE2_VERSION");function Yo(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Gi=(n,e)=>{let t=e?[e]:qf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ra=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Ra||{}),VP=s_()&&typeof Zone<"u"?Ra.WARN:Ra.SILENT;var Gf=class{zone;delegate;constructor(e,t=Ym){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},xr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=k(De);this.outsideAngular=t.runOutsideAngular(()=>new Gf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Gf(typeof Zone>"u"?void 0:Zone.current,Qm))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),UP=!1;function j4(n,e){!UP&&(VP>Ra.SILENT||s_())&&(UP=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),VP>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function B4(n){let e=k(De,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Qo(n){let e=k(De,{optional:!0});return e?e.run(()=>n()):n()}var $4=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),yt(t,()=>Qo(()=>n.apply(void 0,r)))),Ne=(n,e,t)=>(t||=e?Ra.WARN:Ra.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(xr),s=k(Dh),a=k(gt)}catch{return j4(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Qo(()=>s.add())),i[l]=$4(i[l],r,a));let u=B4(()=>n.apply(this,i));return e?u instanceof ie?u.pipe(Ai(o.outsideAngular),Si(o.insideAngular),xE(a)):u instanceof Promise?Qo(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>yt(a,()=>Qo(()=>l(p))),p=>yt(a,()=>Qo(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Qo(()=>u):u instanceof ie?u.pipe(Ai(o.outsideAngular),Si(o.insideAngular)):Qo(()=>u)});var nr=class{constructor(e){return e}},ci=class{constructor(){return qf()}};function H4(n){return n&&n.length===1?n[0]:new nr(ai())}var NE=new $("angularfire2._apps"),z4={provide:nr,useFactory:H4,deps:[[new mt,NE]]},q4={provide:ci,deps:[[new mt,NE]]};function G4(n){return(e,t)=>{let r=t.get(Er);$e("angularfire",Rr.full,"core"),$e("angularfire",Rr.full,"app"),$e("angular",dA.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new nr(i)}}function jP(n,...e){return gn([z4,q4,{provide:NE,useFactory:G4(n),multi:!0,deps:[De,Qe,xr,...e]}])}var BP=Ne(RE,!0);var W4=new Map,K4={activated:!1,tokenObservers:[]},Q4={initialized:!1,enabled:!1};function rr(n){return W4.get(n)||Object.assign({},K4)}function qP(){return Q4}var Y4="https://content-firebaseappcheck.googleapis.com/v1";var Z4="exchangeDebugToken",$P={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ore=24*60*60*1e3;var FE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Wo,this.pending.promise.catch(t=>{}),yield J4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Wo,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function J4(n){return new Promise(e=>{setTimeout(e,n)})}var X4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Wi=new tr("appCheck","AppCheck",X4);function GP(n){if(!rr(n).activated)throw Wi.create("use-before-activation",{appName:n.name})}function WP(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(m){throw Wi.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw Wi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(m){throw Wi.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Wi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,y=Date.now();return{token:l.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}})}function KP(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Y4}/projects/${t}/apps/${r}:${Z4}?key=${i}`,body:{debug_token:e}}}var ez="firebase-app-check-database",tz=1,LE="firebase-app-check-store";var Wf=null;function nz(){return Wf||(Wf=new Promise((n,e)=>{try{let t=indexedDB.open(ez,tz);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Wi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(LE,{keyPath:"compositeKey"})}}}catch(t){e(Wi.create("storage-open",{originalErrorMessage:t?.message}))}}),Wf)}function rz(n,e){return iz(oz(n),e)}function iz(n,e){return _(this,null,function*(){let r=(yield nz()).transaction(LE,"readwrite"),o=r.objectStore(LE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Wi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function oz(n){return`${n.options.appId}-${n.name}`}var Wu=new Mr("@firebase/app-check");function OE(n,e){return Hu()?rz(n,e).catch(t=>{Wu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QP(){return qP().enabled}function YP(){return _(this,null,function*(){let n=qP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var sz={error:"UNKNOWN_ERROR"};function az(n){return Uf.encodeString(JSON.stringify(n),!1)}function VE(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;GP(r);let i=rr(r),o=i.token,s;if(o&&!Ku(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Ku(l)?o=l:yield OE(r,void 0))}if(!e&&o&&Ku(o))return{token:o.token};let a=!1;if(QP())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=WP(KP(r,yield YP()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield OE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Wu.warn(l.message):t&&Wu.error(l),kE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield rr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Wu.warn(l.message):t&&Wu.error(l),s=l}let u;return o?s?Ku(o)?u={token:o.token,internalError:s}:u=kE(s):(u={token:o.token},i.token=o,yield OE(r,o)):u=kE(s),a&&dz(r,u),u})}function cz(n){return _(this,null,function*(){let e=n.app;GP(e);let{provider:t}=rr(e);if(QP()){let r=yield YP(),{token:i}=yield WP(KP(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function uz(n,e,t,r){let{app:i}=n,o=rr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ku(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),HP(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>HP(n))}function ZP(n,e){let t=rr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function HP(n){let{app:e}=n,t=rr(e),r=t.tokenRefresher;r||(r=lz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lz(n){let{app:e}=n;return new FE(()=>_(this,null,function*(){let t=rr(e),r;if(t.token?r=yield VE(n,!0):r=yield VE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=rr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$P.RETRIAL_MIN_WAIT,$P.RETRIAL_MAX_WAIT)}function dz(n,e){let t=rr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ku(n){return n.expireTimeMillis-Date.now()>0}function kE(n){return{token:az(sz),error:n}}var UE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=rr(this.app);for(let t of e)ZP(this.app,t.next);return Promise.resolve()}};function hz(n,e){return new UE(n,e)}function fz(n){return{getToken:e=>VE(n,e),getLimitedUseToken:()=>cz(n),addTokenListener:e=>uz(n,"INTERNAL",e),removeTokenListener:e=>ZP(n.app,e)}}var pz="@firebase/app-check",gz="0.8.13";var mz="app-check",zP="app-check-internal";function yz(){_n(new Tt(mz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return hz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(zP).initialize()})),_n(new Tt(zP,n=>{let e=n.getProvider("app-check").getImmediate();return fz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$e(pz,gz)}yz();var vz="app-check";var Ki=class{constructor(){return Gi(vz)}};var _z=["localhost","0.0.0.0","127.0.0.1"],vre=typeof window<"u"&&_z.includes(window.location.hostname);function fR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pR=fR,gR=new tr("auth","Firebase",fR());var Xf=new Mr("@firebase/auth");function Ez(n,...e){Xf.logLevel<=ye.WARN&&Xf.warn(`Auth (${qi}): ${n}`,...e)}function Qf(n,...e){Xf.logLevel<=ye.ERROR&&Xf.error(`Auth (${qi}): ${n}`,...e)}function kr(n,...e){throw uw(n,...e)}function Zo(n,...e){return uw(n,...e)}function mR(n,e,t){let r=Object.assign(Object.assign({},pR()),{[e]:t});return new tr("auth","Firebase",r).create(e,{appName:n.name})}function Nr(n){return mR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gR.create(n,...e)}function X(n,e,...t){if(!n)throw uw(e,...t)}function ui(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Qf(e),new Error(e)}function Zi(n,e){n||ui(e)}function HE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function wz(){return JP()==="http:"||JP()==="https:"}function JP(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Iz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wz()||yP()||"connection"in navigator)?navigator.onLine:!0}function Cz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Jo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zi(t>e,"Short delay should be less than long delay!"),this.isMobile=gP()||vP()}get(){return Iz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lw(n,e){Zi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ep=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var bz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Dz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Tz=new Jo(3e4,6e4);function di(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ir(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return yR(n,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=zu(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:y},l);return mP()||(m.referrerPolicy="no-referrer"),ep.fetch()(yield vR(n,n.config.apiHost,t,p),m)}))})}function yR(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},bz),e);try{let i=new zE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Kf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Kf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Kf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw mR(n,h,l);kr(n,h)}}catch(i){if(i instanceof Qt)throw i;kr(n,"network-request-failed",{message:String(i)})}})}function nl(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield ir(n,e,t,r,i);return"mfaPendingCredential"in l&&kr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function vR(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?lw(n.config,i):`${n.config.apiScheme}://${i}`;return Dz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function Sz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var zE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zo(this.auth,"network-request-failed")),Tz.get())})}};function Kf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Zo(n,e,r);return i.customData._tokenResponse=t,i}function XP(n){return n!==void 0&&n.enterprise!==void 0}var qE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Sz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function Az(n,e){return _(this,null,function*(){return ir(n,"GET","/v2/recaptchaConfig",di(n,e))})}function Mz(n,e){return _(this,null,function*(){return ir(n,"POST","/v1/accounts:delete",e)})}function tp(n,e){return _(this,null,function*(){return ir(n,"POST","/v1/accounts:lookup",e)})}function Yu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function dw(n,e=!1){return _(this,null,function*(){let t=qe(n),r=yield t.getIdToken(e),i=hw(r);X(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Yu(jE(i.auth_time)),issuedAtTime:Yu(jE(i.iat)),expirationTime:Yu(jE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function jE(n){return Number(n)*1e3}function hw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Qf("JWT malformed, contained fewer than 3 sections"),null;try{let i=jf(t);return i?JSON.parse(i):(Qf("Failed to decode base64 JWT payload"),null)}catch(i){return Qf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eR(n){let e=hw(n);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xo(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Qt&&Pz(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Pz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var GE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ju=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function np(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Xo(n,tp(t,{idToken:r}));X(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?_R(o.providerUserInfo):[],a=Rz(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ju(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function fw(n){return _(this,null,function*(){let e=qe(n);yield np(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Rz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _R(n){return n.map(e=>{var{providerId:t}=e,r=Zm(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function xz(n,e){return _(this,null,function*(){let t=yield yR(n,{},()=>_(this,null,function*(){let r=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield vR(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ep.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Nz(n,e){return _(this,null,function*(){return ir(n,"POST","/v2/accounts:revokeToken",di(n,e))})}var Zu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){X(e.length!==0,"internal-error");let t=eR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield xz(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(X(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(X(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ui("not implemented")}};function Qi(n,e){X(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Yi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Zm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ju(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Xo(this,this.stsTokenManager.getToken(this.auth,e));return X(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return dw(this,e)}reload(){return fw(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield np(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(St(this.auth.app))return Promise.reject(Nr(this.auth));let e=yield this.getIdToken();return yield Xo(this,Mz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,A=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,z=(l=t.createdAt)!==null&&l!==void 0?l:void 0,de=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:Fe,isAnonymous:Ct,providerData:Me,stsTokenManager:T}=t;X(Y&&T,e,"internal-error");let I=Zu.fromJSON(this.name,T);X(typeof Y=="string",e,"internal-error"),Qi(p,e.name),Qi(y,e.name),X(typeof Fe=="boolean",e,"internal-error"),X(typeof Ct=="boolean",e,"internal-error"),Qi(m,e.name),Qi(A,e.name),Qi(N,e.name),Qi(O,e.name),Qi(z,e.name),Qi(de,e.name);let b=new n({uid:Y,auth:e,email:y,emailVerified:Fe,displayName:p,isAnonymous:Ct,photoURL:A,phoneNumber:m,tenantId:N,stsTokenManager:I,createdAt:z,lastLoginAt:de});return Me&&Array.isArray(Me)&&(b.providerData=Me.map(D=>Object.assign({},D))),O&&(b._redirectEventId=O),b}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Zu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield np(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];X(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?_R(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Zu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ju(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var tR=new Map;function li(n){Zi(n instanceof Function,"Expected a class definition");let e=tR.get(n);return e?(Zi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tR.set(n,e),e)}var Oz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),WE=Oz;function Yf(n,e,t){return`firebase:${n}:${e}:${t}`}var rp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Yf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Yf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield tp(this.auth,{idToken:e}).catch(()=>{});return t?Yi._fromGetAccountInfoResponse(this.auth,t,e):null}return Yi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(li(WE),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||li(WE),s=Yf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let y=yield tp(e,{idToken:h}).catch(()=>{});if(!y)break;p=yield Yi._fromGetAccountInfoResponse(e,y,h)}else p=Yi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function nR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ER(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DR(e))return"Blackberry";if(TR(e))return"Webos";if(wR(e))return"Safari";if((e.includes("chrome/")||IR(e))&&!e.includes("edge/"))return"Chrome";if(bR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function ER(n=_t()){return/firefox\//i.test(n)}function wR(n=_t()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IR(n=_t()){return/crios\//i.test(n)}function CR(n=_t()){return/iemobile/i.test(n)}function bR(n=_t()){return/android/i.test(n)}function DR(n=_t()){return/blackberry/i.test(n)}function TR(n=_t()){return/webos/i.test(n)}function pw(n=_t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function kz(n=_t()){var e;return pw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Fz(){return _P()&&document.documentMode===10}function SR(n=_t()){return pw(n)||bR(n)||TR(n)||DR(n)||/windows phone/i.test(n)||CR(n)}function AR(n,e=[]){let t;switch(n){case"Browser":t=nR(_t());break;case"Worker":t=`${nR(_t())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${qi}/${r}`}var KE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Lz(t){return _(this,arguments,function*(n,e={}){return ir(n,"GET","/v2/passwordPolicy",di(n,e))})}var Vz=6,QE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Vz,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var YE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ip(this),this.idTokenSubscription=new ip(this),this.beforeStateQueue=new KE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=li(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield rp.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield tp(this,{idToken:e}),r=yield Yi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(St(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield np(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Cz()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(St(this.app))return Promise.reject(Nr(this));let t=e?qe(e):null;return t&&X(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return St(this.app)?Promise.reject(Nr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return St(this.app)?Promise.reject(Nr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(li(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Lz(this),t=new QE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Nz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&li(e)||this._popupRedirectResolver;X(t,this,"argument-error"),this.redirectPersistenceManager=yield rp.create(this,[li(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(St(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Ez(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Ji(n){return qe(n)}var ip=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=CP(t=>this.observer=t)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var hp={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Uz(n){hp=n}function MR(n){return hp.loadJS(n)}function jz(){return hp.recaptchaEnterpriseScript}function Bz(){return hp.gapiScript}function PR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var ZE=class{constructor(){this.enterprise=new JE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},JE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var $z="recaptcha-enterprise",RR="NO_RECAPTCHA",XE=class{constructor(e){this.type=$z,this.auth=Ji(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(this,null,function*(){Az(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new qE(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;XP(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(RR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&XP(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=jz();u.length!==0&&(u+=a),MR(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Qu(n,e,t,r=!1,i=!1){return _(this,null,function*(){let o=new XE(n),s;if(i)s=RR;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function op(n,e,t,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Qu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>_(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Qu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Qu(n,e,t);return r(n,a).catch(u=>_(this,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Qu(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield Qu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function gw(n,e){let t=zi(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ar(o,e??{}))return i;kr(i,"already-initialized")}return t.initialize({options:e})}function Hz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(li);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function mw(n,e,t){let r=Ji(n);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=xR(e),{host:s,port:a}=zz(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(Ar(l,r.config.emulator)&&Ar(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||qz()}function xR(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zz(n){let e=xR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:rR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:rR(s)}}}function rR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function qz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Xu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,t){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}};function Gz(n,e){return _(this,null,function*(){return ir(n,"POST","/v1/accounts:update",e)})}function Wz(n,e){return _(this,null,function*(){return ir(n,"POST","/v1/accounts:signUp",e)})}function Kz(n,e){return _(this,null,function*(){return nl(n,"POST","/v1/accounts:signInWithPassword",di(n,e))})}function NR(n,e){return _(this,null,function*(){return ir(n,"POST","/v1/accounts:sendOobCode",di(n,e))})}function Qz(n,e){return _(this,null,function*(){return NR(n,e)})}function Yz(n,e){return _(this,null,function*(){return NR(n,e)})}function Zz(n,e){return _(this,null,function*(){return nl(n,"POST","/v1/accounts:signInWithEmailLink",di(n,e))})}function Jz(n,e){return _(this,null,function*(){return nl(n,"POST","/v1/accounts:signInWithEmailLink",di(n,e))})}var el=class n extends Xu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,t,"signInWithPassword",Kz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Zz(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return op(e,r,"signUpPassword",Wz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Jz(e,{idToken:t,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function BE(n,e){return _(this,null,function*(){return nl(n,"POST","/v1/accounts:signInWithIdp",di(n,e))})}function Xz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eq(n){let e=Ma(Pa(n)).link,t=e?Ma(Pa(e)).deep_link_id:null,r=Ma(Pa(n)).deep_link_id;return(r?Ma(Pa(r)).link:null)||r||t||e||n}var sp=class n{constructor(e){var t,r,i,o,s,a;let u=Ma(Pa(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Xz((i=u.mode)!==null&&i!==void 0?i:null);X(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=eq(e);try{return new n(t)}catch{return null}}};var OR=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return el._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=sp.parseLink(r);return X(i,"argument-error"),el._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),ap=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ew=class extends ap{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function tq(n,e){return _(this,null,function*(){return nl(n,"POST","/v1/accounts:signUp",di(n,e))})}var xa=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield Yi._fromIdTokenResponse(e,r,i),s=iR(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=iR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function iR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var tw=class n extends Qt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function kR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tw._fromErrorAndOperation(n,o,e,r):o})}function nq(n,e,t=!1){return _(this,null,function*(){let r=yield Xo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return xa._forOperation(n,"link",r)})}function rq(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(St(r.app))return Promise.reject(Nr(r));let i="reauthenticate";try{let o=yield Xo(n,kR(r,i,e,n),t);X(o.idToken,r,"internal-error");let s=hw(o.idToken);X(s,r,"internal-error");let{sub:a}=s;return X(n.uid===a,r,"user-mismatch"),xa._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&kr(r,"user-mismatch"),o}})}function FR(n,e,t=!1){return _(this,null,function*(){if(St(n.app))return Promise.reject(Nr(n));let r="signIn",i=yield kR(n,r,e),o=yield xa._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function yw(n,e){return _(this,null,function*(){return FR(Ji(n),e)})}function LR(n,e,t){var r;X(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),X(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),X(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(X(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(X(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function VR(n){return _(this,null,function*(){let e=Ji(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function vw(n,e,t){return _(this,null,function*(){let r=Ji(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&LR(r,i,t),yield op(r,i,"getOobCode",Yz,"EMAIL_PASSWORD_PROVIDER")})}function _w(n,e,t){return _(this,null,function*(){if(St(n.app))return Promise.reject(Nr(n));let r=Ji(n),s=yield op(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tq,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&VR(n),u}),a=yield xa._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function Ew(n,e,t){return St(n.app)?Promise.reject(Nr(n)):yw(qe(n),OR.credential(e,t)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&VR(n),r}))}function ww(n,e){return _(this,null,function*(){let t=qe(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&LR(t.auth,i,e);let{email:o}=yield Qz(t.auth,i);o!==n.email&&(yield n.reload())})}function iq(n,e){return _(this,null,function*(){return ir(n,"POST","/v1/accounts:update",e)})}function Iw(r,i){return _(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=qe(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Xo(o,iq(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function Cw(n,e){let t=qe(n);return St(t.auth.app)?Promise.reject(Nr(t.auth)):oq(t,e,null)}function oq(n,e,t){return _(this,null,function*(){let{auth:r}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=yield Xo(n,Gz(r,o));yield n._updateTokensIfNecessary(s,!0)})}function rl(n,e,t,r){return qe(n).onIdTokenChanged(e,t,r)}function bw(n,e,t){return qe(n).beforeAuthStateChanged(e,t)}function fp(n,e,t,r){return qe(n).onAuthStateChanged(e,t,r)}function Dw(n){return qe(n).signOut()}var cp="__sak";var up=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cp,"1"),this.storage.removeItem(cp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var sq=1e3,aq=10,cq=(()=>{class n extends up{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Fz()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,aq):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},sq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Di(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Di(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Di(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),UR=cq;var uq=(()=>{class n extends up{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Tw=uq;function lq(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var dq=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield lq(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function jR(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var nw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=jR("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Or(){return window}function hq(n){Or().location.href=n}function BR(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}function fq(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function pq(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function gq(){return BR()?self:null}var $R="firebaseLocalStorageDb",mq=1,lp="firebaseLocalStorage",HR="fbase_key",es=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pp(n,e){return n.transaction([lp],e?"readwrite":"readonly").objectStore(lp)}function yq(){let n=indexedDB.deleteDatabase($R);return new es(n).toPromise()}function rw(){let n=indexedDB.open($R,mq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(lp,{keyPath:HR})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(lp)?e(r):(r.close(),yield yq(),e(yield rw()))}))})}function oR(n,e,t){return _(this,null,function*(){let r=pp(n,!0).put({[HR]:e,value:t});return new es(r).toPromise()})}function vq(n,e){return _(this,null,function*(){let t=pp(n,!1).get(e),r=yield new es(t).toPromise();return r===void 0?null:r.value})}function sR(n,e){let t=pp(n,!0).delete(e);return new es(t).toPromise()}var _q=800,Eq=3,wq=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield rw(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>Eq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return BR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=dq._getInstance(gq()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield fq(),!this.activeServiceWorker)return;this.sender=new nw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||pq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield rw();return yield oR(t,cp,"1"),yield sR(t,cp),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>oR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>vq(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>sR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=pp(o,!1).getAll();return new es(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),_q)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),zR=wq;var Tre=PR("rcb"),Sre=new Jo(3e4,6e4);function Iq(n,e){return e?li(e):(X(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var tl=class extends Xu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return BE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return BE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return BE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Cq(n){return FR(n.auth,new tl(n),n.bypassAuthState)}function bq(n){let{auth:e,user:t}=n;return X(t,e,"internal-error"),rq(t,new tl(n),n.bypassAuthState)}function Dq(n){return _(this,null,function*(){let{auth:e,user:t}=n;return X(t,e,"internal-error"),nq(t,new tl(n),n.bypassAuthState)})}var iw=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cq;case"linkViaPopup":case"linkViaRedirect":return Dq;case"reauthViaPopup":case"reauthViaRedirect":return bq;default:kr(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Are=new Jo(2e3,1e4);var Tq="pendingRedirect",Zf=new Map,ow=class n extends iw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Zf.get(this.auth._key());if(!e){try{let r=(yield Sq(this.resolver,this.auth))?yield Di(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Zf.set(this.auth._key(),e)}return this.bypassAuthState||Zf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Di(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Di(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function Sq(n,e){return _(this,null,function*(){let t=Pq(e),r=Mq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Aq(n,e){Zf.set(n._key(),e)}function Mq(n){return li(n._redirectPersistence)}function Pq(n){return Yf(Tq,n.config.apiKey,n.name)}function Rq(n,e,t=!1){return _(this,null,function*(){if(St(n.app))return Promise.reject(Nr(n));let r=Ji(n),i=Iq(r,e),s=yield new ow(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var xq=10*60*1e3,sw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Nq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!qR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xq&&this.cachedEventUids.clear(),this.cachedEventUids.has(aR(e))}saveEventToCache(e){this.cachedEventUids.add(aR(e)),this.lastProcessedEventTime=Date.now()}};function aR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function qR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Nq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qR(n);default:return!1}}function Oq(t){return _(this,arguments,function*(n,e={}){return ir(n,"GET","/v1/projects",e)})}var kq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fq=/^https?/;function Lq(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Oq(n);for(let t of e)try{if(Vq(t))return}catch{}kr(n,"unauthorized-domain")})}function Vq(n){let e=HE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Fq.test(t))return!1;if(kq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Uq=new Jo(3e4,6e4);function cR(){let n=Or().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jq(n){return new Promise((e,t)=>{var r,i,o;function s(){cR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cR(),t(Zo(n,"network-request-failed"))},timeout:Uq.get()})}if(!((i=(r=Or().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Or().gapi)===null||o===void 0)&&o.load)s();else{let a=PR("iframefcb");return Or()[a]=()=>{gapi.load?s():t(Zo(n,"network-request-failed"))},MR(`${Bz()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Jf=null,e})}var Jf=null;function Bq(n){return Jf=Jf||jq(n),Jf}var $q=new Jo(5e3,15e3),Hq="__/auth/iframe",zq="emulator/auth/iframe",qq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wq(n){let e=n.config;X(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?lw(e,zq):`https://${n.config.authDomain}/${Hq}`,r={apiKey:e.apiKey,appName:n.name,v:qi},i=Gq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${zu(r).slice(1)}`}function Kq(n){return _(this,null,function*(){let e=yield Bq(n),t=Or().gapi;return X(t,n,"internal-error"),e.open({where:document.body,url:Wq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qq,dontclear:!0},r=>new Promise((i,o)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Zo(n,"network-request-failed"),a=Or().setTimeout(()=>{o(s)},$q.get());function u(){Or().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var Qq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yq=500,Zq=600,Jq="_blank",Xq="http://localhost",dp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function e3(n,e,t,r=Yq,i=Zq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},Qq),{width:r.toString(),height:i.toString(),top:o,left:s}),l=_t().toLowerCase();t&&(a=IR(l)?Jq:t),ER(l)&&(e=e||Xq,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[m,A])=>`${y}${m}=${A},`,"");if(kz(l)&&a!=="_self")return t3(e||"",a),new dp(null);let p=window.open(e||"",a,h);X(p,n,"popup-blocked");try{p.focus()}catch{}return new dp(p)}function t3(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var n3="__/auth/handler",r3="emulator/auth/handler",i3=encodeURIComponent("fac");function uR(n,e,t,r,i,o){return _(this,null,function*(){X(n.config.authDomain,n,"auth-domain-config-required"),X(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:qi,eventId:i};if(e instanceof ap){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",IP(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof ew){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${i3}=${encodeURIComponent(u)}`:"";return`${o3(n)}?${zu(a).slice(1)}${l}`})}function o3({config:n}){return n.emulator?lw(n,r3):`https://${n.authDomain}/${n3}`}var $E="webStorageSupport",aw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Tw,this._completeRedirectFn=Rq,this._overrideRedirectResult=Aq}_openPopup(e,t,r,i){return _(this,null,function*(){var o;Zi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield uR(e,t,r,HE(),i);return e3(e,s,jR())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield uR(e,t,r,HE(),i);return hq(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Zi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield Kq(e),r=new sw(e);return t.register("authEvent",i=>(X(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($E,{type:$E},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[$E];s!==void 0&&t(!!s),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Lq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return SR()||wR()||pw()}},GR=aw;var lR="@firebase/auth",dR="1.10.0";var cw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function s3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a3(n){_n(new Tt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;X(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AR(n)},l=new YE(r,i,o,u);return Hz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_n(new Tt("auth-internal",e=>{let t=Ji(e.getProvider("auth").getImmediate());return(r=>new cw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(lR,dR,s3(n)),$e(lR,dR,"esm2017")}var c3=5*60,u3=mE("authIdTokenMaxAge")||c3,hR=null,l3=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>u3)return;let i=t?.token;hR!==i&&(hR=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Sw(n=ai()){let e=zi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=gw(n,{popupRedirectResolver:GR,persistence:[zR,UR,Tw]}),r=mE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=l3(o.toString());bw(t,s,()=>s(t.currentUser)),rl(t,a=>s(a))}}let i=pE("auth");return i&&mw(t,`http://${i}`),t}function d3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Uz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Zo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",d3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a3("Browser");function KR(n){return new ie(function(e){var t=rl(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var QR="auth",En=class{constructor(e){return e}},ts=class{constructor(){return Gi(QR)}};var Aw=new $("angularfire2.auth-instances");function K3(n,e){let t=Yo(QR,n,e);return t&&new En(t)}function Q3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new En(r)}}var Y3={provide:ts,deps:[[new mt,Aw]]},Z3={provide:En,useFactory:K3,deps:[[new mt,Aw],nr]};function YR(n,...e){return $e("angularfire",Rr.full,"auth"),gn([Z3,Y3,{provide:Aw,useFactory:Q3(n),multi:!0,deps:[De,Qe,xr,ci,[new mt,Ki],...e]}])}var ZR=Ne(KR,!0);var JR=Ne(_w,!0,2);var gp=Ne(Sw,!0);var XR=Ne(fp,!0);var ex=Ne(ww,!0,2),tx=Ne(vw,!0,2);var nx=Ne(Ew,!0,2);var rx=Ne(Dw,!0,2);var ix=Ne(Cw,!0,2);var ox=Ne(Iw,!0,2);var sx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ax={};var hi,Pw;(function(){var n;function e(T,I){function b(){}b.prototype=I.prototype,T.D=I.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(D,S,P){for(var C=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)C[Hr-2]=arguments[Hr];return I.prototype[S].apply(D,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,I,b){b||(b=0);var D=Array(16);if(typeof I=="string")for(var S=0;16>S;++S)D[S]=I.charCodeAt(b++)|I.charCodeAt(b++)<<8|I.charCodeAt(b++)<<16|I.charCodeAt(b++)<<24;else for(S=0;16>S;++S)D[S]=I[b++]|I[b++]<<8|I[b++]<<16|I[b++]<<24;I=T.g[0],b=T.g[1],S=T.g[2];var P=T.g[3],C=I+(P^b&(S^P))+D[0]+3614090360&4294967295;I=b+(C<<7&4294967295|C>>>25),C=P+(S^I&(b^S))+D[1]+3905402710&4294967295,P=I+(C<<12&4294967295|C>>>20),C=S+(b^P&(I^b))+D[2]+606105819&4294967295,S=P+(C<<17&4294967295|C>>>15),C=b+(I^S&(P^I))+D[3]+3250441966&4294967295,b=S+(C<<22&4294967295|C>>>10),C=I+(P^b&(S^P))+D[4]+4118548399&4294967295,I=b+(C<<7&4294967295|C>>>25),C=P+(S^I&(b^S))+D[5]+1200080426&4294967295,P=I+(C<<12&4294967295|C>>>20),C=S+(b^P&(I^b))+D[6]+2821735955&4294967295,S=P+(C<<17&4294967295|C>>>15),C=b+(I^S&(P^I))+D[7]+4249261313&4294967295,b=S+(C<<22&4294967295|C>>>10),C=I+(P^b&(S^P))+D[8]+1770035416&4294967295,I=b+(C<<7&4294967295|C>>>25),C=P+(S^I&(b^S))+D[9]+2336552879&4294967295,P=I+(C<<12&4294967295|C>>>20),C=S+(b^P&(I^b))+D[10]+4294925233&4294967295,S=P+(C<<17&4294967295|C>>>15),C=b+(I^S&(P^I))+D[11]+2304563134&4294967295,b=S+(C<<22&4294967295|C>>>10),C=I+(P^b&(S^P))+D[12]+1804603682&4294967295,I=b+(C<<7&4294967295|C>>>25),C=P+(S^I&(b^S))+D[13]+4254626195&4294967295,P=I+(C<<12&4294967295|C>>>20),C=S+(b^P&(I^b))+D[14]+2792965006&4294967295,S=P+(C<<17&4294967295|C>>>15),C=b+(I^S&(P^I))+D[15]+1236535329&4294967295,b=S+(C<<22&4294967295|C>>>10),C=I+(S^P&(b^S))+D[1]+4129170786&4294967295,I=b+(C<<5&4294967295|C>>>27),C=P+(b^S&(I^b))+D[6]+3225465664&4294967295,P=I+(C<<9&4294967295|C>>>23),C=S+(I^b&(P^I))+D[11]+643717713&4294967295,S=P+(C<<14&4294967295|C>>>18),C=b+(P^I&(S^P))+D[0]+3921069994&4294967295,b=S+(C<<20&4294967295|C>>>12),C=I+(S^P&(b^S))+D[5]+3593408605&4294967295,I=b+(C<<5&4294967295|C>>>27),C=P+(b^S&(I^b))+D[10]+38016083&4294967295,P=I+(C<<9&4294967295|C>>>23),C=S+(I^b&(P^I))+D[15]+3634488961&4294967295,S=P+(C<<14&4294967295|C>>>18),C=b+(P^I&(S^P))+D[4]+3889429448&4294967295,b=S+(C<<20&4294967295|C>>>12),C=I+(S^P&(b^S))+D[9]+568446438&4294967295,I=b+(C<<5&4294967295|C>>>27),C=P+(b^S&(I^b))+D[14]+3275163606&4294967295,P=I+(C<<9&4294967295|C>>>23),C=S+(I^b&(P^I))+D[3]+4107603335&4294967295,S=P+(C<<14&4294967295|C>>>18),C=b+(P^I&(S^P))+D[8]+1163531501&4294967295,b=S+(C<<20&4294967295|C>>>12),C=I+(S^P&(b^S))+D[13]+2850285829&4294967295,I=b+(C<<5&4294967295|C>>>27),C=P+(b^S&(I^b))+D[2]+4243563512&4294967295,P=I+(C<<9&4294967295|C>>>23),C=S+(I^b&(P^I))+D[7]+1735328473&4294967295,S=P+(C<<14&4294967295|C>>>18),C=b+(P^I&(S^P))+D[12]+2368359562&4294967295,b=S+(C<<20&4294967295|C>>>12),C=I+(b^S^P)+D[5]+4294588738&4294967295,I=b+(C<<4&4294967295|C>>>28),C=P+(I^b^S)+D[8]+2272392833&4294967295,P=I+(C<<11&4294967295|C>>>21),C=S+(P^I^b)+D[11]+1839030562&4294967295,S=P+(C<<16&4294967295|C>>>16),C=b+(S^P^I)+D[14]+4259657740&4294967295,b=S+(C<<23&4294967295|C>>>9),C=I+(b^S^P)+D[1]+2763975236&4294967295,I=b+(C<<4&4294967295|C>>>28),C=P+(I^b^S)+D[4]+1272893353&4294967295,P=I+(C<<11&4294967295|C>>>21),C=S+(P^I^b)+D[7]+4139469664&4294967295,S=P+(C<<16&4294967295|C>>>16),C=b+(S^P^I)+D[10]+3200236656&4294967295,b=S+(C<<23&4294967295|C>>>9),C=I+(b^S^P)+D[13]+681279174&4294967295,I=b+(C<<4&4294967295|C>>>28),C=P+(I^b^S)+D[0]+3936430074&4294967295,P=I+(C<<11&4294967295|C>>>21),C=S+(P^I^b)+D[3]+3572445317&4294967295,S=P+(C<<16&4294967295|C>>>16),C=b+(S^P^I)+D[6]+76029189&4294967295,b=S+(C<<23&4294967295|C>>>9),C=I+(b^S^P)+D[9]+3654602809&4294967295,I=b+(C<<4&4294967295|C>>>28),C=P+(I^b^S)+D[12]+3873151461&4294967295,P=I+(C<<11&4294967295|C>>>21),C=S+(P^I^b)+D[15]+530742520&4294967295,S=P+(C<<16&4294967295|C>>>16),C=b+(S^P^I)+D[2]+3299628645&4294967295,b=S+(C<<23&4294967295|C>>>9),C=I+(S^(b|~P))+D[0]+4096336452&4294967295,I=b+(C<<6&4294967295|C>>>26),C=P+(b^(I|~S))+D[7]+1126891415&4294967295,P=I+(C<<10&4294967295|C>>>22),C=S+(I^(P|~b))+D[14]+2878612391&4294967295,S=P+(C<<15&4294967295|C>>>17),C=b+(P^(S|~I))+D[5]+4237533241&4294967295,b=S+(C<<21&4294967295|C>>>11),C=I+(S^(b|~P))+D[12]+1700485571&4294967295,I=b+(C<<6&4294967295|C>>>26),C=P+(b^(I|~S))+D[3]+2399980690&4294967295,P=I+(C<<10&4294967295|C>>>22),C=S+(I^(P|~b))+D[10]+4293915773&4294967295,S=P+(C<<15&4294967295|C>>>17),C=b+(P^(S|~I))+D[1]+2240044497&4294967295,b=S+(C<<21&4294967295|C>>>11),C=I+(S^(b|~P))+D[8]+1873313359&4294967295,I=b+(C<<6&4294967295|C>>>26),C=P+(b^(I|~S))+D[15]+4264355552&4294967295,P=I+(C<<10&4294967295|C>>>22),C=S+(I^(P|~b))+D[6]+2734768916&4294967295,S=P+(C<<15&4294967295|C>>>17),C=b+(P^(S|~I))+D[13]+1309151649&4294967295,b=S+(C<<21&4294967295|C>>>11),C=I+(S^(b|~P))+D[4]+4149444226&4294967295,I=b+(C<<6&4294967295|C>>>26),C=P+(b^(I|~S))+D[11]+3174756917&4294967295,P=I+(C<<10&4294967295|C>>>22),C=S+(I^(P|~b))+D[2]+718787259&4294967295,S=P+(C<<15&4294967295|C>>>17),C=b+(P^(S|~I))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+I&4294967295,T.g[1]=T.g[1]+(S+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.u=function(T,I){I===void 0&&(I=T.length);for(var b=I-this.blockSize,D=this.B,S=this.h,P=0;P<I;){if(S==0)for(;P<=b;)i(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<I;)if(D[S++]=T.charCodeAt(P++),S==this.blockSize){i(this,D),S=0;break}}else for(;P<I;)if(D[S++]=T[P++],S==this.blockSize){i(this,D),S=0;break}}this.h=S,this.o+=I},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var I=1;I<T.length-8;++I)T[I]=0;var b=8*this.o;for(I=T.length-8;I<T.length;++I)T[I]=b&255,b/=256;for(this.u(T),T=Array(16),I=b=0;4>I;++I)for(var D=0;32>D;D+=8)T[b++]=this.g[I]>>>D&255;return T};function o(T,I){var b=a;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=I(T)}function s(T,I){this.h=I;for(var b=[],D=!0,S=T.length-1;0<=S;S--){var P=T[S]|0;D&&P==I||(b[S]=P,D=!1)}this.g=b}var a={};function u(T){return-128<=T&&128>T?o(T,function(I){return new s([I|0],0>I?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return O(l(-T));for(var I=[],b=1,D=0;T>=b;D++)I[D]=T/b|0,b*=4294967296;return new s(I,0)}function h(T,I){if(T.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T.charAt(0)=="-")return O(h(T.substring(1),I));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=l(Math.pow(I,8)),D=p,S=0;S<T.length;S+=8){var P=Math.min(8,T.length-S),C=parseInt(T.substring(S,S+P),I);8>P?(P=l(Math.pow(I,P)),D=D.j(P).add(l(C))):(D=D.j(b),D=D.add(l(C)))}return D}var p=u(0),y=u(1),m=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-O(this).m();for(var T=0,I=1,b=0;b<this.g.length;b++){var D=this.i(b);T+=(0<=D?D:4294967296+D)*I,I*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(N(this))return"-"+O(this).toString(T);for(var I=l(Math.pow(T,6)),b=this,D="";;){var S=Fe(b,I).g;b=z(b,S.j(I));var P=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=S,A(b))return P+D;for(;6>P.length;)P="0"+P;D=P+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var I=0;I<T.g.length;I++)if(T.g[I]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=z(this,T),N(T)?-1:A(T)?0:1};function O(T){for(var I=T.g.length,b=[],D=0;D<I;D++)b[D]=~T.g[D];return new s(b,~T.h).add(y)}n.abs=function(){return N(this)?O(this):this},n.add=function(T){for(var I=Math.max(this.g.length,T.g.length),b=[],D=0,S=0;S<=I;S++){var P=D+(this.i(S)&65535)+(T.i(S)&65535),C=(P>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);D=C>>>16,P&=65535,C&=65535,b[S]=C<<16|P}return new s(b,b[b.length-1]&-2147483648?-1:0)};function z(T,I){return T.add(O(I))}n.j=function(T){if(A(this)||A(T))return p;if(N(this))return N(T)?O(this).j(O(T)):O(O(this).j(T));if(N(T))return O(this.j(O(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var I=this.g.length+T.g.length,b=[],D=0;D<2*I;D++)b[D]=0;for(D=0;D<this.g.length;D++)for(var S=0;S<T.g.length;S++){var P=this.i(D)>>>16,C=this.i(D)&65535,Hr=T.i(S)>>>16,dc=T.i(S)&65535;b[2*D+2*S]+=C*dc,de(b,2*D+2*S),b[2*D+2*S+1]+=P*dc,de(b,2*D+2*S+1),b[2*D+2*S+1]+=C*Hr,de(b,2*D+2*S+1),b[2*D+2*S+2]+=P*Hr,de(b,2*D+2*S+2)}for(D=0;D<I;D++)b[D]=b[2*D+1]<<16|b[2*D];for(D=I;D<2*I;D++)b[D]=0;return new s(b,0)};function de(T,I){for(;(T[I]&65535)!=T[I];)T[I+1]+=T[I]>>>16,T[I]&=65535,I++}function Y(T,I){this.g=T,this.h=I}function Fe(T,I){if(A(I))throw Error("division by zero");if(A(T))return new Y(p,p);if(N(T))return I=Fe(O(T),I),new Y(O(I.g),O(I.h));if(N(I))return I=Fe(T,O(I)),new Y(O(I.g),I.h);if(30<T.g.length){if(N(T)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var b=y,D=I;0>=D.l(T);)b=Ct(b),D=Ct(D);var S=Me(b,1),P=Me(D,1);for(D=Me(D,2),b=Me(b,2);!A(D);){var C=P.add(D);0>=C.l(T)&&(S=S.add(b),P=C),D=Me(D,1),b=Me(b,1)}return I=z(T,S.j(I)),new Y(S,I)}for(S=p;0<=T.l(I);){for(b=Math.max(1,Math.floor(T.m()/I.m())),D=Math.ceil(Math.log(b)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),P=l(b),C=P.j(I);N(C)||0<C.l(T);)b-=D,P=l(b),C=P.j(I);A(P)&&(P=y),S=S.add(P),T=z(T,C)}return new Y(S,T)}n.A=function(T){return Fe(this,T).h},n.and=function(T){for(var I=Math.max(this.g.length,T.g.length),b=[],D=0;D<I;D++)b[D]=this.i(D)&T.i(D);return new s(b,this.h&T.h)},n.or=function(T){for(var I=Math.max(this.g.length,T.g.length),b=[],D=0;D<I;D++)b[D]=this.i(D)|T.i(D);return new s(b,this.h|T.h)},n.xor=function(T){for(var I=Math.max(this.g.length,T.g.length),b=[],D=0;D<I;D++)b[D]=this.i(D)^T.i(D);return new s(b,this.h^T.h)};function Ct(T){for(var I=T.g.length+1,b=[],D=0;D<I;D++)b[D]=T.i(D)<<1|T.i(D-1)>>>31;return new s(b,T.h)}function Me(T,I){var b=I>>5;I%=32;for(var D=T.g.length-b,S=[],P=0;P<D;P++)S[P]=0<I?T.i(P+b)>>>I|T.i(P+b+1)<<32-I:T.i(P+b);return new s(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Pw=ax.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,hi=ax.Integer=s}).apply(typeof sx<"u"?sx:typeof self<"u"?self:typeof window<"u"?window:{});var mp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fi={};var Rw,J3,Na,xw,il,yp,Nw,Ow,kw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof mp=="object"&&mp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var M=c[g];if(!(M in f))break e;f=f[M]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,M={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,g),c.apply(d,M)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function m(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,M,x){for(var B=Array(arguments.length-2),je=2;je<arguments.length;je++)B[je-2]=arguments[je];return d.prototype[M].apply(g,B)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function O(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let M=c.length||0,x=g.length||0;c.length=M+x;for(let B=0;B<x;B++)c[M+B]=g[B]}else c.push(g)}}class z{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function de(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Fe(c){return Fe[" "](c),c}Fe[" "]=function(){};var Ct=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function Me(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function I(c){let d={};for(let f in c)d[f]=c[f];return d}let b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,d){let f,g;for(let M=1;M<arguments.length;M++){g=arguments[M];for(f in g)c[f]=g[f];for(let x=0;x<b.length;x++)f=b[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function S(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function P(c){a.setTimeout(()=>{throw c},0)}function C(){var c=Zg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Hr{constructor(){this.h=this.g=null}add(d,f){let g=dc.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var dc=new z(()=>new Bk,c=>c.reset());class Bk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let hc,fc=!1,Zg=new Hr,bC=()=>{let c=a.Promise.resolve(void 0);hc=()=>{c.then($k)}};var $k=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(f){P(f)}var d=dc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}fc=!1};function wi(){this.s=this.s,this.C=this.C}wi.prototype.s=!1,wi.prototype.ma=function(){this.s||(this.s=!0,this.N())},wi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var Hk=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function pc(c,d){if(Mt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ct){e:{try{Fe(d.nodeName);var M=!0;break e}catch{}M=!1}M||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:zk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&pc.aa.h.call(this)}}A(pc,Mt);var zk={2:"touch",3:"pen",4:"mouse"};pc.prototype.h=function(){pc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var gc="closure_listenable_"+(1e6*Math.random()|0),qk=0;function Gk(c,d,f,g,M){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=M,this.key=++qk,this.da=this.fa=!1}function jl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Bl(c){this.src=c,this.g={},this.h=0}Bl.prototype.add=function(c,d,f,g,M){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var B=Xg(c,d,g,M);return-1<B?(d=c[B],f||(d.fa=!1)):(d=new Gk(d,this.src,x,!!g,M),d.fa=f,c.push(d)),d};function Jg(c,d){var f=d.type;if(f in c.g){var g=c.g[f],M=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=M)&&Array.prototype.splice.call(g,M,1),x&&(jl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Xg(c,d,f,g){for(var M=0;M<c.length;++M){var x=c[M];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return M}return-1}var em="closure_lm_"+(1e6*Math.random()|0),tm={};function DC(c,d,f,g,M){if(g&&g.once)return SC(c,d,f,g,M);if(Array.isArray(d)){for(var x=0;x<d.length;x++)DC(c,d[x],f,g,M);return null}return f=om(f),c&&c[gc]?c.K(d,f,l(g)?!!g.capture:!!g,M):TC(c,d,f,!1,g,M)}function TC(c,d,f,g,M,x){if(!d)throw Error("Invalid event type");var B=l(M)?!!M.capture:!!M,je=rm(c);if(je||(c[em]=je=new Bl(c)),f=je.add(d,f,g,B,x),f.proxy)return f;if(g=Wk(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)Hk||(M=B),M===void 0&&(M=!1),c.addEventListener(d.toString(),g,M);else if(c.attachEvent)c.attachEvent(MC(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Wk(){function c(f){return d.call(c.src,c.listener,f)}let d=Kk;return c}function SC(c,d,f,g,M){if(Array.isArray(d)){for(var x=0;x<d.length;x++)SC(c,d[x],f,g,M);return null}return f=om(f),c&&c[gc]?c.L(d,f,l(g)?!!g.capture:!!g,M):TC(c,d,f,!0,g,M)}function AC(c,d,f,g,M){if(Array.isArray(d))for(var x=0;x<d.length;x++)AC(c,d[x],f,g,M);else g=l(g)?!!g.capture:!!g,f=om(f),c&&c[gc]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=Xg(x,f,g,M),-1<f&&(jl(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=rm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Xg(d,f,g,M)),(f=-1<c?d[c]:null)&&nm(f))}function nm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[gc])Jg(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(MC(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=rm(d))?(Jg(f,c),f.h==0&&(f.src=null,d[em]=null)):jl(c)}}}function MC(c){return c in tm?tm[c]:tm[c]="on"+c}function Kk(c,d){if(c.da)c=!0;else{d=new pc(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&nm(c),c=f.call(g,d)}return c}function rm(c){return c=c[em],c instanceof Bl?c:null}var im="__closure_events_fn_"+(1e9*Math.random()>>>0);function om(c){return typeof c=="function"?c:(c[im]||(c[im]=function(d){return c.handleEvent(d)}),c[im])}function Pt(){wi.call(this),this.i=new Bl(this),this.M=this,this.F=null}A(Pt,wi),Pt.prototype[gc]=!0,Pt.prototype.removeEventListener=function(c,d,f,g){AC(this,c,d,f,g)};function Ht(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Mt(d,c);else if(d instanceof Mt)d.target=d.target||c;else{var M=d;d=new Mt(g,c),D(d,M)}if(M=!0,f)for(var x=f.length-1;0<=x;x--){var B=d.g=f[x];M=$l(B,g,!0,d)&&M}if(B=d.g=c,M=$l(B,g,!0,d)&&M,M=$l(B,g,!1,d)&&M,f)for(x=0;x<f.length;x++)B=d.g=f[x],M=$l(B,g,!1,d)&&M}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)jl(f[g]);delete c.g[d],c.h--}}this.F=null},Pt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Pt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function $l(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var M=!0,x=0;x<d.length;++x){var B=d[x];if(B&&!B.da&&B.capture==f){var je=B.listener,bt=B.ha||B.src;B.fa&&Jg(c.i,B),M=je.call(bt,g)!==!1&&M}}return M&&!g.defaultPrevented}function PC(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function RC(c){c.g=PC(()=>{c.g=null,c.i&&(c.i=!1,RC(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class Qk extends wi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:RC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mc(c){wi.call(this),this.h=c,this.g={}}A(mc,wi);var xC=[];function NC(c){Me(c.g,function(d,f){this.g.hasOwnProperty(f)&&nm(d)},c),c.g={}}mc.prototype.N=function(){mc.aa.N.call(this),NC(this)},mc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sm=a.JSON.stringify,Yk=a.JSON.parse,Zk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function am(){}am.prototype.h=null;function OC(c){return c.h||(c.h=c.i())}function kC(){}var yc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cm(){Mt.call(this,"d")}A(cm,Mt);function um(){Mt.call(this,"c")}A(um,Mt);var uo={},FC=null;function Hl(){return FC=FC||new Pt}uo.La="serverreachability";function LC(c){Mt.call(this,uo.La,c)}A(LC,Mt);function vc(c){let d=Hl();Ht(d,new LC(d))}uo.STAT_EVENT="statevent";function VC(c,d){Mt.call(this,uo.STAT_EVENT,c),this.stat=d}A(VC,Mt);function zt(c){let d=Hl();Ht(d,new VC(d,c))}uo.Ma="timingevent";function UC(c,d){Mt.call(this,uo.Ma,c),this.size=d}A(UC,Mt);function _c(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ec(){this.g=!0}Ec.prototype.xa=function(){this.g=!1};function Jk(c,d,f,g,M,x){c.info(function(){if(c.g)if(x)for(var B="",je=x.split("&"),bt=0;bt<je.length;bt++){var Se=je[bt].split("=");if(1<Se.length){var Rt=Se[0];Se=Se[1];var xt=Rt.split("_");B=2<=xt.length&&xt[1]=="type"?B+(Rt+"="+Se+"&"):B+(Rt+"=redacted&")}}else B=null;else B=x;return"XMLHTTP REQ ("+g+") [attempt "+M+"]: "+d+`
`+f+`
`+B})}function Xk(c,d,f,g,M,x,B){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+M+"]: "+d+`
`+f+`
`+x+" "+B})}function Es(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+t1(c,f)+(g?" "+g:"")})}function e1(c,d){c.info(function(){return"TIMEOUT: "+d})}Ec.prototype.info=function(){};function t1(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var M=g[1];if(Array.isArray(M)&&!(1>M.length)){var x=M[0];if(x!="noop"&&x!="stop"&&x!="close")for(var B=1;B<M.length;B++)M[B]=""}}}}return sm(f)}catch{return d}}var zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lm;function ql(){}A(ql,am),ql.prototype.g=function(){return new XMLHttpRequest},ql.prototype.i=function(){return{}},lm=new ql;function Ii(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new mc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new BC}function BC(){this.i=null,this.g="",this.h=!1}var $C={},dm={};function hm(c,d,f){c.L=1,c.v=Ql(zr(d)),c.m=f,c.P=!0,HC(c,null)}function HC(c,d){c.F=Date.now(),Gl(c),c.A=zr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),rb(f.i,"t",g),c.C=0,f=c.j.J,c.h=new BC,c.g=wb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new Qk(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(xC[0]=M.toString()),M=xC);for(var x=0;x<M.length;x++){var B=DC(f,M[x],g||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),vc(),Jk(c.i,c.u,c.A,c.l,c.R,c.m)}Ii.prototype.ca=function(c){c=c.target;let d=this.M;d&&qr(c)==3?d.j():this.Y(c)},Ii.prototype.Y=function(c){try{if(c==this.g)e:{let xt=qr(this.g);var d=this.g.Ba();let Cs=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||lb(this.g)))){this.J||xt!=4||d==7||(d==8||0>=Cs?vc(3):vc(2)),fm(this);var f=this.g.Z();this.X=f;t:if(zC(this)){var g=lb(this.g);c="";var M=g.length,x=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lo(this),wc(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<M;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==M-1)});g.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,Xk(this.i,this.u,this.A,this.l,this.R,xt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var je,bt=this.g;if((je=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(je)){var Se=je;break t}}Se=null}if(f=Se)Es(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pm(this,f);else{this.o=!1,this.s=3,zt(12),lo(this),wc(this);break e}}if(this.P){f=!0;let zn;for(;!this.J&&this.C<B.length;)if(zn=n1(this,B),zn==dm){xt==4&&(this.s=4,zt(14),f=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==$C){this.s=4,zt(15),Es(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else Es(this.i,this.l,zn,null),pm(this,zn);if(zC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||B.length!=0||this.h.h||(this.s=1,zt(16),f=!1),this.o=this.o&&f,!f)Es(this.i,this.l,B,"[Invalid Chunked Response]"),lo(this),wc(this);else if(0<B.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Em(Rt),Rt.M=!0,zt(11))}}else Es(this.i,this.l,B,null),pm(this,B);xt==4&&lo(this),this.o&&!this.J&&(xt==4?yb(this.j,this):(this.o=!1,Gl(this)))}else _1(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),lo(this),wc(this)}}}catch{}finally{}};function zC(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function n1(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?dm:(f=Number(d.substring(f,g)),isNaN(f)?$C:(g+=1,g+f>d.length?dm:(d=d.slice(g,g+f),c.C=g+f,d)))}Ii.prototype.cancel=function(){this.J=!0,lo(this)};function Gl(c){c.S=Date.now()+c.I,qC(c,c.I)}function qC(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=_c(y(c.ba,c),d)}function fm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Ii.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(e1(this.i,this.A),this.L!=2&&(vc(),zt(17)),lo(this),this.s=2,wc(this)):qC(this,this.S-c)};function wc(c){c.j.G==0||c.J||yb(c.j,c)}function lo(c){fm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,NC(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function pm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||gm(f.h,c))){if(!c.K&&gm(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var M=g;if(M[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ed(f),Jl(f);else break e;_m(f),zt(18)}}else f.za=M[1],0<f.za-f.T&&37500>M[2]&&f.F&&f.v==0&&!f.C&&(f.C=_c(y(f.Za,f),6e3));if(1>=KC(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else fo(f,11)}else if((c.K||f.g==c)&&ed(f),!de(d))for(M=f.Da.g.parse(d),d=0;d<M.length;d++){let Se=M[d];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];let Rt=Se[3];Rt!=null&&(f.la=Rt,f.j.info("VER="+f.la));let xt=Se[4];xt!=null&&(f.Aa=xt,f.j.info("SVER="+f.Aa));let Cs=Se[5];Cs!=null&&typeof Cs=="number"&&0<Cs&&(g=1.5*Cs,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let zn=c.g;if(zn){let nd=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nd){var x=g.h;x.g||nd.indexOf("spdy")==-1&&nd.indexOf("quic")==-1&&nd.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(mm(x,x.h),x.h=null))}if(g.D){let wm=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;wm&&(g.ya=wm,Ge(g.I,g.D,wm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var B=c;if(g.qa=Eb(g,g.J?g.ia:null,g.W),B.K){QC(g.h,B);var je=B,bt=g.L;bt&&(je.I=bt),je.B&&(fm(je),Gl(je)),g.g=B}else gb(g);0<f.i.length&&Xl(f)}else Se[0]!="stop"&&Se[0]!="close"||fo(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?fo(f,7):vm(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}vc(4)}catch{}}var r1=class{constructor(c,d){this.g=c,this.map=d}};function GC(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function WC(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function KC(c){return c.h?1:c.g?c.g.size:0}function gm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function mm(c,d){c.g?c.g.add(d):c.h=d}function QC(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}GC.prototype.cancel=function(){if(this.i=YC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function YC(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function i1(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function o1(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function ZC(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=o1(c),g=i1(c),M=g.length,x=0;x<M;x++)d.call(void 0,g[x],f&&f[x],c)}var JC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function s1(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),M=null;if(0<=g){var x=c[f].substring(0,g);M=c[f].substring(g+1)}else x=c[f];d(x,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ho(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ho){this.h=c.h,Wl(this,c.j),this.o=c.o,this.g=c.g,Kl(this,c.s),this.l=c.l;var d=c.i,f=new bc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),XC(this,f),this.m=c.m}else c&&(d=String(c).match(JC))?(this.h=!1,Wl(this,d[1]||"",!0),this.o=Ic(d[2]||""),this.g=Ic(d[3]||"",!0),Kl(this,d[4]),this.l=Ic(d[5]||"",!0),XC(this,d[6]||"",!0),this.m=Ic(d[7]||"")):(this.h=!1,this.i=new bc(null,this.h))}ho.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Cc(d,eb,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Cc(d,eb,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Cc(f,f.charAt(0)=="/"?u1:c1,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Cc(f,d1)),c.join("")};function zr(c){return new ho(c)}function Wl(c,d,f){c.j=f?Ic(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Kl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function XC(c,d,f){d instanceof bc?(c.i=d,h1(c.i,c.h)):(f||(d=Cc(d,l1)),c.i=new bc(d,c.h))}function Ge(c,d,f){c.i.set(d,f)}function Ql(c){return Ge(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ic(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Cc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,a1),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function a1(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var eb=/[#\/\?@]/g,c1=/[#\?:]/g,u1=/[#\?]/g,l1=/[#\?@]/g,d1=/#/g;function bc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ci(c){c.g||(c.g=new Map,c.h=0,c.i&&s1(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=bc.prototype,n.add=function(c,d){Ci(this),this.i=null,c=ws(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function tb(c,d){Ci(c),d=ws(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function nb(c,d){return Ci(c),d=ws(c,d),c.g.has(d)}n.forEach=function(c,d){Ci(this),this.g.forEach(function(f,g){f.forEach(function(M){c.call(d,M,g,this)},this)},this)},n.na=function(){Ci(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let M=c[g];for(let x=0;x<M.length;x++)f.push(d[g])}return f},n.V=function(c){Ci(this);let d=[];if(typeof c=="string")nb(this,c)&&(d=d.concat(this.g.get(ws(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Ci(this),this.i=null,c=ws(this,c),nb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function rb(c,d,f){tb(c,d),0<f.length&&(c.i=null,c.g.set(ws(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var M=x;B[g]!==""&&(M+="="+encodeURIComponent(String(B[g]))),c.push(M)}}return this.i=c.join("&")};function ws(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function h1(c,d){d&&!c.j&&(Ci(c),c.i=null,c.g.forEach(function(f,g){var M=g.toLowerCase();g!=M&&(tb(this,g),rb(this,M,f))},c)),c.j=d}function f1(c,d){let f=new Ec;if(a.Image){let g=new Image;g.onload=m(bi,f,"TestLoadImage: loaded",!0,d,g),g.onerror=m(bi,f,"TestLoadImage: error",!1,d,g),g.onabort=m(bi,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=m(bi,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function p1(c,d){let f=new Ec,g=new AbortController,M=setTimeout(()=>{g.abort(),bi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(M),x.ok?bi(f,"TestPingServer: ok",!0,d):bi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),bi(f,"TestPingServer: error",!1,d)})}function bi(c,d,f,g,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),g(f)}catch{}}function g1(){this.g=new Zk}function m1(c,d,f){let g=f||"";try{ZC(c,function(M,x){let B=M;l(M)&&(B=sm(M)),d.push(g+x+"="+encodeURIComponent(B))})}catch(M){throw d.push(g+"type="+encodeURIComponent("_badmap")),M}}function Dc(c){this.l=c.Ub||null,this.j=c.eb||!1}A(Dc,am),Dc.prototype.g=function(){return new Yl(this.l,this.j)},Dc.prototype.i=function(c){return function(){return c}}({});function Yl(c,d){Pt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Yl,Pt),n=Yl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Sc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Sc(this)),this.g&&(this.readyState=3,Sc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ib(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ib(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Tc(this):Sc(this),this.readyState==3&&ib(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Tc(this))},n.Qa=function(c){this.g&&(this.response=c,Tc(this))},n.ga=function(){this.g&&Tc(this)};function Tc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Sc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Sc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ob(c){let d="";return Me(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ym(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=ob(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ge(c,d,f))}function Ze(c){Pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ze,Pt);var y1=/^https?$/i,v1=["POST","PUT"];n=Ze.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lm.g(),this.v=this.o?OC(this.o):OC(lm),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){sb(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var M in g)f.set(M,g[M]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(v1,d,void 0))||g||M||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,B]of f)this.g.setRequestHeader(x,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ub(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){sb(this,x)}};function sb(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,ab(c),Zl(c)}function ab(c){c.A||(c.A=!0,Ht(c,"complete"),Ht(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ht(this,"complete"),Ht(this,"abort"),Zl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zl(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?cb(this):this.bb())},n.bb=function(){cb(this)};function cb(c){if(c.h&&typeof s<"u"&&(!c.v[1]||qr(c)!=4||c.Z()!=2)){if(c.u&&qr(c)==4)PC(c.Ea,0,c);else if(Ht(c,"readystatechange"),qr(c)==4){c.h=!1;try{let B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=B===0){var M=String(c.D).match(JC)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),g=!y1.test(M?M.toLowerCase():"")}f=g}if(f)Ht(c,"complete"),Ht(c,"success");else{c.m=6;try{var x=2<qr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",ab(c)}}finally{Zl(c)}}}}function Zl(c,d){if(c.g){ub(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ht(c,"ready");try{f.onreadystatechange=g}catch{}}}function ub(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function qr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Yk(d)}};function lb(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _1(c){let d={};c=(c.g&&2<=qr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(de(c[g]))continue;var f=S(c[g]);let M=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[M]||[];d[M]=x,x.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ac(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function db(c){this.Aa=0,this.i=[],this.j=new Ec,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ac("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ac("baseRetryDelayMs",5e3,c),this.cb=Ac("retryDelaySeedMs",1e4,c),this.Wa=Ac("forwardChannelMaxRetries",2,c),this.wa=Ac("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new GC(c&&c.concurrentRequestLimit),this.Da=new g1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=db.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){zt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Eb(this,null,this.W),Xl(this)};function vm(c){if(hb(c),c.G==3){var d=c.U++,f=zr(c.I);if(Ge(f,"SID",c.K),Ge(f,"RID",d),Ge(f,"TYPE","terminate"),Mc(c,f),d=new Ii(c,c.j,d),d.L=2,d.v=Ql(zr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=wb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Gl(d)}_b(c)}function Jl(c){c.g&&(Em(c),c.g.cancel(),c.g=null)}function hb(c){Jl(c),c.u&&(a.clearTimeout(c.u),c.u=null),ed(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Xl(c){if(!WC(c.h)&&!c.s){c.s=!0;var d=c.Ga;hc||bC(),fc||(hc(),fc=!0),Zg.add(d,c),c.B=0}}function E1(c,d){return KC(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=_c(y(c.Ga,c,d),vb(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let M=new Ii(this,this.j,c),x=this.o;if(this.S&&(x?(x=I(x),D(x,this.S)):x=this.S),this.m!==null||this.O||(M.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=pb(this,M,d),f=zr(this.I),Ge(f,"RID",c),Ge(f,"CVER",22),this.D&&Ge(f,"X-HTTP-Session-Id",this.D),Mc(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(ob(x)))+"&"+d:this.m&&ym(f,this.m,x)),mm(this.h,M),this.Ua&&Ge(f,"TYPE","init"),this.P?(Ge(f,"$req",d),Ge(f,"SID","null"),M.T=!0,hm(M,f,null)):hm(M,f,d),this.G=2}}else this.G==3&&(c?fb(this,c):this.i.length==0||WC(this.h)||fb(this))};function fb(c,d){var f;d?f=d.l:f=c.U++;let g=zr(c.I);Ge(g,"SID",c.K),Ge(g,"RID",f),Ge(g,"AID",c.T),Mc(c,g),c.m&&c.o&&ym(g,c.m,c.o),f=new Ii(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=pb(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),mm(c.h,f),hm(f,g,d)}function Mc(c,d){c.H&&Me(c.H,function(f,g){Ge(d,g,f)}),c.l&&ZC({},function(f,g){Ge(d,g,f)})}function pb(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var M=c.i;let x=-1;for(;;){let B=["count="+f];x==-1?0<f?(x=M[0].g,B.push("ofs="+x)):x=0:B.push("ofs="+x);let je=!0;for(let bt=0;bt<f;bt++){let Se=M[bt].g,Rt=M[bt].map;if(Se-=x,0>Se)x=Math.max(0,M[bt].g-100),je=!1;else try{m1(Rt,B,"req"+Se+"_")}catch{g&&g(Rt)}}if(je){g=B.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function gb(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;hc||bC(),fc||(hc(),fc=!0),Zg.add(d,c),c.v=0}}function _m(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=_c(y(c.Fa,c),vb(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,mb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=_c(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),Jl(this),mb(this))};function Em(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function mb(c){c.g=new Ii(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=zr(c.qa);Ge(d,"RID","rpc"),Ge(d,"SID",c.K),Ge(d,"AID",c.T),Ge(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ge(d,"TO",c.ja),Ge(d,"TYPE","xmlhttp"),Mc(c,d),c.m&&c.o&&ym(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ql(zr(d)),f.m=null,f.P=!0,HC(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Jl(this),_m(this),zt(19))};function ed(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function yb(c,d){var f=null;if(c.g==d){ed(c),Em(c),c.g=null;var g=2}else if(gm(c.h,d))f=d.D,QC(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var M=c.B;g=Hl(),Ht(g,new UC(g,f)),Xl(c)}else gb(c);else if(M=d.s,M==3||M==0&&0<d.X||!(g==1&&E1(c,d)||g==2&&_m(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),M){case 1:fo(c,5);break;case 4:fo(c,10);break;case 3:fo(c,6);break;default:fo(c,2)}}}function vb(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function fo(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let M=!g;g=new ho(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wl(g,"https"),Ql(g),M?f1(g.toString(),f):p1(g.toString(),f)}else zt(2);c.G=0,c.l&&c.l.sa(d),_b(c),hb(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function _b(c){if(c.G=0,c.ka=[],c.l){let d=YC(c.h);(d.length!=0||c.i.length!=0)&&(O(c.ka,d),O(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Eb(c,d,f){var g=f instanceof ho?zr(f):new ho(f);if(g.g!="")d&&(g.g=d+"."+g.g),Kl(g,g.s);else{var M=a.location;g=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;var x=new ho(null);g&&Wl(x,g),d&&(x.g=d),M&&Kl(x,M),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&Ge(g,f,d),Ge(g,"VER",c.la),Mc(c,g),g}function wb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ze(new Dc({eb:f})):new Ze(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ib(){}n=Ib.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function td(){}td.prototype.g=function(c,d){return new hn(c,d)};function hn(c,d){Pt.call(this),this.g=new db(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!de(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!de(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Is(this)}A(hn,Pt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){vm(this.g)},hn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=sm(c),c=f);d.i.push(new r1(d.Ya++,c)),d.G==3&&Xl(d)},hn.prototype.N=function(){this.g.l=null,delete this.j,vm(this.g),delete this.g,hn.aa.N.call(this)};function Cb(c){cm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(Cb,cm);function bb(){um.call(this),this.status=1}A(bb,um);function Is(c){this.g=c}A(Is,Ib),Is.prototype.ua=function(){Ht(this.g,"a")},Is.prototype.ta=function(c){Ht(this.g,new Cb(c))},Is.prototype.sa=function(c){Ht(this.g,new bb)},Is.prototype.ra=function(){Ht(this.g,"b")},td.prototype.createWebChannel=td.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,kw=fi.createWebChannelTransport=function(){return new td},Ow=fi.getStatEventTarget=function(){return Hl()},Nw=fi.Event=uo,yp=fi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zl.NO_ERROR=0,zl.TIMEOUT=8,zl.HTTP_ERROR=6,il=fi.ErrorCode=zl,jC.COMPLETE="complete",xw=fi.EventType=jC,kC.EventType=yc,yc.OPEN="a",yc.CLOSE="b",yc.ERROR="c",yc.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,Na=fi.WebChannel=kC,J3=fi.FetchXmlHttpFactory=Dc,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,Rw=fi.XhrIo=Ze}).apply(typeof mp<"u"?mp:typeof self<"u"?self:typeof window<"u"?window:{});var cx="@firebase/firestore",ux="4.7.10";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var Xa="11.5.0";var os=new Mr("@firebase/firestore");function Oa(){return os.logLevel}function G(n,...e){if(os.logLevel<=ye.DEBUG){let t=e.map(b0);os.debug(`Firestore (${Xa}): ${n}`,...t)}}function gi(n,...e){if(os.logLevel<=ye.ERROR){let t=e.map(b0);os.error(`Firestore (${Xa}): ${n}`,...t)}}function Ba(n,...e){if(os.logLevel<=ye.WARN){let t=e.map(b0);os.warn(`Firestore (${Xa}): ${n}`,...t)}}function b0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n="Unexpected state"){let e=`FIRESTORE (${Xa}) INTERNAL ASSERTION FAILED: `+n;throw gi(e),new Error(e)}function Oe(n,e){n||ne()}function se(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},W=class extends Qt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var sr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var bp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},jw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}},Bw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},$w=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new bp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Et(e)}},Hw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},zw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Hw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Dp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},qw=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,St(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0);let r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Dp(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new Dp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function X3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function eN(){return new TextEncoder}var Tp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=X3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function Gw(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return me(r,i);{let o=eN(),s=e5(o.encode(lx(n,t)),o.encode(lx(e,t)));return s!==0?s:me(r,i)}}t+=r>65535?2:1}return me(n.length,e.length)}function lx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function e5(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return me(n[t],e[t]);return me(n.length,e.length)}function $a(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var dx=-62135596800,hx=1e6,At=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*hx);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dx)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hx}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-dx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new At(0,0))}static max(){return new n(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fx="__name__",Sp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(),r===void 0?r=e.length-t:r>e.length-t&&ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return me(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Gw(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}},Ye=class n extends Sp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new W(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},t5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wn=class n extends Sp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return t5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fx}static keyField(){return new n([fx])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new W(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ye.fromString(e))}static fromName(e){return new n(Ye.fromString(e).popFirst(5))}static empty(){return new n(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ye(e.slice()))}};var ll=-1,Ww=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ww.UNKNOWN_ID=-1;function n5(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new ss(i,te.empty(),e)}function r5(n){return new ss(n.readTime,n.key,ll)}var ss=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),te.empty(),ll)}static max(){return new n(ce.max(),te.empty(),ll)}};function i5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var o5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ec(n){return _(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==o5)throw n;G("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function s5(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tc(n){return n.name==="IndexedDbTransactionError"}var D0=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),T0=-1;function ig(n){return n==null}function dl(n){return n===0&&1/n==-1/0}function a5(n){return typeof n=="number"&&Number.isInteger(n)&&!dl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var tN="";function c5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=px(e)),e=u5(n.get(t),e);return px(e)}function u5(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case tN:t+="";break;default:t+=o}}return t}function px(n){return n+tN+""}var l5="remoteDocuments",nN="owner";var rN="mutationQueues";var iN="mutations";var oN="documentMutations",d5="remoteDocumentsV14";var sN="remoteDocumentGlobal";var aN="targets";var cN="targetDocuments";var uN="targetGlobal",lN="collectionParents";var dN="clientMetadata";var hN="bundles";var fN="namedQueries";var h5="indexConfiguration";var f5="indexState";var p5="indexEntries";var pN="documentOverlays";var g5="globals";var m5=[rN,iN,oN,l5,aN,nN,uN,cN,dN,sN,lN,hN,fN],xie=[...m5,pN],y5=[rN,iN,oN,d5,aN,nN,uN,cN,dN,sN,lN,hN,fN,pN],v5=y5,_5=[...v5,h5,f5,p5];var Nie=[..._5,g5];function gx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ps(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var et=class n{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}},Va=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Lr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1;Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Lr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wt=class n{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ap(this.data.getIterator())}getIteratorFrom(e){return new Ap(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ap=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Fr=class n{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new n([])}unionWith(e){let t=new wt(wn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $a(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Mp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Mp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jt.EMPTY_BYTE_STRING=new jt("");var E5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(n){if(Oe(!!n),typeof n=="string"){let e=0,t=E5.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(n.seconds),nanos:We(n.nanos)}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yi(n){return typeof n=="string"?jt.fromBase64String(n):jt.fromUint8Array(n)}var mN="server_timestamp",yN="__type__",vN="__previous_value__",_N="__local_write_time__";function S0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[yN])===null||t===void 0?void 0:t.stringValue)===mN}function og(n){let e=n.mapValue.fields[vN];return S0(e)?og(e):e}function hl(n){let e=mi(n.mapValue.fields[_N].timestampValue);return new At(e.seconds,e.nanos)}var Qw=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Pp="(default)",Rp=class n{constructor(e,t){this.projectId=e,this.database=t||Pp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Pp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var A0="__type__",EN="__max__",vp={mapValue:{fields:{__type__:{stringValue:EN}}}},M0="__vector__",Ha="value";function eo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?S0(n)?4:IN(n)?9007199254740991:wN(n)?10:11:ne()}function jr(n,e){if(n===e)return!0;let t=eo(n);if(t!==eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hl(n).isEqual(hl(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=mi(i.timestampValue),a=mi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return yi(i.bytesValue).isEqual(yi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return We(i.geoPointValue.latitude)===We(o.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return We(i.integerValue)===We(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=We(i.doubleValue),a=We(o.doubleValue);return s===a?dl(s)===dl(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return $a(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(gx(s)!==gx(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!jr(s[u],a[u])))return!1;return!0}(n,e);default:return ne()}}function fl(n,e){return(n.values||[]).find(t=>jr(t,e))!==void 0}function za(n,e){if(n===e)return 0;let t=eo(n),r=eo(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=We(o.integerValue||o.doubleValue),u=We(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return mx(n.timestampValue,e.timestampValue);case 4:return mx(hl(n),hl(e));case 5:return Gw(n.stringValue,e.stringValue);case 6:return function(o,s){let a=yi(o),u=yi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=me(We(o.latitude),We(s.latitude));return a!==0?a:me(We(o.longitude),We(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return yx(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},m=(a=p[Ha])===null||a===void 0?void 0:a.arrayValue,A=(u=y[Ha])===null||u===void 0?void 0:u.arrayValue,N=me(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:yx(m,A)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===vp.mapValue&&s===vp.mapValue)return 0;if(o===vp.mapValue)return 1;if(s===vp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=Gw(u[p],h[p]);if(y!==0)return y;let m=za(a[u[p]],l[h[p]]);if(m!==0)return m}return me(u.length,h.length)}(n.mapValue,e.mapValue);default:throw ne()}}function mx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=mi(n),r=mi(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function yx(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=za(t[i],r[i]);if(o)return o}return me(t.length,r.length)}function qa(n){return Yw(n)}function Yw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=mi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Yw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Yw(t.fields[s])}`;return i+"}"}(n.mapValue):ne()}function wp(n){switch(eo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=og(n);return e?16+wp(e):16;case 5:return 2*n.stringValue.length;case 6:return yi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+wp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ps(r.fields,(o,s)=>{i+=o.length+wp(s)}),i}(n.mapValue);default:throw ne()}}function vx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zw(n){return!!n&&"integerValue"in n}function P0(n){return!!n&&"arrayValue"in n}function _x(n){return!!n&&"nullValue"in n}function Ex(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ip(n){return!!n&&"mapValue"in n}function wN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[A0])===null||t===void 0?void 0:t.stringValue)===M0}function sl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ps(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function IN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===EN}var kie={mapValue:{fields:{[A0]:{stringValue:M0},[Ha]:{arrayValue:{}}}}};var or=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ip(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sl(t)}setAll(e){let t=wn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=sl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Ip(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ip(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ps(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(sl(this.value))}};function CN(n){let e=[];return ps(n.fields,(t,r)=>{let i=new wn([t]);if(Ip(r)){let o=CN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Fr(e)}var ar=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),or.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),or.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ga=class{constructor(e,t){this.position=e,this.inclusive=t}};function wx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),t.key):r=za(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ix(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}var Wa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function w5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var xp=class{},lt=class n extends xp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Xw(e,t,r):t==="array-contains"?new nI(e,r):t==="in"?new rI(e,r):t==="not-in"?new iI(e,r):t==="array-contains-any"?new oI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new eI(e,r):new tI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(za(t,this.value)):t!==null&&eo(this.value)===eo(t)&&this.matchesComparison(za(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},cr=class n extends xp{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return bN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function bN(n){return n.op==="and"}function DN(n){return I5(n)&&bN(n)}function I5(n){for(let e of n.filters)if(e instanceof cr)return!1;return!0}function Jw(n){if(n instanceof lt)return n.field.canonicalString()+n.op.toString()+qa(n.value);if(DN(n))return n.filters.map(e=>Jw(e)).join(",");{let e=n.filters.map(t=>Jw(t)).join(",");return`${n.op}(${e})`}}function TN(n,e){return n instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)}(n,e):n instanceof cr?function(r,i){return i instanceof cr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&TN(s,i.filters[a]),!0):!1}(n,e):void ne()}function SN(n){return n instanceof lt?function(t){return`${t.field.canonicalString()} ${t.op} ${qa(t.value)}`}(n):n instanceof cr?function(t){return t.op.toString()+" {"+t.getFilters().map(SN).join(" ,")+"}"}(n):"Filter"}var Xw=class extends lt{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},eI=class extends lt{constructor(e,t){super(e,"in",t),this.keys=AN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},tI=class extends lt{constructor(e,t){super(e,"not-in",t),this.keys=AN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}var nI=class extends lt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return P0(t)&&fl(t.arrayValue,this.value)}},rI=class extends lt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&fl(this.value.arrayValue,t)}},iI=class extends lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!fl(this.value.arrayValue,t)}},oI=class extends lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!P0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fl(this.value.arrayValue,r))}};var sI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function Cx(n,e=null,t=[],r=[],i=null,o=null,s=null){return new sI(n,e,t,r,i,o,s)}function R0(n){let e=se(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jw(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),ig(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qa(r)).join(",")),e.le=t}return e.le}function x0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!w5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!TN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ix(n.startAt,e.startAt)&&Ix(n.endAt,e.endAt)}function aI(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var as=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function C5(n,e,t,r,i,o,s,a){return new as(n,e,t,r,i,o,s,a)}function sg(n){return new as(n)}function bx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function MN(n){return n.collectionGroup!==null}function al(n){let e=se(n);if(e.he===null){e.he=[];let t=new Set;for(let o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new wt(wn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new Wa(o,r))}),t.has(wn.keyField().canonicalString())||e.he.push(new Wa(wn.keyField(),r))}return e.he}function Vr(n){let e=se(n);return e.Pe||(e.Pe=b5(e,al(n))),e.Pe}function b5(n,e){if(n.limitType==="F")return Cx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Wa(i.field,o)});let t=n.endAt?new Ga(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ga(n.startAt.position,n.startAt.inclusive):null;return Cx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function cI(n,e){let t=n.filters.concat([e]);return new as(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function uI(n,e,t){return new as(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ag(n,e){return x0(Vr(n),Vr(e))&&n.limitType===e.limitType}function PN(n){return`${R0(Vr(n))}|lt:${n.limitType}`}function ka(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>SN(i)).join(", ")}]`),ig(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>qa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>qa(i)).join(",")),`Target(${r})`}(Vr(n))}; limitType=${n.limitType})`}function cg(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of al(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=wx(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,al(r),i)||r.endAt&&!function(s,a,u){let l=wx(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,al(r),i))}(n,e)}function D5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function RN(n){return(e,t)=>{let r=!1;for(let i of al(n)){let o=T5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function T5(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?za(u,l):ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var vi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ps(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return gN(this.inner)}size(){return this.innerSize}};var S5=new et(te.comparator);function _i(){return S5}var xN=new et(te.comparator);function ol(...n){let e=xN;for(let t of n)e=e.insert(t.key,t);return e}function NN(n){let e=xN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ns(){return cl()}function ON(){return cl()}function cl(){return new vi(n=>n.toString(),(n,e)=>n.isEqual(e))}var A5=new et(te.comparator),M5=new wt(te.comparator);function Ie(...n){let e=M5;for(let t of n)e=e.add(t);return e}var P5=new wt(me);function R5(){return P5}function N0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dl(e)?"-0":e}}function kN(n){return{integerValue:""+n}}function x5(n,e){return a5(e)?kN(e):N0(n,e)}var Ka=class{constructor(){this._=void 0}};function N5(n,e,t){return n instanceof cs?function(i,o){let s={fields:{[yN]:{stringValue:mN},[_N]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&S0(o)&&(o=og(o)),o&&(s.fields[vN]=o),{mapValue:s}}(t,e):n instanceof us?LN(n,e):n instanceof ls?VN(n,e):function(i,o){let s=FN(i,o),a=Dx(s)+Dx(i.Ie);return Zw(s)&&Zw(i.Ie)?kN(a):N0(i.serializer,a)}(n,e)}function O5(n,e,t){return n instanceof us?LN(n,e):n instanceof ls?VN(n,e):t}function FN(n,e){return n instanceof Qa?function(r){return Zw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var cs=class extends Ka{},us=class extends Ka{constructor(e){super(),this.elements=e}};function LN(n,e){let t=UN(e);for(let r of n.elements)t.some(i=>jr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ls=class extends Ka{constructor(e){super(),this.elements=e}};function VN(n,e){let t=UN(e);for(let r of n.elements)t=t.filter(i=>!jr(i,r));return{arrayValue:{values:t}}}var Qa=class extends Ka{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function Dx(n){return We(n.integerValue||n.doubleValue)}function UN(n){return P0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var lI=class{constructor(e,t){this.field=e,this.transform=t}};function k5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof us&&i instanceof us||r instanceof ls&&i instanceof ls?$a(r.elements,i.elements,jr):r instanceof Qa&&i instanceof Qa?jr(r.Ie,i.Ie):r instanceof cs&&i instanceof cs}(n.transform,e.transform)}var dI=class{constructor(e,t){this.version=e,this.transformResults=t}},pi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Cp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ya=class{};function jN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pl(n.key,pi.none()):new ds(n.key,n.data,pi.none());{let t=n.data,r=or.empty(),i=new wt(wn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ei(n.key,r,new Fr(i.toArray()),pi.none())}}function F5(n,e,t){n instanceof ds?function(i,o,s){let a=i.value.clone(),u=Sx(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ei?function(i,o,s){if(!Cp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=Sx(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(BN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function ul(n,e,t,r){return n instanceof ds?function(o,s,a,u){if(!Cp(o.precondition,s))return a;let l=o.value.clone(),h=Ax(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ei?function(o,s,a,u){if(!Cp(o.precondition,s))return a;let l=Ax(o.fieldTransforms,u,s),h=s.data;return h.setAll(BN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Cp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function L5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=FN(r.transform,i||null);o!=null&&(t===null&&(t=or.empty()),t.set(r.field,o))}return t||null}function Tx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$a(r,i,(o,s)=>k5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ds=class extends Ya{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ei=class extends Ya{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function BN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Sx(n,e,t){let r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,O5(s,a,t[i]))}return r}function Ax(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,N5(o,s,e))}return r}var pl=class extends Ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hI=class extends Ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&F5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ul(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ul(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=ON();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=jN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&$a(this.mutations,e.mutations,(t,r)=>Tx(t,r))&&$a(this.baseMutations,e.baseMutations,(t,r)=>Tx(t,r))}},pI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=function(){return A5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var gI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ct,be;function V5(n){switch(n){case L.OK:return ne();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return ne()}}function $N(n){if(n===void 0)return gi("GRPC error has no .code"),L.UNKNOWN;switch(n){case ct.OK:return L.OK;case ct.CANCELLED:return L.CANCELLED;case ct.UNKNOWN:return L.UNKNOWN;case ct.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case ct.INTERNAL:return L.INTERNAL;case ct.UNAVAILABLE:return L.UNAVAILABLE;case ct.UNAUTHENTICATED:return L.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case ct.NOT_FOUND:return L.NOT_FOUND;case ct.ALREADY_EXISTS:return L.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return L.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case ct.ABORTED:return L.ABORTED;case ct.OUT_OF_RANGE:return L.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return L.UNIMPLEMENTED;case ct.DATA_LOSS:return L.DATA_LOSS;default:return ne()}}(be=ct||(ct={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";var Mx=null;var U5=new hi([4294967295,4294967295],0);function Px(n){let e=eN().encode(n),t=new Pw;return t.update(e),new Uint8Array(t.digest())}function Rx(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hi([t,r],0),new hi([i,o],0)]}var yI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new rs(`Invalid padding: ${t}`);if(r<0)throw new rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new rs(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=hi.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(hi.fromNumber(r)));return i.compare(U5)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=Px(e),[r,i]=Rx(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let t=Px(e),[r,i]=Rx(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},rs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Np=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,gl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new et(me),_i(),Ie())}},gl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ie(),Ie(),Ie())}};var Ua=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},Op=class{constructor(e,t){this.targetId=e,this.ge=t}},kp=class{constructor(e,t,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Fp=class{constructor(){this.pe=0,this.ye=xx(),this.we=jt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ie(),t=Ie(),r=Ie();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new gl(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=xx()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Oe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},vI=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=_i(),this.$e=_p(),this.Ue=_p(),this.Ke=new et(me)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let o=i.target;if(aI(o))if(r===0){let s=new te(o.path);this.ze(t,s,ar.newNoDocument(s,ce.min()))}else Oe(r===1);else{let s=this.et(t);if(s!==r){let a=this.tt(e),u=a?this.nt(a,e,s):1;if(u!==0){this.Ye(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}Mx?.rt(function(h,p,y,m,A){var N,O,z,de,Y,Fe;let Ct={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},Me=p.unchangedNames;return Me&&(Ct.bloomFilter={applied:A===0,hashCount:(N=Me?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(de=(z=(O=Me?.bits)===null||O===void 0?void 0:O.bitmap)===null||z===void 0?void 0:z.length)!==null&&de!==void 0?de:0,padding:(Fe=(Y=Me?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&Fe!==void 0?Fe:0,mightContain:T=>{var I;return(I=m?.mightContain(T))!==null&&I!==void 0&&I}}),Ct}(s,e.ge,this.ke.it(),a,u))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=yi(r).toUint8Array()}catch(u){if(u instanceof Mp)return Ba("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new yI(s,i,o)}catch(u){return Ba(u instanceof rs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&aI(a.target)){let u=new te(a.target.path);this._t(u).has(s)||this.ut(s,u)||this.ze(s,u,ar.newNoDocument(u,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=Ie();this.Ue.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Xe(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new Np(e,t,this.Ke,this.Qe,r);return this.Qe=_i(),this.$e=_p(),this.Ue=_p(),this.Ke=new et(me),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Fp,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new wt(me),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new wt(me),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Fp),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function _p(){return new et(te.comparator)}function xx(){return new et(te.comparator)}var j5={asc:"ASCENDING",desc:"DESCENDING"},B5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$5={and:"AND",or:"OR"},_I=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function EI(n,e){return n.useProto3Json||ig(e)?e:{value:e}}function Lp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function H5(n,e){return Lp(n,e.toTimestamp())}function Ur(n){return Oe(!!n),ce.fromTimestamp(function(t){let r=mi(t);return new At(r.seconds,r.nanos)}(n))}function O0(n,e){return wI(n,e).canonicalString()}function wI(n,e){let t=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function zN(n){let e=Ye.fromString(n);return Oe(QN(e)),e}function II(n,e){return O0(n.databaseId,e.path)}function Fw(n,e){let t=zN(e);if(t.get(1)!==n.databaseId.projectId)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(GN(t))}function qN(n,e){return O0(n.databaseId,e)}function z5(n){let e=zN(n);return e.length===4?Ye.emptyPath():GN(e)}function CI(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GN(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Nx(n,e,t){return{name:II(n,e),fields:t.value.mapValue.fields}}function q5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Oe(h===void 0||typeof h=="string"),jt.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),jt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?L.UNKNOWN:$N(l.code);return new W(h,l.message||"")}(s);t=new kp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Fw(n,r.document.name),o=Ur(r.document.updateTime),s=r.document.createTime?Ur(r.document.createTime):ce.min(),a=new or({mapValue:{fields:r.document.fields}}),u=ar.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Ua(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Fw(n,r.document),o=r.readTime?Ur(r.readTime):ce.min(),s=ar.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ua([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Fw(n,r.document),o=r.removedTargetIds||[];t=new Ua([],o,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new mI(i,o),a=r.targetId;t=new Op(a,s)}}return t}function G5(n,e){let t;if(e instanceof ds)t={update:Nx(n,e.key,e.value)};else if(e instanceof pl)t={delete:II(n,e.key)};else if(e instanceof Ei)t={update:Nx(n,e.key,e.data),updateMask:tG(e.fieldMask)};else{if(!(e instanceof hI))return ne();t={verify:II(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof cs)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof us)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ls)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qa)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ne()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:H5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne()}(n,e.precondition)),t}function W5(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ur(i.updateTime):Ur(o);return s.isEqual(ce.min())&&(s=Ur(o)),new dI(s,i.transformResults||[])}(t,e))):[]}function K5(n,e){return{documents:[qN(n,e.path)]}}function Q5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=qN(n,i);let o=function(l){if(l.length!==0)return KN(cr.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:Fa(y.field),direction:J5(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=EI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ht:t,parent:i}}function Y5(n){let e=z5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Oe(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let y=WN(p);return y instanceof cr&&DN(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(A){return new Wa(La(A.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,ig(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,m=p.values||[];return new Ga(m,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,m=p.values||[];return new Ga(m,y)}(t.endAt)),C5(e,i,s,o,a,"F",u,l)}function Z5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function WN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=La(t.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=La(t.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=La(t.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=La(t.unaryFilter.field);return lt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(n):n.fieldFilter!==void 0?function(t){return lt.create(La(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return cr.create(t.compositeFilter.filters.map(r=>WN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(t.compositeFilter.op))}(n):ne()}function J5(n){return j5[n]}function X5(n){return B5[n]}function eG(n){return $5[n]}function Fa(n){return{fieldPath:n.canonicalString()}}function La(n){return wn.fromServerFormat(n.fieldPath)}function KN(n){return n instanceof lt?function(t){if(t.op==="=="){if(Ex(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NAN"}};if(_x(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ex(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NAN"}};if(_x(t.value))return{unaryFilter:{field:Fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(t.field),op:X5(t.op),value:t.value}}}(n):n instanceof cr?function(t){let r=t.getFilters().map(i=>KN(i));return r.length===1?r[0]:{compositeFilter:{op:eG(t.op),filters:r}}}(n):ne()}function tG(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ml=class n{constructor(e,t,r,i,o=ce.min(),s=ce.min(),a=jt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var bI=class{constructor(e){this.Tt=e}};function nG(n){let e=Y5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uI(e,e.limit,"L"):e}var Vp=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),dl(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=mi(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(yi(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?IN(e)?this.ft(t,Number.MAX_SAFE_INTEGER):wN(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ne()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let o=e.fields||{};this.ft(t,53);let s=Ha,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(We(a)),this.wt(s,t),this.Rt(o[s],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),te.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};Vp.xt=new Vp;var DI=class{constructor(){this.Tn=new TI}addToCollectionParentIndex(e,t){return this.Tn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(ss.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},TI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wt(Ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Ye.comparator)).toArray()}};var Fie=new Uint8Array(0);var Ox={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},YN=41943040,Un=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(YN,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);var yl=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new n(0)}static Kn(){return new n(-1)}};var kx="LruGarbageCollector",rG=1048576;function Fx([n,e],[t,r]){let i=me(n,t);return i===0?me(e,r):i}var SI=class{constructor(e){this.Hn=e,this.buffer=new wt(Fx),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Fx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},AI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){G(kx,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){tc(t)?G(kx,"Ignoring IndexedDB error during garbage collection: ",t):yield ec(t)}yield this.er(3e5)}))}},MI=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(D0.ae);let r=new SI(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Ox)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ox):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Oa()<=ye.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function iG(n,e){return new MI(n,e)}var PI=class{constructor(){this.changes=new vi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ar.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var RI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var xI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ul(r.mutation,i,Fr.empty(),At.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ie()){let i=ns();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ol();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ns();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=_i(),s=cl(),a=function(){return cl()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Ei)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ul(h.mutation,l,h.mutation.getFieldMask(),At.now())):s.set(l.key,Fr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new RI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=cl(),i=new et((s,a)=>s-a),o=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Fr.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Ie()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=ON();h.forEach(y=>{if(!o.has(y)){let m=jN(t.get(y),r.get(y));m!==null&&p.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):MN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(ns()),a=ll,u=o;return s.next(l=>V.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Ie())).next(h=>({batchId:a,changes:NN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=ol();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ol();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{let l=function(p,y){return new as(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,ar.newInvalidDocument(h)))});let a=ol();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ul(h.mutation,l,Fr.empty(),At.now()),cg(t,l)&&(a=a.insert(u,l))}),a})}};var NI=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return V.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:nG(i.bundledQuery),readTime:Ur(i.readTime)}}(t)),V.resolve()}};var OI=class{constructor(){this.overlays=new et(te.comparator),this.Rr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ns();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=ns(),o=t.length+1,s=new te(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new et((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ns(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ns(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new gI(t,r));let o=this.Rr.get(t);o===void 0&&(o=Ie(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}};var kI=class{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var vl=class{constructor(){this.Vr=new wt(ut.mr),this.gr=new wt(ut.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new ut(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new ut(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){let t=new te(new Ye([])),r=new ut(t,e),i=new ut(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new te(new Ye([])),r=new ut(t,e),i=new ut(t,e+1),o=Ie();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ut(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ut=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return te.comparator(e.key,t.key)||me(e.Cr,t.Cr)}static pr(e,t){return me(e.Cr,t.Cr)||te.comparator(e.key,t.key)}};var FI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new wt(ut.mr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new fI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new ut(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?T0:this.Fr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ut(t,0),i=new ut(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(me);return t.forEach(i=>{let o=new ut(i,0),s=new ut(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),V.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;te.isDocumentKey(o)||(o=o.child(""));let s=new ut(new te(o),0),a=new wt(me);return this.Mr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Cr)),!0)},s),V.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return V.forEach(t.mutations,i=>{let o=new ut(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new ut(t,0),i=this.Mr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var LI=class{constructor(e){this.kr=e,this.docs=function(){return new et(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():ar.newInvalidDocument(t))}getEntries(e,t){let r=_i();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ar.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=_i(),s=t.path,a=new te(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||i5(r5(h),r)<=0||(i.has(h.key)||cg(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ne()}qr(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new VI(this)}getSize(e){return V.resolve(this.size)}},VI=class extends PI{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var UI=class{constructor(e){this.persistence=e,this.Qr=new vi(t=>R0(t),x0),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.$r=0,this.Ur=new vl,this.targetCount=0,this.Kr=yl.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),V.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Kr=new yl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.zn(t),V.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Ur.vr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Ur.containsKey(t))}};var Up=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new D0(0),this.zr=!1,this.zr=!0,this.jr=new kI,this.referenceDelegate=e(this),this.Hr=new UI(this),this.indexManager=new DI,this.remoteDocumentCache=function(i){return new LI(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new bI(t),this.Yr=new NI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new OI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new FI(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new jI(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return V.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},jI=class extends Kw{constructor(e){super(),this.currentSequenceNumber=e}},BI=class n{constructor(e){this.persistence=e,this.ti=new vl,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw ne()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),V.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ii,r=>{let i=te.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,ce.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return V.or([()=>V.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},jp=class n{constructor(e,t){this.persistence=e,this.oi=new vi(r=>c5(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=iG(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return V.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),V.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wp(e.data.value)),t}ar(e,t,r){return V.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var $I=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=Ie(),i=Ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var HI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var zI=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return EP()?8:s5(_t())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new HI;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(Oa()<=ye.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),V.resolve()):(Oa()<=ye.DEBUG&&G("QueryEngine","Query:",ka(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(Oa()<=ye.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(t))):V.resolve())}rs(e,t){if(bx(t))return V.resolve(null);let r=Vr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=uI(t,null,"F"),r=Vr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ie(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.cs(t,a);return this.ls(t,l,s,u.readTime)?this.rs(e,uI(t,null,"F")):this.hs(e,l,t,u)}))})))}ss(e,t,r,i){return bx(t)||i.isEqual(ce.min())?V.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(t,o);return this.ls(t,s,r,i)?V.resolve(null):(Oa()<=ye.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ka(t)),this.hs(e,s,t,n5(i,ll)).next(a=>a))})}cs(e,t){let r=new wt(RN(e));return t.forEach((i,o)=>{cg(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return Oa()<=ye.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",ka(t)),this.ns.getDocumentsMatchingQuery(e,t,ss.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var k0="LocalStore",oG=3e8,qI=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new et(me),this.Is=new vi(o=>R0(o),x0),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function sG(n,e,t,r){return new qI(n,e,t,r)}function ZN(n,e){return _(this,null,function*(){let t=se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=Ie();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Rs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function aG(n,e){let t=se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),m=V.resolve();return y.forEach(A=>{m=m.next(()=>h.getEntry(u,A)).next(N=>{let O=l.docVersions.get(A);Oe(O!==null),N.version.compareTo(O)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function JN(n){let e=se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function cG(n,e){let t=se(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Hr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(o,h.addedDocuments,p)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(jt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(N,O,z){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=oG?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(y,m,h)&&a.push(t.Hr.updateTargetData(o,m))});let u=_i(),l=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(uG(o,s,e.documentUpdates).next(h=>{u=h.Vs,l=h.fs})),!r.isEqual(ce.min())){let h=t.Hr.getLastRemoteSnapshotVersion(o).next(p=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ts=i,o))}function uG(n,e,t){let r=Ie(),i=Ie();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=_i();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):G(k0,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Vs:s,fs:i}})}function lG(n,e){let t=se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=T0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dG(n,e){let t=se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new ml(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function GI(n,e,t){return _(this,null,function*(){let r=se(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!tc(s))throw s;G(k0,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function Lx(n,e,t){let r=se(n),i=ce.min(),o=Ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=se(u),y=p.Is.get(h);return y!==void 0?V.resolve(p.Ts.get(y)):p.Hr.getTargetData(l,h)}(r,s,Vr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:ce.min(),t?o:Ie())).next(a=>(hG(r,D5(e),a),{documents:a,gs:o})))}function hG(n,e,t){let r=n.Es.get(e)||ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}var Bp=class{constructor(){this.activeTargetIds=R5()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var WI=class{constructor(){this.ho=new Bp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Bp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var KI=class{To(e){}shutdown(){}};var Vx="ConnectivityMonitor",$p=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){G(Vx,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){G(Vx,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ep=null;function QI(){return Ep===null?Ep=function(){return 268435456+Math.round(2147483648*Math.random())}():Ep++,"0x"+Ep.toString(16)}var Lw="RestConnection",fG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},YI=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Pp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){let s=QI(),a=this.bo(e,t.toUriEncodedString());G(Lw,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,o),this.vo(e,a,u,r).then(l=>(G(Lw,`Received RPC '${e}' ${s}: `,l),l),l=>{throw Ba(Lw,`RPC '${e}' ${s} failed with error: `,l,"url: ",a,"request:",r),l})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){let r=fG[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var ZI=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}};var Ut="WebChannelConnection",JI=class extends YI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let o=QI();return new Promise((s,a)=>{let u=new Rw;u.setWithCredentials(!0),u.listenOnce(xw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case il.NO_ERROR:let h=u.getResponseJson();G(Ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case il.TIMEOUT:G(Ut,`RPC '${e}' ${o} timed out`),a(new W(L.DEADLINE_EXCEEDED,"Request time out"));break;case il.HTTP_ERROR:let p=u.getStatus();if(G(Ut,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let m=y?.error;if(m&&m.status&&m.message){let A=function(O){let z=O.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(z)>=0?z:L.UNKNOWN}(m.status);a(new W(A,m.message))}else a(new W(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new W(L.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{G(Ut,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);G(Ut,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Wo(e,t,r){let i=QI(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=kw(),a=Ow(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");G(Ut,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,m=!1,A=new ZI({Fo:O=>{m?G(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(y||(G(Ut,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),G(Ut,`RPC '${e}' stream ${i} sending:`,O),p.send(O))},Mo:()=>p.close()}),N=(O,z,de)=>{O.listen(z,Y=>{try{de(Y)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return N(p,Na.EventType.OPEN,()=>{m||(G(Ut,`RPC '${e}' stream ${i} transport opened.`),A.Qo())}),N(p,Na.EventType.CLOSE,()=>{m||(m=!0,G(Ut,`RPC '${e}' stream ${i} transport closed`),A.Uo())}),N(p,Na.EventType.ERROR,O=>{m||(m=!0,Ba(Ut,`RPC '${e}' stream ${i} transport errored:`,O),A.Uo(new W(L.UNAVAILABLE,"The operation could not be completed")))}),N(p,Na.EventType.MESSAGE,O=>{var z;if(!m){let de=O.data[0];Oe(!!de);let Y=de,Fe=Y?.error||((z=Y[0])===null||z===void 0?void 0:z.error);if(Fe){G(Ut,`RPC '${e}' stream ${i} received error:`,Fe);let Ct=Fe.status,Me=function(b){let D=ct[b];if(D!==void 0)return $N(D)}(Ct),T=Fe.message;Me===void 0&&(Me=L.INTERNAL,T="Unknown error status: "+Ct+" with message "+Fe.message),m=!0,A.Uo(new W(Me,T)),p.close()}else G(Ut,`RPC '${e}' stream ${i} received:`,de),A.Ko(de)}}),N(a,Nw.STAT_EVENT,O=>{O.stat===yp.PROXY?G(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===yp.NOPROXY&&G(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.$o()},0),A}};function Vw(){return typeof document<"u"?document:null}function ug(n){return new _I(n,!0)}var Hp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var Ux="PersistentStream",zp=class{constructor(e,t,r,i,o,s,a,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Hp(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return _(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return _(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return _(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new W(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>_(this,null,function*(){this.state=0,this.start()}))}m_(e){return G(Ux,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(G(Ux,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},XI=class extends zp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=q5(this.serializer,e),r=function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?Ur(s.readTime):ce.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=CI(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=aI(u)?{documents:K5(o,u)}:{query:Q5(o,u).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=HN(o,s.resumeToken);let l=EI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ce.min())>0){a.readTime=Lp(o,s.snapshotVersion.toTimestamp());let l=EI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Z5(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=CI(this.serializer),t.removeTarget=e,this.I_(t)}},e0=class extends zp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=W5(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=CI(this.serializer),this.I_(e)}b_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>G5(this.serializer,r))};this.I_(t)}};var t0=class{},n0=class extends t0{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,wI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(L.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,wI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(L.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},r0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(gi(t),this.N_=!1):G("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var hs="RemoteStore",i0=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>_(this,null,function*(){gs(this)&&(G(hs,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=se(u);l.W_.add(4),yield Al(l),l.j_.set("Unknown"),l.W_.delete(4),yield lg(l)})}(this))}))}),this.j_=new r0(r,i)}};function lg(n){return _(this,null,function*(){if(gs(n))for(let e of n.G_)yield e(!0)})}function Al(n){return _(this,null,function*(){for(let e of n.G_)yield e(!1)})}function XN(n,e){let t=se(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),U0(t)?V0(t):nc(t).c_()&&L0(t,e))}function F0(n,e){let t=se(n),r=nc(t);t.K_.delete(e),r.c_()&&eO(t,e),t.K_.size===0&&(r.c_()?r.P_():gs(t)&&t.j_.set("Unknown"))}function L0(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nc(n).y_(e)}function eO(n,e){n.H_.Ne(e),nc(n).w_(e)}function V0(n){n.H_=new vI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),nc(n).start(),n.j_.B_()}function U0(n){return gs(n)&&!nc(n).u_()&&n.K_.size>0}function gs(n){return se(n).W_.size===0}function tO(n){n.H_=void 0}function pG(n){return _(this,null,function*(){n.j_.set("Online")})}function gG(n){return _(this,null,function*(){n.K_.forEach((e,t)=>{L0(n,e)})})}function mG(n,e){return _(this,null,function*(){tO(n),U0(n)?(n.j_.q_(e),V0(n)):n.j_.set("Unknown")})}function yG(n,e,t){return _(this,null,function*(){if(n.j_.set("Online"),e instanceof kp&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.K_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.K_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){G(hs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield qp(n,r)}else if(e instanceof Ua?n.H_.We(e):e instanceof Op?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ce.min()))try{let r=yield JN(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.K_.get(l);h&&o.K_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.K_.get(u);if(!h)return;o.K_.set(u,h.withResumeToken(jt.EMPTY_BYTE_STRING,h.snapshotVersion)),eO(o,u);let p=new ml(h.target,u,l,h.sequenceNumber);L0(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){G(hs,"Failed to raise snapshot:",r),yield qp(n,r)}})}function qp(n,e,t){return _(this,null,function*(){if(!tc(e))throw e;n.W_.add(1),yield Al(n),n.j_.set("Offline"),t||(t=()=>JN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){G(hs,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield lg(n)}))})}function nO(n,e){return e().catch(t=>qp(n,t,e))}function dg(n){return _(this,null,function*(){let e=se(n),t=to(e),r=e.U_.length>0?e.U_[e.U_.length-1].batchId:T0;for(;vG(e);)try{let i=yield lG(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,_G(e,i)}catch(i){yield qp(e,i)}rO(e)&&iO(e)})}function vG(n){return gs(n)&&n.U_.length<10}function _G(n,e){n.U_.push(e);let t=to(n);t.c_()&&t.S_&&t.b_(e.mutations)}function rO(n){return gs(n)&&!to(n).u_()&&n.U_.length>0}function iO(n){to(n).start()}function EG(n){return _(this,null,function*(){to(n).C_()})}function wG(n){return _(this,null,function*(){let e=to(n);for(let t of n.U_)e.b_(t.mutations)})}function IG(n,e,t){return _(this,null,function*(){let r=n.U_.shift(),i=pI.from(r,e,t);yield nO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dg(n)})}function CG(n,e){return _(this,null,function*(){e&&to(n).S_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return V5(s)&&s!==L.ABORTED}(i.code)){let o=r.U_.shift();to(r).h_(),yield nO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield dg(r)}})}(n,e)),rO(n)&&iO(n)})}function jx(n,e){return _(this,null,function*(){let t=se(n);t.asyncQueue.verifyOperationInProgress(),G(hs,"RemoteStore received new credentials");let r=gs(t);t.W_.add(3),yield Al(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield lg(t)})}function bG(n,e){return _(this,null,function*(){let t=se(n);e?(t.W_.delete(2),yield lg(t)):e||(t.W_.add(2),yield Al(t),t.j_.set("Unknown"))})}function nc(n){return n.J_||(n.J_=function(t,r,i){let o=se(t);return o.M_(),new XI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:pG.bind(null,n),No:gG.bind(null,n),Lo:mG.bind(null,n),p_:yG.bind(null,n)}),n.G_.push(e=>_(this,null,function*(){e?(n.J_.h_(),U0(n)?V0(n):n.j_.set("Unknown")):(yield n.J_.stop(),tO(n))}))),n.J_}function to(n){return n.Y_||(n.Y_=function(t,r,i){let o=se(t);return o.M_(),new e0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:EG.bind(null,n),Lo:CG.bind(null,n),D_:wG.bind(null,n),v_:IG.bind(null,n)}),n.G_.push(e=>_(this,null,function*(){e?(n.Y_.h_(),yield dg(n)):(yield n.Y_.stop(),n.U_.length>0&&(G(hs,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))}))),n.Y_}var o0=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function j0(n,e){if(gi("AsyncQueue",`${e}: ${n}`),tc(n))return new W(L.UNAVAILABLE,`${e}: ${n}`);throw n}var Gp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=ol(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Wp=class{constructor(){this.Z_=new et(te.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ne():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Za=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Gp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ag(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var s0=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},a0=class{constructor(){this.queries=Bx(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=se(t),o=i.queries;i.queries=Bx(),o.forEach((s,a)=>{for(let u of a.ta)u.onError(r)})})(this,new W(L.ABORTED,"Firestore shutting down"))}};function Bx(){return new vi(n=>PN(n),ag)}function B0(n,e){return _(this,null,function*(){let t=se(n),r=3,i=e.query,o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new s0,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield t.onListen(i,!0);break;case 1:o.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=j0(s,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&H0(t)})}function $0(n,e){return _(this,null,function*(){let t=se(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function DG(n,e){let t=se(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&H0(t)}function TG(n,e,t){let r=se(n),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(t);r.queries.delete(e)}function H0(n){n.ia.forEach(e=>{e.next()})}var c0,$x;($x=c0||(c0={}))._a="default",$x.Cache="cache";var _l=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==c0.Cache}};var Kp=class{constructor(e){this.key=e}},Qp=class{constructor(e){this.key=e}},u0=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ie(),this.mutatedKeys=Ie(),this.ya=RN(e),this.wa=new Gp(this.ya)}get Sa(){return this.fa}ba(e,t){let r=t?t.Da:new Wp,i=t?t.wa:this.wa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),m=cg(this.query,p)?p:null,A=!!y&&this.mutatedKeys.has(y.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),O=!1;y&&m?y.data.isEqual(m.data)?A!==N&&(r.track({type:3,doc:m}),O=!0):this.va(y,m)||(r.track({type:2,doc:m}),O=!0,(u&&this.ya(m,u)>0||l&&this.ya(m,l)<0)&&(a=!0)):!y&&m?(r.track({type:0,doc:m}),O=!0):y&&!m&&(r.track({type:1,doc:y}),O=!0,(u||l)&&(a=!0)),O&&(m?(s=s.add(m),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((h,p)=>function(m,A){let N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return N(m)-N(A)}(h.type,p.type)||this.ya(h.doc,p.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,l=u!==this.ga;return this.ga=u,s.length!==0||l?{snapshot:new Za(this.query,e.wa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Wp,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=Ie(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new Qp(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new Kp(r))}),t}Oa(e){this.fa=e.gs,this.pa=Ie();let t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Za.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},z0="SyncEngine",l0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},d0=class{constructor(e){this.key=e,this.Ba=!1}},h0=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new vi(a=>PN(a),ag),this.qa=new Map,this.Qa=new Set,this.$a=new et(te.comparator),this.Ua=new Map,this.Ka=new vl,this.Wa={},this.Ga=new Map,this.za=yl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function SG(n,e,t=!0){return _(this,null,function*(){let r=lO(n),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield oO(r,e,t,!0),i})}function AG(n,e){return _(this,null,function*(){let t=lO(n);yield oO(t,e,!0,!1)})}function oO(n,e,t,r){return _(this,null,function*(){let i=yield dG(n.localStore,Vr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield MG(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&XN(n.remoteStore,i),a})}function MG(n,e,t,r,i){return _(this,null,function*(){n.Ha=(p,y,m)=>function(N,O,z,de){return _(this,null,function*(){let Y=O.view.ba(z);Y.ls&&(Y=yield Lx(N.localStore,O.query,!1).then(({documents:T})=>O.view.ba(T,Y)));let Fe=de&&de.targetChanges.get(O.targetId),Ct=de&&de.targetMismatches.get(O.targetId)!=null,Me=O.view.applyChanges(Y,N.isPrimaryClient,Fe,Ct);return zx(N,O.targetId,Me.Ma),Me.snapshot})}(n,p,y,m);let o=yield Lx(n.localStore,e,!0),s=new u0(e,o.gs),a=s.ba(o.documents),u=gl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);zx(n,t,l.Ma);let h=new l0(e,t,s);return n.ka.set(e,h),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),l.snapshot})}function PG(n,e,t){return _(this,null,function*(){let r=se(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!ag(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield GI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&F0(r.remoteStore,i.targetId),f0(r,i.targetId)}).catch(ec))):(f0(r,i.targetId),yield GI(r.localStore,i.targetId,!0))})}function RG(n,e){return _(this,null,function*(){let t=se(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),F0(t.remoteStore,r.targetId))})}function xG(n,e,t){return _(this,null,function*(){let r=UG(n);try{let i=yield function(s,a){let u=se(s),l=At.now(),h=a.reduce((m,A)=>m.add(A.key),Ie()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let A=_i(),N=Ie();return u.ds.getEntries(m,h).next(O=>{A=O,A.forEach((z,de)=>{de.isValidDocument()||(N=N.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,A)).next(O=>{p=O;let z=[];for(let de of a){let Y=L5(de,p.get(de.key).overlayedDocument);Y!=null&&z.push(new Ei(de.key,Y,CN(Y.value.mapValue),pi.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,z,a)}).next(O=>{y=O;let z=O.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(m,O.batchId,z)})}).then(()=>({batchId:y.batchId,changes:NN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Wa[s.currentUser.toKey()];l||(l=new et(me)),l=l.insert(a,u),s.Wa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Ml(r,i.changes),yield dg(r.remoteStore)}catch(i){let o=j0(i,"Failed to persist write");t.reject(o)}})}function sO(n,e){return _(this,null,function*(){let t=se(n);try{let r=yield cG(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ua.get(o);s&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?Oe(s.Ba):i.removedDocuments.size>0&&(Oe(s.Ba),s.Ba=!1))}),yield Ml(t,r,e)}catch(r){yield ec(r)}})}function Hx(n,e,t){let r=se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=se(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.ta)y.sa(a)&&(l=!0)}),l&&H0(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function NG(n,e,t){return _(this,null,function*(){let r=se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ua.get(e),o=i&&i.key;if(o){let s=new et(te.comparator);s=s.insert(o,ar.newNoDocument(o,ce.min()));let a=Ie().add(o),u=new Np(ce.min(),new Map,new et(me),s,a);yield sO(r,u),r.$a=r.$a.remove(o),r.Ua.delete(e),q0(r)}else yield GI(r.localStore,e,!1).then(()=>f0(r,e,t)).catch(ec)})}function OG(n,e){return _(this,null,function*(){let t=se(n),r=e.batch.batchId;try{let i=yield aG(t.localStore,e);cO(t,r,null),aO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ml(t,i)}catch(i){yield ec(i)}})}function kG(n,e,t){return _(this,null,function*(){let r=se(n);try{let i=yield function(s,a){let u=se(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Oe(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);cO(r,e,t),aO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ml(r,i)}catch(i){yield ec(i)}})}function aO(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function cO(n,e,t){let r=se(n),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function f0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||uO(n,r)})}function uO(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(F0(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),q0(n))}function zx(n,e,t){for(let r of t)r instanceof Kp?(n.Ka.addReference(r.key,e),FG(n,r)):r instanceof Qp?(G(z0,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||uO(n,r.key)):ne()}function FG(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(G(z0,"New document in limbo: "+t),n.Qa.add(r),q0(n))}function q0(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new te(Ye.fromString(e)),r=n.za.next();n.Ua.set(r,new d0(t)),n.$a=n.$a.insert(t,r),XN(n.remoteStore,new ml(Vr(sg(t.path)),r,"TargetPurposeLimboResolution",D0.ae))}}function Ml(n,e,t){return _(this,null,function*(){let r=se(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,u)=>{s.push(r.Ha(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=$I.Yi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.La.p_(i),yield function(u,l){return _(this,null,function*(){let h=se(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(l,y=>V.forEach(y.Hi,m=>h.persistence.referenceDelegate.addReference(p,y.targetId,m)).next(()=>V.forEach(y.Ji,m=>h.persistence.referenceDelegate.removeReference(p,y.targetId,m)))))}catch(p){if(!tc(p))throw p;G(k0,"Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let m=h.Ts.get(y),A=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(A);h.Ts=h.Ts.insert(y,N)}}})}(r.localStore,o))})}function LG(n,e){return _(this,null,function*(){let t=se(n);if(!t.currentUser.isEqual(e)){G(z0,"User change. New user:",e.toKey());let r=yield ZN(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(u=>{u.reject(new W(L.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ml(t,r.Rs)}})}function VG(n,e){let t=se(n),r=t.Ua.get(e);if(r&&r.Ba)return Ie().add(r.key);{let i=Ie(),o=t.qa.get(e);if(!o)return i;for(let s of o){let a=t.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function lO(n){let e=se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NG.bind(null,e),e.La.p_=DG.bind(null,e.eventManager),e.La.Ja=TG.bind(null,e.eventManager),e}function UG(n){let e=se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kG.bind(null,e),e}var dO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=ug(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return sG(this.persistence,new zI,t.initialUser,this.serializer)}Xa(t){return new Up(BI.ri,this.serializer)}Za(t){return new WI}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),p0=class extends dO{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Oe(this.persistence.referenceDelegate instanceof jp);let r=this.persistence.referenceDelegate.garbageCollector;return new AI(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new Up(r=>jp.ri(r,t),this.serializer)}};var jG=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Hx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=LG.bind(null,this.syncEngine),yield bG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new a0}()}createDatastore(t){let r=ug(t.databaseInfo.databaseId),i=function(s){return new JI(s)}(t.databaseInfo);return function(s,a,u,l){return new n0(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new i0(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>Hx(this.syncEngine,r,0),function(){return $p.D()?new $p:new KI}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let y=new h0(o,s,a,u,l,h);return p&&(y.ja=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(o){return _(this,null,function*(){let s=se(o);G(hs,"RemoteStore shutting down."),s.W_.add(5),yield Al(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var El=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):gi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var no="FirestoreClient",g0=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=Tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){G(no,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(G(no,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=j0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Uw(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),G(no,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield ZN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function qx(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield BG(n);G(no,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>jx(e.remoteStore,i)),n._onlineComponents=e})}function BG(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G(no,"Using user provided OfflineComponentProvider");try{yield Uw(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ba("Error using user provided cache. Falling back to memory cache: "+t),yield Uw(n,new dO)}}else G(no,"Using default OfflineComponentProvider"),yield Uw(n,new p0(void 0));return n._offlineComponents})}function hO(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(G(no,"Using user provided OnlineComponentProvider"),yield qx(n,n._uninitializedComponentsProvider._online)):(G(no,"Using default OnlineComponentProvider"),yield qx(n,new jG))),n._onlineComponents})}function $G(n){return hO(n).then(e=>e.syncEngine)}function Yp(n){return _(this,null,function*(){let e=yield hO(n),t=e.eventManager;return t.onListen=SG.bind(null,e.syncEngine),t.onUnlisten=PG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=AG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=RG.bind(null,e.syncEngine),t})}function HG(n,e,t={}){let r=new sr;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new El({next:y=>{h.su(),s.enqueueAndForget(()=>$0(o,p));let m=y.docs.has(a);!m&&y.fromCache?l.reject(new W(L.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&y.fromCache&&u&&u.source==="server"?l.reject(new W(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new _l(sg(a.path),h,{includeMetadataChanges:!0,Ta:!0});return B0(o,p)}(yield Yp(n),n.asyncQueue,e,t,r)})),r.promise}function zG(n,e,t={}){let r=new sr;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new El({next:y=>{h.su(),s.enqueueAndForget(()=>$0(o,p)),y.fromCache&&u.source==="server"?l.reject(new W(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new _l(a,h,{includeMetadataChanges:!0,Ta:!0});return B0(o,p)}(yield Yp(n),n.asyncQueue,e,t,r)})),r.promise}function fO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Gx=new Map;function pO(n,e,t){if(!t)throw new W(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qG(n,e,t,r){if(e===!0&&r===!0)throw new W(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Wx(n){if(!te.isDocumentKey(n))throw new W(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kx(n){if(te.isDocumentKey(n))throw new W(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne()}function jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new W(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=hg(n);throw new W(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var gO="firestore.googleapis.com",Qx=!0,Zp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gO,this.ssl=Qx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Qx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=YN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rG)throw new W(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ja=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new jw;switch(r.type){case"firstParty":return new zw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Gx.get(t);r&&(G("ComponentProvider","Removing Datastore"),Gx.delete(t),r.terminate())}(this),Promise.resolve()}};function mO(n,e,t,r={}){var i;let o=(n=jn(n,Ja))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==gO&&o.host!==a&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!Ar(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Et.MOCK_USER;else{l=pP(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new W(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Et(p)}n._authCredentials=new Bw(new bp(l,h))}}var fs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Yt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Xi=class n extends fs{constructor(e,t,r){super(e,t,sg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Yt(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function yO(n,e,...t){if(n=qe(n),pO("collection","path",e),n instanceof Ja){let r=Ye.fromString(e,...t);return Kx(r),new Xi(n,null,r)}{if(!(n instanceof Yt||n instanceof Xi))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return Kx(r),new Xi(n.firestore,null,r)}}function G0(n,e,...t){if(n=qe(n),arguments.length===1&&(e=Tp.newId()),pO("doc","path",e),n instanceof Ja){let r=Ye.fromString(e,...t);return Wx(r),new Yt(n,null,new te(r))}{if(!(n instanceof Yt||n instanceof Xi))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return Wx(r),new Yt(n.firestore,n instanceof Xi?n.converter:null,new te(r))}}var Yx="AsyncQueue",Jp=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Hp(this,"async_queue_retry"),this.Su=()=>{let r=Vw();r&&G(Yx,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;let t=Vw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=Vw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new sr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return _(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!tc(e))throw e;G(Yx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw gi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=o0.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&ne()}verifyOperationInProgress(){}Mu(){return _(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};function Zx(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Br=class extends Ja{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Jp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Jp(e),this._firestoreClient=void 0,yield e}})}};function vO(n,e){let t=typeof n=="object"?n:ai(),r=typeof n=="string"?n:e||Pp,i=zi(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=$f("firestore");o&&mO(i,...o)}return i}function fg(n){if(n._terminated)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||GG(n),n._firestoreClient}function GG(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Qw(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,fO(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new g0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var wl=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(jt.fromBase64String(e))}catch(t){throw new W(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Il=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Cl=class{constructor(e){this._methodName=e}};var bl=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var Dl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var WG=/^__.*__$/,m0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms):new ds(e,this.data,t,this.fieldTransforms)}};function _O(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var y0=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Xp(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(_O(this.Lu)&&WG.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},v0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ug(e)}ju(e,t,r,i=!1){return new y0({Lu:e,methodName:t,zu:r,path:wn.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function W0(n){let e=n._freezeSettings(),t=ug(n._databaseId);return new v0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function EO(n,e,t,r,i,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);CO("Data must be an object, but it was:",s,r);let a=wO(r,s),u,l;if(o.merge)u=new Fr(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=QG(e,p,t);if(!s.contains(y))throw new W(L.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);ZG(h,y)||h.push(y)}u=new Fr(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new m0(new or(a),u,l)}var _0=class n extends Cl{_toFieldTransform(e){return new lI(e.path,new cs)}isEqual(e){return e instanceof n}};function KG(n,e,t,r=!1){return K0(t,n.ju(r?4:3,e))}function K0(n,e){if(IO(n=qe(n)))return CO("Unsupported field value:",e,n),wO(n,e);if(n instanceof Cl)return function(r,i){if(!_O(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=K0(a,i.Ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return x5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=At.fromDate(r);return{timestampValue:Lp(i.serializer,o)}}if(r instanceof At){let o=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lp(i.serializer,o)}}if(r instanceof bl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wl)return{bytesValue:HN(i.serializer,r._byteString)};if(r instanceof Yt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:O0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Dl)return function(s,a){return{mapValue:{fields:{[A0]:{stringValue:M0},[Ha]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Wu("VectorValues must only contain numeric values.");return N0(a.serializer,l)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${hg(r)}`)}(n,e)}function wO(n,e){let t={};return gN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ps(n,(r,i)=>{let o=K0(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function IO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof bl||n instanceof wl||n instanceof Yt||n instanceof Cl||n instanceof Dl)}function CO(n,e,t){if(!IO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=hg(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function QG(n,e,t){if((e=qe(e))instanceof Il)return e._internalPath;if(typeof e=="string")return bO(n,e);throw Xp("Field path arguments must be of type string or ",n,!1,void 0,t)}var YG=new RegExp("[~\\*/\\[\\]]");function bO(n,e,t){if(e.search(YG)>=0)throw Xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Il(...e.split("."))._internalPath}catch{throw Xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new W(L.INVALID_ARGUMENT,a+n+u)}function ZG(n,e){return n.some(t=>t.isEqual(e))}var eg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new E0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Q0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},E0=class extends eg{data(){return super.data()}};function Q0(n,e){return typeof e=="string"?bO(n,e):e instanceof Il?e._internalPath:e._delegate._internalPath}function DO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new W(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Tl=class{},w0=class extends Tl{};function TO(n,e,...t){let r=[];e instanceof Tl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof I0).length,a=o.filter(u=>u instanceof tg).length;if(s>1||s>0&&a>0)throw new W(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var tg=class n extends w0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return AO(e._query,t),new fs(e.firestore,e.converter,cI(e._query,t))}_parse(e){let t=W0(e.firestore);return function(o,s,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Xx(p,h);let A=[];for(let N of p)A.push(Jx(u,o,N));y={arrayValue:{values:A}}}else y=Jx(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Xx(p,h),y=KG(a,s,p,h==="in"||h==="not-in");return lt.create(l,h,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function SO(n,e,t){let r=e,i=Q0("where",n);return tg._create(i,r,t)}var I0=class n extends Tl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:cr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)AO(s,u),s=cI(s,u)}(e._query,t),new fs(e.firestore,e.converter,cI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Jx(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new W(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!MN(e)&&t.indexOf("/")!==-1)throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ye.fromString(t));if(!te.isDocumentKey(r))throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vx(n,new te(r))}if(t instanceof Yt)return vx(n,t._key);throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hg(t)}.`)}function Xx(n,e){if(!Array.isArray(n)||n.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new W(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var C0=class{convertValue(e,t="none"){switch(eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ps(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ha].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>We(s.doubleValue));return new Dl(o)}convertGeoPoint(e){return new bl(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=og(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){let t=mi(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ye.fromString(e);Oe(QN(r));let i=new Rp(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(t)||gi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function MO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var is=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ng=class extends eg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ja(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Q0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ja=class extends ng{data(e={}){return super.data(e)}},rg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new is(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ja(this._firestore,this._userDataWriter,r.key,r,new is(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new is(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new ja(i._firestore,i._userDataWriter,a.doc.key,a.doc,new is(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:JG(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function JG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}function PO(n){n=jn(n,Yt);let e=jn(n.firestore,Br);return HG(fg(e),n._key).then(t=>kO(e,n,t))}var Sl=class extends C0{constructor(e){super(),this.firestore=e}convertBytes(e){return new wl(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Yt(this.firestore,null,t)}};function RO(n){n=jn(n,fs);let e=jn(n.firestore,Br),t=fg(e),r=new Sl(e);return DO(n._query),zG(t,n._query).then(i=>new rg(e,r,n,i))}function xO(n,e,t){n=jn(n,Yt);let r=jn(n.firestore,Br),i=MO(n.converter,e,t);return Z0(r,[EO(W0(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,pi.none())])}function NO(n){return Z0(jn(n.firestore,Br),[new pl(n._key,pi.none())])}function OO(n,e){let t=jn(n.firestore,Br),r=G0(n),i=MO(n.converter,e);return Z0(t,[EO(W0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,pi.exists(!1))]).then(()=>r)}function Y0(n,...e){var t,r,i;n=qe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Zx(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Zx(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Yt)l=jn(n.firestore,Br),h=sg(n._key.path),u={next:p=>{e[s]&&e[s](kO(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=jn(n,fs);l=jn(p.firestore,Br),h=p._query;let y=new Sl(l);u={next:m=>{e[s]&&e[s](new rg(l,y,p,m))},error:e[s+1],complete:e[s+2]},DO(n._query)}return function(y,m,A,N){let O=new El(N),z=new _l(m,O,A);return y.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return B0(yield Yp(y),z)})),()=>{O.su(),y.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return $0(yield Yp(y),z)}))}}(fg(l),h,a,u)}function Z0(n,e){return function(r,i){let o=new sr;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return xG(yield $G(r),i,o)})),o.promise}(fg(n),e)}function kO(n,e,t){let r=t.docs.get(e._key),i=new Sl(n);return new ng(n,i,e._key,r,new is(t.hasPendingWrites,t.fromCache),e.converter)}function FO(){return new _0("serverTimestamp")}(function(e,t=!0){(function(i){Xa=i})(qi),_n(new Tt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Br(new $w(r.getProvider("auth-internal")),new qw(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new W(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rp(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),$e(cx,ux,e),$e(cx,ux,"esm2017")})();var pg=function(){return pg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},pg.apply(this,arguments)};var t9={includeMetadataChanges:!1};function J0(n,e){return e===void 0&&(e=t9),new ie(function(t){var r=Y0(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function LO(n){return J0(n,{includeMetadataChanges:!0})}function VO(n,e){return e===void 0&&(e={}),LO(n).pipe(ee(function(t){return X0(t,e)}))}function X0(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:pg(pg({},r),(t={},t[e.idField]=n.id,t))}function UO(n){return J0(n,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function jO(n,e){return e===void 0&&(e={}),UO(n).pipe(ee(function(t){return t.map(function(r){return X0(r,e)})}))}var In=class{constructor(e){return e}},BO="firestore",eC=class{constructor(){return Gi(BO)}};var tC=new $("angularfire2.firestore-instances");function n9(n,e){let t=Yo(BO,n,e);return t&&new In(t)}function r9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new In(r)}}var i9={provide:eC,deps:[[new mt,tC]]},o9={provide:In,useFactory:n9,deps:[[new mt,tC],nr]};function $O(n,...e){return $e("angularfire",Rr.full,"fst"),gn([o9,i9,{provide:tC,useFactory:r9(n),multi:!0,deps:[De,Qe,xr,ci,[new mt,ts],[new mt,Ki],...e]}])}var gg=Ne(jO,!0);var HO=Ne(VO,!0);var rc=Ne(OO,!0,2);var $r=Ne(yO,!0,2);var zO=Ne(NO,!0,2);var ro=Ne(G0,!0,2);var qO=Ne(PO,!0);var GO=Ne(RO,!0);var mg=Ne(vO,!0);var WO=Ne(TO,!0,2);var yg=Ne(xO,!0,2);var KO=Ne(SO,!0,2);var Bt=class n{constructor(e,t){this.auth=e;this.firestore=t;XR(this.auth,r=>{this.currentUserSubject.next(r)})}currentUserSubject=new ht(null);currentUser$=this.currentUserSubject.asObservable();signUp(e,t){return JR(this.auth,e,t).then(r=>{let i=ro(this.firestore,`users/${r.user.uid}`);return yg(i,{email:e,plan:"free",verified:!1,signupSource:"app_direct",createdAt:new Date,onboardingStep:0,reminderEnabled:!0}).then(()=>r)})}sendVerificationEmail(e){return ex(e)}login(e,t){return nx(this.auth,e,t)}logout(){return rx(this.auth)}sendPasswordReset(e){return tx(this.auth,e)}updateUserProfile(e,t){let r=this.auth.currentUser;if(!r)return Promise.reject("No user is logged in");let i=[ox(r,{displayName:e})];return t&&t!==r.email&&i.push(ix(r,t)),Promise.all(i)}get currentUser(){return this.auth.currentUser}get isLoggedIn(){return!!this.auth.currentUser}getUserPlan(){return this.currentUser$.pipe(Ot(e=>{if(!e)return Z("free");let t=ro(this.firestore,`users/${e.uid}`);return HO(t).pipe(ee(r=>r?.plan||"free"))}))}static \u0275fac=function(t){return new(t||n)(K(En),K(In))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var s9=()=>["/dashboard"],a9=()=>["/medication-search"],c9=()=>["/tracking-list"],u9=()=>["/dosage-correction"],l9=()=>["/login"],d9=()=>["/register"],h9=()=>["/profile"];function f9(n,e){if(n&1&&(E(0,"div",14),w(1),v()),n&2){let t=Q();R(),re(" Welcome back, ",t.userEmail," ")}}function p9(n,e){n&1&&(E(0,"button",9),w(1,"Login"),v()),n&2&&F("routerLink",an(1,l9))}function g9(n,e){n&1&&(E(0,"button",9),w(1,"Register"),v()),n&2&&F("routerLink",an(1,d9))}function m9(n,e){n&1&&(E(0,"button",9),w(1,"Profile"),v()),n&2&&F("routerLink",an(1,h9))}function y9(n,e){if(n&1){let t=mn();E(0,"button",15),ue("click",function(){rn(t);let i=Q();return on(i.signOut())}),w(1,"Sign Out"),v()}}var _g=class n{constructor(e,t){this.authService=e;this.router=t}currentYear=new Date().getFullYear();title="doseninja";isMenuOpen=!1;isDarkMode=!1;isLoggedIn=!1;userEmail=null;ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.isLoggedIn=!!e,this.userEmail=e?.email||null})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,document.body.classList.toggle("dark",this.isDarkMode)}signOut(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(U(Bt),U(Lt))};static \u0275cmp=we({type:n,selectors:[["app-root"]],decls:31,vars:17,consts:[[1,"app-container"],[1,"app-header"],[1,"app-header-container"],["href","/",1,"logo-link"],["src","assets/logo.png","alt","Dose Ninja Logo",1,"logo"],["class","welcome-message",4,"ngIf"],[1,"theme-toggle-btn",3,"click"],[1,"hamburger-menu",3,"click"],[1,"app-nav"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],[3,"click",4,"ngIf"],[1,"app-content"],["routerLink","/privacy-policy"],[1,"welcome-message"],[3,"click"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"header",1)(2,"div",2)(3,"a",3),xe(4,"img",4),v(),J(5,f9,2,1,"div",5),E(6,"button",6),ue("click",function(){return r.toggleDarkMode()}),w(7),v(),E(8,"button",7),ue("click",function(){return r.toggleMenu()}),w(9,"\u2630"),v(),E(10,"nav",8)(11,"button",9),w(12,"Dashboard"),v(),E(13,"button",9),w(14,"Medication Search"),v(),E(15,"button",9),w(16,"Tracking List"),v(),E(17,"button",9),w(18,"Dosage Correction"),v(),J(19,p9,2,2,"button",10)(20,g9,2,2,"button",10)(21,m9,2,2,"button",10)(22,y9,2,0,"button",11),v()()(),E(23,"div",12),xe(24,"router-outlet"),v(),xe(25,"app-toast"),E(26,"footer")(27,"p"),w(28),v(),E(29,"a",13),w(30,"Privacy Policy"),v()()()),t&2&&(R(5),F("ngIf",r.isLoggedIn&&r.userEmail),R(2),re(" ",r.isDarkMode?"\u2600\uFE0F Light Mode":"\u{1F319} Dark Mode"," "),R(3),aa("active",r.isMenuOpen),R(),F("routerLink",an(13,s9)),R(2),F("routerLink",an(14,a9)),R(2),F("routerLink",an(15,c9)),R(2),F("routerLink",an(16,u9)),R(2),F("ngIf",!r.isLoggedIn),R(),F("ngIf",!r.isLoggedIn),R(),F("ngIf",r.isLoggedIn),R(),F("ngIf",r.isLoggedIn),R(6),re("\xA9 ",r.currentYear," Dose Ninja. All rights reserved."))},dependencies:[Kt,Lu,Vn,Ae,Le,Vf],styles:['@charset "UTF-8";.app-header[_ngcontent-%COMP%]{background:#ffffffbf;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 2px 12px #0000000a;position:sticky;top:0;z-index:999;padding:.5rem 0;transition:background-color .3s ease}body.dark[_ngcontent-%COMP%]   .app-header[_ngcontent-%COMP%]{background:#1e1e1ed9;box-shadow:0 2px 12px #0000004d}.app-header-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;max-width:1200px;margin:0 auto;padding:0 1rem}.logo-link[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none}.logo-link[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:110px;width:auto;margin-right:.75rem}.logo-link[_ngcontent-%COMP%] + .welcome-message[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:var(--color-muted)}@media (max-width: 768px){.logo-link[_ngcontent-%COMP%] + .welcome-message[_ngcontent-%COMP%]{margin-top:.5rem;text-align:center;display:block;width:100%}}body.dark[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{color:var(--text-color-light)}.hamburger-menu[_ngcontent-%COMP%]{display:none;background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text)}.app-nav[_ngcontent-%COMP%]{display:flex;gap:1rem}.app-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;font-size:.95rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.app-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--color-text)}.theme-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.theme-toggle-btn[_ngcontent-%COMP%]:hover{color:var(--color-text)}@media (max-width: 768px){.hamburger-menu[_ngcontent-%COMP%]{display:block}.app-nav[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background-color:var(--color-surface);flex-direction:column;align-items:center;display:none;padding:1rem 0;box-shadow:0 2px 10px #0000000d}body.dark[_ngcontent-%COMP%]   .app-nav[_ngcontent-%COMP%]{background-color:#222}.app-nav.active[_ngcontent-%COMP%]{display:flex}}']})};var v9="type.googleapis.com/google.protobuf.Int64Value",_9="type.googleapis.com/google.protobuf.UInt64Value";function JO(n,e){let t={};for(let r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Eg(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Eg(e));if(typeof n=="function"||typeof n=="object")return JO(n,e=>Eg(e));throw new Error("Data cannot be encoded in JSON: "+n)}function ic(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case v9:case _9:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>ic(e)):typeof n=="function"||typeof n=="object"?JO(n,e=>ic(e)):n}var oC="functions";var QO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ln=class n extends Qt{constructor(e,t,r){super(`${oC}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,n.prototype)}};function E9(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function wg(n,e){let t=E9(n),r=t,i;try{let o=e&&e.error;if(o){let s=o.status;if(typeof s=="string"){if(!QO[s])return new ln("internal","internal");t=QO[s],r=s}let a=o.message;typeof a=="string"&&(r=a),i=o.details,i!==void 0&&(i=ic(i))}}catch{}return t==="ok"?null:new ln(t,r,i)}var nC=class{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,St(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i?.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return _(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return _(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return _(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return _(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var rC="us-central1",w9=/^data: (.*?)(?:\n|$)/;function I9(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new ln("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var iC=class{constructor(e,t,r,i,o=rC,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new nC(e,t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=rC}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function C9(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function b9(n,e,t){let r=i=>T9(n,e,i,t||{});return r.stream=(i,o)=>A9(n,e,i,o),r}function D9(n,e,t,r){return _(this,null,function*(){t["Content-Type"]="application/json";let i;try{i=yield r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=yield i.json()}catch{}return{status:i.status,json:o}})}function XO(n,e){return _(this,null,function*(){let t={},r=yield n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t})}function T9(n,e,t,r){let i=n._url(e);return S9(n,i,t,r)}function S9(n,e,t,r){return _(this,null,function*(){t=Eg(t);let i={data:t},o=yield XO(n,r),s=r.timeout||7e4,a=I9(s),u=yield Promise.race([D9(e,i,o,n.fetchImpl),a.promise,n.cancelAllRequests]);if(a.cancel(),!u)throw new ln("cancelled","Firebase Functions instance was deleted.");let l=wg(u.status,u.json);if(l)throw l;if(!u.json)throw new ln("internal","Response is not valid JSON object.");let h=u.json.data;if(typeof h>"u"&&(h=u.json.result),typeof h>"u")throw new ln("internal","Response is missing data field.");return{data:ic(h)}})}function A9(n,e,t,r){let i=n._url(e);return M9(n,i,t,r||{})}function M9(n,e,t,r){return _(this,null,function*(){var i;t=Eg(t);let o={data:t},s=yield XO(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=yield n.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:s,signal:r?.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){let N=new ln("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let A=wg(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let u,l,h=new Promise((m,A)=>{u=m,l=A});(i=r?.signal)===null||i===void 0||i.addEventListener("abort",()=>{let m=new ln("cancelled","Request was cancelled.");l(m)});let p=a.body.getReader(),y=P9(p,u,l,r?.signal);return{stream:{[Symbol.asyncIterator](){let m=y.getReader();return{next(){return _(this,null,function*(){let{value:N,done:O}=yield m.read();return{value:N,done:O}})},return(){return _(this,null,function*(){return yield m.cancel(),{done:!0,value:void 0}})}}}},data:h}})}function P9(n,e,t,r){let i=(s,a)=>{let u=s.match(w9);if(!u)return;let l=u[1];try{let h=JSON.parse(l);if("result"in h){e(ic(h.result));return}if("message"in h){a.enqueue(ic(h.message));return}if("error"in h){let p=wg(0,h);a.error(p),t(p);return}}catch(h){if(h instanceof ln){a.error(h),t(h);return}}},o=new TextDecoder;return new ReadableStream({start(s){let a="";return u();function u(){return _(this,null,function*(){if(r?.aborted){let l=new ln("cancelled","Request was cancelled");return s.error(l),t(l),Promise.resolve()}try{let{value:l,done:h}=yield n.read();if(h){a.trim()&&i(a.trim(),s),s.close();return}if(r?.aborted){let y=new ln("cancelled","Request was cancelled");s.error(y),t(y),yield n.cancel();return}a+=o.decode(l,{stream:!0});let p=a.split(`
`);a=p.pop()||"";for(let y of p)y.trim()&&i(y.trim(),s);return u()}catch(l){let h=l instanceof ln?l:wg(0,null);s.error(h),t(h)}})}},cancel(){return n.cancel()}})}var YO="@firebase/functions",ZO="0.12.3";var R9="auth-internal",x9="app-check-internal",N9="messaging-internal";function O9(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(R9),s=t.getProvider(N9),a=t.getProvider(x9);return new iC(i,o,s,a,r)};_n(new Tt(oC,e,"PUBLIC").setMultipleInstances(!0)),$e(YO,ZO,n),$e(YO,ZO,"esm2017")}function ek(n=ai(),e=rC){let r=zi(qe(n),oC).getImmediate({identifier:e}),i=$f("functions");return i&&tk(r,...i),r}function tk(n,e,t){C9(qe(n),e,t)}function nk(n,e,t){return b9(qe(n),e,t)}O9();var ys=class{constructor(e){return e}},rk="functions",sC=class{constructor(){return Gi(rk)}};var aC=new $("angularfire2.functions-instances");function k9(n,e){let t=Yo(rk,n,e);return t&&new ys(t)}function F9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ys(r)}}var L9={provide:sC,deps:[[new mt,aC]]},V9={provide:ys,useFactory:k9,deps:[[new mt,aC],nr]};function ik(n,...e){return $e("angularfire",Rr.full,"fn"),gn([V9,L9,{provide:aC,useFactory:F9(n),multi:!0,deps:[De,Qe,xr,ci,[new mt,ts],[new mt,Ki],...e]}])}var ok=Ne(ek,!0),sk=Ne(nk,!0);var Pl={production:!0,drugBankBaseUrl:"https://api.drugbank.com/v1",drugBankToken:"YOUR_TOKEN_HERE",firebase:{apiKey:"AIzaSyDdUtaYxgkH4TxX2XDxfCtEcklUuPSXihQ",authDomain:"dose-ninja-final.firebaseapp.com",projectId:"dose-ninja-final",storageBucket:"dose-ninja-final.appspot.com",messagingSenderId:"155512503267",appId:"1:155512503267:web:1def1b0853badaa0417ed6",measurementId:"G-J10TWQ7STL"}};var io=class n{constructor(e,t){this.firestore=e;this.auth=t}addTrackedMedication(e){let t=this.auth.currentUser;if(!t)return Promise.reject("User not logged in");let r=$r(this.firestore,`users/${t.uid}/trackedMedications`);return rc(r,he(j({},e),{addedAt:new Date})).then(()=>{})}getTrackedMedications(){return new ie(e=>{this.auth.onAuthStateChanged(t=>{if(t){let r=$r(this.firestore,`users/${t.uid}/trackedMedications`);gg(r,{idField:"id"}).subscribe({next:o=>e.next(o),error:o=>e.error(o),complete:()=>e.complete()})}else e.next([]),e.complete()})})}removeMedication(e){let t=this.auth.currentUser;if(!t)return Promise.reject("User not logged in");let r=ro(this.firestore,`users/${t.uid}/trackedMedications/${e}`);return zO(r)}isMedicationTracked(e){return _(this,null,function*(){let t=this.auth.currentUser;if(!t)return!1;let r=$r(this.firestore,`users/${t.uid}/trackedMedications`),i=WO(r,KO("rxcui","==",e));return!(yield GO(i)).empty})}static \u0275fac=function(t){return new(t||n)(K(In),K(En))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var oc=class n{constructor(e,t){this.firestore=e;this.auth=t}saveReminderSettings(e){return _(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not logged in");let r=ro(this.firestore,`reminders/${t.uid}`);yield yg(r,e,{merge:!0})})}getReminderSettings(e){return _(this,null,function*(){let t=ro(this.firestore,`reminders/${e}`),r=yield qO(t);return r.exists()?r.data():null})}getTodaysReminders(){let e=this.auth.currentUser;if(!e)return new ie(i=>{i.next([]),i.complete()});let t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()],r=$r(this.firestore,`users/${e.uid}/reminders`);return gg(r,{idField:"id"}).pipe(ee(i=>i.filter(o=>o.daysOfWeek.includes(t))))}static \u0275fac=function(t){return new(t||n)(K(In),K(En))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function U9(n,e){if(n&1&&(E(0,"li"),w(1),v()),n&2){let t=e.$implicit;R(),i_(" ",t.medicationName," @ ",t.time," ")}}function j9(n,e){if(n&1&&(E(0,"div")(1,"p"),w(2),v(),E(3,"ul"),J(4,U9,2,2,"li",8),v(),E(5,"a",9),w(6,"Manage Reminders"),v()()),n&2){let t=Q(2);R(2),re("\u{1F514} You have ",t.todaysReminders.length," reminder(s) today."),R(2),F("ngForOf",t.todaysReminders)}}function B9(n,e){n&1&&(E(0,"p"),w(1,"No reminders for today."),v())}function $9(n,e){if(n&1&&(E(0,"section",6)(1,"h3"),w(2,"Today's Reminders"),v(),J(3,j9,7,2,"div",7)(4,B9,2,0,"ng-template",null,1,au),v()),n&2){let t=ou(5),r=Q();R(3),F("ngIf",r.todaysReminders.length>0)("ngIfElse",t)}}function H9(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2),v(),w(3),xe(4,"br"),E(5,"small"),w(6),v()()),n&2){let t=e.$implicit;R(2),Xe(t.name),R(),re(" \u2014 ",t.description," "),R(3),re("RxCUI: ",t.rxcui,"")}}function z9(n,e){if(n&1&&(E(0,"div")(1,"ul"),J(2,H9,7,3,"li",8),v(),E(3,"a",10),w(4,"View All"),v()()),n&2){let t=Q().ngIf;R(2),F("ngForOf",t.slice(0,3))}}function q9(n,e){if(n&1&&(n_(0),J(1,z9,5,1,"div",7),r_()),n&2){let t=e.ngIf;Q();let r=ou(10);R(),F("ngIf",t.length>0)("ngIfElse",r)}}function G9(n,e){n&1&&(E(0,"p"),w(1,"You haven't tracked any medications yet."),v(),E(2,"a",11),w(3,"Start Tracking"),v())}var Ig=class n{constructor(e,t){this.trackingService=e;this.reminderService=t}trackedMedications$;todaysReminders=[];ngOnInit(){this.trackedMedications$=this.trackingService.getTrackedMedications(),this.reminderService.getTodaysReminders().subscribe(e=>{this.todaysReminders=e})}static \u0275fac=function(t){return new(t||n)(U(io),U(oc))};static \u0275cmp=we({type:n,selectors:[["app-dashboard"]],decls:11,vars:4,consts:[["noMeds",""],["noReminders",""],[1,"dashboard"],["class","reminder-summary",4,"ngIf"],[1,"medication-overview"],[4,"ngIf"],[1,"reminder-summary"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["routerLink","/user-profile"],["routerLink","/tracking-list"],["routerLink","/medication-search"]],template:function(t,r){t&1&&(E(0,"div",2)(1,"h2"),w(2,"Welcome Back"),v(),J(3,$9,6,2,"section",3),E(4,"section",4)(5,"h3"),w(6,"Your Tracked Medications"),v(),J(7,q9,2,2,"ng-container",5),la(8,"async"),J(9,G9,4,0,"ng-template",null,0,au),v()()),t&2&&(R(3),F("ngIf",r.todaysReminders),R(4),F("ngIf",Vh(8,2,r.trackedMedications$)))},dependencies:[Ae,kn,Le,v_,Kt,Vn,Uo],styles:[".dashboard[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.dashboard[_ngcontent-%COMP%]   .medication-overview[_ngcontent-%COMP%]{background:#f9f9f9;padding:1rem;border-radius:8px}.dashboard[_ngcontent-%COMP%]   .medication-overview[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.dashboard[_ngcontent-%COMP%]   .medication-overview[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem}.dashboard[_ngcontent-%COMP%]   .medication-overview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;color:#007bff;text-decoration:underline;cursor:pointer}"]})};function W9(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Warnings:"),v(),w(3),v()),n&2){let t=Q().ngIf;R(3),re(" ",t.warnings,"")}}function K9(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Interactions:"),v(),w(3),v()),n&2){let t=Q().ngIf;R(3),re(" ",t.interactions.join(", ")," ")}}function Q9(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Drug Class:"),v(),w(3),v()),n&2){let t=Q().ngIf;R(3),re(" ",t.drugClass.join(", ")," ")}}function Y9(n,e){if(n&1&&(E(0,"div",3)(1,"h2",4),w(2),v(),E(3,"ul",5)(4,"li")(5,"strong"),w(6,"Description:"),v(),w(7),v(),E(8,"li")(9,"strong"),w(10,"Generic Dosage:"),v(),w(11),v(),E(12,"li")(13,"strong"),w(14,"Frequency:"),v(),w(15),v(),E(16,"li")(17,"strong"),w(18,"Indications:"),v(),w(19),v(),E(20,"li")(21,"strong"),w(22,"Side Effects:"),v(),w(23),v(),E(24,"li")(25,"strong"),w(26,"Precautions:"),v(),w(27),v(),J(28,W9,4,1,"li",6)(29,K9,4,1,"li",6)(30,Q9,4,1,"li",6),v()()),n&2){let t=e.ngIf;R(2),Xe(t.name),R(5),re(" ",t.description,""),R(4),re(" ",t.genericDosage,""),R(4),re(" ",t.frequency,""),R(4),re(" ",t.indications,""),R(4),re(" ",t.sideEffects,""),R(4),re(" ",t.precautions,""),R(),F("ngIf",t.warnings),R(),F("ngIf",t.interactions==null?null:t.interactions.length),R(),F("ngIf",t.drugClass==null?null:t.drugClass.length)}}function Z9(n,e){n&1&&(E(0,"h2"),w(1,"\u274C Error"),v())}function J9(n,e){if(n&1&&(E(0,"p"),w(1),v()),n&2){let t=Q(2);R(),Xe(t.errorMessage)}}function X9(n,e){n&1&&(E(0,"h2"),w(1,"\u{1F504} Loading..."),v())}function e6(n,e){if(n&1&&(E(0,"div",3),J(1,Z9,2,0,"h2",6)(2,J9,2,1,"p",6)(3,X9,2,0,"h2",6),v()),n&2){let t=Q();R(),F("ngIf",t.errorMessage),R(),F("ngIf",t.errorMessage),R(),F("ngIf",!t.errorMessage)}}var Cg=class n{constructor(e){this.route=e}drugId=null;drug=null;errorMessage=null;ngOnInit(){this.drugId=this.route.snapshot.paramMap.get("rxcui"),this.drugId?this.drug={id:this.drugId,name:"Ibuprofen",description:"Pain relief and anti-inflammatory",genericDosage:"200mg",frequency:"Every 6-8 hours",indications:"Pain, fever, inflammation",sideEffects:"Nausea, dizziness, GI upset",precautions:"Avoid alcohol and prolonged use",warnings:"Not for use in late pregnancy or kidney issues",interactions:["Aspirin","Warfarin"],drugClass:["NSAID","Analgesic"]}:this.errorMessage="Drug ID not found."}static \u0275fac=function(t){return new(t||n)(U(Ln))};static \u0275cmp=we({type:n,selectors:[["app-drug-details"]],decls:4,vars:2,consts:[["loadingOrError",""],[1,"drug-details-container"],["class","card in-view",4,"ngIf","ngIfElse"],[1,"card","in-view"],[1,"drug-name"],[1,"drug-info-list"],[4,"ngIf"]],template:function(t,r){if(t&1&&(E(0,"div",1),J(1,Y9,31,10,"div",2)(2,e6,4,3,"ng-template",null,0,au),v()),t&2){let i=ou(3);R(),F("ngIf",r.drug)("ngIfElse",i)}},dependencies:[Ae,Le],styles:[".drug-details-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1rem;margin-top:2rem}.drug-details-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;max-width:800px;padding:2rem;background:#ffffff0d;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.15);border-radius:16px;color:var(--text-color);box-shadow:0 8px 30px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .6s ease forwards;opacity:0;transform:translateY(20px)}.drug-details-container[_ngcontent-%COMP%]   .card.in-view[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.drug-name[_ngcontent-%COMP%]{font-size:2.2rem;color:var(--color-primary);margin-bottom:1.2rem;text-align:center}.drug-info-list[_ngcontent-%COMP%]{list-style:none;padding:0;font-size:1.1rem}.drug-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem;line-height:1.5}.drug-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-secondary)}.section[_ngcontent-%COMP%]{margin-top:2rem}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-accent);margin-bottom:.5rem;font-size:1.2rem}.section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}.section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1.25rem;list-style:disc}.section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.4rem}.chip-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.chip-group[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{background-color:var(--color-secondary);color:#fff;padding:.4rem .75rem;border-radius:999px;font-size:.85rem;font-weight:500;box-shadow:0 2px 5px #0000001a}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};var yk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(U(Yn),U(ft))};static \u0275dir=He({type:n})}return n})(),Fl=(()=>{class n extends yk{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=He({type:n,features:[sn]})}return n})(),_s=new $(""),t6={provide:_s,useExisting:An(()=>gC),multi:!0},gC=(()=>{class n extends Fl{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=He({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ir([t6]),sn]})}return n})(),n6={provide:_s,useExisting:An(()=>It),multi:!0};function r6(){let n=Nn()?Nn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var i6=new $(""),It=(()=>{class n extends yk{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!r6())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(U(Yn),U(ft),U(i6,8))};static \u0275dir=He({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ue("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ir([n6]),sn]})}return n})();function mC(n){return n==null||yC(n)===0}function yC(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var xg=new $(""),vC=new $(""),o6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ke=class{static min(e){return s6(e)}static max(e){return a6(e)}static required(e){return vk(e)}static requiredTrue(e){return c6(e)}static email(e){return u6(e)}static minLength(e){return l6(e)}static maxLength(e){return d6(e)}static pattern(e){return h6(e)}static nullValidator(e){return Dg()}static compose(e){return bk(e)}static composeAsync(e){return Tk(e)}};function s6(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function a6(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function vk(n){return mC(n.value)?{required:!0}:null}function c6(n){return n.value===!0?null:{required:!0}}function u6(n){return mC(n.value)||o6.test(n.value)?null:{email:!0}}function l6(n){return e=>{let t=e.value?.length??yC(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function d6(n){return e=>{let t=e.value?.length??yC(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function h6(n){if(!n)return Dg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(mC(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Dg(n){return null}function _k(n){return n!=null}function Ek(n){return Oi(n)?Re(n):n}function wk(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function Ik(n,e){return e.map(t=>t(n))}function f6(n){return!n.validate}function Ck(n){return n.map(e=>f6(e)?e:t=>e.validate(t))}function bk(n){if(!n)return null;let e=n.filter(_k);return e.length==0?null:function(t){return wk(Ik(t,e))}}function Dk(n){return n!=null?bk(Ck(n)):null}function Tk(n){if(!n)return null;let e=n.filter(_k);return e.length==0?null:function(t){let r=Ik(t,e).map(Ek);return Xm(r).pipe(ee(wk))}}function Sk(n){return n!=null?Tk(Ck(n)):null}function ck(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ak(n){return n._rawValidators}function Mk(n){return n._rawAsyncValidators}function uC(n){return n?Array.isArray(n)?n:[n]:[]}function Tg(n,e){return Array.isArray(n)?n.includes(e):n===e}function uk(n,e){let t=uC(e);return uC(n).forEach(i=>{Tg(t,i)||t.push(i)}),t}function lk(n,e){return uC(e).filter(t=>!Tg(n,t))}var Sg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Sk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},vs=class extends Sg{name;get formDirective(){return null}get path(){return null}},oo=class extends Sg{_parent=null;name=null;valueAccessor=null},Ag=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},p6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sae=he(j({},p6),{"[class.ng-submitted]":"isSubmitted"}),$t=(()=>{class n extends Ag{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(U(oo,2))};static \u0275dir=He({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&aa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[sn]})}return n})(),Bn=(()=>{class n extends Ag{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(U(vs,10))};static \u0275dir=He({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&aa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[sn]})}return n})();var Rl="VALID",bg="INVALID",sc="PENDING",xl="DISABLED",so=class{},Mg=class extends so{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Nl=class extends so{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ol=class extends so{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},ac=class extends so{status;source;constructor(e,t){super(),this.status=e,this.source=t}},lC=class extends so{source;constructor(e){super(),this.source=e}},dC=class extends so{source;constructor(e){super(),this.source=e}};function _C(n){return(Ng(n)?n.validators:n)||null}function g6(n){return Array.isArray(n)?Dk(n):n||null}function EC(n,e){return(Ng(e)?e.asyncValidators:n)||null}function m6(n){return Array.isArray(n)?Sk(n):n||null}function Ng(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Pk(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[t])throw new q(1001,"")}function Rk(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new q(1002,"")})}var cc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return xn(this.statusReactive)}set status(e){xn(()=>this.statusReactive.set(e))}_status=da(()=>this.statusReactive());statusReactive=ia(void 0);get valid(){return this.status===Rl}get invalid(){return this.status===bg}get pending(){return this.status==sc}get disabled(){return this.status===xl}get enabled(){return this.status!==xl}errors;get pristine(){return xn(this.pristineReactive)}set pristine(e){xn(()=>this.pristineReactive.set(e))}_pristine=da(()=>this.pristineReactive());pristineReactive=ia(!0);get dirty(){return!this.pristine}get touched(){return xn(this.touchedReactive)}set touched(e){xn(()=>this.touchedReactive.set(e))}_touched=da(()=>this.touchedReactive());touchedReactive=ia(!1);get untouched(){return!this.touched}_events=new Ke;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lk(e,this._rawAsyncValidators))}hasValidator(e){return Tg(this._rawValidators,e)}hasAsyncValidator(e){return Tg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ol(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ol(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Nl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Nl(!0,r))}markAsPending(e={}){this.status=sc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ac(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xl,this.errors=null,this._forEachChild(i=>{i.disable(he(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mg(this.value,r)),this._events.next(new ac(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rl,this._forEachChild(r=>{r.enable(he(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rl||this.status===sc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mg(this.value,t)),this._events.next(new ac(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xl:Rl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=sc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Ek(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new ac(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?xl:this.errors?bg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sc)?sc:this._anyControlsHaveStatus(bg)?bg:Rl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Nl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ol(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ng(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=g6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=m6(this._rawAsyncValidators)}},uc=class extends cc{constructor(e,t,r){super(_C(t),EC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Rk(this,!0,e),Object.keys(e).forEach(r=>{Pk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hC=class extends uc{};var Ll=new $("",{providedIn:"root",factory:()=>Vl}),Vl="always";function xk(n,e){return[...e.path,n]}function fC(n,e,t=Vl){wC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),v6(n,e),E6(n,e),_6(n,e),y6(n,e)}function dk(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Rg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Pg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function y6(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function wC(n,e){let t=Ak(n);e.validator!==null?n.setValidators(ck(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Mk(n);e.asyncValidator!==null?n.setAsyncValidators(ck(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Pg(e._rawValidators,i),Pg(e._rawAsyncValidators,i)}function Rg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Ak(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=Mk(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Pg(e._rawValidators,r),Pg(e._rawAsyncValidators,r),t}function v6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Nk(n,e)})}function _6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Nk(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Nk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function E6(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function w6(n,e){n==null,wC(n,e)}function I6(n,e){return Rg(n,e)}function Ok(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function C6(n){return Object.getPrototypeOf(n.constructor)===Fl}function b6(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kk(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===It?t=o:C6(o)?r=o:i=o}),i||r||t||null}function D6(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function hk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function fk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var kl=class extends cc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(_C(t),EC(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ng(t)&&(t.nonNullable||t.initialValueIsDefault)&&(fk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){hk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){hk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var T6=n=>n instanceof kl;var S6={provide:oo,useExisting:An(()=>Ul)},pk=Promise.resolve(),Ul=(()=>{class n extends oo{_changeDetectorRef;callSetDisabledState;control=new kl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new it;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kk(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Ok(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){fC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){pk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Fi(r);pk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?xk(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(U(vs,9),U(xg,10),U(vC,10),U(_s,10),U(ki,8),U(Ll,8))};static \u0275dir=He({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ir([S6]),sn,yr]})}return n})();var $n=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=He({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var A6={provide:_s,useExisting:An(()=>IC),multi:!0};var M6=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IC=(()=>{class n extends Fl{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=k(Ll,{optional:!0})??Vl;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(oo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(U(Yn),U(ft),U(M6),U(Qe))};static \u0275dir=He({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Ir([A6]),sn]})}return n})();var Fk=new $("");var P6={provide:vs,useExisting:An(()=>Cn)},Cn=(()=>{class n extends vs{callSetDisabledState;get submitted(){return xn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=da(()=>this._submittedReactive());_submittedReactive=ia(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new it;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Rg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return fC(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){dk(t.control||null,t,!1),D6(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),b6(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new lC(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new dC(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(dk(r||null,t),T6(i)&&(fC(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);w6(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&I6(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wC(this.form,this),this._oldForm&&Rg(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(U(xg,10),U(vC,10),U(Ll,8))};static \u0275dir=He({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ue("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ir([P6]),sn,yr]})}return n})();var R6={provide:oo,useExisting:An(()=>bn)},bn=(()=>{class n extends oo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new it;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kk(this,o)}ngOnChanges(t){this._added||this._setUpControl(),Ok(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return xk(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(U(vs,13),U(xg,10),U(vC,10),U(_s,10),U(Fk,8))};static \u0275dir=He({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ir([R6]),sn,yr]})}return n})();var x6={provide:_s,useExisting:An(()=>lc),multi:!0};function Lk(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function N6(n){return n.split(":")[0]}var lc=(()=>{class n extends Fl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=Lk(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=N6(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=He({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ir([x6]),sn]})}return n})(),Og=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Lk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(U(ft),U(Yn),U(lc,9))};static \u0275dir=He({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),O6={provide:_s,useExisting:An(()=>Vk),multi:!0};function gk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function k6(n){return n.split(":")[0]}var Vk=(()=>{class n extends Fl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=k6(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=He({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ir([O6]),sn]})}return n})(),kg=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(gk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(gk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(U(ft),U(Yn),U(Vk,9))};static \u0275dir=He({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var F6=(()=>{class n{_validator=Dg;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Dg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=He({type:n,features:[yr]})}return n})();var L6={provide:xg,useExisting:An(()=>CC),multi:!0};var CC=(()=>{class n extends F6{required;inputName="required";normalizeInput=Fi;createValidator=t=>vk;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ni(n)))(i||n)}})();static \u0275dir=He({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&nu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ir([L6]),sn]})}return n})();var Uk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=Mn({})}return n})(),pC=class extends cc{constructor(e,t,r){super(_C(t),EC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Rk(this,!1,e),e.forEach((r,i)=>{Pk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function mk(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Hn=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return mk(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new uc(i,o)}record(t,r=null){let i=this._reduceControls(t);return new hC(i,r)}control(t,r,i){let o={};return this.useNonNullable?(mk(r)?o=r:(o.validators=r,o.asyncValidators=i),new kl(t,he(j({},o),{nonNullable:!0}))):new kl(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new pC(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof kl)return t;if(t instanceof cc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ao=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ll,useValue:t.callSetDisabledState??Vl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=Mn({imports:[Uk]})}return n})(),dn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Fk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ll,useValue:t.callSetDisabledState??Vl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Pn({type:n});static \u0275inj=Mn({imports:[Uk]})}return n})();function V6(n,e){n&1&&(E(0,"div"),w(1,"Email is required."),v())}function U6(n,e){n&1&&(E(0,"div"),w(1,"Please enter a valid email address."),v())}function j6(n,e){if(n&1&&(E(0,"div",15),J(1,V6,2,0,"div",16)(2,U6,2,0,"div",16),v()),n&2){let t,r,i=Q();R(),F("ngIf",(t=i.loginForm.get("email"))==null||t.errors==null?null:t.errors.required),R(),F("ngIf",(r=i.loginForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function B6(n,e){n&1&&(E(0,"div"),w(1,"Password is required."),v())}function $6(n,e){n&1&&(E(0,"div"),w(1,"Password must be at least 6 characters."),v())}function H6(n,e){if(n&1&&(E(0,"div",15),J(1,B6,2,0,"div",16)(2,$6,2,0,"div",16),v()),n&2){let t,r,i=Q();R(),F("ngIf",(t=i.loginForm.get("password"))==null||t.errors==null?null:t.errors.required),R(),F("ngIf",(r=i.loginForm.get("password"))==null||r.errors==null?null:r.errors.minlength)}}function z6(n,e){if(n&1&&(E(0,"div",15),w(1),v()),n&2){let t=Q();R(),Xe(t.errorMessage)}}function q6(n,e){if(n&1&&(E(0,"div",17),w(1),v()),n&2){let t=Q();R(),Xe(t.resendSuccessMessage)}}function G6(n,e){if(n&1){let t=mn();E(0,"div",18)(1,"p"),w(2,"Didn't receive the email?"),v(),E(3,"button",19),ue("click",function(){rn(t);let i=Q();return on(i.resendVerification())}),w(4,"Resend Verification Email"),v()()}}var Fg=class n{constructor(e,t,r,i){this.fb=e;this.router=t;this.authService=r;this.elRef=i;this.loginForm=this.fb.group({email:["",[ke.required,ke.email]],password:["",[ke.required,ke.minLength(6)]]})}loginForm;errorMessage="";showResend=!1;unverifiedUser=null;resendSuccessMessage="";ngAfterViewInit(){let e=this.elRef.nativeElement.querySelector(".card");if(e){let t=new IntersectionObserver(([r])=>{r.isIntersecting&&(e.classList.add("in-view"),t.unobserve(e))},{threshold:.1});t.observe(e)}}onSubmit(){if(this.errorMessage="",this.resendSuccessMessage="",this.showResend=!1,this.loginForm.valid){let{email:e,password:t}=this.loginForm.value;this.authService.login(e,t).then(r=>{let i=r.user;i.emailVerified?this.router.navigate(["/dashboard"]):(this.unverifiedUser=i,this.showResend=!0,this.errorMessage="\u{1F4E9} Please verify your email address before logging in.",this.authService.logout())}).catch(r=>{this.errorMessage=r.message||"An error occurred during login."})}else this.markFormGroupTouched(this.loginForm)}resendVerification(){this.unverifiedUser&&this.authService.sendVerificationEmail(this.unverifiedUser).then(()=>{this.resendSuccessMessage="\u2705 Verification email resent. Please check your inbox.",this.showResend=!1}).catch(e=>{this.errorMessage="\u26A0\uFE0F Failed to resend email. Try again later."})}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t.markAsTouched()})}static \u0275fac=function(t){return new(t||n)(U(Hn),U(Lt),U(Bt),U(ft))};static \u0275cmp=we({type:n,selectors:[["app-login"]],decls:27,vars:7,consts:[[1,"login-container","card"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password"],["class","success-message",4,"ngIf"],["class","resend-container",4,"ngIf"],["type","submit",3,"disabled"],[1,"forgot-link"],["routerLink","/forgot-password"],[1,"register-link"],["routerLink","/register"],[1,"error-message"],[4,"ngIf"],[1,"success-message"],[1,"resend-container"],["type","button",3,"click"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"Login"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",2)(5,"label",3),w(6,"Email"),v(),xe(7,"input",4),J(8,j6,3,2,"div",5),v(),E(9,"div",2)(10,"label",6),w(11,"Password"),v(),xe(12,"input",7),J(13,H6,3,2,"div",5),v(),J(14,z6,2,1,"div",5)(15,q6,2,1,"div",8)(16,G6,5,0,"div",9),E(17,"button",10),w(18,"Login"),v(),E(19,"p",11)(20,"a",12),w(21,"Forgot your password?"),v()(),E(22,"div",13)(23,"p"),w(24,"Don't have an account? "),E(25,"a",14),w(26,"Register here"),v()()()()()),t&2){let i,o;R(3),F("formGroup",r.loginForm),R(5),F("ngIf",((i=r.loginForm.get("email"))==null?null:i.invalid)&&(((i=r.loginForm.get("email"))==null?null:i.dirty)||((i=r.loginForm.get("email"))==null?null:i.touched))),R(5),F("ngIf",((o=r.loginForm.get("password"))==null?null:o.invalid)&&(((o=r.loginForm.get("password"))==null?null:o.dirty)||((o=r.loginForm.get("password"))==null?null:o.touched))),R(),F("ngIf",r.errorMessage),R(),F("ngIf",r.resendSuccessMessage),R(),F("ngIf",r.showResend),R(),F("disabled",r.loginForm.invalid)}},dependencies:[Ae,Le,dn,$n,It,$t,Bn,Cn,bn,Kt,Vn],styles:["[_nghost-%COMP%]{color:var(--text-color)}.login-container[_ngcontent-%COMP%]{max-width:500px;margin:4rem auto;padding:2rem;background-color:var(--color-card-bg, #f9f9f9);border-radius:12px;box-shadow:0 0 20px #0003}h2[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:1.75rem;font-weight:600;color:var(--text-color)}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.95rem;color:var(--text-color)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem;border-radius:8px;border:1px solid #ccc;background-color:var(--input-bg, #fff);color:var(--text-color)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.85rem;color:red}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;text-align:center;margin-top:-1rem}.login-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:green;font-size:.9rem;text-align:center;margin-top:-1rem}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:var(--color-muted)}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;color:var(--color-primary);border:none;font-weight:500;cursor:pointer;text-decoration:underline;transition:color .2s ease}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#1565c0}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border-radius:999px;background-color:var(--color-primary);color:#fff;border:none;cursor:pointer;transition:background-color .2s ease}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1565c0}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#aaa;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.95rem;color:var(--color-muted)}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;font-weight:500}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}body.dark[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{background-color:#222}body.dark[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], body.dark[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:var(--text-color-light)}body.dark[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#2a2a2a;border-color:#555}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]{color:#ccc}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#90caf9}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#42a5f5}"]})};var W6=["cardRef"],K6=()=>({id:"firstName",label:"First Name",type:"text"}),Q6=()=>({id:"lastName",label:"Last Name",type:"text"}),Y6=()=>({id:"birthDate",label:"Birth Date",type:"date"}),Z6=()=>({id:"username",label:"Username",type:"text"}),J6=()=>({id:"email",label:"Email",type:"email"}),X6=n=>({id:"password",label:"Password",type:n}),eW=n=>({id:"confirmPassword",label:"Confirm Password",type:n}),tW=(n,e,t,r,i,o,s)=>[n,e,t,r,i,o,s];function nW(n,e){if(n&1&&(E(0,"div",9),w(1),v()),n&2){let t=Q();R(),re(" ",t.successMessage," ")}}function rW(n,e){if(n&1&&(E(0,"div",10),w(1),v()),n&2){let t=Q();R(),re(" ",t.errorMessage," ")}}function iW(n,e){if(n&1){let t=mn();E(0,"div",15),xe(1,"input",16),E(2,"button",17),ue("click",function(){rn(t);let i=Q(2);return on(i.togglePasswordVisibility())}),w(3),v()()}if(n&2){let t=Q().$implicit,r=Q();R(),F("type",r.passwordVisible?"text":"password")("id",t.id)("formControlName",t.id),R(2),re(" ",r.passwordVisible?"\u{1F648}":"\u{1F441}\uFE0F"," ")}}function oW(n,e){if(n&1){let t=mn();E(0,"div",15),xe(1,"input",16),E(2,"button",17),ue("click",function(){rn(t);let i=Q(2);return on(i.toggleConfirmPasswordVisibility())}),w(3),v()()}if(n&2){let t=Q().$implicit,r=Q();R(),F("type",r.confirmPasswordVisible?"text":"password")("id",t.id)("formControlName",t.id),R(2),re(" ",r.confirmPasswordVisible?"\u{1F648}":"\u{1F441}\uFE0F"," ")}}function sW(n,e){if(n&1&&xe(0,"input",18),n&2){let t=Q().$implicit;F("type",t.type)("id",t.id)("formControlName",t.id)}}function aW(n,e){if(n&1&&(E(0,"div"),w(1),v()),n&2){let t=Q(2).$implicit;R(),re(" ",t.label," is required. ")}}function cW(n,e){n&1&&(E(0,"div"),w(1," Please enter a valid email address. "),v())}function uW(n,e){n&1&&(E(0,"div"),w(1," Password must be at least 6 characters. "),v())}function lW(n,e){n&1&&(E(0,"div"),w(1," You must be at least 18 years old. "),v())}function dW(n,e){if(n&1&&(E(0,"div",19),J(1,aW,2,1,"div",20)(2,cW,2,0,"div",20)(3,uW,2,0,"div",20)(4,lW,2,0,"div",20),v()),n&2){let t,r,i,o,s=Q().$implicit,a=Q();R(),F("ngIf",(t=a.registerForm.get(s.id))==null||t.errors==null?null:t.errors.required),R(),F("ngIf",s.id==="email"&&((r=a.registerForm.get(s.id))==null||r.errors==null?null:r.errors.email)),R(),F("ngIf",s.id==="password"&&((i=a.registerForm.get(s.id))==null||i.errors==null?null:i.errors.minlength)),R(),F("ngIf",s.id==="birthDate"&&((o=a.registerForm.get(s.id))==null||o.errors==null?null:o.errors.underage))}}function hW(n,e){if(n&1&&(E(0,"div",11)(1,"label",12),w(2),v(),J(3,iW,4,4,"div",13)(4,oW,4,4,"div",13)(5,sW,1,3,"input",14)(6,dW,5,4,"div",5),v()),n&2){let t,r=e.$implicit,i=Q();R(),F("for",r.id),R(),Xe(r.label),R(),F("ngIf",r.id==="password"),R(),F("ngIf",r.id==="confirmPassword"),R(),F("ngIf",r.id!=="password"&&r.id!=="confirmPassword"),R(),F("ngIf",((t=i.registerForm.get(r.id))==null?null:t.invalid)&&(((t=i.registerForm.get(r.id))==null?null:t.dirty)||((t=i.registerForm.get(r.id))==null?null:t.touched)))}}function fW(n,e){n&1&&(E(0,"div",19),w(1," Passwords must match. "),v())}var Lg=class n{constructor(e,t,r){this.fb=e;this.authService=t;this.router=r;this.registerForm=this.fb.group({firstName:["",ke.required],lastName:["",ke.required],birthDate:["",[ke.required,this.validateAge]],username:["",ke.required],email:["",[ke.required,ke.email]],password:["",[ke.required,ke.minLength(6)]],confirmPassword:["",ke.required]},{validators:this.mustMatchValidator})}registerForm;cardRef;passwordVisible=!1;confirmPasswordVisible=!1;errorMessage="";successMessage="";ngAfterViewInit(){let e=new IntersectionObserver(([t])=>{t.isIntersecting&&this.cardRef?.nativeElement&&(this.cardRef.nativeElement.classList.add("in-view"),e.disconnect())},{threshold:.3});this.cardRef?.nativeElement&&e.observe(this.cardRef.nativeElement)}onSubmit(){if(this.registerForm.valid){let{email:e,password:t}=this.registerForm.value;this.authService.signUp(e,t).then(r=>(console.log("\u2705 Firestore user document created"),this.authService.sendVerificationEmail(r.user).then(()=>{this.successMessage="\u{1F4E7} Verification email sent! Please check your inbox.",this.errorMessage="",setTimeout(()=>{this.router.navigate(["/login"])},2500)}))).catch(r=>{console.error("\u274C Firebase Registration Error:",r),this.errorMessage=r.message||"Registration failed."})}else this.markFormGroupTouched(this.registerForm)}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t instanceof uc?this.markFormGroupTouched(t):t.markAsTouched()})}validateAge(e){let t=new Date(e.value),r=new Date,i=r.getFullYear()-t.getFullYear(),o=r.getMonth()-t.getMonth();return(o<0||o===0&&r.getDate()<t.getDate())&&i--,i<18?{underage:!0}:null}mustMatchValidator(e){let t=e.get("password")?.value,r=e.get("confirmPassword")?.value;return t===r?null:{mustMatch:!0}}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}toggleConfirmPasswordVisibility(){this.confirmPasswordVisible=!this.confirmPasswordVisible}static \u0275fac=function(t){return new(t||n)(U(Hn),U(Bt),U(Lt))};static \u0275cmp=we({type:n,selectors:[["app-register"]],viewQuery:function(t,r){if(t&1&&Lh(W6,5),t&2){let i;ru(i=iu())&&(r.cardRef=i.first)}},decls:14,vars:23,consts:[[1,"card","in-view","register-container"],["class","toast success-toast",4,"ngIf"],["class","toast error-toast",4,"ngIf"],[1,"register-form",3,"ngSubmit","formGroup"],["class","form-group",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[1,"login-link"],["routerLink","/login"],[1,"toast","success-toast"],[1,"toast","error-toast"],[1,"form-group"],[3,"for"],["class","password-wrapper",4,"ngIf"],["class","form-control",3,"type","id","formControlName",4,"ngIf"],[1,"password-wrapper"],[3,"type","id","formControlName"],["type","button",1,"toggle-icon",3,"click"],[1,"form-control",3,"type","id","formControlName"],[1,"error-message"],[4,"ngIf"]],template:function(t,r){if(t&1&&(E(0,"div",0),J(1,nW,2,1,"div",1)(2,rW,2,1,"div",2),E(3,"h2"),w(4,"Register"),v(),E(5,"form",3),ue("ngSubmit",function(){return r.onSubmit()}),J(6,hW,7,6,"div",4)(7,fW,2,0,"div",5),E(8,"button",6),w(9," Register "),v(),E(10,"div",7),w(11," Already have an account? "),E(12,"a",8),w(13,"Login here"),v()()()()),t&2){let i;R(),F("ngIf",r.successMessage),R(),F("ngIf",r.errorMessage),R(3),F("formGroup",r.registerForm),R(),F("ngForOf",sA(15,tW,an(6,K6),an(7,Q6),an(8,Y6),an(9,Z6),an(10,J6),o_(11,X6,r.passwordVisible?"text":"password"),o_(13,eW,r.confirmPasswordVisible?"text":"password"))),R(),F("ngIf",(r.registerForm.errors==null?null:r.registerForm.errors.mustMatch)&&((i=r.registerForm.get("confirmPassword"))==null?null:i.touched)),R(),F("disabled",r.registerForm.invalid)}},dependencies:[Ae,kn,Le,dn,$n,It,$t,Bn,Cn,bn,Kt,Vn],styles:[".register-container[_ngcontent-%COMP%]{max-width:600px;margin:4rem auto;padding:2.5rem;background-color:var(--color-card-bg);border-radius:12px;box-shadow:0 0 20px #0003}.register-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:1.75rem;font-weight:600;color:var(--color-text);text-align:center}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.95rem;color:var(--text-color)}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:1rem;border-radius:8px;background-color:var(--input-bg);border:1px solid #ccc;color:var(--text-color)}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:.25rem;color:red;font-size:.875rem}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;font-size:1.2rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.register-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;text-align:left}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;background-color:var(--color-primary);color:#fff;padding:.75rem 1.5rem;border-radius:999px;font-weight:500;font-size:1rem;border:none;cursor:pointer;transition:background-color .2s ease}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#aaa;cursor:not-allowed}.login-link[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:.95rem;text-align:center;color:var(--color-muted)}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function pW(n,e){n&1&&(E(0,"div",4),w(1,"\u{1F504} Loading your tracked meds..."),v())}function gW(n,e){if(n&1&&(E(0,"div",5),w(1),v()),n&2){let t=Q();R(),Xe(t.errorMessage)}}function mW(n,e){n&1&&(E(0,"div")(1,"p"),w(2,"No medications are currently being tracked."),v()())}function yW(n,e){if(n&1){let t=mn();E(0,"li",7)(1,"div",8)(2,"h4"),w(3),v(),E(4,"p")(5,"strong"),w(6,"RxCUI:"),v(),w(7),v(),E(8,"p"),w(9),v(),E(10,"p")(11,"em"),w(12),la(13,"date"),v()(),E(14,"button",9),ue("click",function(){let i=rn(t).$implicit,o=Q(2);return on(o.removeFromTracking(i))}),w(15,"\u{1F5D1}\uFE0F Remove"),v()()()}if(n&2){let t=e.$implicit;R(3),Xe(t.name),R(4),re(" ",t.rxcui,""),R(2),Xe(t.description),R(3),re("Added: ",uA(13,4,t.addedAt.toDate==null?null:t.addedAt.toDate(),"short"),"")}}function vW(n,e){if(n&1&&(E(0,"ul"),J(1,yW,16,7,"li",6),v()),n&2){let t=Q();R(),F("ngForOf",t.trackedMedications)}}var Vg=class n{constructor(e,t){this.trackingService=e;this.authService=t}trackedMedications=[];loading=!0;errorMessage="";ngOnInit(){this.trackingService.getTrackedMedications().subscribe({next:e=>{this.trackedMedications=e,this.loading=!1},error:e=>{this.errorMessage="Failed to load tracked medications.",console.error(e),this.loading=!1}})}removeFromTracking(e){if(!e.id){console.warn("No document ID found for this medication.");return}this.trackingService.removeMedication(e.id).then(()=>{this.trackedMedications=this.trackedMedications.filter(t=>t.id!==e.id)}).catch(t=>{console.error("Failed to remove medication:",t),this.errorMessage="Could not remove medication. Please try again."})}static \u0275fac=function(t){return new(t||n)(U(io),U(Bt))};static \u0275cmp=we({type:n,selectors:[["app-tracking-list"]],decls:7,vars:4,consts:[[1,"tracking-list"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"error"],["class","med-item",4,"ngFor","ngForOf"],[1,"med-item"],[1,"med-card"],[3,"click"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"Your Tracked Medications"),v(),J(3,pW,2,0,"div",1)(4,gW,2,1,"div",2)(5,mW,3,0,"div",3)(6,vW,2,1,"ul",3),v()),t&2&&(R(3),F("ngIf",r.loading),R(),F("ngIf",r.errorMessage),R(),F("ngIf",!r.loading&&r.trackedMedications.length===0),R(),F("ngIf",r.trackedMedications.length>0))},dependencies:[Ae,kn,Le,__,Kt],styles:[".tracking-container[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_fadeInUp .5s ease both}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.tracking-summary[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem;color:var(--text-color-light);text-align:right}.drug-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem;border-radius:10px;overflow:hidden;box-shadow:0 4px 12px #00000026}.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .drug-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.05);padding:12px;text-align:left;font-size:.95rem;transition:background-color .3s ease}.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;font-weight:600}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ffffff0d}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ffffff05}body[_ngcontent-%COMP%]:not(.dark)   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#1976d21a}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#90caf926}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .25s ease}.pill-button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border:none;padding:6px 14px;border-radius:999px;cursor:pointer;font-size:.85rem;font-weight:500;transition:background-color .25s ease,transform .15s ease;box-shadow:0 2px 6px #00000014;text-decoration:none;display:inline-block}.pill-button[_ngcontent-%COMP%]:hover{background-color:#1565c0;transform:scale(1.05)}.pill-button.danger[_ngcontent-%COMP%]{background-color:#e74c3c}.pill-button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.empty-msg[_ngcontent-%COMP%]{margin-top:1rem;font-style:italic;color:var(--text-color-muted);text-align:center}@media (max-width: 768px){.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .drug-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 6px;font-size:.85rem}.pill-button[_ngcontent-%COMP%]{font-size:.8rem;padding:4px 10px}}"]})};function _W(n,e){n&1&&(E(0,"div",8),w(1,"\u{1F504} Loading..."),v())}function EW(n,e){if(n&1&&(E(0,"div",9),w(1),v()),n&2){let t=Q();R(),re(" ",t.trackingMessage," ")}}function wW(n,e){if(n&1&&(E(0,"div",10),w(1),v()),n&2){let t=Q();R(),re(" ",t.errorMessage," ")}}function IW(n,e){if(n&1&&(E(0,"div"),w(1),v()),n&2){let t=Q();R(),re(' No results found for "',t.searchTerm,'". ')}}function CW(n,e){n&1&&(E(0,"div"),w(1," Start typing to search medications. "),v())}function bW(n,e){if(n&1){let t=mn();E(0,"li",13)(1,"div",14)(2,"h4"),w(3),v(),E(4,"p")(5,"strong"),w(6,"RxCUI:"),v(),w(7),v(),E(8,"p"),w(9),v(),E(10,"button",2),ue("click",function(){let i=rn(t).$implicit,o=Q(2);return on(o.trackMedication(i))}),w(11,"\u2795 Track"),v()()()}if(n&2){let t=e.$implicit;R(3),re("\u{1F48A} ",t.name,""),R(4),re(" ",t.rxcui,""),R(2),Xe(t.description)}}function DW(n,e){if(n&1&&(E(0,"ul",11),J(1,bW,12,3,"li",12),v()),n&2){let t=Q();R(),F("ngForOf",t.searchResults)}}var Ug=class n{constructor(e,t,r){this.http=e;this.trackingService=t;this.authService=r}searchTerm="";searchResults=[];loading=!1;errorMessage="";trackingMessage="";ngOnInit(){}searchDrugs(){if(!this.searchTerm.trim()){this.searchResults=[];return}let e=`https://rxnav.nlm.nih.gov/REST/drugs.json?name=${encodeURIComponent(this.searchTerm)}`;this.loading=!0,this.errorMessage="",this.searchResults=[],this.http.get(e).pipe(ee(t=>t?.drugGroup?.conceptGroup?t.drugGroup.conceptGroup.flatMap(r=>r?.conceptProperties?r.conceptProperties.map(i=>({name:i.name,description:i.synonym||"",rxcui:i.rxcui||""})):[]):[])).subscribe({next:t=>{this.searchResults=t,this.loading=!1},error:t=>{console.error("\u274C RxNav API error:",t),this.errorMessage="Failed to fetch medications.",this.loading=!1}})}trackMedication(e){this.trackingMessage="",this.authService.currentUser$.subscribe(t=>{if(!t){alert("You must be logged in to track medications.");return}this.trackingService.isMedicationTracked(e.rxcui).then(r=>{if(r){this.trackingMessage=`${e.name} is already being tracked.`;return}let i={name:e.name,description:e.description,rxcui:e.rxcui,addedAt:new Date};this.trackingService.addTrackedMedication(i).then(()=>{this.trackingMessage=`${e.name} has been added to your tracked medications.`}).catch(o=>{console.error("Error tracking medication:",o),this.trackingMessage="An error occurred while tracking the medication."})})})}static \u0275fac=function(t){return new(t||n)(U(ga),U(io),U(Bt))};static \u0275cmp=we({type:n,selectors:[["app-medication-search"]],decls:12,vars:7,consts:[[1,"medication-search"],["type","text","placeholder","Enter medication name...","aria-label","Search term",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"],["class","loading-spinner",4,"ngIf"],["class","toast-message success",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],["class","results-list",4,"ngIf"],[1,"loading-spinner"],[1,"toast-message","success"],[1,"error-message"],[1,"results-list"],["class","drug-item",4,"ngFor","ngForOf"],[1,"drug-item"],[1,"drug-card"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"Search Medications"),v(),E(3,"input",1),ua("ngModelChange",function(o){return su(r.searchTerm,o)||(r.searchTerm=o),o}),ue("keyup.enter",function(){return r.searchDrugs()}),v(),E(4,"button",2),ue("click",function(){return r.searchDrugs()}),w(5,"Search"),v(),J(6,_W,2,0,"div",3)(7,EW,2,1,"div",4)(8,wW,2,1,"div",5)(9,IW,2,1,"div",6)(10,CW,2,0,"div",6)(11,DW,2,1,"ul",7),v()),t&2&&(R(3),ca("ngModel",r.searchTerm),R(3),F("ngIf",r.loading),R(),F("ngIf",r.trackingMessage),R(),F("ngIf",r.errorMessage),R(),F("ngIf",!r.loading&&r.searchResults.length===0&&!r.errorMessage&&r.searchTerm),R(),F("ngIf",!r.loading&&r.searchResults.length===0&&!r.errorMessage&&!r.searchTerm),R(),F("ngIf",r.searchResults.length>0))},dependencies:[Ae,kn,Le,ao,It,$t,Ul,Kt,Uo],styles:[".medication-search[_ngcontent-%COMP%]{padding:2rem;font-family:Segoe UI,sans-serif;color:var(--text-color)}.medication-search[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:1rem}.medication-search[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.75rem 1rem;font-size:1rem;border-radius:12px;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);background:#ffffff1a;color:var(--text-color);margin-bottom:1rem;box-shadow:0 4px 20px #0000001a}.medication-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-weight:700;border:none;border-radius:8px;cursor:pointer;background:#4fc3f7;color:#fff;margin-left:.5rem;transition:background .2s ease-in-out}.medication-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0288d1}.medication-search[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .medication-search[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .medication-search[_ngcontent-%COMP%]   .toast-message[_ngcontent-%COMP%]{margin-top:1rem;font-weight:500}.medication-search[_ngcontent-%COMP%]   .toast-message.success[_ngcontent-%COMP%]{color:#2e7d32}.medication-search[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d32f2f}.medication-search[_ngcontent-%COMP%]   .results-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:1.5rem}.medication-search[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease forwards;opacity:0}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]{background:#ffffff1f;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);border:1px solid rgba(255,255,255,.2);border-radius:18px;padding:1.2rem;margin-bottom:1rem;box-shadow:0 8px 30px #00000014;transition:transform .2s ease;color:var(--text-color)}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.3rem;font-size:1.2rem}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.6rem;background:#66bb6a}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#388e3c}@keyframes _ngcontent-%COMP%_fadeInUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.medication-search   body.light-theme[_nghost-%COMP%], body.light-theme   [_nghost-%COMP%]{--text-color: #111}.medication-search   body.dark-theme[_nghost-%COMP%], body.dark-theme   [_nghost-%COMP%]{--text-color: #f5f5f5}"]})};function TW(n,e){if(n&1&&(E(0,"option",16),w(1),v()),n&2){let t=e.$implicit;F("ngValue",t),R(),re(" ",t.name," ")}}function SW(n,e){n&1&&(E(0,"div"),w(1," \u26A0\uFE0F Dosage is required. "),v())}function AW(n,e){if(n&1&&(E(0,"div",17),J(1,SW,2,0,"div",18),v()),n&2){let t,r=Q();R(),F("ngIf",(t=r.correctionForm.get("dosage"))==null||t.errors==null?null:t.errors.required)}}function MW(n,e){n&1&&(E(0,"div",19),w(1," \u2705 Dosage correction submitted successfully! "),v())}var jg=class n{constructor(e,t,r){this.fb=e;this.firestore=t;this.toastService=r;this.correctionForm=this.fb.group({drug:[null,ke.required],medicationName:[{value:"",disabled:!0}],dosage:["",ke.required],notes:[""]}),this.correctionForm.get("drug")?.valueChanges.subscribe(i=>{this.correctionForm.patchValue({medicationName:i?.name||""})})}correctionForm;submitted=!1;allDrugs=[];onSubmit(){return _(this,null,function*(){if(this.correctionForm.invalid)return;let e=this.correctionForm.getRawValue();try{let t=$r(this.firestore,"dosageCorrections");yield rc(t,{drug:e.drug,medicationName:e.medicationName,dosage:e.dosage,notes:e.notes,createdAt:FO()}),this.toastService.show("\u2705 Dosage correction submitted!",{type:"success"}),this.submitted=!0,this.correctionForm.reset()}catch(t){console.error("Error submitting correction:",t),this.toastService.show("\u26A0\uFE0F Submission failed. Try again later.",{type:"error"})}})}static \u0275fac=function(t){return new(t||n)(U(Hn),U(In),U(Aa))};static \u0275cmp=we({type:n,selectors:[["app-dosage-correction"]],decls:25,vars:5,consts:[[1,"card","in-view","correction-form-container"],[1,"section-title"],[1,"correction-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","drug"],["id","drug","formControlName","drug",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["for","medicationName"],["type","text","id","medicationName","formControlName","medicationName","readonly","",1,"form-control"],["for","dosage"],["type","text","id","dosage","formControlName","dosage","placeholder","e.g., 250 mg twice daily",1,"form-control"],["class","error-message",4,"ngIf"],["for","notes"],["id","notes","formControlName","notes","rows","3","placeholder","Why are you suggesting this correction?",1,"form-control"],["type","submit",1,"btn-glass",3,"disabled"],["class","success-message",4,"ngIf"],[3,"ngValue"],[1,"error-message"],[4,"ngIf"],[1,"success-message"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2",1),w(2,"\u{1F48A} Dosage Correction"),v(),E(3,"form",2),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",3)(5,"label",4),w(6,"Select Medication"),v(),E(7,"select",5),J(8,TW,2,2,"option",6),v()(),E(9,"div",3)(10,"label",7),w(11,"Medication Name"),v(),xe(12,"input",8),v(),E(13,"div",3)(14,"label",9),w(15,"Dosage"),v(),xe(16,"input",10),J(17,AW,2,1,"div",11),v(),E(18,"div",3)(19,"label",12),w(20,"Additional Notes"),v(),xe(21,"textarea",13),v(),E(22,"button",14),w(23," \u{1F680} Submit Correction "),v()(),J(24,MW,2,0,"div",15),v()),t&2){let i;R(3),F("formGroup",r.correctionForm),R(5),F("ngForOf",r.allDrugs),R(9),F("ngIf",((i=r.correctionForm.get("dosage"))==null?null:i.invalid)&&(((i=r.correctionForm.get("dosage"))==null?null:i.dirty)||((i=r.correctionForm.get("dosage"))==null?null:i.touched))),R(5),F("disabled",r.correctionForm.invalid),R(2),F("ngIf",r.submitted)}},dependencies:[Ae,kn,Le,dn,$n,Og,kg,It,lc,$t,Bn,Cn,bn,ao],styles:[".correction-form-container[_ngcontent-%COMP%]{padding:2rem;border-radius:1.5rem;background:#ffffff14;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);box-shadow:0 8px 32px #00000040;color:#f0f0f0;transition:all .3s ease}@media (max-width: 600px){.correction-form-container[_ngcontent-%COMP%]{padding:1.25rem}}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]{background:#fff;color:#111!important}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{color:#111!important}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background:#f9f9f9!important;border:1px solid #ccc!important}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder, .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#777!important}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus, .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#1abc9c;box-shadow:0 0 0 2px #1abc9c4d}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled, .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{color:#aaa!important;background:#eee!important}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{background:#fff!important}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .btn-glass[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .btn-glass[_ngcontent-%COMP%]{background:#1abc9c!important;color:#fff!important;border:none}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .btn-glass[_ngcontent-%COMP%]:hover, .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .btn-glass[_ngcontent-%COMP%]:hover{background:#17a689}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .btn-glass[_ngcontent-%COMP%]:disabled, .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .btn-glass[_ngcontent-%COMP%]:disabled{background:#eee!important;color:#888!important}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{background-color:#1abc9c;color:#fff}.light-theme[_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .correction-form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d32f2f}.section-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin-bottom:1.5rem;text-align:center;color:#fff}.correction-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:500;color:#fff}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding:.75rem;border-radius:10px;border:1px solid rgba(255,255,255,.3);background:#ffffff1a;color:#fff;font-size:1rem;outline:none}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]::placeholder{color:#ccc}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{border-color:#9fefc4;box-shadow:0 0 0 2px #9fefc466}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{opacity:.6}.form-group[_ngcontent-%COMP%]   textarea.form-control[_ngcontent-%COMP%]{resize:vertical}.btn-glass[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#9fefc426;border:1px solid rgba(159,239,196,.4);color:#fff;font-weight:600;border-radius:12px;cursor:pointer;transition:background .3s ease,transform .2s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.btn-glass[_ngcontent-%COMP%]:hover{background:#9fefc44d;transform:scale(1.03)}.btn-glass[_ngcontent-%COMP%]:disabled{background:#ffffff1a;color:#888;cursor:not-allowed}.success-message[_ngcontent-%COMP%]{margin-top:1.5rem;background-color:#1f883d;color:#fff;padding:1rem;border-radius:.75rem;text-align:center;font-weight:500}.error-message[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.9rem;margin-top:.25rem}"]})};var PW=["animatedCard"];function RW(n,e){n&1&&(E(0,"p",13),w(1,"Welcome back, Ninja \u{1F44B}"),v())}function xW(n,e){n&1&&(E(0,"a",14,0)(2,"div",10),w(3,"\u{1F4DD}"),v(),E(4,"div",11),w(5,"Register"),v(),E(6,"div",12),w(7,"Create a Dose Ninja account"),v()())}function NW(n,e){n&1&&(E(0,"a",15,0)(2,"div",10),w(3,"\u{1F510}"),v(),E(4,"div",11),w(5,"Login"),v(),E(6,"div",12),w(7,"Access your personalized dashboard"),v()())}function OW(n,e){n&1&&(E(0,"a",16,0)(2,"div",10),w(3,"\u{1F4CA}"),v(),E(4,"div",11),w(5,"Dashboard"),v(),E(6,"div",12),w(7,"View trends and recent activity"),v()())}var Bg=class n{searchQuery="";searchResults=[];isLoggedIn=!0;cards;ngAfterViewInit(){let e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&(r.target.classList.add("in-view"),e.unobserve(r.target))})},{threshold:.1});this.cards.forEach(t=>e.observe(t.nativeElement))}searchDrugs(){this.searchQuery.trim()?this.searchResults=[{name:"Acetaminophen",description:"Pain reliever and fever reducer"},{name:"Ibuprofen",description:"Anti-inflammatory used to treat pain and swelling"}].filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.searchResults=[]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-home"]],viewQuery:function(t,r){if(t&1&&Lh(PW,5,ft),t&2){let i;ru(i=iu())&&(r.cards=i)}},decls:19,vars:4,consts:[["animatedCard",""],[1,"home-layout"],[1,"hero-header"],[1,"subtext"],["class","welcome-msg",4,"ngIf"],[1,"module-grid"],["routerLink","/register","class","module-card register-card","title","Create a new account",4,"ngIf"],["routerLink","/login","class","module-card login-card","title","Log in to your profile",4,"ngIf"],["routerLink","/dashboard","class","module-card dashboard-card","title","Your full medication overview",4,"ngIf"],["routerLink","/tracking-list","title","See what's currently being tracked",1,"module-card","tracking-card"],[1,"card-icon"],[1,"card-title"],[1,"card-subtext"],[1,"welcome-msg"],["routerLink","/register","title","Create a new account",1,"module-card","register-card"],["routerLink","/login","title","Log in to your profile",1,"module-card","login-card"],["routerLink","/dashboard","title","Your full medication overview",1,"module-card","dashboard-card"]],template:function(t,r){t&1&&(E(0,"div",1)(1,"div",2)(2,"h1"),w(3,"Dose Ninja"),v(),E(4,"p",3),w(5,"Never forget if you took that pill"),v(),J(6,RW,2,0,"p",4),v(),E(7,"div",5),J(8,xW,8,0,"a",6)(9,NW,8,0,"a",7)(10,OW,8,0,"a",8),E(11,"a",9,0)(13,"div",10),w(14,"\u{1F48A}"),v(),E(15,"div",11),w(16,"Tracking List"),v(),E(17,"div",12),w(18,"Your current medication list"),v()()()()),t&2&&(R(6),F("ngIf",r.isLoggedIn),R(2),F("ngIf",!r.isLoggedIn),R(),F("ngIf",!r.isLoggedIn),R(),F("ngIf",r.isLoggedIn))},dependencies:[ao,Ae,Le],styles:['@charset "UTF-8";.home-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4rem 1rem;text-align:center;min-height:100vh}.hero-header[_ngcontent-%COMP%]{margin-bottom:3rem}.hero-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:.5rem;color:var(--color-primary)}.hero-header[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--color-muted)}.hero-header[_ngcontent-%COMP%]   .welcome-msg[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--color-secondary);margin-top:1rem}.module-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;margin-top:2rem}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.module-card[_ngcontent-%COMP%]{width:180px;height:180px;display:inline-flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;border:2px solid var(--color-primary);border-radius:16px;font-weight:600;text-decoration:none;color:var(--color-primary);background-color:#1976d20d;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInUp .5s ease both;cursor:pointer}.module-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem}.module-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.module-card[_ngcontent-%COMP%]   .card-subtext[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-muted);margin-top:.25rem;text-align:center;max-width:140px;line-height:1.3}.module-card[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff;transform:scale(1.05)}.module-card[_ngcontent-%COMP%]:hover   .card-subtext[_ngcontent-%COMP%]{color:#e0e0e0}.module-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.module-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.module-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.module-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.register-card[_ngcontent-%COMP%]{background-color:#4caf501a}.login-card[_ngcontent-%COMP%]{background-color:#2196f31a}.dashboard-card[_ngcontent-%COMP%]{background-color:#ff98001a}.tracking-card[_ngcontent-%COMP%]{background-color:#9c27b01a}@media (max-width: 600px){.home-layout[_ngcontent-%COMP%]{padding:2rem 1rem}.hero-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.hero-header[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:1rem}.module-grid[_ngcontent-%COMP%]{gap:1.5rem}.module-card[_ngcontent-%COMP%]{width:140px;height:140px;font-size:.9rem}.module-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2rem}.module-card[_ngcontent-%COMP%]   .card-subtext[_ngcontent-%COMP%]{font-size:.75rem}}']})};function kW(n,e){if(n&1&&(E(0,"div",23),w(1),v()),n&2){let t=Q();R(),re(" ",t.successMessage," ")}}function FW(n,e){if(n&1&&(E(0,"div",24),w(1),v()),n&2){let t=Q();R(),re(" ",t.errorMessage," ")}}function LW(n,e){n&1&&(E(0,"div",4)(1,"label",25),w(2,"Reminder Time"),v(),xe(3,"input",26),v())}var $g=class n{constructor(e,t,r){this.fb=e;this.authService=t;this.reminderService=r;this.profileForm=this.fb.group({username:["",ke.required],email:["",[ke.required,ke.email]],notifications:["enabled"],dailyRemindersEnabled:[!0],reminderTime:["08:00"],contactMethod:["email"]})}profileForm;currentUser=null;successMessage="";errorMessage="";ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.currentUser=e,e&&(this.profileForm.patchValue({username:e.displayName||"",email:e.email||""}),this.reminderService.getReminderSettings(e.uid).then(t=>{t&&this.profileForm.patchValue({dailyRemindersEnabled:t.dailyRemindersEnabled,reminderTime:t.reminderTime,contactMethod:t.contactMethod})}).catch(t=>{console.warn("No reminder settings found or error:",t)}))})}onSubmit(){if(this.profileForm.valid&&this.currentUser){let{username:e,email:t,dailyRemindersEnabled:r,reminderTime:i,contactMethod:o}=this.profileForm.value;this.authService.updateUserProfile(e,t).then(()=>this.reminderService.saveReminderSettings({dailyRemindersEnabled:r,reminderTime:i,contactMethod:o})).then(()=>{this.successMessage="\u2705 Profile and reminder settings updated!",this.errorMessage=""}).catch(s=>{console.error("Error:",s),this.errorMessage=s.message||"Failed to save changes.",this.successMessage=""})}}toggleDarkMode(){document.body.classList.toggle("dark")}static \u0275fac=function(t){return new(t||n)(U(Hn),U(Bt),U(oc))};static \u0275cmp=we({type:n,selectors:[["app-user-profile"]],decls:41,vars:5,consts:[[1,"card","user-profile-container"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username"],["for","email"],["type","email","id","email","formControlName","email"],["for","notifications"],["id","notifications","formControlName","notifications"],["value","enabled"],["value","disabled"],["type","checkbox","formControlName","dailyRemindersEnabled"],["class","form-group",4,"ngIf"],["for","contactMethod"],["id","contactMethod","formControlName","contactMethod"],["value","email"],["value","sms"],[1,"form-group","toggle-group"],["for","themeToggle"],["type","checkbox","id","themeToggle",3,"change"],["type","submit",3,"disabled"],[1,"success-message"],[1,"error-message"],["for","reminderTime"],["type","time","id","reminderTime","formControlName","reminderTime"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"User Profile"),v(),J(3,kW,2,1,"div",1)(4,FW,2,1,"div",2),E(5,"form",3),ue("ngSubmit",function(){return r.onSubmit()}),E(6,"div",4)(7,"label",5),w(8,"Username"),v(),xe(9,"input",6),v(),E(10,"div",4)(11,"label",7),w(12,"Email"),v(),xe(13,"input",8),v(),E(14,"div",4)(15,"label",9),w(16,"Notifications"),v(),E(17,"select",10)(18,"option",11),w(19,"Enabled"),v(),E(20,"option",12),w(21,"Disabled"),v()()(),E(22,"div",4)(23,"label"),xe(24,"input",13),w(25," Enable Daily Reminders "),v()(),J(26,LW,4,0,"div",14),E(27,"div",4)(28,"label",15),w(29,"Preferred Contact Method"),v(),E(30,"select",16)(31,"option",17),w(32,"Email"),v(),E(33,"option",18),w(34,"SMS (future)"),v()()(),E(35,"div",19)(36,"label",20),w(37,"Dark Mode"),v(),E(38,"input",21),ue("change",function(){return r.toggleDarkMode()}),v()(),E(39,"button",22),w(40,"Save Changes"),v()()()),t&2){let i;R(3),F("ngIf",r.successMessage),R(),F("ngIf",r.errorMessage),R(),F("formGroup",r.profileForm),R(21),F("ngIf",(i=r.profileForm.get("dailyRemindersEnabled"))==null?null:i.value),R(13),F("disabled",r.profileForm.invalid)}},dependencies:[Ae,Le,dn,$n,Og,kg,It,gC,lc,$t,Bn,Cn,bn],styles:['@charset "UTF-8";.user-profile-container[_ngcontent-%COMP%]{max-width:600px;margin:3rem auto;padding:2rem;border-radius:16px;background:#ffffff0d;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:inset 0 0 .5px #ffffff0d,0 8px 20px #00000014;animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards;color:var(--text-color)}h2[_ngcontent-%COMP%]{text-align:center;color:var(--color-primary);margin-bottom:1.5rem}.success-message[_ngcontent-%COMP%]{background-color:#d0f0d8;color:#2e7d32;padding:.75rem 1rem;border-radius:8px;border-left:4px solid #43a047;margin-bottom:1rem;font-weight:500}.error-message[_ngcontent-%COMP%]{background-color:#fdecea;color:#c62828;padding:.75rem 1rem;border-radius:8px;border-left:4px solid #e53935;margin-bottom:1rem;font-weight:500}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.4rem;font-weight:500;color:var(--text-color)}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem 1rem;border-radius:8px;border:1px solid #ccc;font-size:1rem;background-color:#fff;color:#000}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px #6495ed4d}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;padding:.75rem;font-size:1rem;border:none;border-radius:999px;cursor:pointer;transition:background-color .3s ease}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 600px){.user-profile-container[_ngcontent-%COMP%]{padding:1.5rem;margin:2rem 1rem}.profile-form[_ngcontent-%COMP%]{gap:1rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem .8rem}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.95rem;padding:.6rem 1rem}}']})};function VW(n,e){if(n&1&&(E(0,"div",11),w(1),v()),n&2){let t=Q();R(),re(" ",t.toastMessage," ")}}function UW(n,e){if(n&1){let t=mn();E(0,"div",12)(1,"div",13)(2,"h3"),w(3,"Confirm Deletion Request"),v(),E(4,"p"),w(5,"Are you sure you want to submit this request?"),v(),E(6,"div",14)(7,"button",15),ue("click",function(){rn(t);let i=Q();return on(i.confirmRequest())}),w(8,"Yes, Confirm"),v(),E(9,"button",15),ue("click",function(){rn(t);let i=Q();return on(i.cancelRequest())}),w(10,"Cancel"),v()()()()}}var Hg=class n{constructor(e){this.fb=e;this.requestForm=this.fb.group({email:["",[ke.required,ke.email]],reason:[""]});let t=this.auth.currentUser;t?.email&&this.requestForm.patchValue({email:t.email})}requestForm;toastMessage="";showConfirmModal=!1;db=mg();auth=gp();onDeleteRequest(){this.requestForm.invalid||(this.showConfirmModal=!0)}confirmRequest(){return _(this,null,function*(){let{email:e,reason:t}=this.requestForm.value;try{yield rc($r(this.db,"deletionRequests"),{email:e,reason:t,timestamp:new Date().toISOString()}),this.toastMessage="\u2705 Your deletion request has been received.",this.requestForm.reset()}catch(r){console.error("\u274C Firestore error:",r),this.toastMessage="\u274C Failed to submit request. Try again later."}this.showConfirmModal=!1,setTimeout(()=>this.toastMessage="",5e3)})}cancelRequest(){this.showConfirmModal=!1}static \u0275fac=function(t){return new(t||n)(U(Hn))};static \u0275cmp=we({type:n,selectors:[["app-privacy-policy"]],decls:106,vars:4,consts:[[1,"privacy-container"],["class","toast success-toast",4,"ngIf"],["href","https://policies.google.com/technologies/ads","target","_blank","rel","noopener"],["href","mailto:privacy@doseninja.com"],[1,"deletion-request-section"],[1,"deletion-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","reason"],["id","reason","formControlName","reason","rows","3"],["type","submit",3,"disabled"],["class","modal-overlay",4,"ngIf"],[1,"toast","success-toast"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-buttons"],[3,"click"]],template:function(t,r){t&1&&(E(0,"div",0),J(1,VW,2,1,"div",1),E(2,"h1"),w(3,"Privacy Policy"),v(),E(4,"p")(5,"strong"),w(6,"Last Updated:"),v(),w(7," April 15, 2025"),v(),E(8,"h2"),w(9,"1. Information We Collect"),v(),E(10,"ul")(11,"li"),w(12,"Name, email address, and optional birth date"),v(),E(13,"li"),w(14,"Medication data, reminder preferences, and usage logs"),v(),E(15,"li"),w(16,"Device info such as IP address, browser type, and OS"),v()(),E(17,"h2"),w(18,"2. How We Use Your Data"),v(),E(19,"ul")(20,"li"),w(21,"To personalize your reminders and medication tracking"),v(),E(22,"li"),w(23,"To analyze feature usage and improve app functionality"),v(),E(24,"li"),w(25,"To display non-personalized ads in the free version"),v()(),E(26,"h2"),w(27,"3. Email Communications"),v(),E(28,"p"),w(29," We may send medication reminders and system updates. You can manage communication preferences in your profile settings. "),v(),E(30,"h2"),w(31,"4. Ads and Monetization"),v(),E(32,"p"),w(33," Dose Ninja displays "),E(34,"strong"),w(35,"non-personalized ads"),v(),w(36," through networks such as Google AdSense. These ads do not use health data for targeting. Upgrade to a paid plan to remove ads. "),xe(37,"br"),w(38," \u{1F517} "),E(39,"a",2),w(40,"Learn more about Google's ad practices"),v()(),E(41,"h2"),w(42,"5. Third-Party Services"),v(),E(43,"p"),w(44," We use the following trusted services: "),v(),E(45,"ul")(46,"li")(47,"strong"),w(48,"Firebase"),v(),w(49," \u2013 authentication, cloud storage, and analytics"),v(),E(50,"li")(51,"strong"),w(52,"Stripe"),v(),w(53," \u2013 payment processing"),v(),E(54,"li")(55,"strong"),w(56,"Google AdSense"),v(),w(57," \u2013 ad delivery"),v()(),E(58,"h2"),w(59,"6. HIPAA Alignment"),v(),E(60,"p"),w(61," Dose Ninja is not a HIPAA Covered Entity, but we align with HIPAA best practices: "),v(),E(62,"ul")(63,"li"),w(64,"End-to-end encryption of sensitive data"),v(),E(65,"li"),w(66,"Strict access controls and secure authentication"),v(),E(67,"li"),w(68,"No PHI is transmitted to third-party services"),v()(),E(69,"h2"),w(70,"7. Your Data Rights"),v(),E(71,"ul")(72,"li"),w(73,"Access, export, or delete your data any time"),v(),E(74,"li"),w(75,"Request assistance at "),E(76,"strong")(77,"a",3),w(78,"privacy@doseninja.com"),v()()()(),E(79,"h2"),w(80,"8. Data Retention"),v(),E(81,"p"),w(82,"We delete your data within 30 days of confirmed deletion request or account closure."),v(),E(83,"h2"),w(84,"9. Children\u2019s Privacy"),v(),E(85,"p"),w(86," Dose Ninja is intended for users aged 18 and older. We do not knowingly collect information from children under 13. "),v(),E(87,"h2"),w(88,"10. Contact Us"),v(),E(89,"p"),w(90," \u{1F4E9} "),E(91,"strong"),w(92,"Email:"),v(),E(93,"a",3),w(94,"privacy@doseninja.com"),v()()(),E(95,"div",4)(96,"h3"),w(97,"\u{1F5D1}\uFE0F Request Data Deletion"),v(),E(98,"form",5),ue("ngSubmit",function(){return r.onDeleteRequest()}),E(99,"div",6)(100,"label",7),w(101,"Reason (optional)"),v(),xe(102,"textarea",8),v(),E(103,"button",9),w(104,"Submit Request"),v()()(),J(105,UW,11,0,"div",10)),t&2&&(R(),F("ngIf",r.toastMessage),R(97),F("formGroup",r.requestForm),R(5),F("disabled",r.requestForm.invalid),R(2),F("ngIf",r.showConfirmModal))},dependencies:[Ae,Le,dn,$n,It,$t,Bn,Cn,bn,Uo],styles:['@charset "UTF-8";.privacy-container[_ngcontent-%COMP%]{max-width:800px;margin:3rem auto;padding:2rem;border-radius:16px;background:#ffffff0d;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:inset 0 0 .5px #ffffff0d,0 8px 20px #00000014;animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards;color:var(--text-color)}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:var(--color-primary);margin-bottom:1rem}p[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{color:var(--text-color);font-size:1rem;line-height:1.6}ul[_ngcontent-%COMP%]{margin-left:1.5rem;margin-bottom:1.5rem;list-style-type:disc}a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{border:none;border-top:1px solid rgba(255,255,255,.1);margin:2rem 0}.toast[_ngcontent-%COMP%]{padding:1rem;border-radius:12px;margin-bottom:1.5rem;font-size:1rem;font-weight:500;animation:_ngcontent-%COMP%_fadeSlideDown .4s ease-in-out;box-shadow:0 4px 16px #00000014;background:#ffffff1a;color:var(--text-color)}.success-toast[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-left:6px solid #28a745}.deletion-request-section[_ngcontent-%COMP%]{margin-top:3rem;padding:2rem;background:#ffffff0d;border-radius:16px;box-shadow:0 4px 20px #0000000d;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}.deletion-request-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-primary);margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem}.deletion-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ccc;border-radius:8px;font-size:1rem;background-color:#fff;color:#000}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px #6495ed4d}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;background-color:var(--color-primary);color:#fff;border:none;border-radius:999px;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s ease}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0006;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;max-width:400px;width:90%;color:#000;box-shadow:0 4px 20px #0003;animation:_ngcontent-%COMP%_fadeInUp .3s ease-in-out;text-align:center}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.25rem;color:var(--color-primary)}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:1.5rem}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:.95rem;border-radius:8px;border:none;cursor:pointer;font-weight:600;transition:all .3s ease}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background-color:var(--color-primary);color:#fff}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child:hover{background-color:#1565c0}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#eee;color:#333}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{background-color:#ddd}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeSlideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 600px){.privacy-container[_ngcontent-%COMP%]{padding:1.5rem;margin:2rem 1rem}h1[_ngcontent-%COMP%]{font-size:1.5rem}p[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{font-size:.95rem}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']})};var zg=class n{constructor(e){this.http=e}baseUrl=Pl.drugBankBaseUrl;token=Pl.drugBankToken;getHeaders(){return new Cr({Authorization:`Bearer ${this.token}`})}searchByName(e){return this.http.get(`${this.baseUrl}/us/drug_names?q=${encodeURIComponent(e)}`,{headers:this.getHeaders()})}searchByIngredient(e){return this.http.get(`${this.baseUrl}/us/ingredient_names?q=${encodeURIComponent(e)}`,{headers:this.getHeaders()})}getDrugById(e){return this.http.get(`${this.baseUrl}/us/drugs/${e}`,{headers:this.getHeaders()})}static \u0275fac=function(t){return new(t||n)(K(ga))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function BW(n,e){if(n&1&&(E(0,"div",4),w(1),v()),n&2){let t=Q();R(),re(" \u26A0\uFE0F ",t.errorMessage," ")}}function $W(n,e){if(n&1&&(E(0,"div",5)(1,"h3"),w(2,"Response:"),v(),E(3,"pre"),w(4),la(5,"json"),v()()),n&2){let t=Q();R(4),Xe(Vh(5,1,t.testResult))}}var qg=class n{constructor(e){this.drugbank=e}testResult=null;errorMessage="";ngOnInit(){}runTest(){this.errorMessage="",this.testResult=null,this.drugbank.searchByName("aspirin").subscribe({next:e=>this.testResult=e,error:e=>this.errorMessage=e.message||"Unknown error"})}static \u0275fac=function(t){return new(t||n)(U(zg))};static \u0275cmp=we({type:n,selectors:[["app-admin-test"]],decls:7,vars:2,consts:[[1,"admin-test-container"],[3,"click"],["class","error-message",4,"ngIf"],["class","result",4,"ngIf"],[1,"error-message"],[1,"result"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"DrugBank API Test"),v(),E(3,"button",1),ue("click",function(){return r.runTest()}),w(4,"Search \u201Caspirin\u201D"),v(),J(5,BW,2,1,"div",2)(6,$W,6,3,"div",3),v()),t&2&&(R(5),F("ngIf",r.errorMessage),R(),F("ngIf",r.testResult))},dependencies:[Ae,Le,E_,dn],styles:['@charset "UTF-8";.admin-test-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:1.5rem;background:var(--color-surface);color:var(--text-color);border-radius:8px;box-shadow:0 2px 8px #0000001a}.admin-test-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--color-primary)}.admin-test-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--color-primary);color:#fff;border:none;border-radius:4px;cursor:pointer;margin-bottom:1rem;transition:filter .2s ease}.admin-test-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{filter:brightness(.95)}.admin-test-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#c00;margin-bottom:1rem}.admin-test-container[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#f5f5f5;padding:1rem;border-radius:4px;overflow:auto;max-height:400px;color:var(--text-color)}body.dark[_ngcontent-%COMP%]   .admin-test-container[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--text-color-light);box-shadow:0 2px 8px #00000080}body.dark[_ngcontent-%COMP%]   .admin-test-container[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#2a2a2a;color:var(--text-color)}']})};function HW(n,e){if(n&1&&(E(0,"div",9),w(1),v()),n&2){let t=Q();R(),Xe(t.message)}}function zW(n,e){if(n&1&&(E(0,"div",10),w(1),v()),n&2){let t=Q();R(),Xe(t.error)}}var Gg=class n{constructor(e,t){this.fb=e;this.auth=t;this.form=this.fb.group({email:["",[ke.required,ke.email]]})}form;message="";error="";onSubmit(){return _(this,null,function*(){if(this.message="",this.error="",this.form.invalid){this.error="Please enter a valid email.";return}try{yield this.auth.sendPasswordReset(this.form.value.email),this.message="\u2705 Password reset email sent. Please check your inbox.",this.form.reset()}catch(e){console.error("Password Reset Error:",e),this.error="\u274C Failed to send reset email. Try again later."}})}static \u0275fac=function(t){return new(t||n)(U(Hn),U(Bt))};static \u0275cmp=we({type:n,selectors:[["app-forgot-password"]],decls:14,vars:4,consts:[[1,"forgot-password-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","required",""],["type","submit",3,"disabled"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["routerLink","/login",1,"back-link"],[1,"success-message"],[1,"error-message"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"Forgot Password"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",2)(5,"label",3),w(6,"Email Address"),v(),xe(7,"input",4),v(),E(8,"button",5),w(9,"Send Reset Link"),v()(),J(10,HW,2,1,"div",6)(11,zW,2,1,"div",7),E(12,"a",8),w(13,"Back to Login"),v()()),t&2&&(R(3),F("formGroup",r.form),R(5),F("disabled",r.form.invalid),R(2),F("ngIf",r.message),R(),F("ngIf",r.error))},dependencies:[Ae,Le,dn,$n,It,$t,Bn,CC,Cn,bn,Kt,Vn],styles:[".forgot-password-container[_ngcontent-%COMP%]{max-width:400px;margin:3rem auto;padding:2rem;background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;box-shadow:0 4px 20px #0000001a}.forgot-password-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--color-primary)}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:8px;border:1px solid #ccc;font-size:1rem}.forgot-password-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:var(--color-primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer}.forgot-password-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#1565c0}.forgot-password-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{margin-top:1rem;color:green;font-size:.95rem}.forgot-password-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:1rem;color:red;font-size:.95rem}.forgot-password-container[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{display:block;margin-top:2rem;text-align:center;color:var(--color-primary);text-decoration:none}.forgot-password-container[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var Wg=class n{functions=k(ys);createCheckoutSession(e,t){let r=sk(this.functions,"createCheckoutSession");return Re(r({email:e,billingPeriod:t})).pipe(ee(i=>i.data.url))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kg=class n{constructor(e){this.stripeService=e}billingPeriod="monthly";loading=!1;auth=k(En);get priceLabel(){return this.billingPeriod==="yearly"?"$49.99/year":"$4.99/month"}upgrade(){alert("Upgrade function started"),this.loading=!0,ZR(this.auth).pipe(Gn(1)).subscribe(e=>{e?.email?(console.log("\u2705 Logged in as:",e.email),this.stripeService.createCheckoutSession(e.email,this.billingPeriod).subscribe({next:t=>{console.log("\u{1F517} Stripe session URL received:",t),t?window.location.href=t:(alert("No URL returned from Stripe."),this.loading=!1)},error:t=>{console.error("\u274C Stripe checkout error:",t),this.loading=!1,alert("There was an issue with Stripe checkout.")}})):(console.warn("\u26A0\uFE0F No user is currently logged in."),this.loading=!1,alert("Please log in to upgrade."))})}static \u0275fac=function(t){return new(t||n)(U(Wg))};static \u0275cmp=we({type:n,selectors:[["app-upgrade"]],decls:50,vars:4,consts:[[1,"upgrade-container"],[1,"billing-toggle"],["type","radio","name","billing","value","monthly",3,"ngModelChange","ngModel"],["type","radio","name","billing","value","yearly",3,"ngModelChange","ngModel"],[1,"discount"],[1,"plan-comparison"],[1,"plan-card","free"],[1,"included"],[1,"excluded"],["disabled",""],[1,"plan-card","premium"],[3,"click","disabled"],[1,"faq-link"],["routerLink","/faq"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h1"),w(2,"Upgrade to Dose Ninja Premium"),v(),E(3,"p"),w(4,"Unlock powerful features to stay on top of your medications."),v(),E(5,"div",1)(6,"label")(7,"input",2),ua("ngModelChange",function(o){return su(r.billingPeriod,o)||(r.billingPeriod=o),o}),v(),w(8," Monthly "),v(),E(9,"label")(10,"input",3),ua("ngModelChange",function(o){return su(r.billingPeriod,o)||(r.billingPeriod=o),o}),v(),w(11," Yearly "),E(12,"span",4),w(13,"(Save 20%)"),v()()(),E(14,"div",5)(15,"div",6)(16,"h2"),w(17,"Free"),v(),E(18,"ul")(19,"li",7),w(20,"\u2714\uFE0F Medication search"),v(),E(21,"li",7),w(22,"\u2714\uFE0F Daily reminders"),v(),E(23,"li",7),w(24,"\u2714\uFE0F Basic dashboard"),v(),E(25,"li",8),w(26,"\u274C No history tracking"),v(),E(27,"li",8),w(28,"\u274C Ads shown"),v()(),E(29,"button",9),w(30,"Current Plan"),v()(),E(31,"div",10)(32,"h2"),w(33,"Premium"),v(),E(34,"ul")(35,"li",7),w(36,"\u2714\uFE0F No ads"),v(),E(37,"li",7),w(38,"\u2714\uFE0F Unlimited tracking"),v(),E(39,"li",7),w(40,"\u2714\uFE0F Smart drug interactions"),v(),E(41,"li",7),w(42,"\u2714\uFE0F Export logs (PDF/CSV)"),v(),E(43,"li",7),w(44,"\u2714\uFE0F Streak tracking"),v()(),E(45,"button",11),ue("click",function(){return r.upgrade()}),w(46),v()()(),E(47,"div",12)(48,"a",13),w(49,"Learn more in our FAQ"),v()()()),t&2&&(R(7),ca("ngModel",r.billingPeriod),R(3),ca("ngModel",r.billingPeriod),R(35),F("disabled",r.loading),R(),re(" ",r.loading?"Processing...":r.billingPeriod==="yearly"?"Upgrade \u2013 $49.99/year":"Upgrade \u2013 $4.99/month"," "))},dependencies:[Ae,ao,It,IC,$t,Ul],styles:[".upgrade-container[_ngcontent-%COMP%]{text-align:center;padding:3rem 1.5rem 5rem;color:#222;background:transparent}.upgrade-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:700;margin-bottom:.5rem;color:inherit}.upgrade-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#555;margin-bottom:2rem}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]{background:#0000000f;border-radius:50px;padding:.75rem 1.5rem;display:inline-flex;gap:2rem;align-items:center;justify-content:center;box-shadow:0 0 12px #0000001a;margin-bottom:2.5rem;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:1rem;cursor:pointer;display:flex;align-items:center}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:.5rem}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]{color:#2e7d32;font-size:.9rem;margin-left:6px}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:20px;padding:2rem;width:320px;box-shadow:0 10px 25px #00000026;border:1px solid #ddd;transition:transform .3s,border-color .3s;color:#222}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]:hover{transform:scale(1.03);border-color:#4caf50}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center;gap:.5rem;color:#111}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin-bottom:1.5rem;font-size:1rem}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.6rem 0;display:flex;align-items:center;gap:.5rem}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.included[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.excluded[_ngcontent-%COMP%]{color:#c62828;text-decoration:line-through;font-weight:500}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:10px;font-weight:700;font-size:1rem;cursor:pointer;transition:background .3s}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#43a047}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#888;cursor:not-allowed}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card.free[_ngcontent-%COMP%]{border:1px solid #aaa}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card.premium[_ngcontent-%COMP%]{border:1px solid #4caf50}.upgrade-container[_ngcontent-%COMP%]   .faq-link[_ngcontent-%COMP%]{margin-top:2rem}.upgrade-container[_ngcontent-%COMP%]   .faq-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:underline;font-size:.95rem}@media screen and (max-width: 768px){.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]})};var Qg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-upgrade-success"]],decls:9,vars:0,consts:[[1,"upgrade-result","success"],["routerLink","/dashboard",1,"button"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h1"),w(2,"\u{1F389} Thank You for Upgrading!"),v(),E(3,"p"),w(4,"You now have access to Dose Ninja Premium features."),v(),E(5,"p"),w(6,"Enjoy unlimited tracking, no ads, and smart medication insights."),v(),E(7,"a",1),w(8,"Go to Dashboard"),v()())},styles:[".upgrade-result[_ngcontent-%COMP%]{text-align:center;margin-top:3rem}.upgrade-result.success[_ngcontent-%COMP%]{color:#2e7d32}.upgrade-result.cancel[_ngcontent-%COMP%]{color:#c62828}.upgrade-result[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-block;margin-top:1.5rem;padding:.75rem 1.5rem;background-color:#1976d2;color:#fff;border:none;border-radius:8px;text-decoration:none}.upgrade-result[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}"]})};var Yg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-upgrade-cancel"]],decls:9,vars:0,consts:[[1,"upgrade-result","cancel"],["routerLink","/upgrade",1,"button"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h1"),w(2,"\u26A0\uFE0F Upgrade Canceled"),v(),E(3,"p"),w(4,"It looks like your upgrade didn\u2019t complete."),v(),E(5,"p"),w(6,"If this was a mistake, you can try again anytime."),v(),E(7,"a",1),w(8,"Try Again"),v()())},styles:[".upgrade-result[_ngcontent-%COMP%]{text-align:center;margin-top:3rem}.upgrade-result.success[_ngcontent-%COMP%]{color:#2e7d32}.upgrade-result.cancel[_ngcontent-%COMP%]{color:#c62828}.upgrade-result[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-block;margin-top:1.5rem;padding:.75rem 1.5rem;background-color:#1976d2;color:#fff;border:none;border-radius:8px;text-decoration:none}.upgrade-result[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}"]})};var jk=[{path:"",component:Bg},{path:"dashboard",component:Ig},{path:"drug-details/:rxcui",component:Cg},{path:"login",component:Fg},{path:"register",component:Lg},{path:"profile",component:$g},{path:"tracking-list",component:Vg},{path:"medication-search",component:Ug},{path:"dosage-correction",component:jg},{path:"upgrade",component:Kg},{path:"upgrade-success",component:Qg},{path:"upgrade-cancel",component:Yg},{path:"privacy-policy",component:Hg},{path:"admin-test",component:qg},{path:"forgot-password",component:Gg},{path:"**",redirectTo:""}];P_(_g,{providers:[uE(jk),jP(()=>BP(Pl.firebase)),YR(()=>gp()),$O(()=>mg()),ik(()=>ok())]});
