var h1=Object.defineProperty,f1=Object.defineProperties;var p1=Object.getOwnPropertyDescriptors;var _C=Object.getOwnPropertySymbols,g1=Object.getPrototypeOf,m1=Object.prototype.hasOwnProperty,y1=Object.prototype.propertyIsEnumerable,v1=Reflect.get;var EC=(n,e,t)=>e in n?h1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})m1.call(e,t)&&EC(n,t,e[t]);if(_C)for(var t of _C(e))y1.call(e,t)&&EC(n,t,e[t]);return n},he=(n,e)=>f1(n,p1(e));var Ci=(n,e,t)=>v1(g1(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function Im(n,e){return Object.is(n,e)}var dt=null,ed=!1,bm=1,Cn=Symbol("SIGNAL");function ve(n){let e=dt;return dt=n,e}function Cm(){return dt}var Mc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Rc(n){if(ed)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(n);let e=dt.nextProducerIndex++;if(id(dt),e<dt.producerNode.length&&dt.producerNode[e]!==n&&Ac(dt)){let t=dt.producerNode[e];rd(t,dt.producerIndexOfThis[e])}dt.producerNode[e]!==n&&(dt.producerNode[e]=n,dt.producerIndexOfThis[e]=Ac(dt)?IC(n,dt,e):0),dt.producerLastReadVersion[e]=n.version}function wC(){bm++}function Dm(n){if(!(Ac(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===bm)){if(!n.producerMustRecompute(n)&&!Mm(n)){wm(n);return}n.producerRecomputeValue(n),wm(n)}}function Tm(n){if(n.liveConsumerNode===void 0)return;let e=ed;ed=!0;try{for(let t of n.liveConsumerNode)t.dirty||_1(t)}finally{ed=e}}function Sm(){return dt?.consumerAllowSignalWrites!==!1}function _1(n){n.dirty=!0,Tm(n),n.consumerMarkedDirty?.(n)}function wm(n){n.dirty=!1,n.lastCleanEpoch=bm}function nd(n){return n&&(n.nextProducerIndex=0),ve(n)}function Am(n,e){if(ve(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ac(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)rd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Mm(n){id(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Dm(t),r!==t.version))return!0}return!1}function Rm(n){if(id(n),Ac(n))for(let e=0;e<n.producerNode.length;e++)rd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function IC(n,e,t){if(bC(n),n.liveConsumerNode.length===0&&CC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=IC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function rd(n,e){if(bC(n),n.liveConsumerNode.length===1&&CC(n))for(let r=0;r<n.producerNode.length;r++)rd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];id(i),i.producerIndexOfThis[r]=e}}function Ac(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function id(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function bC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function CC(n){return n.producerNode!==void 0}function Pm(n,e){let t=Object.create(E1);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Dm(t),Rc(t),t.value===td)throw t.error;return t.value};return r[Cn]=t,r}var _m=Symbol("UNSET"),Em=Symbol("COMPUTING"),td=Symbol("ERRORED"),E1=he(j({},Mc),{value:_m,dirty:!0,error:null,equal:Im,kind:"computed",producerMustRecompute(n){return n.value===_m||n.value===Em},producerRecomputeValue(n){if(n.value===Em)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Em;let t=nd(n),r,i=!1;try{r=n.computation(),ve(null),i=e!==_m&&e!==td&&r!==td&&n.equal(e,r)}catch(o){r=td,n.error=o}finally{Am(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function w1(){throw new Error}var DC=w1;function TC(n){DC(n)}function xm(n){DC=n}var I1=null;function Nm(n,e){let t=Object.create(od);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(Rc(t),t.value);return r[Cn]=t,r}function Pc(n,e){Sm()||TC(n),n.equal(n.value,e)||(n.value=e,b1(n))}function Om(n,e){Sm()||TC(n),Pc(n,e(n.value))}var od=he(j({},Mc),{equal:Im,value:void 0,kind:"signal"});function b1(n){n.version++,wC(),Tm(n),I1?.()}function km(n){let e=ve(null);try{return n()}finally{ve(e)}}var Fm;function xc(){return Fm}function qr(n){let e=Fm;return Fm=n,e}var sd=Symbol("NotFound");function ae(n){return typeof n=="function"}function bs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var ad=bs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function po(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ae(r))try{r()}catch(o){e=o instanceof ad?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{SC(o)}catch(s){e=e??[],s instanceof ad?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ad(e)}}add(e){var t;if(e&&e!==this)if(this.closed)SC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&po(t,e)}remove(e){let{_finalizers:t}=this;t&&po(t,e),e instanceof n&&e._removeParent(this)}};Ze.EMPTY=(()=>{let n=new Ze;return n.closed=!0,n})();var Lm=Ze.EMPTY;function cd(n){return n instanceof Ze||n&&"closed"in n&&ae(n.remove)&&ae(n.add)&&ae(n.unsubscribe)}function SC(n){ae(n)?n():n.unsubscribe()}var zn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Cs={setTimeout(n,e,...t){let{delegate:r}=Cs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Cs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ud(n){Cs.setTimeout(()=>{let{onUnhandledError:e}=zn;if(e)e(n);else throw n})}function Nc(){}var AC=Vm("C",void 0,void 0);function MC(n){return Vm("E",void 0,n)}function RC(n){return Vm("N",n,void 0)}function Vm(n,e,t){return{kind:n,value:e,error:t}}var go=null;function Ds(n){if(zn.useDeprecatedSynchronousErrorHandling){let e=!go;if(e&&(go={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=go;if(go=null,t)throw r}}else n()}function PC(n){zn.useDeprecatedSynchronousErrorHandling&&go&&(go.errorThrown=!0,go.error=n)}var mo=class extends Ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cd(e)&&e.add(this)):this.destination=M1}static create(e,t,r){return new Ts(e,t,r)}next(e){this.isStopped?jm(RC(e),this):this._next(e)}error(e){this.isStopped?jm(MC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jm(AC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},S1=Function.prototype.bind;function Um(n,e){return S1.call(n,e)}var Bm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ld(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ld(r)}else ld(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ld(t)}}},Ts=class extends mo{constructor(e,t,r){super();let i;if(ae(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&zn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Um(e.next,o),error:e.error&&Um(e.error,o),complete:e.complete&&Um(e.complete,o)}):i=e}this.destination=new Bm(i)}};function ld(n){zn.useDeprecatedSynchronousErrorHandling?PC(n):ud(n)}function A1(n){throw n}function jm(n,e){let{onStoppedNotification:t}=zn;t&&Cs.setTimeout(()=>t(n,e))}var M1={closed:!0,next:Nc,error:A1,complete:Nc};var Ss=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fn(n){return n}function dd(...n){return $m(n)}function $m(n){return n.length===0?fn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=P1(t)?t:new Ts(t,r,i);return Ds(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=xC(r),new r((i,o)=>{let s=new Ts({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ss](){return this}pipe(...t){return $m(t)(this)}toPromise(t){return t=xC(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function xC(n){var e;return(e=n??zn.Promise)!==null&&e!==void 0?e:Promise}function R1(n){return n&&ae(n.next)&&ae(n.error)&&ae(n.complete)}function P1(n){return n&&n instanceof mo||R1(n)&&cd(n)}function Hm(n){return ae(n?.lift)}function Ie(n){return e=>{if(Hm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new zm(n,e,t,r,i)}var zm=class extends mo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function As(){return Ie((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ms=class extends re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ze;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ze.EMPTY)}return e}refCount(){return As()(this)}};var NC=bs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new hd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new NC}next(t){Ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ds(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Lm:(this.currentObservers=null,o.push(t),new Ze(()=>{this.currentObservers=null,po(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new re;return t.source=this,t}}return n.create=(e,t)=>new hd(e,t),n})(),hd=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Lm}};var ht=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var qm={now(){return(qm.delegate||Date).now()},delegate:void 0};var fd=class extends Ze{constructor(e,t){super()}schedule(e,t=0){return this}};var Oc={setInterval(n,e,...t){let{delegate:r}=Oc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Oc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Rs=class extends fd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Oc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Oc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,po(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ps=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ps.now=qm.now;var xs=class extends Ps{constructor(e,t=Ps.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Gm=new xs(Rs);var pd=class extends Rs{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var gd=class extends xs{};var Wm=new gd(pd);var Yt=new re(n=>n.complete());function OC(n){return n&&ae(n.schedule)}function kC(n){return n[n.length-1]}function md(n){return ae(kC(n))?n.pop():void 0}function Di(n){return OC(kC(n))?n.pop():void 0}function Km(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function LC(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function FC(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yo(n){return this instanceof yo?(this.v=n,this):new yo(n)}function VC(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(A){return Promise.resolve(A).then(m,p)}}function a(m,A){r[m]&&(i[m]=function(N){return new Promise(function(O,z){o.push([m,N,O,z])>1||u(m,N)})},A&&(i[m]=A(i[m])))}function u(m,A){try{l(r[m](A))}catch(N){y(o[0][3],N)}}function l(m){m.value instanceof yo?Promise.resolve(m.value.v).then(h,p):y(o[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function y(m,A){m(A),o.shift(),o.length&&u(o[0][0],o[0][1])}}function UC(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof FC=="function"?FC(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var yd=n=>n&&typeof n.length=="number"&&typeof n!="function";function vd(n){return ae(n?.then)}function _d(n){return ae(n[Ss])}function Ed(n){return Symbol.asyncIterator&&ae(n?.[Symbol.asyncIterator])}function wd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function x1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Id=x1();function bd(n){return ae(n?.[Id])}function Cd(n){return VC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield yo(t.read());if(i)return yield yo(void 0);yield yield yo(r)}}finally{t.releaseLock()}})}function Dd(n){return ae(n?.getReader)}function rt(n){if(n instanceof re)return n;if(n!=null){if(_d(n))return N1(n);if(yd(n))return O1(n);if(vd(n))return k1(n);if(Ed(n))return jC(n);if(bd(n))return F1(n);if(Dd(n))return L1(n)}throw wd(n)}function N1(n){return new re(e=>{let t=n[Ss]();if(ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function O1(n){return new re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function k1(n){return new re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ud)})}function F1(n){return new re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function jC(n){return new re(e=>{V1(n,e).catch(t=>e.error(t))})}function L1(n){return jC(Cd(n))}function V1(n,e){var t,r,i,o;return LC(this,void 0,void 0,function*(){try{for(t=UC(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Zt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ti(n,e=0){return Ie((t,r)=>{t.subscribe(_e(r,i=>Zt(r,n,()=>r.next(i),e),()=>Zt(r,n,()=>r.complete(),e),i=>Zt(r,n,()=>r.error(i),e)))})}function Si(n,e=0){return Ie((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function BC(n,e){return rt(n).pipe(Si(e),Ti(e))}function $C(n,e){return rt(n).pipe(Si(e),Ti(e))}function HC(n,e){return new re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function zC(n,e){return new re(t=>{let r;return Zt(t,e,()=>{r=n[Id](),Zt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ae(r?.return)&&r.return()})}function Td(n,e){if(!n)throw new Error("Iterable cannot be null");return new re(t=>{Zt(t,e,()=>{let r=n[Symbol.asyncIterator]();Zt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function qC(n,e){return Td(Cd(n),e)}function GC(n,e){if(n!=null){if(_d(n))return BC(n,e);if(yd(n))return HC(n,e);if(vd(n))return $C(n,e);if(Ed(n))return Td(n,e);if(bd(n))return zC(n,e);if(Dd(n))return qC(n,e)}throw wd(n)}function Pe(n,e){return e?GC(n,e):rt(n)}function Z(...n){let e=Di(n);return Pe(n,e)}function Ns(n,e){let t=ae(n)?n:()=>n,r=i=>i.error(t());return new re(e?i=>e.schedule(r,0,i):r)}function Qm(n){return!!n&&(n instanceof re||ae(n.lift)&&ae(n.subscribe))}var Gr=bs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function X(n,e){return Ie((t,r)=>{let i=0;t.subscribe(_e(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:U1}=Array;function j1(n,e){return U1(e)?n(...e):n(e)}function Sd(n){return X(e=>j1(n,e))}var{isArray:B1}=Array,{getPrototypeOf:$1,prototype:H1,keys:z1}=Object;function Ad(n){if(n.length===1){let e=n[0];if(B1(e))return{args:e,keys:null};if(q1(e)){let t=z1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function q1(n){return n&&typeof n=="object"&&$1(n)===H1}function Md(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function kc(...n){let e=Di(n),t=md(n),{args:r,keys:i}=Ad(n);if(r.length===0)return Pe([],e);let o=new re(G1(r,e,i?s=>Md(i,s):fn));return t?o.pipe(Sd(t)):o}function G1(n,e,t=fn){return r=>{WC(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)WC(e,()=>{let l=Pe(n[u],e),h=!1;l.subscribe(_e(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function WC(n,e,t){n?Zt(t,n,e):e()}function KC(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},m=N=>l<r?A(N):u.push(N),A=N=>{o&&e.next(N),l++;let O=!1;rt(t(N,h++)).subscribe(_e(e,z=>{i?.(z),o?m(z):e.next(z)},()=>{O=!0},void 0,()=>{if(O)try{for(l--;u.length&&l<r;){let z=u.shift();s?Zt(e,s,()=>A(z)):A(z)}y()}catch(z){e.error(z)}}))};return n.subscribe(_e(e,m,()=>{p=!0,y()})),()=>{a?.()}}function tt(n,e,t=1/0){return ae(e)?tt((r,i)=>X((o,s)=>e(r,o,i,s))(rt(n(r,i))),t):(typeof e=="number"&&(t=e),Ie((r,i)=>KC(r,i,n,t)))}function Os(n=1/0){return tt(fn,n)}function QC(){return Os(1)}function ks(...n){return QC()(Pe(n,Di(n)))}function Rd(n){return new re(e=>{rt(n()).subscribe(e)})}function Ym(...n){let e=md(n),{args:t,keys:r}=Ad(n),i=new re(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;rt(t[h]).subscribe(_e(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Md(r,a):a),o.complete())}))}});return e?i.pipe(Sd(e)):i}function Nt(n,e){return Ie((t,r)=>{let i=0;t.subscribe(_e(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Wr(n){return Ie((e,t)=>{let r=null,i=!1,o;r=e.subscribe(_e(t,void 0,void 0,s=>{o=rt(n(s,Wr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function YC(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(_e(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function cr(n,e){return ae(e)?tt(n,e,1):tt(n,1)}function Ai(n){return Ie((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function qn(n){return n<=0?()=>Yt:Ie((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Pd(n=W1){return Ie((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function W1(){return new Gr}function Mi(n){return Ie((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Nt((i,o)=>n(i,o,r)):fn,qn(1),t?Ai(e):Pd(()=>new Gr))}function Fs(n){return n<=0?()=>Yt:Ie((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Nt((i,o)=>n(i,o,r)):fn,Fs(1),t?Ai(e):Pd(()=>new Gr))}function xd(n,e){return Ie(YC(n,e,arguments.length>=2,!0))}function Nd(...n){let e=Di(n);return Ie((t,r)=>{(e?ks(n,t,e):ks(n,t)).subscribe(r)})}function Ot(n,e){return Ie((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(_e(r,u=>{i?.unsubscribe();let l=0,h=o++;rt(n(u,h)).subscribe(i=_e(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Jm(n){return Ie((e,t)=>{rt(n).subscribe(_e(t,()=>t.complete(),Nc)),!t.closed&&e.subscribe(t)})}function Dt(n,e,t){let r=ae(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ie((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(_e(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):fn}var UD="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",q=class extends Error{code;constructor(e,t){super(jD(e,t)),this.code=e}};function K1(n){return`NG0${Math.abs(n)}`}function jD(n,e){return`${K1(n)}${e?": "+e:""}`}var BD=Symbol("InputSignalNode#UNSET"),Q1=he(j({},od),{transformFn:void 0,applyValueToInputSignal(n,e){Pc(n,e)}});function $D(n,e){let t=Object.create(Q1);t.value=n,t.transformFn=e?.transform;function r(){if(Rc(t),t.value===BD){let i=null;throw new q(-950,i)}return t.value}return r[Cn]=t,r}function Wc(n){return{toString:n}.toString()}var Od="__parameters__";function Y1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function HD(n,e,t){return Wc(()=>{let r=Y1(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Od)?u[Od]:Object.defineProperty(u,Od,{value:[]})[Od];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _o=globalThis;function je(n){for(let e in n)if(n[e]===je)return e;throw Error("Could not find renamed property on target object.")}function Z1(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Xt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Xt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function ZC(n,e){return n?e?`${n} ${e}`:n:e||""}var J1=je({__forward_ref__:je});function Sn(n){return n.__forward_ref__=Sn,n.toString=function(){return Xt(this())},n}function zt(n){return zD(n)?n():n}function zD(n){return typeof n=="function"&&n.hasOwnProperty(J1)&&n.__forward_ref__===Sn}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function An(n){return{providers:n.providers||[],imports:n.imports||[]}}function fh(n){return JC(n,GD)||JC(n,WD)}function qD(n){return fh(n)!==null}function JC(n,e){return n.hasOwnProperty(e)?n[e]:null}function X1(n){let e=n&&(n[GD]||n[WD]);return e||null}function XC(n){return n&&(n.hasOwnProperty(eD)||n.hasOwnProperty(eF))?n[eD]:null}var GD=je({\u0275prov:je}),eD=je({\u0275inj:je}),WD=je({ngInjectableDef:je}),eF=je({ngInjectorDef:je}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KD(n){return n&&!!n.\u0275providers}var tF=je({\u0275cmp:je}),nF=je({\u0275dir:je}),rF=je({\u0275pipe:je}),iF=je({\u0275mod:je}),Hd=je({\u0275fac:je}),Uc=je({__NG_ELEMENT_ID__:je}),tD=je({__NG_ENV_ID__:je});function Hs(n){return typeof n=="string"?n:n==null?"":String(n)}function oF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Hs(n)}function QD(n,e){throw new q(-200,n)}function cv(n,e){throw new q(-201,!1)}var pe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(pe||{}),fy;function YD(){return fy}function Jt(n){let e=fy;return fy=n,e}function ZD(n,e,t){let r=fh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&pe.Optional)return null;if(e!==void 0)return e;cv(n,"Injector")}var sF={},Eo=sF,py="__NG_DI_FLAG__",zd=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?sd:Eo,r)}},qd="ngTempTokenPath",aF="ngTokenPath",cF=/\n/gm,uF="\u0275",nD="__source";function lF(n,e=pe.Default){if(xc()===void 0)throw new q(-203,!1);if(xc()===null)return ZD(n,void 0,e);{let t=xc(),r;return t instanceof zd?r=t.injector:r=t,r.get(n,e&pe.Optional?null:void 0,e)}}function K(n,e=pe.Default){return(YD()||lF)(zt(n),e)}function k(n,e=pe.Default){return K(n,ph(e))}function ph(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function gy(n){let e=[];for(let t=0;t<n.length;t++){let r=zt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,o=pe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=dF(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(K(i,o))}else e.push(K(r))}return e}function JD(n,e){return n[py]=e,n.prototype[py]=e,n}function dF(n){return n[py]}function hF(n,e,t,r){let i=n[qd];throw e[nD]&&i.unshift(e[nD]),n.message=fF(`
`+n.message,i,t,r),n[aF]=i,n[qd]=null,n}function fF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==uF?n.slice(2):n;let i=Xt(e);if(Array.isArray(e))i=e.map(Xt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Xt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(cF,`
  `)}`}var gt=JD(HD("Optional"),8);var pF=JD(HD("SkipSelf"),4);function Io(n,e){let t=n.hasOwnProperty(Hd);return t?n[Hd]:null}function gF(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function mF(n){return n.flat(Number.POSITIVE_INFINITY)}function uv(n,e){n.forEach(t=>Array.isArray(t)?uv(t,e):e(t))}function XD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Gd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function yF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function vF(n,e,t){let r=Kc(n,e);return r>=0?n[r|1]=t:(r=~r,yF(n,r,e,t)),r}function Xm(n,e){let t=Kc(n,e);if(t>=0)return n[t|1]}function Kc(n,e){return _F(n,e,1)}function _F(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var bo={},Dn=[],jc=new $(""),eT=new $("",-1),tT=new $(""),Wd=class{get(e,t=Eo){if(t===Eo){let r=new Error(`NullInjectorError: No provider for ${Xt(e)}!`);throw r.name="NullInjectorError",r}return t}};function nT(n,e){let t=n[iF]||null;if(!t&&e===!0)throw new Error(`Type ${Xt(n)} does not have '\u0275mod' property.`);return t}function Co(n){return n[tF]||null}function EF(n){return n[nF]||null}function wF(n){return n[rF]||null}function gn(n){return{\u0275providers:n}}function IF(...n){return{\u0275providers:rT(!0,n),\u0275fromNgModule:!0}}function rT(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return uv(e,s=>{let a=s;my(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iT(i,o),t}function iT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];lv(i,o=>{e(o,r)})}}function my(n,e,t,r){if(n=zt(n),!n)return!1;let i=null,o=XC(n),s=!o&&Co(n);if(!o&&!s){let u=n.ngModule;if(o=XC(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)my(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{uv(o.imports,h=>{my(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&iT(l,e)}if(!a){let l=Io(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dn},i),e({provide:tT,useValue:i,multi:!0},i),e({provide:jc,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;lv(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function lv(n,e){for(let t of n)KD(t)&&(t=t.\u0275providers),Array.isArray(t)?lv(t,e):e(t)}var bF=je({provide:String,useValue:je});function oT(n){return n!==null&&typeof n=="object"&&bF in n}function CF(n){return!!(n&&n.useExisting)}function DF(n){return!!(n&&n.useFactory)}function zs(n){return typeof n=="function"}function TF(n){return!!n.useClass}var gh=new $(""),Ld={},rD={},ey;function dv(){return ey===void 0&&(ey=new Wd),ey}var pt=class{},Bc=class extends pt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,vy(e,s=>this.processProvider(s)),this.records.set(eT,Ls(void 0,this)),i.has("environment")&&this.records.set(pt,Ls(void 0,this));let o=this.records.get(gh);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(tT,Dn,pe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?sd:Eo,r)}destroy(){Lc(this),this._destroyed=!0;let e=ve(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ve(e)}}onDestroy(e){return Lc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Lc(this);let t=qr(this),r=Jt(void 0),i;try{return e()}finally{qr(t),Jt(r)}}get(e,t=Eo,r=pe.Default){if(Lc(this),e.hasOwnProperty(tD))return e[tD](this);r=ph(r);let i,o=qr(this),s=Jt(void 0);try{if(!(r&pe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=PF(e)&&fh(e);l&&this.injectableDefInScope(l)?u=Ls(yy(e),Ld):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&pe.Self?dv():this.parent;return t=r&pe.Optional&&t===Eo?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[qd]=a[qd]||[]).unshift(Xt(e)),o)throw a;return hF(a,e,"R3InjectorError",this.source)}else throw a}finally{Jt(s),qr(o)}}resolveInjectorInitializers(){let e=ve(null),t=qr(this),r=Jt(void 0),i;try{let o=this.get(jc,Dn,pe.Self);for(let s of o)s()}finally{qr(t),Jt(r),ve(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Xt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=zt(e);let t=zs(e)?e:zt(e&&e.provide),r=AF(e);if(!zs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ls(void 0,Ld,!0),i.factory=()=>gy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ve(null);try{return t.value===rD?QD(Xt(e)):t.value===Ld&&(t.value=rD,t.value=t.factory()),typeof t.value=="object"&&t.value&&RF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ve(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=zt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yy(n){let e=fh(n),t=e!==null?e.factory:Io(n);if(t!==null)return t;if(n instanceof $)throw new q(204,!1);if(n instanceof Function)return SF(n);throw new q(204,!1)}function SF(n){if(n.length>0)throw new q(204,!1);let t=X1(n);return t!==null?()=>t.factory(n):()=>new n}function AF(n){if(oT(n))return Ls(void 0,n.useValue);{let e=sT(n);return Ls(e,Ld)}}function sT(n,e,t){let r;if(zs(n)){let i=zt(n);return Io(i)||yy(i)}else if(oT(n))r=()=>zt(n.useValue);else if(DF(n))r=()=>n.useFactory(...gy(n.deps||[]));else if(CF(n))r=()=>K(zt(n.useExisting));else{let i=zt(n&&(n.useClass||n.provide));if(MF(n))r=()=>new i(...gy(n.deps));else return Io(i)||yy(i)}return r}function Lc(n){if(n.destroyed)throw new q(205,!1)}function Ls(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function MF(n){return!!n.deps}function RF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function PF(n){return typeof n=="function"||typeof n=="object"&&n instanceof $}function vy(n,e){for(let t of n)Array.isArray(t)?vy(t,e):t&&KD(t)?vy(t.\u0275providers,e):e(t)}function mt(n,e){let t;n instanceof Bc?(Lc(n),t=n):t=new zd(n);let r,i=qr(t),o=Jt(void 0);try{return e()}finally{qr(i),Jt(o)}}function aT(){return YD()!==void 0||xc()!=null}function hv(n){if(!aT())throw new q(-203,!1)}function xF(n){return typeof n=="function"}var Xr=0,ge=1,oe=2,kt=3,Wn=4,Kn=5,Kd=6,Qd=7,en=8,qs=9,Qr=10,ot=11,$c=12,iD=13,Xs=14,lr=15,Do=16,Vs=17,Yr=18,mh=19,cT=20,Ri=21,ty=22,Yd=23,Tn=24,Bs=25,tn=26,uT=1;var To=7,Zd=8,Gs=9,pn=10;function Pi(n){return Array.isArray(n)&&typeof n[uT]=="object"}function ei(n){return Array.isArray(n)&&n[uT]===!0}function fv(n){return(n.flags&4)!==0}function ea(n){return n.componentOffset>-1}function yh(n){return(n.flags&1)===1}function dr(n){return!!n.template}function Jd(n){return(n[oe]&512)!==0}function Qc(n){return(n[oe]&256)===256}var _y=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function lT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var mr=(()=>{let n=()=>dT;return n.ngInherit=!0,n})();function dT(n){return n.type.prototype.ngOnChanges&&(n.setInput=OF),NF}function NF(){let n=fT(this),e=n?.current;if(e){let t=n.previous;if(t===bo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function OF(n,e,t,r,i){let o=this.declaredInputs[r],s=fT(n)||kF(n,{previous:bo,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new _y(l&&l.currentValue,t,u===bo),lT(n,e,i,t)}var hT="__ngSimpleChanges__";function fT(n){return n[hT]||null}function kF(n,e){return n[hT]=e}var oD=null;var Le=function(n,e=null,t){oD?.(n,e,t)},FF="svg",LF="math";function hr(n){for(;Array.isArray(n);)n=n[Xr];return n}function pT(n,e){return hr(e[n])}function yr(n,e){return hr(e[n.index])}function gT(n,e){return n.data[e]}function pv(n,e){return n[e]}function fr(n,e){let t=e[n];return Pi(t)?t:t[Xr]}function VF(n){return(n[oe]&4)===4}function gv(n){return(n[oe]&128)===128}function UF(n){return ei(n[kt])}function Ws(n,e){return e==null?null:n[e]}function mT(n){n[Vs]=0}function yT(n){n[oe]&1024||(n[oe]|=1024,gv(n)&&Yc(n))}function jF(n,e){for(;n>0;)e=e[Xs],n--;return e}function vh(n){return!!(n[oe]&9216||n[Tn]?.dirty)}function Ey(n){n[Qr].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),vh(n)&&Yc(n)}function Yc(n){n[Qr].changeDetectionScheduler?.notify(0);let e=So(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!gv(e)));)e=So(e)}function vT(n,e){if(Qc(n))throw new q(911,!1);n[Ri]===null&&(n[Ri]=[]),n[Ri].push(e)}function BF(n,e){if(n[Ri]===null)return;let t=n[Ri].indexOf(e);t!==-1&&n[Ri].splice(t,1)}function So(n){let e=n[kt];return ei(e)?e[kt]:e}function mv(n){return n[Qd]??=[]}function yv(n){return n.cleanup??=[]}function $F(n,e,t,r){let i=mv(e);i.push(t),n.firstCreatePass&&yv(n).push(r,i.length-1)}var fe={lFrame:TT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var wy=!1;function HF(){return fe.lFrame.elementDepthCount}function zF(){fe.lFrame.elementDepthCount++}function qF(){fe.lFrame.elementDepthCount--}function vv(){return fe.bindingsEnabled}function GF(){return fe.skipHydrationRootTNode!==null}function WF(n){return fe.skipHydrationRootTNode===n}function KF(){fe.skipHydrationRootTNode=null}function Ee(){return fe.lFrame.lView}function yt(){return fe.lFrame.tView}function nn(n){return fe.lFrame.contextLView=n,n[en]}function rn(n){return fe.lFrame.contextLView=null,n}function qt(){let n=_T();for(;n!==null&&n.type===64;)n=n.parent;return n}function _T(){return fe.lFrame.currentTNode}function QF(){let n=fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ko(n,e){let t=fe.lFrame;t.currentTNode=n,t.isParent=e}function _v(){return fe.lFrame.isParent}function ET(){fe.lFrame.isParent=!1}function YF(){return fe.lFrame.contextLView}function wT(){return wy}function sD(n){let e=wy;return wy=n,e}function Zc(){let n=fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ZF(){return fe.lFrame.bindingIndex}function JF(n){return fe.lFrame.bindingIndex=n}function _h(){return fe.lFrame.bindingIndex++}function IT(n){let e=fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function XF(){return fe.lFrame.inI18n}function eL(n,e){let t=fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Iy(e)}function tL(){return fe.lFrame.currentDirectiveIndex}function Iy(n){fe.lFrame.currentDirectiveIndex=n}function nL(n){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function bT(){return fe.lFrame.currentQueryIndex}function Ev(n){fe.lFrame.currentQueryIndex=n}function rL(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[Kn]:null}function CT(n,e,t){if(t&pe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&pe.Host);)if(i=rL(o),i===null||(o=o[Xs],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=fe.lFrame=DT();return r.currentTNode=e,r.lView=n,!0}function wv(n){let e=DT(),t=n[ge];fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function DT(){let n=fe.lFrame,e=n===null?null:n.child;return e===null?TT(n):e}function TT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ST(){let n=fe.lFrame;return fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var AT=ST;function Iv(){let n=ST();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function iL(n){return(fe.lFrame.contextLView=jF(n,fe.lFrame.contextLView))[en]}function Fo(){return fe.lFrame.selectedIndex}function Ao(n){fe.lFrame.selectedIndex=n}function bv(){let n=fe.lFrame;return gT(n.tView,n.selectedIndex)}function oL(){return fe.lFrame.currentNamespace}var MT=!0;function Eh(){return MT}function wh(n){MT=n}function sL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=dT(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Cv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Vd(n,e,t){RT(n,e,3,t)}function Ud(n,e,t,r){(n[oe]&3)===t&&RT(n,e,t,r)}function ny(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function RT(n,e,t,r){let i=r!==void 0?n[Vs]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Vs]+=65536),(a<o||o==-1)&&(aL(n,t,e,u),n[Vs]=(n[Vs]&4294901760)+u+2),u++}function aD(n,e){Le(4,n,e);let t=ve(null);try{e.call(n)}finally{ve(t),Le(5,n,e)}}function aL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[Vs]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,aD(a,o)):aD(a,o)}var $s=-1,Mo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function cL(n){return(n.flags&8)!==0}function uL(n){return(n.flags&16)!==0}function lL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];dL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function PT(n){return n===3||n===4||n===6}function dL(n){return n.charCodeAt(0)===64}function Ks(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cD(n,t,i,null,e[++r]):cD(n,t,i,null,null))}}return n}function cD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function xT(n){return n!==$s}function Xd(n){return n&32767}function hL(n){return n>>16}function eh(n,e){let t=hL(n),r=e;for(;t>0;)r=r[Xs],t--;return r}var by=!0;function th(n){let e=by;return by=n,e}var fL=256,NT=fL-1,OT=5,pL=0,ur={};function gL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Uc)&&(r=t[Uc]),r==null&&(r=t[Uc]=pL++);let i=r&NT,o=1<<i;e.data[n+(i>>OT)]|=o}function nh(n,e){let t=kT(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,ry(r.data,n),ry(e,null),ry(r.blueprint,null));let i=Dv(n,e),o=n.injectorIndex;if(xT(i)){let s=Xd(i),a=eh(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function ry(n,e){n.push(0,0,0,0,0,0,0,0,e)}function kT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Dv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=jT(i),r===null)return $s;if(t++,i=i[Xs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return $s}function Cy(n,e,t){gL(n,e,t)}function mL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(PT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function FT(n,e,t){if(t&pe.Optional||n!==void 0)return n;cv(e,"NodeInjector")}function LT(n,e,t,r){if(t&pe.Optional&&r===void 0&&(r=null),(t&(pe.Self|pe.Host))===0){let i=n[qs],o=Jt(void 0);try{return i?i.get(e,r,t&pe.Optional):ZD(e,r,t&pe.Optional)}finally{Jt(o)}}return FT(r,e,t)}function VT(n,e,t,r=pe.Default,i){if(n!==null){if(e[oe]&2048&&!(r&pe.Self)){let s=EL(n,e,t,r,ur);if(s!==ur)return s}let o=UT(n,e,t,r,ur);if(o!==ur)return o}return LT(e,t,r,i)}function UT(n,e,t,r,i){let o=vL(t);if(typeof o=="function"){if(!CT(e,n,r))return r&pe.Host?FT(i,t,r):LT(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&pe.Optional))cv(t);else return s}finally{AT()}}else if(typeof o=="number"){let s=null,a=kT(n,e),u=$s,l=r&pe.Host?e[lr][Kn]:null;for((a===-1||r&pe.SkipSelf)&&(u=a===-1?Dv(n,e):e[a+8],u===$s||!lD(r,!1)?a=-1:(s=e[ge],a=Xd(u),e=eh(u,e)));a!==-1;){let h=e[ge];if(uD(o,a,h.data)){let p=yL(a,e,t,s,r,l);if(p!==ur)return p}u=e[a+8],u!==$s&&lD(r,e[ge].data[a+8]===l)&&uD(o,a,e)?(s=h,a=Xd(u),e=eh(u,e)):a=-1}}return i}function yL(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?ea(a)&&by:r!=s&&(a.type&3)!==0,l=i&pe.Host&&o===a,h=jd(a,s,t,u,l);return h!==null?Hc(e,s,h,a):ur}function jd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let m=p;m<y;m++){let A=s[m];if(m<u&&t===A||m>=u&&A.type===t)return m}if(i){let m=s[u];if(m&&dr(m)&&m.type===t)return u}return null}function Hc(n,e,t,r){let i=n[t],o=e.data;if(i instanceof Mo){let s=i;s.resolving&&QD(oF(o[t]));let a=th(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Jt(s.injectImpl):null,h=CT(n,r,pe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&sL(t,o[t],e)}finally{l!==null&&Jt(l),th(a),s.resolving=!1,AT()}}return i}function vL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Uc)?n[Uc]:void 0;return typeof e=="number"?e>=0?e&NT:_L:e}function uD(n,e,t){let r=1<<n;return!!(t[e+(n>>OT)]&r)}function lD(n,e){return!(n&pe.Self)&&!(n&pe.Host&&e)}var wo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return VT(this._tNode,this._lView,e,ph(r),t)}};function _L(){return new wo(qt(),Ee())}function ti(n){return Wc(()=>{let e=n.prototype.constructor,t=e[Hd]||Dy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Hd]||Dy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Dy(n){return zD(n)?()=>{let e=Dy(zt(n));return e&&e()}:Io(n)}function EL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!Jd(s);){let a=UT(o,s,t,r|pe.Self,ur);if(a!==ur)return a;let u=o.parent;if(!u){let l=s[cT];if(l){let h=l.get(t,ur,r);if(h!==ur)return h}u=jT(s),s=s[Xs]}o=u}return i}function jT(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[Kn]:null}function Tv(n){return mL(qt(),n)}function dD(n,e=null,t=null,r){let i=BT(n,e,t,r);return i.resolveInjectorInitializers(),i}function BT(n,e=null,t=null,r,i=new Set){let o=[t||Dn,IF(n)];return r=r||(typeof n=="object"?void 0:Xt(n)),new Bc(o,e||dv(),r||null,i)}var Ke=class n{static THROW_IF_NOT_FOUND=Eo;static NULL=new Wd;static create(e,t){if(Array.isArray(e))return dD({name:""},t,e,"");{let r=e.name??"";return dD({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>K(eT)});static __NG_ELEMENT_ID__=-1};var wL=new $("");wL.__NG_ELEMENT_ID__=n=>{let e=qt();if(e===null)throw new q(204,!1);if(e.type&2)return e.value;if(n&pe.Optional)return null;throw new q(204,!1)};var $T=!1,ta=(()=>{class n{static __NG_ELEMENT_ID__=IL;static __NG_ENV_ID__=t=>t}return n})(),Ty=class extends ta{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return vT(this._lView,e),()=>BF(this._lView,e)}};function IL(){return new Ty(Ee())}var Ro=class{},HT=new $("",{providedIn:"root",factory:()=>!1});var zT=new $(""),qT=new $(""),vr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new ht(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ih=(()=>{class n{internalPendingTasks=k(vr);scheduler=k(Ro);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return _(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Sy=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,aT()&&(this.destroyRef=k(ta,{optional:!0})??void 0,this.pendingTasks=k(vr,{optional:!0})??void 0)}emit(e){let t=ve(null);try{super.next(e)}finally{ve(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},it=Sy;function rh(...n){}function GT(n){let e,t;function r(){n=rh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function hD(n){return queueMicrotask(()=>n()),()=>{n=rh}}var Sv="isAngularZone",ih=Sv+"_ID",bL=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new it(!1);onMicrotaskEmpty=new it(!1);onStable=new it(!1);onError=new it(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=$T}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,TL(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Sv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,CL,rh,rh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},CL={};function Av(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function DL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){GT(()=>{n.callbackScheduled=!1,Ay(n),n.isCheckStableRunning=!0,Av(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ay(n)}function TL(n){let e=()=>{DL(n)},t=bL++;n._inner=n._inner.fork({name:"angular",properties:{[Sv]:!0,[ih]:t,[ih+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(SL(u))return r.invokeTask(o,s,a,u);try{return fD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),pD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return fD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!AL(u)&&e(),pD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ay(n),Av(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ay(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function fD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function pD(n){n._nesting--,Av(n)}var My=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new it;onMicrotaskEmpty=new it;onStable=new it;onError=new it;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function SL(n){return WT(n,"__ignore_ng_zone__")}function AL(n){return WT(n,"__scheduler_tick__")}function WT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var pr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},ML=new $("",{providedIn:"root",factory:()=>{let n=k(De),e=k(pr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function gD(n,e){return $D(n,e)}function RL(n){return $D(BD,n)}var KT=(gD.required=RL,gD);function PL(){return na(qt(),Ee())}function na(n,e){return new vt(yr(n,e))}var vt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=PL}return n})();function xL(n){return n instanceof vt?n.nativeElement:n}function NL(n){return typeof n=="function"&&n[Cn]!==void 0}function ra(n,e){let t=Nm(n,e?.equal),r=t[Cn];return t.set=i=>Pc(r,i),t.update=i=>Om(r,i),t.asReadonly=OL.bind(t),t}function OL(){let n=this[Cn];if(n.readonlyFn===void 0){let e=()=>this();e[Cn]=n,n.readonlyFn=e}return n.readonlyFn}function QT(n){return NL(n)&&typeof n.set=="function"}function kL(){return this._results[Symbol.iterator]()}var Ry=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new et}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=mF(e);(this._changesDetected=!gF(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=kL};function YT(n){return(n.flags&128)===128}var ZT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ZT||{}),JT=new Map,FL=0;function LL(){return FL++}function VL(n){JT.set(n[mh],n)}function Py(n){JT.delete(n[mh])}var mD="__ngContext__";function ia(n,e){Pi(e)?(n[mD]=e[mh],VL(e)):n[mD]=e}function XT(n){return tS(n[$c])}function eS(n){return tS(n[Wn])}function tS(n){for(;n!==null&&!ei(n);)n=n[Wn];return n}var xy;function nS(n){xy=n}function UL(){if(xy!==void 0)return xy;if(typeof document<"u")return document;throw new q(210,!1)}var Mv=new $("",{providedIn:"root",factory:()=>jL}),jL="ng",Rv=new $(""),_r=new $("",{providedIn:"platform",factory:()=>"unknown"});var Pv=new $("",{providedIn:"root",factory:()=>UL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var BL="h",$L="b";var rS=!1,HL=new $("",{providedIn:"root",factory:()=>rS});var xv=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(xv||{}),oa=new $(""),yD=new Set;function Jc(n){yD.has(n)||(yD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var iS=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=zL}return n})();function zL(){return new iS(Ee(),qt())}var Us=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Us||{}),oS=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),qL=[Us.EarlyRead,Us.Write,Us.MixedReadWrite,Us.Read],GL=(()=>{class n{ngZone=k(De);scheduler=k(Ro);errorHandler=k(pr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(oa,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Le(16),this.executing=!0;for(let r of qL)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Le(17)}register(t){let{view:r}=t;r!==void 0?((r[Bs]??=[]).push(t),Yc(r),r[oe]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(xv.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ny=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Bs];e&&(this.view[Bs]=e.filter(t=>t!==this))}};function Nv(n,e){!e?.injector&&hv(Nv);let t=e?.injector??k(Ke);return Jc("NgAfterNextRender"),KL(n,t,e,!0)}function WL(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function KL(n,e,t,r){let i=e.get(oS);i.impl??=e.get(GL);let o=e.get(oa,null,{optional:!0}),s=t?.phase??Us.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(ta):null,u=e.get(iS,null,{optional:!0}),l=new Ny(i.impl,WL(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var QL=()=>null;function sS(n,e,t=!1){return QL(n,e,t)}function aS(n,e){let t=n.contentQueries;if(t!==null){let r=ve(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Ev(o),a.contentQueries(2,e[s],s)}}}finally{ve(r)}}}function Oy(n,e,t){Ev(0);let r=ve(null);try{e(n,t)}finally{ve(r)}}function Ov(n,e,t){if(fv(e)){let r=ve(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ve(r)}}}var gr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(gr||{});var kd;function YL(){if(kd===void 0&&(kd=null,_o.trustedTypes))try{kd=_o.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return kd}function vD(n){return YL()?.createScriptURL(n)||n}var oh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${UD})`}};function bh(n){return n instanceof oh?n.changingThisBreaksApplicationSecurity:n}function cS(n,e){let t=ZL(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${UD})`)}return t===e}function ZL(n){return n instanceof oh&&n.getTypeName()||null}var JL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function XL(n){return n=String(n),n.match(JL)?n:"unsafe:"+n}var kv=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(kv||{});function eV(n){let e=lS();return e?e.sanitize(kv.URL,n)||"":cS(n,"URL")?bh(n):XL(Hs(n))}function tV(n){let e=lS();if(e)return vD(e.sanitize(kv.RESOURCE_URL,n)||"");if(cS(n,"ResourceURL"))return vD(bh(n));throw new q(904,!1)}function nV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?tV:eV}function uS(n,e,t){return nV(e,t)(n)}function lS(){let n=Ee();return n&&n[Qr].sanitizer}var rV=/^>|^->|<!--|-->|--!>|<!-$/g,iV=/(<|>)/g,oV="\u200B$1\u200B";function sV(n){return n.replace(rV,e=>e.replace(iV,oV))}function dS(n){return n instanceof Function?n():n}function aV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var hS="ng-template";function cV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Fv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Fv(n){return n.type===4&&n.value!==hS}function uV(n,e,t){let r=n.type===4&&!t?hS:n.value;return e===r}function lV(n,e,t){let r=4,i=n.attrs,o=i!==null?fV(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Gn(r)&&!Gn(u))return!1;if(s&&Gn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!uV(n,u,t)||u===""&&e.length===1){if(Gn(r))return!1;s=!0}}else if(r&8){if(i===null||!cV(n,i,u,t)){if(Gn(r))return!1;s=!0}}else{let l=e[++a],h=dV(u,i,Fv(n),t);if(h===-1){if(Gn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Gn(r))return!1;s=!0}}}}return Gn(r)||s}function Gn(n){return(n&1)===0}function dV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return pV(e,n)}function hV(n,e,t=!1){for(let r=0;r<e.length;r++)if(lV(n,e[r],t))return!0;return!1}function fV(n){for(let e=0;e<n.length;e++){let t=n[e];if(PT(t))return e}return n.length}function pV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function _D(n,e){return n?":not("+e.trim()+")":e}function gV(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Gn(s)&&(e+=_D(o,i),i=""),r=s,o=o||!Gn(r);t++}return i!==""&&(e+=_D(o,i)),e}function mV(n){return n.map(gV).join(",")}function yV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Gn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Er={};function vV(n,e){return n.createText(e)}function _V(n,e,t){n.setValue(e,t)}function EV(n,e){return n.createComment(sV(e))}function fS(n,e,t){return n.createElement(e,t)}function sh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function pS(n,e,t){n.appendChild(e,t)}function ED(n,e,t,r,i){r!==null?sh(n,e,t,r,i):pS(n,e,t)}function wV(n,e,t){n.removeChild(null,e,t)}function IV(n,e,t){n.setAttribute(e,"style",t)}function bV(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function gS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&lL(n,e,r),i!==null&&bV(n,e,i),o!==null&&IV(n,e,o)}function Lv(n,e,t,r,i,o,s,a,u,l,h){let p=tn+r,y=p+i,m=CV(p,y),A=typeof l=="function"?l():l;return m[ge]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:h}}function CV(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Er);return t}function DV(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Lv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Vv(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Xr]=i,p[oe]=r|4|128|8|64|1024,(l!==null||n&&n[oe]&2048)&&(p[oe]|=2048),mT(p),p[kt]=p[Xs]=n,p[en]=t,p[Qr]=s||n&&n[Qr],p[ot]=a||n&&n[ot],p[qs]=u||n&&n[qs]||null,p[Kn]=o,p[mh]=LL(),p[Kd]=h,p[cT]=l,p[lr]=e.type==2?n[lr]:p,p}function TV(n,e,t){let r=yr(e,n),i=DV(t),o=n[Qr].rendererFactory,s=Uv(n,Vv(n,i,null,mS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function mS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function yS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Uv(n,e){return n[$c]?n[iD][Wn]=e:n[$c]=e,n[iD]=e,e}function P(n=1){vS(yt(),Ee(),Fo()+n,!1)}function vS(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Vd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ud(e,o,0,t)}Ao(t)}var Ch=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ch||{});function ky(n,e,t,r){let i=ve(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Ch.SignalBased)!==0&&(u=e[o][Cn]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):lT(e,u,o,r)}finally{ve(i)}}function _S(n,e,t,r,i){let o=Fo(),s=r&2;try{Ao(-1),s&&e.length>tn&&vS(n,e,tn,!1),Le(s?2:0,i),t(r,i)}finally{Ao(o),Le(s?3:1,i)}}function Dh(n,e,t){xV(n,e,t),(t.flags&64)===64&&NV(n,e,t)}function jv(n,e,t=yr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function SV(n,e,t,r){let o=r.get(HL,rS)||t===gr.ShadowDom,s=n.selectRootElement(e,o);return AV(s),s}function AV(n){MV(n)}var MV=()=>null;function RV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ES(n,e,t,r,i,o,s,a){if(!a&&$v(e,n,t,r,i)){ea(e)&&PV(t,e.index);return}if(e.type&3){let u=yr(e,t);r=RV(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function PV(n,e){let t=fr(e,n);t[oe]&16||(t[oe]|=64)}function xV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ea(t)&&TV(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||nh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Hc(e,n,s,t);if(ia(u,e),o!==null&&LV(e,s-r,u,a,t,o),dr(a)){let l=fr(t.index,e);l[en]=Hc(e,n,s,t)}}}function NV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=tL();try{Ao(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Iy(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&OV(u,l)}}finally{Ao(-1),Iy(s)}}function OV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Bv(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];hV(e,o.selectors,!1)&&(r??=[],dr(o)?r.unshift(o):r.push(o))}return r}function kV(n,e,t,r,i,o){let s=yr(n,e);FV(e[ot],s,o,n.value,t,r,i)}function FV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Hs(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function LV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];ky(r,t,u,l)}}function VV(n,e){let t=n[qs],r=t?t.get(pr,null):null;r&&r.handleError(e)}function $v(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];ky(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];ky(h,l,r,i),a=!0}return a}function UV(n,e){let t=fr(e,n),r=t[ge];jV(r,t);let i=t[Xr];i!==null&&t[Kd]===null&&(t[Kd]=sS(i,t[qs])),Le(18),Hv(r,t,t[en]),Le(19,t[en])}function jV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hv(n,e,t){wv(e);try{let r=n.viewQuery;r!==null&&Oy(1,r,t);let i=n.template;i!==null&&_S(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Yr]?.finishViewCreation(n),n.staticContentQueries&&aS(n,e),n.staticViewQueries&&Oy(2,n.viewQuery,t);let o=n.components;o!==null&&BV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,Iv()}}function BV(n,e){for(let t=0;t<e.length;t++)UV(n,e[t])}function $V(n,e,t,r){let i=ve(null);try{let o=e.tView,a=n[oe]&4096?4096:16,u=Vv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Do]=l;let h=n[Yr];return h!==null&&(u[Yr]=h.createEmbeddedView(o)),Hv(o,u,t),u}finally{ve(i)}}function wD(n,e){return!e||e.firstChild===null||YT(n)}var HV;function zv(n,e){return HV(n,e)}var Zr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Zr||{});function wS(n){return(n.flags&32)===32}function js(n,e,t,r,i){if(r!=null){let o,s=!1;ei(r)?o=r:Pi(r)&&(s=!0,r=r[Xr]);let a=hr(r);n===0&&t!==null?i==null?pS(e,t,a):sh(e,t,a,i||null,!0):n===1&&t!==null?sh(e,t,a,i||null,!0):n===2?wV(e,a,s):n===3&&e.destroyNode(a),o!=null&&t2(e,n,o,t,i)}}function zV(n,e){IS(n,e),e[Xr]=null,e[Kn]=null}function qV(n,e,t,r,i,o){r[Xr]=i,r[Kn]=e,Sh(n,r,t,1,i,o)}function IS(n,e){e[Qr].changeDetectionScheduler?.notify(9),Sh(n,e,e[ot],2,null,null)}function GV(n){let e=n[$c];if(!e)return iy(n[ge],n);for(;e;){let t=null;if(Pi(e))t=e[$c];else{let r=e[pn];r&&(t=r)}if(!t){for(;e&&!e[Wn]&&e!==n;)Pi(e)&&iy(e[ge],e),e=e[kt];e===null&&(e=n),Pi(e)&&iy(e[ge],e),t=e&&e[Wn]}e=t}}function qv(n,e){let t=n[Gs],r=t.indexOf(e);t.splice(r,1)}function bS(n,e){if(Qc(e))return;let t=e[ot];t.destroyNode&&Sh(n,e,t,3,null,null),GV(e)}function iy(n,e){if(Qc(e))return;let t=ve(null);try{e[oe]&=-129,e[oe]|=256,e[Tn]&&Rm(e[Tn]),KV(n,e),WV(n,e),e[ge].type===1&&e[ot].destroy();let r=e[Do];if(r!==null&&ei(e[kt])){r!==e[kt]&&qv(r,e);let i=e[Yr];i!==null&&i.detachView(n)}Py(e)}finally{ve(t)}}function WV(n,e){let t=n.cleanup,r=e[Qd];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Qd]=null);let i=e[Ri];if(i!==null){e[Ri]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Yd];if(o!==null){e[Yd]=null;for(let s of o)s.destroy()}}function KV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Mo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Le(4,a,u);try{u.call(a)}finally{Le(5,a,u)}}else{Le(4,i,o);try{o.call(i)}finally{Le(5,i,o)}}}}}function QV(n,e,t){return YV(n,e.parent,t)}function YV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Xr];if(ea(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===gr.None||i===gr.Emulated)return null}return yr(r,t)}function ZV(n,e,t){return XV(n,e,t)}function JV(n,e,t){return n.type&40?yr(n,t):null}var XV=JV,ID;function Th(n,e,t,r){let i=QV(n,r,e),o=e[ot],s=r.parent||e[Kn],a=ZV(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)ED(o,i,t[u],a,!1);else ED(o,i,t,a,!1);ID!==void 0&&ID(o,r,e,t,i)}function Vc(n,e){if(e!==null){let t=e.type;if(t&3)return yr(e,n);if(t&4)return Fy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Vc(n,r);{let i=n[e.index];return ei(i)?Fy(-1,i):hr(i)}}else{if(t&128)return Vc(n,e.next);if(t&32)return zv(e,n)()||hr(n[e.index]);{let r=CS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=So(n[lr]);return Vc(i,r)}else return Vc(n,e.next)}}}return null}function CS(n,e){if(e!==null){let r=n[lr][Kn],i=e.projection;return r.projection[i]}return null}function Fy(n,e){let t=pn+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return Vc(r,i)}return e[To]}function Gv(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&ia(hr(a),r),t.flags|=2),!wS(t))if(u&8)Gv(n,e,t.child,r,i,o,!1),js(e,n,i,a,o);else if(u&32){let l=zv(t,r),h;for(;h=l();)js(e,n,i,h,o);js(e,n,i,a,o)}else u&16?e2(n,e,r,t,i,o):js(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Sh(n,e,t,r,i,o){Gv(t,r,n.firstChild,e,i,o,!1)}function e2(n,e,t,r,i,o){let s=t[lr],u=s[Kn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];js(e,n,i,h,o)}else{let l=u,h=s[kt];YT(r)&&(l.flags|=128),Gv(n,e,l,h,i,o,!0)}}function t2(n,e,t,r,i){let o=t[To],s=hr(t);o!==s&&js(e,n,r,o,i);for(let a=pn;a<t.length;a++){let u=t[a];Sh(u[ge],u,n,e,r,o)}}function n2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Zr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Zr.Important),n.setStyle(t,r,i,o))}}function ah(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(hr(o)),ei(o)&&r2(o,r);let s=t.type;if(s&8)ah(n,e,t.child,r);else if(s&32){let a=zv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=CS(e,t);if(Array.isArray(a))r.push(...a);else{let u=So(e[lr]);ah(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function r2(n,e){for(let t=pn;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&ah(r[ge],r,i,e)}n[To]!==n[Xr]&&e.push(n[To])}function DS(n){if(n[Bs]!==null){for(let e of n[Bs])e.impl.addSequence(e);n[Bs].length=0}}var TS=[];function i2(n){return n[Tn]??o2(n)}function o2(n){let e=TS.pop()??Object.create(a2);return e.lView=n,e}function s2(n){n.lView[Tn]!==n&&(n.lView=null,TS.push(n))}var a2=he(j({},Mc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Yc(n.lView)},consumerOnSignalRead(){this.lView[Tn]=this}});function c2(n){let e=n[Tn]??Object.create(u2);return e.lView=n,e}var u2=he(j({},Mc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=So(n.lView);for(;e&&!SS(e[ge]);)e=So(e);e&&yT(e)},consumerOnSignalRead(){this.lView[Tn]=this}});function SS(n){return n.type!==2}function AS(n){if(n[Yd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Yd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[oe]&8192)}}var l2=100;function MS(n,e=!0,t=0){let i=n[Qr].rendererFactory,o=!1;o||i.begin?.();try{d2(n,t)}catch(s){throw e&&VV(n,s),s}finally{o||i.end?.()}}function d2(n,e){let t=wT();try{sD(!0),Ly(n,e);let r=0;for(;vh(n);){if(r===l2)throw new q(103,!1);r++,Ly(n,1)}}finally{sD(t)}}function h2(n,e,t,r){if(Qc(e))return;let i=e[oe],o=!1,s=!1;wv(e);let a=!0,u=null,l=null;o||(SS(n)?(l=i2(e),u=nd(l)):Cm()===null?(a=!1,l=c2(e),u=nd(l)):e[Tn]&&(Rm(e[Tn]),e[Tn]=null));try{mT(e),JF(n.bindingStartIndex),t!==null&&_S(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let m=n.preOrderCheckHooks;m!==null&&Vd(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Ud(e,m,0,null),ny(e,0)}if(s||f2(e),AS(e),RS(e,0),n.contentQueries!==null&&aS(n,e),!o)if(h){let m=n.contentCheckHooks;m!==null&&Vd(e,m)}else{let m=n.contentHooks;m!==null&&Ud(e,m,1),ny(e,1)}g2(n,e);let p=n.components;p!==null&&xS(e,p,0);let y=n.viewQuery;if(y!==null&&Oy(2,y,r),!o)if(h){let m=n.viewCheckHooks;m!==null&&Vd(e,m)}else{let m=n.viewHooks;m!==null&&Ud(e,m,2),ny(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ty]){for(let m of e[ty])m();e[ty]=null}o||(DS(e),e[oe]&=-73)}catch(h){throw o||Yc(e),h}finally{l!==null&&(Am(l,u),a&&s2(l)),Iv()}}function RS(n,e){for(let t=XT(n);t!==null;t=eS(t))for(let r=pn;r<t.length;r++){let i=t[r];PS(i,e)}}function f2(n){for(let e=XT(n);e!==null;e=eS(e)){if(!(e[oe]&2))continue;let t=e[Gs];for(let r=0;r<t.length;r++){let i=t[r];yT(i)}}}function p2(n,e,t){Le(18);let r=fr(e,n);PS(r,t),Le(19,r[en])}function PS(n,e){gv(n)&&Ly(n,e)}function Ly(n,e){let r=n[ge],i=n[oe],o=n[Tn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Mm(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)h2(r,n,r.template,n[en]);else if(i&8192){AS(n),RS(n,1);let a=r.components;a!==null&&xS(n,a,1),DS(n)}}function xS(n,e,t){for(let r=0;r<e.length;r++)p2(n,e[r],t)}function g2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ao(~i);else{let o=i,s=t[++r],a=t[++r];eL(s,o);let u=e[o];Le(24,u),a(2,u),Le(25,u)}}}finally{Ao(-1)}}function Wv(n,e){let t=wT()?64:1088;for(n[Qr].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=So(n);if(Jd(n)&&!r)return n;n=r}return null}function NS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function m2(n,e,t,r=!0){let i=e[ge];if(y2(i,e,n,t),r){let s=Fy(t,n),a=e[ot],u=a.parentNode(n[To]);u!==null&&qV(i,n[Kn],a,e,u,s)}let o=e[Kd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Vy(n,e){if(n.length<=pn)return;let t=pn+e,r=n[t];if(r){let i=r[Do];i!==null&&i!==n&&qv(i,r),e>0&&(n[t-1][Wn]=r[Wn]);let o=Gd(n,pn+e);zV(r[ge],r);let s=o[Yr];s!==null&&s.detachView(o[ge]),r[kt]=null,r[Wn]=null,r[oe]&=-129}return r}function y2(n,e,t,r){let i=pn+r,o=t.length;r>0&&(t[i-1][Wn]=e),r<o-pn?(e[Wn]=t[i],XD(t,pn+r,e)):(t.push(e),e[Wn]=null),e[kt]=t;let s=e[Do];s!==null&&t!==s&&OS(s,e);let a=e[Yr];a!==null&&a.insertView(n),Ey(e),e[oe]|=128}function OS(n,e){let t=n[Gs],r=e[kt];if(Pi(r))n[oe]|=2;else{let i=r[kt][lr];e[lr]!==i&&(n[oe]|=2)}t===null?n[Gs]=[e]:t.push(e)}var zc=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[ge];return ah(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[en]}set context(e){this._lView[en]=e}get destroyed(){return Qc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[kt];if(ei(e)){let t=e[Zd],r=t?t.indexOf(this):-1;r>-1&&(Vy(e,r),Gd(t,r))}this._attachedToViewContainer=!1}bS(this._lView[ge],this._lView)}onDestroy(e){vT(this._lView,e)}markForCheck(){Wv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){Ey(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,MS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Jd(this._lView),t=this._lView[Do];t!==null&&!e&&qv(t,this._lView),IS(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=Jd(this._lView),r=this._lView[Do];r!==null&&!t&&OS(r,this._lView),Ey(this._lView)}};var Po=(()=>{class n{static __NG_ELEMENT_ID__=E2}return n})(),v2=Po,_2=class extends v2{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=$V(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new zc(i)}};function E2(){return Ah(qt(),Ee())}function Ah(n,e){return n.type&4?new _2(e,n,na(n,e)):null}function Mh(n,e,t,r,i){let o=n.data[e];if(o===null)o=w2(n,e,t,r,i),XF()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=QF();o.injectorIndex=s===null?-1:s.injectorIndex}return ko(o,!0),o}function w2(n,e,t,r,i){let o=_T(),s=_v(),a=s?o:o&&o.parent,u=n.data[e]=b2(n,a,t,e,r,i);return I2(n,u,o,s),u}function I2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function b2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return GF()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var lJ=new RegExp(`^(\\d+)*(${$L}|${BL})*(.*)`);var C2=()=>null;function bD(n,e){return C2(n,e)}var D2=class{},kS=class{},Uy=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Xt(e)}.`)}},Rh=class{static NULL=new Uy},Qs=class{},wr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>T2()}return n})();function T2(){let n=Ee(),e=qt(),t=fr(e.index,n);return(Pi(t)?t:n)[ot]}var S2=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var oy={},jy=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ph(r);let i=this.injector.get(e,oy,r);return i!==oy||t===oy?i:this.parentInjector.get(e,t,r)}};function By(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ZC(i,a);else if(o==2){let u=a,l=e[++s];r=ZC(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function U(n,e=pe.Default){let t=Ee();if(t===null)return K(n,e);let r=qt();return VT(r,t,zt(n),e)}function FS(){let n="invalid";throw new Error(n)}function Kv(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,h=M2(s);h===null?a=s:[a,u,l]=h,x2(n,e,t,a,o,u,l)}o!==null&&r!==null&&A2(t,r,o)}function A2(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new q(-301,!1);r.push(e[i],o)}}function M2(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&dr(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,R2(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function R2(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function P2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function x2(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let y=0;y<a;y++){let m=r[y];!u&&dr(m)&&(u=!0,P2(n,t,y)),Cy(nh(t,e),n,m.type)}V2(t,n.data.length,a);for(let y=0;y<a;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let l=!1,h=!1,p=yS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let m=r[y];if(t.mergedAttrs=Ks(t.mergedAttrs,m.hostAttrs),O2(n,t,e,p,m),L2(p,m,i),s!==null&&s.has(m)){let[N,O]=s.get(m);t.directiveToIndex.set(m.type,[p,N+t.directiveStart,O+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let A=m.type.prototype;!l&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(A.ngOnChanges||A.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}N2(n,t,o)}function N2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))CD(0,e,i,r),CD(1,e,i,r),TD(e,r,!1);else{let o=t.get(i);DD(0,e,o,r),DD(1,e,o,r),TD(e,r,!0)}}}function CD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),LS(e,o)}}function DD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),LS(e,s)}}function LS(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function TD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Fv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function O2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Io(i.type,!0)),s=new Mo(o,dr(i),U);n.blueprint[r]=s,t[r]=s,k2(n,e,r,yS(n,t,i.hostVars,Er),i)}function k2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;F2(s)!=a&&s.push(a),s.push(t,r,o)}}function F2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function L2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;dr(e)&&(t[""]=n)}}function V2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function VS(n,e,t,r,i,o,s,a){let u=e.consts,l=Ws(u,s),h=Mh(e,n,2,r,l);return o&&Kv(e,t,h,Ws(u,a),i),h.mergedAttrs=Ks(h.mergedAttrs,h.attrs),h.attrs!==null&&By(h,h.attrs,!1),h.mergedAttrs!==null&&By(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function US(n,e){Cv(n,e),fv(e)&&n.queries.elementEnd(e)}var ch=class extends Rh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Co(e);return new Ys(t,this.ngModule)}};function U2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ch.SignalBased)!==0};return i&&(o.transform=i),o})}function j2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function B2(n,e,t){let r=e instanceof pt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new jy(t,r):t}function $2(n){let e=n.get(Qs,null);if(e===null)throw new q(407,!1);let t=n.get(S2,null),r=n.get(Ro,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function H2(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return fS(e,t,t==="svg"?FF:t==="math"?LF:null)}var Ys=class extends kS{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=U2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=j2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=mV(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){Le(22);let o=ve(null);try{let s=this.componentDef,a=r?["ng-version","19.2.6"]:yV(this.componentDef.selectors[0]),u=Lv(0,null,null,1,0,null,null,null,null,[a],null),l=B2(s,i||this.ngModule,e),h=$2(l),p=h.rendererFactory.createRenderer(null,s),y=r?SV(p,r,s.encapsulation,l):H2(s,p),m=Vv(null,u,null,512|mS(s),null,null,h,p,l,null,sS(y,l,!0));m[tn]=y,wv(m);let A=null;try{let N=VS(tn,u,m,"#host",()=>[this.componentDef],!0,0);y&&(gS(p,y,N),ia(y,m)),Dh(u,m,N),Ov(u,N,m),US(u,N),t!==void 0&&z2(N,this.ngContentSelectors,t),A=fr(N.index,m),m[en]=A[en],Hv(u,m,null)}catch(N){throw A!==null&&Py(A),Py(m),N}finally{Le(23),Iv()}return new $y(this.componentType,m)}finally{ve(o)}}},$y=class extends D2{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=gT(t[ge],tn),this.location=na(this._tNode,t),this.instance=fr(this._tNode.index,t)[en],this.hostView=this.changeDetectorRef=new zc(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=$v(r,i[ge],i,e,t);this.previousInputValues.set(e,t);let s=fr(r.index,i);Wv(s,1)}get injector(){return new wo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function z2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var xi=(()=>{class n{static __NG_ELEMENT_ID__=q2}return n})();function q2(){let n=qt();return BS(n,Ee())}var G2=xi,jS=class extends G2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return na(this._hostTNode,this._hostLView)}get injector(){return new wo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Dv(this._hostTNode,this._hostLView);if(xT(e)){let t=eh(e,this._hostLView),r=Xd(e),i=t[ge].data[r+8];return new wo(i,t)}else return new wo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=SD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-pn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=bD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,wD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!xF(e),a;if(s)a=t;else{let A=t||{};a=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef}let u=s?e:new Ys(Co(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(pt,null);N&&(o=N)}let h=Co(u.componentType??{}),p=bD(this._lContainer,h?.id??null),y=p?.firstChild??null,m=u.create(l,i,y,o);return this.insertImpl(m.hostView,a,wD(this._hostTNode,p)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(UF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[kt],l=new jS(u,u[Kn],u[kt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return m2(s,i,o,r),e.attachToViewContainerRef(),XD(sy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=SD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Vy(this._lContainer,t);r&&(Gd(sy(this._lContainer),t),bS(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=Vy(this._lContainer,t);return r&&Gd(sy(this._lContainer),t)!=null?new zc(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function SD(n){return n[Zd]}function sy(n){return n[Zd]||(n[Zd]=[])}function BS(n,e){let t,r=e[n.index];return ei(r)?t=r:(t=NS(r,e,null,n),e[n.index]=t,Uv(e,t)),K2(t,e,n,r),new jS(t,n,e)}function W2(n,e){let t=n[ot],r=t.createComment(""),i=yr(e,n),o=t.parentNode(i);return sh(t,o,r,t.nextSibling(i),!1),r}var K2=Z2,Q2=()=>!1;function Y2(n,e,t){return Q2(n,e,t)}function Z2(n,e,t,r){if(n[To])return;let i;t.type&8?i=hr(r):i=W2(e,t),n[To]=i}var Hy=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},zy=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Qv(e,t).matches!==null&&this.queries[t].setDirty()}},qy=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=oU(e):this.predicate=e}},Gy=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Wy=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,J2(t,o)),this.matchTNodeWithReadOption(e,t,jd(t,e,o,!1,!1))}else r===Po?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,jd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===vt||i===xi||i===Po&&t.type&4)this.addMatch(t.index,-2);else{let o=jd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function J2(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function X2(n,e){return n.type&11?na(n,e):n.type&4?Ah(n,e):null}function eU(n,e,t,r){return t===-1?X2(e,n):t===-2?tU(n,e,r):Hc(n,n[ge],t,e)}function tU(n,e,t){if(t===vt)return na(e,n);if(t===Po)return Ah(e,n);if(t===xi)return BS(e,n)}function $S(n,e,t,r){let i=e[Yr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(eU(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function Ky(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=$S(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=pn;p<h.length;p++){let y=h[p];y[Do]===y[kt]&&Ky(y[ge],y,l,r)}if(h[Gs]!==null){let p=h[Gs];for(let y=0;y<p.length;y++){let m=p[y];Ky(m[ge],m,l,r)}}}}}return r}function nU(n,e){return n[Yr].queries[e].queryList}function rU(n,e,t){let r=new Ry((t&4)===4);return $F(n,e,r,r.destroy),(e[Yr]??=new zy).queries.push(new Hy(r))-1}function iU(n,e,t){let r=yt();return r.firstCreatePass&&(sU(r,new qy(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),rU(r,Ee(),e)}function oU(n){return n.split(",").map(e=>e.trim())}function sU(n,e,t){n.queries===null&&(n.queries=new Gy),n.queries.track(new Wy(e,t))}function Qv(n,e){return n.queries.getByIndex(e)}function aU(n,e){let t=n[ge],r=Qv(t,e);return r.crossesNgTemplate?Ky(t,n,e,[]):$S(t,n,r,e)}var Zs=class{},Yv=class{};var Qy=class extends Zs{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ch(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=nT(e);this._bootstrapComponents=dS(o.bootstrap),this._r3Injector=BT(e,t,[{provide:Zs,useValue:this},{provide:Rh,useValue:this.componentFactoryResolver},...r],Xt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yy=class extends Yv{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Qy(this.moduleType,e,[])}};var uh=class extends Zs{injector;componentFactoryResolver=new ch(this);instance=null;constructor(e){super();let t=new Bc([...e.providers,{provide:Zs,useValue:this},{provide:Rh,useValue:this.componentFactoryResolver}],e.parent||dv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xc(n,e,t=null){return new uh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var cU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=rT(!1,t.type),i=r.length>0?Xc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(K(pt))})}return n})();function be(n){return Wc(()=>{let e=HS(n),t=he(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ZT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(cU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||gr.Emulated,styles:n.styles||Dn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Jc("NgStandalone"),zS(t);let r=n.dependencies;return t.directiveDefs=AD(r,!1),t.pipeDefs=AD(r,!0),t.id=fU(t),t})}function uU(n){return Co(n)||EF(n)}function lU(n){return n!==null}function Mn(n){return Wc(()=>({type:n.type,bootstrap:n.bootstrap||Dn,declarations:n.declarations||Dn,imports:n.imports||Dn,exports:n.exports||Dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function dU(n,e){if(n==null)return bo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Ch.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function hU(n){if(n==null)return bo;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ge(n){return Wc(()=>{let e=HS(n);return zS(e),e})}function Ph(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function HS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||bo,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:dU(n.inputs,e),outputs:hU(n.outputs),debugInfo:null}}function zS(n){n.features?.forEach(e=>e(n))}function AD(n,e){if(!n)return null;let t=e?wF:uU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(lU)}function fU(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pU(n){return Object.getPrototypeOf(n.prototype).constructor}function on(n){let e=pU(n.type),t=!0,r=[n];for(;e;){let i;if(dr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=ay(n.inputs),s.declaredInputs=ay(n.declaredInputs),s.outputs=ay(n.outputs);let a=i.hostBindings;a&&_U(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&yU(n,u),l&&vU(n,l),gU(n,i),Z1(n.outputs,i.outputs),dr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===on&&(t=!1)}}e=Object.getPrototypeOf(e)}mU(r)}function gU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function mU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ks(i.hostAttrs,t=Ks(t,i.hostAttrs))}}function ay(n){return n===bo?{}:n===Dn?[]:n}function yU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function vU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function _U(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function qS(n){return wU(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function EU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function wU(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xh(n,e,t){return n[e]=t}function GS(n,e){return n[e]}function Jr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function qc(n,e,t,r){let i=Jr(n,e,t);return Jr(n,e+1,r)||i}function IU(n,e,t,r,i){let o=qc(n,e,t,r);return Jr(n,e+2,i)||o}function bU(n,e,t,r,i,o){let s=qc(n,e,t,r);return qc(n,e+2,i,o)||s}function CU(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Mh(e,n,4,s||null,a||null);vv()&&Kv(e,t,h,Ws(l,u),Bv),h.mergedAttrs=Ks(h.mergedAttrs,h.attrs),Cv(e,h);let p=h.tView=Lv(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function DU(n,e,t,r,i,o,s,a,u,l){let h=t+tn,p=e.firstCreatePass?CU(h,e,n,r,i,o,s,a,u):e.data[h];ko(p,!1);let y=TU(e,n,p,t);Eh()&&Th(e,n,y,p),ia(y,n);let m=NS(y,n,y,p);return n[h]=m,Uv(n,m),Y2(m,p,n),yh(p)&&Dh(e,n,p),u!=null&&jv(n,p,l),p}function te(n,e,t,r,i,o,s,a){let u=Ee(),l=yt(),h=Ws(l.consts,o);return DU(u,l,n,e,t,r,i,h,s,a),te}var TU=SU;function SU(n,e,t,r){return wh(!0),e[ot].createComment("")}var WS=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var KS=new $("");var AU=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Zy})}return n})(),Zy=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Ni(n){return!!n&&typeof n.then=="function"}function Zv(n){return!!n&&typeof n.subscribe=="function"}var QS=new $("");function Jv(n){return gn([{provide:QS,multi:!0,useValue:n}])}var YS=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(QS,{optional:!0})??[];injector=k(Ke);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=mt(this.injector,i);if(Ni(o))t.push(o);else if(Zv(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nh=new $("");function MU(){xm(()=>{throw new q(600,!1)})}function RU(n){return n.isBoundToModule}var PU=10;var xo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(ML);afterRenderManager=k(oS);zonelessEnabled=k(HT);rootEffectScheduler=k(AU);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new et;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(vr).hasPendingTasks.pipe(X(t=>!t));constructor(){k(oa,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(pt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Ke.NULL){Le(10);let o=t instanceof kS;if(!this._injector.get(YS).done){let m="";throw new q(405,m)}let a;o?a=t:a=this._injector.get(Rh).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=RU(a)?void 0:this._injector.get(Zs),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,y=h.injector.get(KS,null);return y?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),Bd(this.components,h),y?.unregisterApplication(p)}),this._loadComponent(h),Le(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Le(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(xv.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new q(101,!1);let t=ve(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ve(t),this.afterTick.next(),Le(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Qs,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<PU;)Le(14),this.synchronizeOnce(),Le(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)xU(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>vh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Bd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Nh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Bd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xU(n,e,t,r){if(!t&&!vh(n))return;MS(n,e,t&&!r?0:1)}function eu(n,e,t,r){let i=Ee(),o=_h();if(Jr(i,o,e)){let s=yt(),a=bv();kV(a,i,n,e,t,r)}return eu}function NU(n,e,t,r){return Jr(n,_h(),t)?e+Hs(t)+r:Er}function OU(n,e,t,r,i,o){let s=ZF(),a=qc(n,s,t,i);return IT(2),a?e+Hs(t)+r+Hs(i)+o:Er}function Fd(n,e){return n<<17|e<<2}function No(n){return n>>17&32767}function kU(n){return(n&2)==2}function FU(n,e){return n&131071|e<<17}function Jy(n){return n|2}function Js(n){return(n&131068)>>2}function cy(n,e){return n&-131069|e<<2}function LU(n){return(n&1)===1}function Xy(n){return n|1}function VU(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=No(s),u=Js(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Kc(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=No(n[a+1]);n[r+1]=Fd(y,a),y!==0&&(n[y+1]=cy(n[y+1],r)),n[a+1]=FU(n[a+1],r)}else n[r+1]=Fd(a,0),a!==0&&(n[a+1]=cy(n[a+1],r)),a=r;else n[r+1]=Fd(u,0),a===0?a=r:n[u+1]=cy(n[u+1],r),u=r;l&&(n[r+1]=Jy(n[r+1])),MD(n,h,r,!0),MD(n,h,r,!1),UU(e,h,n,r,o),s=Fd(a,u),o?e.classBindings=s:e.styleBindings=s}function UU(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Kc(o,e)>=0&&(t[r+1]=Xy(t[r+1]))}function MD(n,e,t,r){let i=n[t+1],o=e===null,s=r?No(i):Js(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];jU(u,e)&&(a=!0,n[s+1]=r?Xy(l):Jy(l)),s=r?No(l):Js(l)}a&&(n[t+1]=r?Jy(i):Xy(i))}function jU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Kc(n,e)>=0:!1}function L(n,e,t){let r=Ee(),i=_h();if(Jr(r,i,e)){let o=yt(),s=bv();ES(o,s,r,n,e,r[ot],t,!1)}return L}function RD(n,e,t,r,i){$v(e,n,t,i?"class":"style",r)}function sa(n,e){return BU(n,e,null,!0),sa}function BU(n,e,t,r){let i=Ee(),o=yt(),s=IT(2);if(o.firstUpdatePass&&HU(o,n,s,r),e!==Er&&Jr(i,s,e)){let a=o.data[Fo()];KU(o,a,i,i[ot],n,i[s+1]=QU(e,t),r,s)}}function $U(n,e){return e>=n.expandoStartIndex}function HU(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Fo()],s=$U(n,t);YU(o,r)&&e===null&&!s&&(e=!1),e=zU(i,o,e,r),VU(i,o,e,t,s,r)}}function zU(n,e,t,r){let i=nL(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=uy(null,n,e,t,r),t=Gc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=uy(i,n,e,t,r),o===null){let u=qU(n,e,r);u!==void 0&&Array.isArray(u)&&(u=uy(null,n,e,u[1],r),u=Gc(u,e.attrs,r),GU(n,e,r,u))}else o=WU(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function qU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Js(r)!==0)return n[No(r)]}function GU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[No(i)]=r}function WU(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Gc(r,s,t)}return Gc(r,e.attrs,t)}function uy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Gc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Gc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),vF(n,s,t?!0:e[++o]))}return n===void 0?null:n}function KU(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=LU(l)?PD(u,e,t,i,Js(l),s):void 0;if(!lh(h)){lh(o)||kU(l)&&(o=PD(u,null,t,i,a,s));let p=pT(Fo(),t);n2(r,s,p,i,o)}}function PD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===Er&&(y=p?Dn:void 0);let m=p?Xm(y,r):h===r?y:void 0;if(l&&!lh(m)&&(m=Xm(u,r)),lh(m)&&(a=m,s))return a;let A=n[i+1];i=s?No(A):Js(A)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Xm(u,r))}return a}function lh(n){return n!==void 0}function QU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Xt(bh(n)))),n}function YU(n,e){return(n.flags&(e?8:16))!==0}function E(n,e,t,r){let i=Ee(),o=yt(),s=tn+n,a=i[ot],u=o.firstCreatePass?VS(s,o,i,e,Bv,vv(),t,r):o.data[s],l=ZU(o,i,u,a,e,n);i[s]=l;let h=yh(u);return ko(u,!0),gS(a,l,u),!wS(u)&&Eh()&&Th(o,i,l,u),(HF()===0||h)&&ia(l,i),zF(),h&&(Dh(o,i,u),Ov(o,u,i)),r!==null&&jv(i,u),E}function v(){let n=qt();_v()?ET():(n=n.parent,ko(n,!1));let e=n;WF(e)&&KF(),qF();let t=yt();return t.firstCreatePass&&US(t,e),e.classesWithoutHost!=null&&cL(e)&&RD(t,e,Ee(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&uL(e)&&RD(t,e,Ee(),e.stylesWithoutHost,!1),v}function Fe(n,e,t,r){return E(n,e,t,r),v(),Fe}var ZU=(n,e,t,r,i,o)=>(wh(!0),fS(r,i,oL()));function JU(n,e,t,r,i){let o=e.consts,s=Ws(o,r),a=Mh(e,n,8,"ng-container",s);s!==null&&By(a,s,!0);let u=Ws(o,i);return vv()&&Kv(e,t,a,u,Bv),a.mergedAttrs=Ks(a.mergedAttrs,a.attrs),e.queries!==null&&e.queries.elementStart(e,a),a}function Xv(n,e,t){let r=Ee(),i=yt(),o=n+tn,s=i.firstCreatePass?JU(o,i,r,e,t):i.data[o];ko(s,!0);let a=XU(i,r,s,n);return r[o]=a,Eh()&&Th(i,r,a,s),ia(a,r),yh(s)&&(Dh(i,r,s),Ov(i,s,r)),t!=null&&jv(r,s),Xv}function e_(){let n=qt(),e=yt();return _v()?ET():(n=n.parent,ko(n,!1)),e.firstCreatePass&&(Cv(e,n),fv(n)&&e.queries.elementEnd(n)),e_}var XU=(n,e,t,r)=>(wh(!0),EV(e[ot],""));function mn(){return Ee()}var vo=void 0;function ej(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var tj=["en",[["a","p"],["AM","PM"],vo],[["AM","PM"],vo,vo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vo,"{1} 'at' {0}",vo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",ej],ly={};function Rn(n){let e=nj(n),t=xD(e);if(t)return t;let r=e.split("-")[0];if(t=xD(r),t)return t;if(r==="en")return tj;throw new q(701,!1)}function xD(n){return n in ly||(ly[n]=_o.ng&&_o.ng.common&&_o.ng.common.locales&&_o.ng.common.locales[n]),ly[n]}var nt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(nt||{});function nj(n){return n.toLowerCase().replace(/_/g,"-")}var dh="en-US";var rj=dh;function ij(n){typeof n=="string"&&(rj=n.toLowerCase().replace(/_/g,"-"))}function ND(n,e,t){return function r(i){if(i===Function)return t;let o=ea(n)?fr(n.index,e):e;Wv(o,5);let s=e[en],a=OD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=OD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function OD(n,e,t,r){let i=ve(null);try{return Le(6,e,t),t(r)!==!1}catch(o){return oj(n,o),!1}finally{Le(7,e,t),ve(i)}}function oj(n,e){let t=n[qs],r=t?t.get(pr,null):null;r&&r.handleError(e)}function kD(n,e,t,r,i,o){let s=e[t],a=e[ge],l=a.data[t].outputs[r],h=s[l],p=a.firstCreatePass?yv(a):null,y=mv(e),m=h.subscribe(o),A=y.length;y.push(o,m),p&&p.push(i,n.index,A,-(A+1))}var sj=(n,e,t)=>{};function ue(n,e,t,r){let i=Ee(),o=yt(),s=qt();return ZS(o,i,i[ot],s,n,e,r),ue}function aj(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Qd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function ZS(n,e,t,r,i,o,s){let a=yh(r),l=n.firstCreatePass?yv(n):null,h=mv(e),p=!0;if(r.type&3||s){let y=yr(r,e),m=s?s(y):y,A=h.length,N=s?z=>s(hr(z[r.index])):r.index,O=null;if(!s&&a&&(O=aj(n,e,i,r.index)),O!==null){let z=O.__ngLastListenerFn__||O;z.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,p=!1}else{o=ND(r,e,o),sj(m,i,o);let z=t.listen(m,i,o);h.push(o,z),l&&l.push(i,N,A,A+1)}}else o=ND(r,e,o);if(p){let y=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let A=0;A<m.length;A+=2){let N=m[A],O=m[A+1];kD(r,e,N,O,i,o)}if(y&&y.length)for(let A of y)kD(r,e,A,i,i,o)}}function Q(n=1){return iL(n)}function Oh(n,e,t){iU(n,e,t)}function tu(n){let e=Ee(),t=yt(),r=bT();Ev(r+1);let i=Qv(t,r);if(n.dirty&&VF(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=aU(e,r);n.reset(o,xL),n.notifyOnChanges()}return!0}return!1}function nu(){return nU(Ee(),bT())}function cj(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ru(n){let e=YF();return pv(e,tn+n)}function w(n,e=""){let t=Ee(),r=yt(),i=n+tn,o=r.firstCreatePass?Mh(r,i,1,e,null):r.data[i],s=uj(r,t,o,e,n);t[i]=s,Eh()&&Th(r,t,s,o),ko(o,!1)}var uj=(n,e,t,r,i)=>(wh(!0),vV(e[ot],r));function Je(n){return ie("",n,""),Je}function ie(n,e,t){let r=Ee(),i=NU(r,n,e,t);return i!==Er&&JS(r,Fo(),i),ie}function t_(n,e,t,r,i){let o=Ee(),s=OU(o,n,e,t,r,i);return s!==Er&&JS(o,Fo(),s),t_}function JS(n,e,t){let r=pT(e,n);_V(n[ot],r,t)}function aa(n,e,t){QT(e)&&(e=e());let r=Ee(),i=_h();if(Jr(r,i,e)){let o=yt(),s=bv();ES(o,s,r,n,e,r[ot],t,!1)}return aa}function iu(n,e){let t=QT(n);return t&&n.set(e),t}function ca(n,e){let t=Ee(),r=yt(),i=qt();return ZS(r,t,t[ot],i,n,e),ca}function lj(n,e,t){let r=yt();if(r.firstCreatePass){let i=dr(n);ev(t,r.data,r.blueprint,i,!0),ev(e,r.data,r.blueprint,i,!1)}}function ev(n,e,t,r,i){if(n=zt(n),Array.isArray(n))for(let o=0;o<n.length;o++)ev(n[o],e,t,r,i);else{let o=yt(),s=Ee(),a=qt(),u=zs(n)?n:zt(n.provide),l=sT(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(zs(n)||!n.multi){let m=new Mo(l,i,U),A=hy(u,e,i?h:h+y,p);A===-1?(Cy(nh(a,s),o,u),dy(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[A]=m,s[A]=m)}else{let m=hy(u,e,h+y,p),A=hy(u,e,h,h+y),N=m>=0&&t[m],O=A>=0&&t[A];if(i&&!O||!i&&!N){Cy(nh(a,s),o,u);let z=fj(i?hj:dj,t.length,i,r,l);!i&&O&&(t[A].providerFactory=z),dy(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),s.push(z)}else{let z=XS(t[i?A:m],l,!i&&r);dy(o,n,m>-1?m:A,z)}!i&&r&&O&&t[A].componentProviders++}}}function dy(n,e,t,r){let i=zs(e),o=TF(e);if(i||o){let u=(o?zt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function XS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function hy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function dj(n,e,t,r){return tv(this.multi,[])}function hj(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Hc(t,t[ge],this.providerFactory.index,r);o=a.slice(0,s),tv(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],tv(i,o);return o}function tv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function fj(n,e,t,r,i){let o=new Mo(n,t,U);return o.multi=[],o.index=e,o.componentProviders=0,XS(o,i,r&&!t),o}function Ir(n,e=[]){return t=>{t.providersResolver=(r,i)=>lj(r,i?i(n):n,e)}}function sn(n,e,t){let r=Zc()+n,i=Ee();return i[r]===Er?xh(i,r,t?e.call(t):e()):GS(i,r)}function n_(n,e,t,r){return nA(Ee(),Zc(),n,e,t,r)}function eA(n,e,t,r,i,o,s,a,u,l){let h=Zc()+n,p=Ee(),y=bU(p,h,t,r,i,o);return IU(p,h+4,s,a,u)||y?xh(p,h+7,l?e.call(l,t,r,i,o,s,a,u):e(t,r,i,o,s,a,u)):GS(p,h+7)}function tA(n,e){let t=n[e];return t===Er?void 0:t}function nA(n,e,t,r,i,o){let s=e+t;return Jr(n,s,i)?xh(n,s+1,o?r.call(o,i):r(i)):tA(n,s+1)}function pj(n,e,t,r,i,o,s){let a=e+t;return qc(n,a,i,o)?xh(n,a+2,s?r.call(s,i,o):r(i,o)):tA(n,a+2)}function ua(n,e){let t=yt(),r,i=n+tn;t.firstCreatePass?(r=gj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Io(r.type,!0)),s,a=Jt(U);try{let u=th(!1),l=o();return th(u),cj(t,Ee(),i,l),l}finally{Jt(a)}}function gj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function kh(n,e,t){let r=n+tn,i=Ee(),o=pv(i,r);return iA(i,r)?nA(i,Zc(),e,o.transform,t,o):o.transform(t)}function rA(n,e,t,r){let i=n+tn,o=Ee(),s=pv(o,i);return iA(o,i)?pj(o,Zc(),e,s.transform,t,r,s):s.transform(t,r)}function iA(n,e){return n[ge].data[e].pure}function ou(n,e){return Ah(n,e)}var Oo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},oA=new Oo("19.2.6"),nv=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Fh=(()=>{class n{compileModuleSync(t){return new Yy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=nT(t),o=dS(i.declarations).reduce((s,a)=>{let u=Co(a);return u&&s.push(new Ys(u)),s},[]);return new nv(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mj=(()=>{class n{zone=k(De);changeDetectionScheduler=k(Ro);applicationRef=k(xo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yj({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(he(j({},vj()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:jc,multi:!0,useFactory:()=>{let r=k(mj,{optional:!0});return()=>r.initialize()}},{provide:jc,multi:!0,useFactory:()=>{let r=k(_j);return()=>{r.initialize()}}},e===!0?{provide:zT,useValue:!0}:[],{provide:qT,useValue:t??$T}]}function vj(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var _j=(()=>{class n{subscription=new Ze;initialized=!1;zone=k(De);pendingTasks=k(vr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ej=(()=>{class n{appRef=k(xo);taskService=k(vr);ngZone=k(De);zonelessEnabled=k(HT);tracing=k(oa,{optional:!0});disableScheduling=k(zT,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ih):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(qT,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof My||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?hD:GT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ih+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,hD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wj(){return typeof $localize<"u"&&$localize.locale||dh}var Lh=new $("",{providedIn:"root",factory:()=>k(Lh,pe.Optional|pe.SkipSelf)||wj()});var rv=new $(""),Ij=new $("");function Fc(n){return!n.moduleRef}function bj(n){let e=Fc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{Fc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(pr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Fc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(rv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(rv);s.add(o),n.moduleRef.onDestroy(()=>{Bd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Dj(r,t,()=>{let o=e.get(YS);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Lh,dh);if(ij(s||dh),!e.get(Ij,!0))return Fc(n)?e.get(xo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Fc(n)){let u=e.get(xo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return Cj(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Cj(n,e){let t=n.injector.get(xo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new q(-403,!1);e.push(n)}function Dj(n,e,t){try{let r=t();return Ni(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var $d=null;function Tj(n=[],e){return Ke.create({name:e,providers:[{provide:gh,useValue:"platform"},{provide:rv,useValue:new Set([()=>$d=null])},...n]})}function Sj(n=[]){if($d)return $d;let e=Tj(n);return $d=e,MU(),Aj(e),e}function Aj(n){let e=n.get(Rv,null);mt(n,()=>{e?.forEach(t=>t())})}function r_(){return!1}var Oi=(()=>{class n{static __NG_ELEMENT_ID__=Mj}return n})();function Mj(n){return Rj(qt(),Ee(),(n&16)===16)}function Rj(n,e,t){if(ea(n)&&!t){let r=fr(n.index,e);return new zc(r,r)}else if(n.type&175){let r=e[lr];return new zc(r,e)}return null}var iv=class{constructor(){}supports(e){return qS(e)}create(e){return new ov(e)}},Pj=(n,e)=>e,ov=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Pj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<FD(r,i,o)?t:r,a=FD(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let m=y<o.length?o[y]:o[y]=0,A=m+y;h<=A&&A<l&&(o[y]=m+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!qS(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,EU(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new sv(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new hh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},sv=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},av=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},hh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new av,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function FD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function LD(){return new i_([new iv])}var i_=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:LD});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||LD()),deps:[[n,new pF,new gt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function sA(n){Le(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=Sj(r),o=[yj({}),{provide:Ro,useExisting:Ej},...t||[]],s=new uh({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return bj({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Le(9)}}function ki(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Pn(n){return km(n)}function la(n,e){return Pm(n,e?.equal)}var VD=class{[Cn];constructor(e){this[Cn]=e}destroy(){this[Cn].destroy()}};function aA(n){let e=Co(n);if(!e)return null;let t=new Ys(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var st=new $("");var lA=null;function xn(){return lA}function o_(n){lA??=n}var su=class{},au=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(dA),providedIn:"platform"})}return n})(),s_=new $(""),dA=(()=>{class n extends au{_location;_history;_doc=k(st);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xn().getBaseHref(this._doc)}onPopState(t){let r=xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Vh(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function cA(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Qn(n){return n&&n[0]!=="?"?`?${n}`:n}var Yn=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(jh),providedIn:"root"})}return n})(),Uh=new $(""),jh=(()=>{class n extends Yn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(st).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vh(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(au),K(Uh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fi=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Oj(cA(uA(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qn(r))}normalize(t){return n.stripTrailingSlash(Nj(this._basePath,uA(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Qn;static joinWithSlash=Vh;static stripTrailingSlash=cA;static \u0275fac=function(r){return new(r||n)(K(Yn))};static \u0275prov=H({token:n,factory:()=>xj(),providedIn:"root"})}return n})();function xj(){return new Fi(K(Yn))}function Nj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function uA(n){return n.replace(/\/index.html$/,"")}function Oj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var h_=(()=>{class n extends Yn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Vh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Qn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(K(au),K(Uh,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var Ft=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Ft||{}),Ve=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ve||{}),an=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(an||{}),ri={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function gA(n){return Rn(n)[nt.LocaleId]}function mA(n,e,t){let r=Rn(n),i=[r[nt.DayPeriodsFormat],r[nt.DayPeriodsStandalone]],o=Nn(i,e);return Nn(o,t)}function yA(n,e,t){let r=Rn(n),i=[r[nt.DaysFormat],r[nt.DaysStandalone]],o=Nn(i,e);return Nn(o,t)}function vA(n,e,t){let r=Rn(n),i=[r[nt.MonthsFormat],r[nt.MonthsStandalone]],o=Nn(i,e);return Nn(o,t)}function _A(n,e){let r=Rn(n)[nt.Eras];return Nn(r,e)}function cu(n,e){let t=Rn(n);return Nn(t[nt.DateFormat],e)}function uu(n,e){let t=Rn(n);return Nn(t[nt.TimeFormat],e)}function lu(n,e){let r=Rn(n)[nt.DateTimeFormat];return Nn(r,e)}function du(n,e){let t=Rn(n),r=t[nt.NumberSymbols][e];if(typeof r>"u"){if(e===ri.CurrencyDecimal)return t[nt.NumberSymbols][ri.Decimal];if(e===ri.CurrencyGroup)return t[nt.NumberSymbols][ri.Group]}return r}function EA(n){if(!n[nt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[nt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function wA(n){let e=Rn(n);return EA(e),(e[nt.ExtraData][2]||[]).map(r=>typeof r=="string"?a_(r):[a_(r[0]),a_(r[1])])}function IA(n,e,t){let r=Rn(n);EA(r);let i=[r[nt.ExtraData][0],r[nt.ExtraData][1]],o=Nn(i,e)||[];return Nn(o,t)||[]}function Nn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function a_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var kj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Bh={},Fj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function bA(n,e,t,r){let i=qj(n);e=ni(t,e)||e;let s=[],a;for(;e;)if(a=Fj.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=DA(r,u),i=zj(i,r));let l="";return s.forEach(h=>{let p=$j(h);l+=p?p(i,t,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Gh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ni(n,e){let t=gA(n);if(Bh[t]??={},Bh[t][e])return Bh[t][e];let r="";switch(e){case"shortDate":r=cu(n,an.Short);break;case"mediumDate":r=cu(n,an.Medium);break;case"longDate":r=cu(n,an.Long);break;case"fullDate":r=cu(n,an.Full);break;case"shortTime":r=uu(n,an.Short);break;case"mediumTime":r=uu(n,an.Medium);break;case"longTime":r=uu(n,an.Long);break;case"fullTime":r=uu(n,an.Full);break;case"short":let i=ni(n,"shortTime"),o=ni(n,"shortDate");r=$h(lu(n,an.Short),[i,o]);break;case"medium":let s=ni(n,"mediumTime"),a=ni(n,"mediumDate");r=$h(lu(n,an.Medium),[s,a]);break;case"long":let u=ni(n,"longTime"),l=ni(n,"longDate");r=$h(lu(n,an.Long),[u,l]);break;case"full":let h=ni(n,"fullTime"),p=ni(n,"fullDate");r=$h(lu(n,an.Full),[h,p]);break}return r&&(Bh[t][e]=r),r}function $h(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Zn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function Lj(n,e){return Zn(n,3).substring(0,e)}function at(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Vj(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return Lj(a,e);let u=du(s,ri.MinusSign);return Zn(a,e,u,r,i)}}function Vj(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function He(n,e,t=Ft.Format,r=!1){return function(i,o){return Uj(i,o,n,e,t,r)}}function Uj(n,e,t,r,i,o){switch(t){case 2:return vA(e,i,r)[n.getMonth()];case 1:return yA(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=wA(e),h=IA(e,i,r),p=l.findIndex(y=>{if(Array.isArray(y)){let[m,A]=y,N=s>=m.hours&&a>=m.minutes,O=s<A.hours||s===A.hours&&a<A.minutes;if(m.hours<A.hours){if(N&&O)return!0}else if(N||O)return!0}else if(y.hours===s&&y.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return mA(e,i,r)[s<12?0:1];case 3:return _A(e,r)[n.getFullYear()<=0?0:1];default:let u=t;throw new Error(`unexpected translation type ${u}`)}}function Hh(n){return function(e,t,r){let i=-1*r,o=du(t,ri.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Zn(s,2,o)+Zn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Zn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Zn(s,2,o)+":"+Zn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Zn(s,2,o)+":"+Zn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var jj=0,qh=4;function Bj(n){let e=Gh(n,jj,1).getDay();return Gh(n,0,1+(e<=qh?qh:qh+7)-e)}function CA(n){let e=n.getDay(),t=e===0?-3:qh-e;return Gh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function c_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=CA(t),s=Bj(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Zn(i,n,du(r,ri.MinusSign))}}function zh(n,e=!1){return function(t,r){let o=CA(t).getFullYear();return Zn(o,n,du(r,ri.MinusSign),e)}}var u_={};function $j(n){if(u_[n])return u_[n];let e;switch(n){case"G":case"GG":case"GGG":e=He(3,Ve.Abbreviated);break;case"GGGG":e=He(3,Ve.Wide);break;case"GGGGG":e=He(3,Ve.Narrow);break;case"y":e=at(0,1,0,!1,!0);break;case"yy":e=at(0,2,0,!0,!0);break;case"yyy":e=at(0,3,0,!1,!0);break;case"yyyy":e=at(0,4,0,!1,!0);break;case"Y":e=zh(1);break;case"YY":e=zh(2,!0);break;case"YYY":e=zh(3);break;case"YYYY":e=zh(4);break;case"M":case"L":e=at(1,1,1);break;case"MM":case"LL":e=at(1,2,1);break;case"MMM":e=He(2,Ve.Abbreviated);break;case"MMMM":e=He(2,Ve.Wide);break;case"MMMMM":e=He(2,Ve.Narrow);break;case"LLL":e=He(2,Ve.Abbreviated,Ft.Standalone);break;case"LLLL":e=He(2,Ve.Wide,Ft.Standalone);break;case"LLLLL":e=He(2,Ve.Narrow,Ft.Standalone);break;case"w":e=c_(1);break;case"ww":e=c_(2);break;case"W":e=c_(1,!0);break;case"d":e=at(2,1);break;case"dd":e=at(2,2);break;case"c":case"cc":e=at(7,1);break;case"ccc":e=He(1,Ve.Abbreviated,Ft.Standalone);break;case"cccc":e=He(1,Ve.Wide,Ft.Standalone);break;case"ccccc":e=He(1,Ve.Narrow,Ft.Standalone);break;case"cccccc":e=He(1,Ve.Short,Ft.Standalone);break;case"E":case"EE":case"EEE":e=He(1,Ve.Abbreviated);break;case"EEEE":e=He(1,Ve.Wide);break;case"EEEEE":e=He(1,Ve.Narrow);break;case"EEEEEE":e=He(1,Ve.Short);break;case"a":case"aa":case"aaa":e=He(0,Ve.Abbreviated);break;case"aaaa":e=He(0,Ve.Wide);break;case"aaaaa":e=He(0,Ve.Narrow);break;case"b":case"bb":case"bbb":e=He(0,Ve.Abbreviated,Ft.Standalone,!0);break;case"bbbb":e=He(0,Ve.Wide,Ft.Standalone,!0);break;case"bbbbb":e=He(0,Ve.Narrow,Ft.Standalone,!0);break;case"B":case"BB":case"BBB":e=He(0,Ve.Abbreviated,Ft.Format,!0);break;case"BBBB":e=He(0,Ve.Wide,Ft.Format,!0);break;case"BBBBB":e=He(0,Ve.Narrow,Ft.Format,!0);break;case"h":e=at(3,1,-12);break;case"hh":e=at(3,2,-12);break;case"H":e=at(3,1);break;case"HH":e=at(3,2);break;case"m":e=at(4,1);break;case"mm":e=at(4,2);break;case"s":e=at(5,1);break;case"ss":e=at(5,2);break;case"S":e=at(6,1);break;case"SS":e=at(6,2);break;case"SSS":e=at(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Hh(0);break;case"ZZZZZ":e=Hh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Hh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Hh(2);break;default:return null}return u_[n]=e,e}function DA(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Hj(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function zj(n,e,t){let i=n.getTimezoneOffset(),o=DA(e,i);return Hj(n,-1*(o-i))}function qj(n){if(hA(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Gh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(kj))return Gj(r)}let e=new Date(n);if(!hA(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function Gj(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,u=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,u,l),e}function hA(n){return n instanceof Date&&!isNaN(n.valueOf())}var Wh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},On=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Wh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),fA(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);fA(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(U(xi),U(Po),U(i_))};static \u0275dir=Ge({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function fA(n,e){n.context.$implicit=e.item}var Be=(()=>{class n{_viewContainer;_context=new Kh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pA(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pA(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(U(xi),U(Po))};static \u0275dir=Ge({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Kh=class{$implicit=null;ngIf=null};function pA(n,e){if(n&&!n.createEmbeddedView)throw new q(2020,!1)}function TA(n,e){return new q(2100,!1)}var l_=class{createSubscription(e,t){return Pn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Pn(()=>e.unsubscribe())}},d_=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},Wj=new d_,Kj=new l_,f_=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Ni(t))return Wj;if(Zv(t))return Kj;throw TA(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(U(Oi,16))};static \u0275pipe=Ph({name:"async",type:n,pure:!1})}return n})();var Qj="mediumDate",SA=new $(""),AA=new $(""),p_=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??Qj,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return bA(t,s,o||this.locale,a)}catch(s){throw TA(n,s.message)}}static \u0275fac=function(r){return new(r||n)(U(Lh,16),U(SA,24),U(AA,24))};static \u0275pipe=Ph({name:"date",type:n,pure:!0})}return n})();var g_=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Ph({name:"json",type:n,pure:!1})}return n})();var xe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=An({})}return n})();function hu(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var m_="browser",MA="server";function Qh(n){return n===MA}var Lo=class{};var RA=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new y_(k(st),window)})}return n})(),y_=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Yj(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function Yj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Jh=new $(""),w_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(K(Jh),K(De))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),fu=class{_doc;constructor(e){this._doc=e}manager},Yh="ng-app-id";function PA(n){for(let e of n)e.remove()}function xA(n,e){let t=e.createElement("style");return t.textContent=n,t}function Zj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Yh}="${e}"],link[${Yh}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Yh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function __(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var I_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Qh(o),Zj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,xA);r?.forEach(i=>this.addUsage(i,this.external,__))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(PA(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])PA(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,xA(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,__(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Yh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(K(st),K(Mv),K(Pv,8),K(_r))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),v_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},b_=/%COMP%/g;var OA="%COMP%",Jj=`_nghost-${OA}`,Xj=`_ngcontent-${OA}`,eB=!0,tB=new $("",{providedIn:"root",factory:()=>eB});function nB(n){return Xj.replace(b_,n)}function rB(n){return Jj.replace(b_,n)}function kA(n,e){return e.map(t=>t.replace(b_,n))}var C_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=Qh(a),this.defaultRenderer=new pu(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===gr.ShadowDom&&(r=he(j({},r),{encapsulation:gr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Zh?i.applyToHost(t):i instanceof gu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case gr.Emulated:o=new Zh(u,l,r,this.appId,h,s,a,p,y);break;case gr.ShadowDom:return new E_(u,l,t,r,s,a,this.nonce,p,y);default:o=new gu(u,l,r,h,s,a,p,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(K(w_),K(I_),K(Mv),K(tB),K(st),K(_r),K(De),K(Pv),K(oa,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),pu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(v_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(NA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(NA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=v_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=v_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Zr.DashCase|Zr.Important)?e.style.setProperty(t,r,i&Zr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Zr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=xn().getGlobalEventTarget(this.doc,e),!e))throw new q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function NA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var E_=class extends pu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=kA(i.id,h);for(let y of h){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=y,this.shadowRoot.appendChild(m)}let p=i.getExternalStyles?.();if(p)for(let y of p){let m=__(y,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gu=class extends pu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?kA(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zh=class extends gu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=nB(h),this.hostAttr=rB(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Xh=class n extends su{supportsDOMEvents=!0;static makeCurrent(){o_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=iB();return t==null?null:oB(t)}resetBaseElement(){mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hu(document.cookie,e)}},mu=null;function iB(){return mu=mu||document.querySelector("base"),mu?mu.getAttribute("href"):null}function oB(n){return new URL(n,document.baseURI).pathname}var sB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),LA=(()=>{class n extends fu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(K(st))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),FA=["alt","control","meta","shift"],aB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},VA=(()=>{class n extends fu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),FA.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=aB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),FA.forEach(s=>{if(s!==i){let a=cB[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(K(st))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function D_(n,e){return sA(j({rootComponent:n},uB(e)))}function uB(n){return{appProviders:[...pB,...n?.providers??[]],platformProviders:fB}}function lB(){Xh.makeCurrent()}function dB(){return new pr}function hB(){return nS(document),document}var fB=[{provide:_r,useValue:m_},{provide:Rv,useValue:lB,multi:!0},{provide:st,useFactory:hB}];var pB=[{provide:gh,useValue:"root"},{provide:pr,useFactory:dB},{provide:Jh,useClass:LA,multi:!0,deps:[st]},{provide:Jh,useClass:VA,multi:!0,deps:[st]},C_,I_,w_,{provide:Qs,useExisting:C_},{provide:Lo,useClass:sB},[]];var ha=class{},yu=class{},br=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var tf=class{encodeKey(e){return UA(e)}encodeValue(e){return UA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function gB(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var mB=/%(\d[a-f0-9])/gi,yB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function UA(n){return encodeURIComponent(n).replace(mB,(e,t)=>yB[t]??e)}function ef(n){return`${n}`}var ii=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new tf,e.fromString){if(e.fromObject)throw new q(2805,!1);this.map=gB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ef):[ef(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ef(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ef(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var nf=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function vB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function jA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function BA(n){return typeof Blob<"u"&&n instanceof Blob}function $A(n){return typeof FormData<"u"&&n instanceof FormData}function _B(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var HA="Content-Type",zA="Accept",GA="X-Request-URL",WA="text/plain",KA="application/json",EB=`${KA}, ${WA}, */*`,da=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(vB(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new br,this.context??=new nf,!this.params)this.params=new ii,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||jA(this.body)||BA(this.body)||$A(this.body)||_B(this.body)?this.body:this.body instanceof ii?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||$A(this.body)?null:BA(this.body)?this.body.type||null:jA(this.body)?null:typeof this.body=="string"?WA:this.body instanceof ii?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?KA:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,m)=>y.set(m,e.setHeaders[m]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,m)=>y.set(m,e.setParams[m]),h)),new n(t,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},Vo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Vo||{}),fa=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new br,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},rf=class n extends fa{constructor(e={}){super(e)}type=Vo.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},vu=class n extends fa{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Vo.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_u=class extends fa{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},wB=200,IB=204;function T_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var pa=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof da)o=t;else{let u;i.headers instanceof br?u=i.headers:u=new br(i.headers);let l;i.params&&(i.params instanceof ii?l=i.params:l=new ii({fromObject:i.params})),o=new da(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Z(o).pipe(cr(u=>this.handler.handle(u)));if(t instanceof da||i.observe==="events")return s;let a=s.pipe(Nt(u=>u instanceof vu));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(X(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new q(2806,!1);return u.body}));case"blob":return a.pipe(X(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new q(2807,!1);return u.body}));case"text":return a.pipe(X(u=>{if(u.body!==null&&typeof u.body!="string")throw new q(2808,!1);return u.body}));case"json":default:return a.pipe(X(u=>u.body))}case"response":return a;default:throw new q(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ii().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,T_(i,r))}post(t,r,i={}){return this.request("POST",t,T_(i,r))}put(t,r,i={}){return this.request("PUT",t,T_(i,r))}static \u0275fac=function(r){return new(r||n)(K(ha))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var bB=new $("");function QA(n,e){return e(n)}function CB(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function DB(n,e,t){return(r,i)=>mt(t,()=>e(r,o=>n(o,i)))}var YA=new $(""),A_=new $(""),ZA=new $(""),M_=new $("",{providedIn:"root",factory:()=>!0});function TB(){let n=null;return(e,t)=>{n===null&&(n=(k(YA,{optional:!0})??[]).reduceRight(CB,QA));let r=k(vr);if(k(M_)){let o=r.add();return n(e,t).pipe(Mi(()=>r.remove(o)))}else return n(e,t)}}var of=(()=>{class n extends ha{backend;injector;chain=null;pendingTasks=k(vr);contributeToStability=k(M_);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(A_),...this.injector.get(ZA,[])]));this.chain=r.reduceRight((i,o)=>DB(i,o,this.injector),QA)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Mi(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(K(yu),K(pt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var SB=/^\)\]\}',?\n/,AB=RegExp(`^${GA}:`,"m");function MB(n){return"responseURL"in n&&n.responseURL?n.responseURL:AB.test(n.getAllResponseHeaders())?n.getResponseHeader(GA):null}var S_=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new q(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Pe(r.\u0275loadImpl()):Z(null)).pipe(Ot(()=>new re(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,O)=>s.setRequestHeader(N,O.join(","))),t.headers.has(zA)||s.setRequestHeader(zA,EB),!t.headers.has(HA)){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader(HA,N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=s.statusText||"OK",O=new br(s.getAllResponseHeaders()),z=MB(s)||t.url;return u=new rf({headers:O,status:s.status,statusText:N,url:z}),u},h=()=>{let{headers:N,status:O,statusText:z,url:de}=l(),Y=null;O!==IB&&(Y=typeof s.response>"u"?s.responseText:s.response),O===0&&(O=Y?wB:0);let ke=O>=200&&O<300;if(t.responseType==="json"&&typeof Y=="string"){let bt=Y;Y=Y.replace(SB,"");try{Y=Y!==""?JSON.parse(Y):null}catch(Ae){Y=bt,ke&&(ke=!1,Y={error:Ae,text:Y})}}ke?(o.next(new vu({body:Y,headers:N,status:O,statusText:z,url:de||void 0})),o.complete()):o.error(new _u({error:Y,headers:N,status:O,statusText:z,url:de||void 0}))},p=N=>{let{url:O}=l(),z=new _u({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:O||void 0});o.error(z)},y=!1,m=N=>{y||(o.next(l()),y=!0);let O={type:Vo.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),t.responseType==="text"&&s.responseText&&(O.partialText=s.responseText),o.next(O)},A=N=>{let O={type:Vo.UploadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),o.next(O)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",A)),s.send(a),o.next({type:Vo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",A)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(K(Lo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),JA=new $(""),RB="XSRF-TOKEN",PB=new $("",{providedIn:"root",factory:()=>RB}),xB="X-XSRF-TOKEN",NB=new $("",{providedIn:"root",factory:()=>xB}),Eu=class{},OB=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=hu(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(K(st),K(_r),K(PB))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function kB(n,e){let t=n.url.toLowerCase();if(!k(JA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=k(Eu).getToken(),i=k(NB);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var R_=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(R_||{});function FB(n,e){return{\u0275kind:n,\u0275providers:e}}function XA(...n){let e=[pa,S_,of,{provide:ha,useExisting:of},{provide:yu,useFactory:()=>k(bB,{optional:!0})??k(S_)},{provide:A_,useValue:kB,multi:!0},{provide:JA,useValue:!0},{provide:Eu,useClass:OB}];for(let t of n)e.push(...t.\u0275providers);return gn(e)}var qA=new $("");function eM(){return FB(R_.LegacyInterceptors,[{provide:qA,useFactory:TB},{provide:A_,useExisting:qA,multi:!0}])}var Uo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=An({providers:[XA(eM())]})}return n})();var nM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(K(st))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var le="primary",Nu=Symbol("RouteTitle"),k_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function $o(n){return new k_(n)}function lM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function VB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cr(n[t],e[t]))return!1;return!0}function Cr(n,e){let t=n?F_(n):void 0,r=e?F_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!dM(n[i],e[i]))return!1;return!0}function F_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function hM(n){return n.length>0?n[n.length-1]:null}function Bi(n){return Qm(n)?n:Ni(n)?Pe(Promise.resolve(n)):Z(n)}var UB={exact:pM,subset:gM},fM={exact:jB,subset:BB,ignored:()=>!0};function rM(n,e,t){return UB[t.paths](n.root,e.root,t.matrixParams)&&fM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function jB(n,e){return Cr(n,e)}function pM(n,e,t){if(!jo(n.segments,e.segments)||!cf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!pM(n.children[r],e.children[r],t))return!1;return!0}function BB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dM(n[t],e[t]))}function gM(n,e,t){return mM(n,e,e.segments,t)}function mM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!jo(i,t)||e.hasChildren()||!cf(i,t,r))}else if(n.segments.length===t.length){if(!jo(n.segments,t)||!cf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!gM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!jo(n.segments,i)||!cf(n.segments,i,r)||!n.children[le]?!1:mM(n.children[le],e,o,r)}}function cf(n,e,t){return e.every((r,i)=>fM[t](n[i].parameters,r.parameters))}var Tr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){return zB.serialize(this)}},Re=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uf(this)}},Li=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=$o(this.parameters),this._parameterMap}toString(){return vM(this)}};function $B(n,e){return jo(n,e)&&n.every((t,r)=>Cr(t.parameters,e[r].parameters))}function jo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function HB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===le&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==le&&(t=t.concat(e(i,r)))}),t}var Ho=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new Vi,providedIn:"root"})}return n})(),Vi=class{parse(e){let t=new V_(e);return new Tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wu(e.root,!0)}`,r=WB(e.queryParams),i=typeof e.fragment=="string"?`#${qB(e.fragment)}`:"";return`${t}${r}${i}`}},zB=new Vi;function uf(n){return n.segments.map(e=>vM(e)).join("/")}function wu(n,e){if(!n.hasChildren())return uf(n);if(e){let t=n.children[le]?wu(n.children[le],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==le&&r.push(`${i}:${wu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=HB(n,(r,i)=>i===le?[wu(n.children[le],!1)]:[`${i}:${wu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[le]!=null?`${uf(n)}/${t[0]}`:`${uf(n)}/(${t.join("//")})`}}function yM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sf(n){return yM(n).replace(/%3B/gi,";")}function qB(n){return encodeURI(n)}function L_(n){return yM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function lf(n){return decodeURIComponent(n)}function iM(n){return lf(n.replace(/\+/g,"%20"))}function vM(n){return`${L_(n.path)}${GB(n.parameters)}`}function GB(n){return Object.entries(n).map(([e,t])=>`;${L_(e)}=${L_(t)}`).join("")}function WB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${sf(t)}=${sf(i)}`).join("&"):`${sf(t)}=${sf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var KB=/^[^\/()?;#]+/;function P_(n){let e=n.match(KB);return e?e[0]:""}var QB=/^[^\/()?;=#]+/;function YB(n){let e=n.match(QB);return e?e[0]:""}var ZB=/^[^=?&#]+/;function JB(n){let e=n.match(ZB);return e?e[0]:""}var XB=/^[^&#]+/;function e$(n){let e=n.match(XB);return e?e[0]:""}var V_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new Re(e,t)),r}parseSegment(){let e=P_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new Li(lf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=YB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=P_(this.remaining);i&&(r=i,this.capture(r))}e[lf(t)]=lf(r)}parseQueryParam(e){let t=JB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=e$(this.remaining);s&&(r=s,this.capture(r))}let i=iM(t),o=iM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=P_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[le]:new Re([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function _M(n){return n.segments.length>0?new Re([],{[le]:n}):n}function EM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=EM(i);if(r===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Re(n.segments,e);return t$(t)}function t$(n){if(n.numberOfChildren===1&&n.children[le]){let e=n.children[le];return new Re(n.segments.concat(e.segments),e.children)}return n}function Ui(n){return n instanceof Tr}function wM(n,e,t=null,r=null){let i=IM(n);return bM(i,e,t,r)}function IM(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Re(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=_M(r);return e??i}function bM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return x_(i,i,i,t,r);let o=n$(e);if(o.toRoot())return x_(i,i,new Re([],{}),t,r);let s=r$(o,i,n),a=s.processChildren?bu(s.segmentGroup,s.index,o.commands):DM(s.segmentGroup,s.index,o.commands);return x_(i,s.segmentGroup,a,t,r)}function hf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Du(n){return typeof n=="object"&&n!=null&&n.outlets}function x_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=CM(n,e,t);let a=_M(EM(s));return new Tr(a,o,i)}function CM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=CM(o,e,t)}),new Re(n.segments,r)}var ff=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hf(r[0]))throw new q(4003,!1);let i=r.find(Du);if(i&&i!==hM(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function n$(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ff(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ff(t,e,r)}var ya=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function r$(n,e,t){if(n.isAbsolute)return new ya(e,!0,0);if(!t)return new ya(e,!1,NaN);if(t.parent===null)return new ya(t,!0,0);let r=hf(n.commands[0])?0:1,i=t.segments.length-1+r;return i$(t,i,n.numberOfDoubleDots)}function i$(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new ya(r,!1,i-o)}function o$(n){return Du(n[0])?n[0].outlets:{[le]:n}}function DM(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return bu(n,e,t);let r=s$(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Re(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new Re(n.segments.slice(r.pathIndex),n.children),bu(o,0,i)}else return r.match&&i.length===0?new Re(n.segments,{}):r.match&&!n.hasChildren()?U_(n,e,t):r.match?bu(n,0,i):U_(n,e,t)}function bu(n,e,t){if(t.length===0)return new Re(n.segments,{});{let r=o$(t),i={};if(Object.keys(r).some(o=>o!==le)&&n.children[le]&&n.numberOfChildren===1&&n.children[le].segments.length===0){let o=bu(n.children[le],e,t);return new Re(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=DM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Re(n.segments,i)}}function s$(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Du(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!sM(u,l,s))return o;r+=2}else{if(!sM(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function U_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Du(o)){let u=a$(o.outlets);return new Re(r,u)}if(i===0&&hf(t[0])){let u=n.segments[e];r.push(new Li(u.path,oM(t[0]))),i++;continue}let s=Du(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&hf(a)?(r.push(new Li(s,oM(a))),i+=2):(r.push(new Li(s,{})),i++)}return new Re(r,{})}function a$(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=U_(new Re([],{}),0,r))}),e}function oM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function sM(n,e,t){return n==t.path&&Cr(e,t.parameters)}var df="imperative",ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ft||{}),vn=class{id;url;constructor(e,t){this.id=e,this.url=t}},ji=class extends vn{type=ft.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},kn=class extends vn{urlAfterRedirects;type=ft.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},un=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(un||{}),_a=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(_a||{}),Dr=class extends vn{reason;code;type=ft.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Sr=class extends vn{reason;code;type=ft.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ea=class extends vn{error;target;type=ft.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tu=class extends vn{urlAfterRedirects;state;type=ft.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pf=class extends vn{urlAfterRedirects;state;type=ft.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gf=class extends vn{urlAfterRedirects;state;shouldActivate;type=ft.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},mf=class extends vn{urlAfterRedirects;state;type=ft.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yf=class extends vn{urlAfterRedirects;state;type=ft.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vf=class{route;type=ft.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_f=class{route;type=ft.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ef=class{snapshot;type=ft.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wf=class{snapshot;type=ft.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},If=class{snapshot;type=ft.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bf=class{snapshot;type=ft.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wa=class{routerEvent;position;anchor;type=ft.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Su=class{},Ia=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function c$(n,e){return n.providers&&!n._injector&&(n._injector=Xc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Jn(n){return n.outlet||le}function u$(n,e){let t=n.filter(r=>Jn(r)===e);return t.push(...n.filter(r=>Jn(r)!==e)),t}function Ou(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Cf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ou(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new zo(this.rootInjector)}},zo=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Cf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(K(pt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Df=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=j_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=j_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=B_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return B_(e,this._root).map(t=>t.value)}};function j_(n,e){if(n===e.value)return e;for(let t of e.children){let r=j_(n,t);if(r)return r}return null}function B_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=B_(n,t);if(r.length)return r.unshift(e),r}return[]}var yn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ma(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Au=class extends Df{snapshot;constructor(e,t){super(e),this.snapshot=t,Q_(this,e)}toString(){return this.snapshot.toString()}};function TM(n){let e=l$(n),t=new ht([new Li("",{})]),r=new ht({}),i=new ht({}),o=new ht({}),s=new ht(""),a=new Fn(t,r,o,s,i,le,n,e.root);return a.snapshot=e.root,new Au(new yn(a,[]),e)}function l$(n){let e={},t={},r={},i="",o=new Bo([],e,r,i,t,le,n,null,{});return new Mu("",new yn(o,[]))}var Fn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[Nu]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>$o(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>$o(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Tf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&AM(i)&&(r.resolve[Nu]=i.title),r}var Bo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Nu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$o(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Mu=class extends Df{url;constructor(e,t){super(t),this.url=e,Q_(this,t)}toString(){return SM(this._root)}};function Q_(n,e){e.value._routerState=n,e.children.forEach(t=>Q_(n,t))}function SM(n){let e=n.children.length>0?` { ${n.children.map(SM).join(", ")} } `:"";return`${n.value}${e}`}function N_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Cr(e.params,t.params)||n.paramsSubject.next(t.params),VB(e.url,t.url)||n.urlSubject.next(t.url),Cr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $_(n,e){let t=Cr(n.params,e.params)&&$B(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||$_(n.parent,e.parent))}function AM(n){return typeof n.title=="string"||n.title===null}var MM=new $(""),ku=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=le;activateEvents=new it;deactivateEvents=new it;attachEvents=new it;detachEvents=new it;routerOutletData=KT(void 0);parentContexts=k(zo);location=k(xi);changeDetector=k(Oi);inputBinder=k(Fu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new H_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[mr]})}return n})(),H_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Fn?this.route:e===zo?this.childContexts:e===MM?this.outletData:this.parent.get(e,t)}},Fu=new $(""),Y_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=kc([r.queryParams,r.params,r.data]).pipe(Ot(([o,s,a],u)=>(a=j(j(j({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=aA(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function d$(n,e,t){let r=Ru(n,e._root,t?t._root:void 0);return new Au(r,e)}function Ru(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=h$(n,e,t);return new yn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ru(n,a)),s}}let r=f$(e.value),i=e.children.map(o=>Ru(n,o));return new yn(r,i)}}function h$(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ru(n,r,i);return Ru(n,r)})}function f$(n){return new Fn(new ht(n.url),new ht(n.params),new ht(n.queryParams),new ht(n.fragment),new ht(n.data),n.outlet,n.component,n)}var ba=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},RM="ngNavigationCancelingError";function Sf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ui(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PM(!1,un.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function PM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[RM]=!0,t.cancellationCode=e,t}function p$(n){return xM(n)&&Ui(n.url)}function xM(n){return!!n&&n[RM]}var g$=(n,e,t,r)=>X(i=>(new z_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),z_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),N_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ma(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ma(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ma(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ma(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new bf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new wf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(N_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),N_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Af=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},va=class{component;route;constructor(e,t){this.component=e,this.route=t}};function m$(n,e,t){let r=n._root,i=e?e._root:null;return Iu(r,i,t,[r.value])}function y$(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Da(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!qD(n)?n:e.get(n):r}function Iu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ma(e);return n.children.forEach(s=>{v$(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Cu(a,t.getContext(s),i)),i}function v$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=_$(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Af(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Iu(n,e,a?a.children:null,r,i):Iu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new va(a.outlet.component,s))}else s&&Cu(e,a,i),i.canActivateChecks.push(new Af(r)),o.component?Iu(n,null,a?a.children:null,r,i):Iu(n,null,t,r,i);return i}function _$(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!jo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jo(n.url,e.url)||!Cr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$_(n,e)||!Cr(n.queryParams,e.queryParams);case"paramsChange":default:return!$_(n,e)}}function Cu(n,e,t){let r=ma(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Cu(s,e.children.getContext(o),t):Cu(s,null,t):Cu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new va(e.outlet.component,i)):t.canDeactivateChecks.push(new va(null,i)):t.canDeactivateChecks.push(new va(null,i))}function Lu(n){return typeof n=="function"}function E$(n){return typeof n=="boolean"}function w$(n){return n&&Lu(n.canLoad)}function I$(n){return n&&Lu(n.canActivate)}function b$(n){return n&&Lu(n.canActivateChild)}function C$(n){return n&&Lu(n.canDeactivate)}function D$(n){return n&&Lu(n.canMatch)}function NM(n){return n instanceof Gr||n?.name==="EmptyError"}var af=Symbol("INITIAL_VALUE");function Ca(){return Ot(n=>kc(n.map(e=>e.pipe(qn(1),Nd(af)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===af)return af;if(t===!1||T$(t))return t}return!0}),Nt(e=>e!==af),qn(1)))}function T$(n){return Ui(n)||n instanceof ba}function S$(n,e){return tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(he(j({},t),{guardsResult:!0})):A$(s,r,i,n).pipe(tt(a=>a&&E$(a)?M$(r,o,n,e):Z(a)),X(a=>he(j({},t),{guardsResult:a})))})}function A$(n,e,t,r){return Pe(n).pipe(tt(i=>O$(i.component,i.route,t,e,r)),Kr(i=>i!==!0,!0))}function M$(n,e,t,r){return Pe(e).pipe(cr(i=>ks(P$(i.route.parent,r),R$(i.route,r),N$(n,i.path,t),x$(n,i.route,t))),Kr(i=>i!==!0,!0))}function R$(n,e){return n!==null&&e&&e(new If(n)),Z(!0)}function P$(n,e){return n!==null&&e&&e(new Ef(n)),Z(!0)}function x$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Rd(()=>{let s=Ou(e)??t,a=Da(o,s),u=I$(a)?a.canActivate(e,n):mt(s,()=>a(e,n));return Bi(u).pipe(Kr())}));return Z(i).pipe(Ca())}function N$(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>y$(s)).filter(s=>s!==null).map(s=>Rd(()=>{let a=s.guards.map(u=>{let l=Ou(s.node)??t,h=Da(u,l),p=b$(h)?h.canActivateChild(r,n):mt(l,()=>h(r,n));return Bi(p).pipe(Kr())});return Z(a).pipe(Ca())}));return Z(o).pipe(Ca())}function O$(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Ou(e)??i,l=Da(a,u),h=C$(l)?l.canDeactivate(n,e,t,r):mt(u,()=>l(n,e,t,r));return Bi(h).pipe(Kr())});return Z(s).pipe(Ca())}function k$(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=Da(s,n),u=w$(a)?a.canLoad(e,t):mt(n,()=>a(e,t));return Bi(u)});return Z(o).pipe(Ca(),OM(r))}function OM(n){return dd(Dt(e=>{if(typeof e!="boolean")throw Sf(n,e)}),X(e=>e===!0))}function F$(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=Da(s,n),u=D$(a)?a.canMatch(e,t):mt(n,()=>a(e,t));return Bi(u)});return Z(o).pipe(Ca(),OM(r))}var Pu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},xu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function ga(n){return Ns(new Pu(n))}function L$(n){return Ns(new q(4e3,!1))}function V$(n){return Ns(PM(!1,un.GuardRejected))}var q_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[le])return L$(`${e.redirectTo}`);i=i.children[le]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:m,data:A,title:N}=i,O=mt(o,()=>a({params:m,data:A,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:N}));if(O instanceof Tr)throw new xu(O);t=O}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new xu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Tr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Re(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},G_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function U$(n,e,t,r,i){let o=kM(n,e,t);return o.matched?(r=c$(e,r),F$(r,e,t,i).pipe(X(s=>s===!0?o:j({},G_)))):Z(o)}function kM(n,e,t){if(e.path==="**")return j$(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},G_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lM)(t,n,e);if(!i)return j({},G_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function j$(n){return{matched:!0,parameters:n.length>0?hM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function aM(n,e,t,r){return t.length>0&&H$(n,t,r)?{segmentGroup:new Re(e,$$(r,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&z$(n,t,r)?{segmentGroup:new Re(n.segments,B$(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function B$(n,e,t,r){let i={};for(let o of t)if(Rf(n,e,o)&&!r[Jn(o)]){let s=new Re([],{});i[Jn(o)]=s}return j(j({},r),i)}function $$(n,e){let t={};t[le]=e;for(let r of n)if(r.path===""&&Jn(r)!==le){let i=new Re([],{});t[Jn(r)]=i}return t}function H$(n,e,t){return t.some(r=>Rf(n,e,r)&&Jn(r)!==le)}function z$(n,e,t){return t.some(r=>Rf(n,e,r))}function Rf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function q$(n,e,t){return e.length===0&&!n.children[t]}var W_=class{};function G$(n,e,t,r,i,o,s="emptyOnly"){return new K_(n,e,t,r,i,s,o).recognize()}var W$=31,K_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new q_(this.urlSerializer,this.urlTree)}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=aM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new yn(r,t),o=new Mu("",i),s=wM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Bo([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,t).pipe(X(r=>({children:r,rootSnapshot:t})),Wr(r=>{if(r instanceof xu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(s=>s instanceof yn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Pe(o).pipe(cr(s=>{let a=r.children[s],u=u$(t,s);return this.processSegmentGroup(e,u,a,s,i)}),xd((s,a)=>(s.push(...a),s)),Ai(null),Zm(),tt(s=>{if(s===null)return ga(r);let a=FM(s);return K$(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return Pe(t).pipe(cr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(Wr(l=>{if(l instanceof Pu)return Z(null);throw l}))),Kr(u=>!!u),Wr(u=>{if(NM(u))return q$(r,i,o)?Z(new W_):ga(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Jn(r)!==s&&(s===le||!Rf(i,o,r))?ga(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):ga(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=kM(t,i,o);if(!u)return ga(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>W$&&(this.allowRedirects=!1));let m=new Bo(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,cM(i),Jn(i),i.component??i._loadedComponent??null,i,uM(i)),A=Tf(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(A.params),m.data=Object.freeze(A.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,m,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(tt(O=>this.processSegment(e,r,t,O.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=U$(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ot(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ot(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:m}=u,A=new Bo(y,p,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,cM(r),Jn(r),r.component??r._loadedComponent??null,r,uM(r)),N=Tf(A,s,this.paramsInheritanceStrategy);A.params=Object.freeze(N.params),A.data=Object.freeze(N.data);let{segmentGroup:O,slicedSegments:z}=aM(t,y,m,l);if(z.length===0&&O.hasChildren())return this.processChildren(h,l,O,A).pipe(X(Y=>new yn(A,Y)));if(l.length===0&&z.length===0)return Z(new yn(A,[]));let de=Jn(r)===o;return this.processSegment(h,l,O,z,de?le:o,!0,A).pipe(X(Y=>new yn(A,Y instanceof yn?[Y]:[])))}))):ga(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):k$(e,t,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,t).pipe(Dt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):V$(t))):Z({routes:[],injector:e})}};function K$(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}function Q$(n){let e=n.value.routeConfig;return e&&e.path===""}function FM(n){let e=[],t=new Set;for(let r of n){if(!Q$(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=FM(r.children);e.push(new yn(r.value,i))}return e.filter(r=>!t.has(r))}function cM(n){return n.data||{}}function uM(n){return n.resolve||{}}function Y$(n,e,t,r,i,o){return tt(s=>G$(n,e,t,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>he(j({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Z$(n,e){return tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of LM(u))s.add(l);let a=0;return Pe(s).pipe(cr(u=>o.has(u)?J$(u,r,n,e):(u.data=Tf(u,u.parent,n).resolve,Z(void 0))),Dt(()=>a++),Fs(1),tt(u=>a===s.size?Z(t):Yt))})}function LM(n){let e=n.children.map(t=>LM(t)).flat();return[n,...e]}function J$(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!AM(i)&&(o[Nu]=i.title),X$(o,n,e,r).pipe(X(s=>(n._resolvedData=s,n.data=Tf(n,n.parent,t).resolve,null)))}function X$(n,e,t,r){let i=F_(n);if(i.length===0)return Z({});let o={};return Pe(i).pipe(tt(s=>eH(n[s],e,t,r).pipe(Kr(),Dt(a=>{if(a instanceof ba)throw Sf(new Vi,a);o[s]=a}))),Fs(1),X(()=>o),Wr(s=>NM(s)?Yt:Ns(s)))}function eH(n,e,t,r){let i=Ou(e)??r,o=Da(n,i),s=o.resolve?o.resolve(e,t):mt(i,()=>o(e,t));return Bi(s)}function O_(n){return Ot(e=>{let t=n(e);return t?Pe(t).pipe(X(()=>e)):Z(e)})}var Z_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[Nu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(VM),providedIn:"root"})}return n})(),VM=(()=>{class n extends Z_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(K(nM))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qo=new $("",{providedIn:"root",factory:()=>({})}),J_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=be({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Fe(0,"router-outlet")},dependencies:[ku],encapsulation:2})}return n})();function X_(n){let e=n.children&&n.children.map(X_),t=e?he(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=J_),t}var Go=new $(""),Pf=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(Fh);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Bi(t.loadComponent()).pipe(X(jM),Dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Mi(()=>{this.componentLoaders.delete(t)})),i=new Ms(r,()=>new et).pipe(As());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=UM(r,this.compiler,t,this.onLoadEndListener).pipe(Mi(()=>{this.childrenLoaders.delete(r)})),s=new Ms(o,()=>new et).pipe(As());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function UM(n,e,t,r){return Bi(n.loadChildren()).pipe(X(jM),tt(i=>i instanceof Yv||Array.isArray(i)?Z(i):Pe(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Go,[],{optional:!0,self:!0}).flat()),{routes:s.map(X_),injector:o}}))}function tH(n){return n&&typeof n=="object"&&"default"in n}function jM(n){return tH(n)?n.default:n}var xf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(nH),providedIn:"root"})}return n})(),nH=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eE=new $(""),tE=new $("");function BM(n,e,t){let r=n.get(tE),i=n.get(st);return n.get(De).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),rH(n))),{onViewTransitionCreated:u}=r;return u&&mt(n,()=>u({transition:a,from:e,to:t})),s})}function rH(n){return new Promise(e=>{Nv({read:()=>setTimeout(e)},{injector:n})})}var nE=new $(""),Nf=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new et;transitionAbortSubject=new et;configLoader=k(Pf);environmentInjector=k(pt);destroyRef=k(ta);urlSerializer=k(Ho);rootContexts=k(zo);location=k(Fi);inputBindingEnabled=k(Fu,{optional:!0})!==null;titleStrategy=k(Z_);options=k(qo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(xf);createViewTransition=k(eE,{optional:!0});navigationErrorHandler=k(nE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new vf(i)),r=i=>this.events.next(new _f(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(he(j({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new ht(null),this.transitions.pipe(Nt(r=>r!==null),Ot(r=>{let i=!1,o=!1;return Z(r).pipe(Ot(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",un.SupersededByNewNavigation),Yt;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?he(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new Sr(s.id,this.urlSerializer.serialize(s.rawUrl),l,_a.IgnoredSameUrlNavigation)),s.resolve(!1),Yt}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Z(s).pipe(Ot(l=>(this.events.next(new ji(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Yt:Promise.resolve(l))),Y$(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Dt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=he(j({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Tu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:y,extras:m}=s,A=new ji(l,this.urlSerializer.serialize(h),p,y);this.events.next(A);let N=TM(this.rootComponentType).snapshot;return this.currentTransition=r=he(j({},s),{targetSnapshot:N,urlAfterRedirects:h,extras:he(j({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Z(r)}else{let l="";return this.events.next(new Sr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,_a.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Yt}}),Dt(s=>{let a=new pf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),X(s=>(this.currentTransition=r=he(j({},s),{guards:m$(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),S$(this.environmentInjector,s=>this.events.next(s)),Dt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Sf(this.urlSerializer,s.guardsResult);let a=new gf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Nt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",un.GuardRejected),!1)),O_(s=>{if(s.guards.canActivateChecks.length!==0)return Z(s).pipe(Dt(a=>{let u=new mf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Ot(a=>{let u=!1;return Z(a).pipe(Z$(this.paramsInheritanceStrategy,this.environmentInjector),Dt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",un.NoDataFromResolver)}}))}),Dt(a=>{let u=new yf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),O_(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Dt(h=>{u.component=h}),X(()=>{})));for(let h of u.children)l.push(...a(h));return l};return kc(a(s.targetSnapshot.root)).pipe(Ai(null),qn(1))}),O_(()=>this.afterPreactivation()),Ot(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Pe(u).pipe(X(()=>r)):Z(r)}),X(s=>{let a=d$(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=he(j({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Dt(()=>{this.events.next(new Su)}),g$(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),qn(1),Dt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new kn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Jm(this.transitionAbortSubject.pipe(Dt(s=>{throw s}))),Mi(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",un.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wr(s=>{if(this.destroyed)return r.resolve(!1),Yt;if(o=!0,xM(s))this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),p$(s)?this.events.next(new Ia(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ea(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=mt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof ba){let{message:l,cancellationCode:h}=Sf(this.urlSerializer,u);this.events.next(new Dr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Ia(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Yt}))}))}cancelNavigationTransition(t,r,i){let o=new Dr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iH(n){return n!==df}var $M=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(oH),providedIn:"root"})}return n})(),Mf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},oH=(()=>{class n extends Mf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HM=(()=>{class n{urlSerializer=k(Ho);options=k(qo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Fi);urlHandlingStrategy=k(xf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Tr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Tr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=TM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(sH),providedIn:"root"})}return n})(),sH=(()=>{class n extends HM{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ji?this.updateStateMemento():t instanceof Sr?this.commitTransition(r):t instanceof Tu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Su?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Dr&&(t.code===un.GuardRejected||t.code===un.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ea?this.restoreHistory(r,!0):t instanceof kn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=j(j({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=j(j({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Of(n,e){n.events.pipe(Nt(t=>t instanceof kn||t instanceof Dr||t instanceof Ea||t instanceof Sr),X(t=>t instanceof kn||t instanceof Sr?0:(t instanceof Dr?t.code===un.Redirect||t.code===un.SupersededByNewNavigation:!1)?2:1),Nt(t=>t!==2),qn(1)).subscribe(()=>{e()})}var aH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Lt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(WS);stateManager=k(HM);options=k(qo,{optional:!0})||{};pendingTasks=k(vr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(Nf);urlSerializer=k(Ho);location=k(Fi);urlHandlingStrategy=k(xf);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k($M);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Go,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(Fu,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ze;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Dr&&r.code!==un.Redirect&&r.code!==un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof kn)this.navigated=!0;else if(r instanceof Ia){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||iH(i.source)},s);this.scheduleNavigation(a,df,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}lH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),df,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(X_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=IM(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return bM(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ui(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,df,null,r)}navigate(t,r={skipLocationChange:!1}){return uH(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},aH):r===!1?i=j({},cH):i=r,Ui(t))return rM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return rM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return Of(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new q(4008,!1)}function lH(n){return!(n instanceof Su)&&!(n instanceof Ia)}var Ln=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new et;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof kn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ui(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:uS(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ui(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(U(Lt),U(Fn),Tv("tabindex"),U(wr),U(vt),U(Yn))};static \u0275dir=Ge({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ue("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&eu("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ki],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ki],replaceUrl:[2,"replaceUrl","replaceUrl",ki],routerLink:"routerLink"},features:[mr]})}return n})();var Vu=class{};var zM=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Nt(t=>t instanceof kn),cr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Xc(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Pe(i).pipe(Os())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(tt(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Pe([o,s]).pipe(Os())}else return o})}static \u0275fac=function(r){return new(r||n)(K(Lt),K(Fh),K(pt),K(Vu),K(Pf))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qM=new $(""),dH=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ji?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Sr&&t.code===_a.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wa&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wa(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){FS()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function iE(n,...e){return gn([{provide:Go,multi:!0,useValue:n},[],{provide:Fn,useFactory:GM,deps:[Lt]},{provide:Nh,multi:!0,useFactory:WM},e.map(t=>t.\u0275providers)])}function GM(n){return n.routerState.root}function Uu(n,e){return{\u0275kind:n,\u0275providers:e}}function WM(){let n=k(Ke);return e=>{let t=n.get(xo);if(e!==t.components[0])return;let r=n.get(Lt),i=n.get(KM);n.get(oE)===1&&r.initialNavigation(),n.get(ZM,null,pe.Optional)?.setUpPreloading(),n.get(qM,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var KM=new $("",{factory:()=>new et}),oE=new $("",{providedIn:"root",factory:()=>1});function QM(){let n=[{provide:oE,useValue:0},Jv(()=>{let e=k(Ke);return e.get(s_,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Lt),o=e.get(KM);Of(i,()=>{r(!0)}),e.get(Nf).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))})];return Uu(2,n)}function YM(){let n=[Jv(()=>{k(Lt).setUpLocationChangeListener()}),{provide:oE,useValue:2}];return Uu(3,n)}var ZM=new $("");function JM(n){return Uu(0,[{provide:ZM,useExisting:zM},{provide:Vu,useExisting:n}])}function XM(){return Uu(8,[Y_,{provide:Fu,useExisting:Y_}])}function eR(n){Jc("NgRouterViewTransitions");let e=[{provide:eE,useValue:BM},{provide:tE,useValue:j({skipNextTransition:!!n?.skipInitialTransition},n)}];return Uu(9,e)}var tR=[Fi,{provide:Ho,useClass:Vi},Lt,zo,{provide:Fn,useFactory:GM,deps:[Lt]},Pf,[]],Gt=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[tR,[],{provide:Go,multi:!0,useValue:t},[],r?.errorHandler?{provide:nE,useValue:r.errorHandler}:[],{provide:qo,useValue:r||{}},r?.useHash?fH():pH(),hH(),r?.preloadingStrategy?JM(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?gH(r):[],r?.bindToComponentInputs?XM().\u0275providers:[],r?.enableViewTransitions?eR().\u0275providers:[],mH()]}}static forChild(t){return{ngModule:n,providers:[{provide:Go,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=An({})}return n})();function hH(){return{provide:qM,useFactory:()=>{let n=k(RA),e=k(De),t=k(qo),r=k(Nf),i=k(Ho);return t.scrollOffset&&n.setOffset(t.scrollOffset),new dH(i,r,n,e,t)}}}function fH(){return{provide:Yn,useClass:h_}}function pH(){return{provide:Yn,useClass:jh}}function gH(n){return[n.initialNavigation==="disabled"?YM().\u0275providers:[],n.initialNavigation==="enabledBlocking"?QM().\u0275providers:[]]}var rE=new $("");function mH(){return[{provide:rE,useFactory:WM},{provide:Nh,multi:!0,useExisting:rE}]}var nR=()=>{};var iR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},yH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},kf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,m=l&63;u||(m=64,s||(y=64)),r.push(t[h],t[p],t[y],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):yH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new aE;let y=o<<2|a>>4;if(r.push(y),l!==64){let m=a<<4&240|l>>2;if(r.push(m),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},aE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vH=function(n){let e=iR(n);return kf.encodeByteArray(e,!0)},ju=function(n){return vH(n).replace(/\./g,"")},Ff=function(n){try{return kf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function oR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var _H=()=>oR().__FIREBASE_DEFAULTS__,EH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},wH=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ff(n[1]);return e&&JSON.parse(e)},Lf=()=>{try{return nR()||_H()||EH()||wH()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uE=n=>{var e,t;return(t=(e=Lf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Vf=n=>{let e=uE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},lE=()=>{var n;return(n=Lf())===null||n===void 0?void 0:n.config},dE=n=>{var e;return(e=Lf())===null||e===void 0?void 0:e[`_${n}`]};var Wo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function sR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ju(JSON.stringify(t)),ju(JSON.stringify(s)),""].join(".")}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function IH(){var n;let e=(n=Lf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dR(){let n=_t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hR(){return!IH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bu(){try{return typeof indexedDB=="object"}catch{return!1}}function fR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var bH="FirebaseError",Wt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=bH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xn.prototype.create)}},Xn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?CH(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Wt(i,a,r)}};function CH(n,e){return n.replace(DH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var DH=/\{\$([^}]+)}/g;function pR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ar(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(rR(o)&&rR(s)){if(!Ar(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function rR(n){return n!==null&&typeof n=="object"}function $u(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sa(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Aa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function gR(n,e){let t=new cE(n,e);return t.subscribe.bind(t)}var cE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");TH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=sE),i.error===void 0&&(i.error=sE),i.complete===void 0&&(i.complete=sE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function TH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sE(){}var $te=4*60*60*1e3;function ze(n){return n&&n._delegate?n._delegate:n}var Tt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ko="[DEFAULT]";var hE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Wo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AH(e))try{this.getOrInitializeService({instanceIdentifier:Ko})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ko){return this.instances.has(e)}getOptions(e=Ko){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ko){return this.component?this.component.multipleInstances?e:Ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function SH(n){return n===Ko?void 0:n}function AH(n){return n.instantiationMode==="EAGER"}var Uf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new hE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var MH=[],ye=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ye||{}),RH={debug:ye.DEBUG,verbose:ye.VERBOSE,info:ye.INFO,warn:ye.WARN,error:ye.ERROR,silent:ye.SILENT},PH=ye.INFO,xH={[ye.DEBUG]:"log",[ye.VERBOSE]:"log",[ye.INFO]:"info",[ye.WARN]:"warn",[ye.ERROR]:"error"},NH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=xH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Mr=class{constructor(e){this.name=e,this._logLevel=PH,this._logHandler=NH,this._userLogHandler=null,MH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ye.DEBUG,...e),this._logHandler(this,ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ye.VERBOSE,...e),this._logHandler(this,ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ye.INFO,...e),this._logHandler(this,ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ye.WARN,...e),this._logHandler(this,ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ye.ERROR,...e),this._logHandler(this,ye.ERROR,...e)}};var OH=(n,e)=>e.some(t=>n instanceof t),mR,yR;function kH(){return mR||(mR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FH(){return yR||(yR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var vR=new WeakMap,pE=new WeakMap,_R=new WeakMap,fE=new WeakMap,mE=new WeakMap;function LH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Rr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&vR.set(t,n)}).catch(()=>{}),mE.set(e,n),e}function VH(n){if(pE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});pE.set(n,e)}var gE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return pE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_R.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ER(n){gE=n(gE)}function UH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(jf(this),e,...t);return _R.set(r,e.sort?e.sort():[e]),Rr(r)}:FH().includes(n)?function(...e){return n.apply(jf(this),e),Rr(vR.get(this))}:function(...e){return Rr(n.apply(jf(this),e))}}function jH(n){return typeof n=="function"?UH(n):(n instanceof IDBTransaction&&VH(n),OH(n,kH())?new Proxy(n,gE):n)}function Rr(n){if(n instanceof IDBRequest)return LH(n);if(fE.has(n))return fE.get(n);let e=jH(n);return e!==n&&(fE.set(n,e),mE.set(e,n)),e}var jf=n=>mE.get(n);function IR(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Rr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Rr(s.result),u.oldVersion,u.newVersion,Rr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var BH=["get","getKey","getAll","getAllKeys","count"],$H=["put","add","delete","clear"],yE=new Map;function wR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(yE.get(e))return yE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=$H.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BH.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return yE.set(e,o),o}ER(n=>he(j({},n),{get:(e,t,r)=>wR(e,t)||n.get(e,t,r),has:(e,t)=>!!wR(e,t)||n.has(e,t)}));var _E=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function HH(n){let e=n.getComponent();return e?.type==="VERSION"}var EE="@firebase/app",bR="0.11.4";var oi=new Mr("@firebase/app"),zH="@firebase/app-compat",qH="@firebase/analytics-compat",GH="@firebase/analytics",WH="@firebase/app-check-compat",KH="@firebase/app-check",QH="@firebase/auth",YH="@firebase/auth-compat",ZH="@firebase/database",JH="@firebase/data-connect",XH="@firebase/database-compat",e4="@firebase/functions",t4="@firebase/functions-compat",n4="@firebase/installations",r4="@firebase/installations-compat",i4="@firebase/messaging",o4="@firebase/messaging-compat",s4="@firebase/performance",a4="@firebase/performance-compat",c4="@firebase/remote-config",u4="@firebase/remote-config-compat",l4="@firebase/storage",d4="@firebase/storage-compat",h4="@firebase/firestore",f4="@firebase/vertexai",p4="@firebase/firestore-compat",g4="firebase",m4="11.6.0";var wE="[DEFAULT]",y4={[EE]:"fire-core",[zH]:"fire-core-compat",[GH]:"fire-analytics",[qH]:"fire-analytics-compat",[KH]:"fire-app-check",[WH]:"fire-app-check-compat",[QH]:"fire-auth",[YH]:"fire-auth-compat",[ZH]:"fire-rtdb",[JH]:"fire-data-connect",[XH]:"fire-rtdb-compat",[e4]:"fire-fn",[t4]:"fire-fn-compat",[n4]:"fire-iid",[r4]:"fire-iid-compat",[i4]:"fire-fcm",[o4]:"fire-fcm-compat",[s4]:"fire-perf",[a4]:"fire-perf-compat",[c4]:"fire-rc",[u4]:"fire-rc-compat",[l4]:"fire-gcs",[d4]:"fire-gcs-compat",[h4]:"fire-fst",[p4]:"fire-fst-compat",[f4]:"fire-vertex","fire-js":"fire-js",[g4]:"fire-js-all"};var Hu=new Map,v4=new Map,IE=new Map;function CR(n,e){try{n.container.addComponent(e)}catch(t){oi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _n(n){let e=n.name;if(IE.has(e))return oi.debug(`There were multiple attempts to register component ${e}.`),!1;IE.set(e,n);for(let t of Hu.values())CR(t,n);for(let t of v4.values())CR(t,n);return!0}function Hi(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function St(n){return n==null?!1:n.settings!==void 0}var _4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new Xn("app","Firebase",_4);var bE=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}};var zi=m4;function TE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:wE,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $i.create("bad-app-name",{appName:String(i)});if(t||(t=lE()),!t)throw $i.create("no-options");let o=Hu.get(i);if(o){if(Ar(t,o.options)&&Ar(r,o.config))return o;throw $i.create("duplicate-app",{appName:i})}let s=new Uf(i);for(let u of IE.values())s.addComponent(u);let a=new bE(t,r,s);return Hu.set(i,a),a}function si(n=wE){let e=Hu.get(n);if(!e&&n===wE&&lE())return TE();if(!e)throw $i.create("no-app",{appName:n});return e}function Bf(){return Array.from(Hu.values())}function $e(n,e,t){var r;let i=(r=y4[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oi.warn(a.join(" "));return}_n(new Tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var E4="firebase-heartbeat-database",w4=1,zu="firebase-heartbeat-store",vE=null;function AR(){return vE||(vE=IR(E4,w4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zu)}catch(t){console.warn(t)}}}}).catch(n=>{throw $i.create("idb-open",{originalErrorMessage:n.message})})),vE}function I4(n){return _(this,null,function*(){try{let t=(yield AR()).transaction(zu),r=yield t.objectStore(zu).get(MR(n));return yield t.done,r}catch(e){if(e instanceof Wt)oi.warn(e.message);else{let t=$i.create("idb-get",{originalErrorMessage:e?.message});oi.warn(t.message)}}})}function DR(n,e){return _(this,null,function*(){try{let r=(yield AR()).transaction(zu,"readwrite");yield r.objectStore(zu).put(e,MR(n)),yield r.done}catch(t){if(t instanceof Wt)oi.warn(t.message);else{let r=$i.create("idb-set",{originalErrorMessage:t?.message});oi.warn(r.message)}}})}function MR(n){return`${n.name}!${n.options.appId}`}var b4=1024,C4=30,CE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new DE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=TR();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>C4){let s=T4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){oi.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=TR(),{heartbeatsToSend:r,unsentEntries:i}=D4(this._heartbeatsCache.heartbeats),o=ju(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return oi.warn(t),""}})}};function TR(){return new Date().toISOString().substring(0,10)}function D4(n,e=b4){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),SR(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),SR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var DE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Bu()?fR().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield I4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return DR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return DR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function SR(n){return ju(JSON.stringify({version:2,heartbeats:n})).length}function T4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function S4(n){_n(new Tt("platform-logger",e=>new _E(e),"PRIVATE")),_n(new Tt("heartbeat",e=>new CE(e),"PRIVATE")),$e(EE,bR,n),$e(EE,bR,"esm2017"),$e("fire-js","")}S4("");var A4="firebase",M4="11.6.0";$e(A4,M4,"app");function SE(n){n===void 0&&(hv(SE),n=k(Ke));let e=n.get(Ih);return t=>new re(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Pr=new Oo("ANGULARFIRE2_VERSION");function Yo(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var qi=(n,e)=>{let t=e?[e]:Bf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ma=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Ma||{}),RR=r_()&&typeof Zone<"u"?Ma.WARN:Ma.SILENT;var $f=class{zone;delegate;constructor(e,t=Wm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},xr=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=k(De);this.outsideAngular=t.runOutsideAngular(()=>new $f(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new $f(typeof Zone>"u"?void 0:Zone.current,Gm))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PR=!1;function R4(n,e){!PR&&(RR>Ma.SILENT||r_())&&(PR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),RR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function P4(n){let e=k(De,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Qo(n){let e=k(De,{optional:!0});return e?e.run(()=>n()):n()}var x4=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),mt(t,()=>Qo(()=>n.apply(void 0,r)))),Ne=(n,e,t)=>(t||=e?Ma.WARN:Ma.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(xr),s=k(Ih),a=k(pt)}catch{return R4(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Qo(()=>s.add())),i[l]=x4(i[l],r,a));let u=P4(()=>n.apply(this,i));return e?u instanceof re?u.pipe(Si(o.outsideAngular),Ti(o.insideAngular),SE(a)):u instanceof Promise?Qo(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>mt(a,()=>Qo(()=>l(p))),p=>mt(a,()=>Qo(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Qo(()=>u):u instanceof re?u.pipe(Si(o.outsideAngular),Ti(o.insideAngular)):Qo(()=>u)});var er=class{constructor(e){return e}},ai=class{constructor(){return Bf()}};function N4(n){return n&&n.length===1?n[0]:new er(si())}var AE=new $("angularfire2._apps"),O4={provide:er,useFactory:N4,deps:[[new gt,AE]]},k4={provide:ai,deps:[[new gt,AE]]};function F4(n){return(e,t)=>{let r=t.get(_r);$e("angularfire",Pr.full,"core"),$e("angularfire",Pr.full,"app"),$e("angular",oA.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new er(i)}}function xR(n,...e){return gn([O4,k4,{provide:AE,useFactory:F4(n),multi:!0,deps:[De,Ke,xr,...e]}])}var NR=Ne(TE,!0);var L4=new Map,V4={activated:!1,tokenObservers:[]},U4={initialized:!1,enabled:!1};function tr(n){return L4.get(n)||Object.assign({},V4)}function LR(){return U4}var j4="https://content-firebaseappcheck.googleapis.com/v1";var B4="exchangeDebugToken",OR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Wne=24*60*60*1e3;var PE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Wo,this.pending.promise.catch(t=>{}),yield $4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Wo,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function $4(n){return new Promise(e=>{setTimeout(e,n)})}var H4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Gi=new Xn("appCheck","AppCheck",H4);function VR(n){if(!tr(n).activated)throw Gi.create("use-before-activation",{appName:n.name})}function UR(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(m){throw Gi.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw Gi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(m){throw Gi.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Gi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,y=Date.now();return{token:l.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}})}function jR(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${j4}/projects/${t}/apps/${r}:${B4}?key=${i}`,body:{debug_token:e}}}var z4="firebase-app-check-database",q4=1,xE="firebase-app-check-store";var Hf=null;function G4(){return Hf||(Hf=new Promise((n,e)=>{try{let t=indexedDB.open(z4,q4);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Gi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(xE,{keyPath:"compositeKey"})}}}catch(t){e(Gi.create("storage-open",{originalErrorMessage:t?.message}))}}),Hf)}function W4(n,e){return K4(Q4(n),e)}function K4(n,e){return _(this,null,function*(){let r=(yield G4()).transaction(xE,"readwrite"),o=r.objectStore(xE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Gi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function Q4(n){return`${n.options.appId}-${n.name}`}var qu=new Mr("@firebase/app-check");function ME(n,e){return Bu()?W4(n,e).catch(t=>{qu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function BR(){return LR().enabled}function $R(){return _(this,null,function*(){let n=LR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Y4={error:"UNKNOWN_ERROR"};function Z4(n){return kf.encodeString(JSON.stringify(n),!1)}function NE(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;VR(r);let i=tr(r),o=i.token,s;if(o&&!Gu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(Gu(l)?o=l:yield ME(r,void 0))}if(!e&&o&&Gu(o))return{token:o.token};let a=!1;if(BR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=UR(jR(r,yield $R()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield ME(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?qu.warn(l.message):t&&qu.error(l),RE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield tr(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?qu.warn(l.message):t&&qu.error(l),s=l}let u;return o?s?Gu(o)?u={token:o.token,internalError:s}:u=RE(s):(u={token:o.token},i.token=o,yield ME(r,o)):u=RE(s),a&&tz(r,u),u})}function J4(n){return _(this,null,function*(){let e=n.app;VR(e);let{provider:t}=tr(e);if(BR()){let r=yield $R(),{token:i}=yield UR(jR(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function X4(n,e,t,r){let{app:i}=n,o=tr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Gu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),kR(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>kR(n))}function HR(n,e){let t=tr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function kR(n){let{app:e}=n,t=tr(e),r=t.tokenRefresher;r||(r=ez(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ez(n){let{app:e}=n;return new PE(()=>_(this,null,function*(){let t=tr(e),r;if(t.token?r=yield NE(n,!0):r=yield NE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=tr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},OR.RETRIAL_MIN_WAIT,OR.RETRIAL_MAX_WAIT)}function tz(n,e){let t=tr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Gu(n){return n.expireTimeMillis-Date.now()>0}function RE(n){return{token:Z4(Y4),error:n}}var OE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=tr(this.app);for(let t of e)HR(this.app,t.next);return Promise.resolve()}};function nz(n,e){return new OE(n,e)}function rz(n){return{getToken:e=>NE(n,e),getLimitedUseToken:()=>J4(n),addTokenListener:e=>X4(n,"INTERNAL",e),removeTokenListener:e=>HR(n.app,e)}}var iz="@firebase/app-check",oz="0.8.13";var sz="app-check",FR="app-check-internal";function az(){_n(new Tt(sz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return nz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(FR).initialize()})),_n(new Tt(FR,n=>{let e=n.getProvider("app-check").getImmediate();return rz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$e(iz,oz)}az();var cz="app-check";var Wi=class{constructor(){return qi(cz)}};var uz=["localhost","0.0.0.0","127.0.0.1"],sre=typeof window<"u"&&uz.includes(window.location.hostname);function oP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sP=oP,aP=new Xn("auth","Firebase",oP());var Qf=new Mr("@firebase/auth");function lz(n,...e){Qf.logLevel<=ye.WARN&&Qf.warn(`Auth (${zi}): ${n}`,...e)}function qf(n,...e){Qf.logLevel<=ye.ERROR&&Qf.error(`Auth (${zi}): ${n}`,...e)}function kr(n,...e){throw iw(n,...e)}function Zo(n,...e){return iw(n,...e)}function cP(n,e,t){let r=Object.assign(Object.assign({},sP()),{[e]:t});return new Xn("auth","Firebase",r).create(e,{appName:n.name})}function Nr(n){return cP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return aP.create(n,...e)}function J(n,e,...t){if(!n)throw iw(e,...t)}function ci(n){let e="INTERNAL ASSERTION FAILED: "+n;throw qf(e),new Error(e)}function Yi(n,e){n||ci(e)}function VE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function dz(){return zR()==="http:"||zR()==="https:"}function zR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function hz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dz()||uR()||"connection"in navigator)?navigator.onLine:!0}function fz(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Jo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yi(t>e,"Short delay should be less than long delay!"),this.isMobile=aR()||lR()}get(){return hz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function ow(n,e){Yi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Yf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var pz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var gz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],mz=new Jo(3e4,6e4);function li(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function nr(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return uP(n,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=$u(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:y},l);return cR()||(m.referrerPolicy="no-referrer"),Yf.fetch()(yield lP(n,n.config.apiHost,t,p),m)}))})}function uP(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},pz),e);try{let i=new UE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw zf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw zf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw zf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw cP(n,h,l);kr(n,h)}}catch(i){if(i instanceof Wt)throw i;kr(n,"network-request-failed",{message:String(i)})}})}function el(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield nr(n,e,t,r,i);return"mfaPendingCredential"in l&&kr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function lP(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?ow(n.config,i):`${n.config.apiScheme}://${i}`;return gz.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function yz(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var UE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zo(this.auth,"network-request-failed")),mz.get())})}};function zf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Zo(n,e,r);return i.customData._tokenResponse=t,i}function qR(n){return n!==void 0&&n.enterprise!==void 0}var jE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yz(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function vz(n,e){return _(this,null,function*(){return nr(n,"GET","/v2/recaptchaConfig",li(n,e))})}function _z(n,e){return _(this,null,function*(){return nr(n,"POST","/v1/accounts:delete",e)})}function Zf(n,e){return _(this,null,function*(){return nr(n,"POST","/v1/accounts:lookup",e)})}function Ku(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sw(n,e=!1){return _(this,null,function*(){let t=ze(n),r=yield t.getIdToken(e),i=aw(r);J(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ku(kE(i.auth_time)),issuedAtTime:Ku(kE(i.iat)),expirationTime:Ku(kE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function kE(n){return Number(n)*1e3}function aw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ff(t);return i?JSON.parse(i):(qf("Failed to decode base64 JWT payload"),null)}catch(i){return qf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GR(n){let e=aw(n);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Xo(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Wt&&Ez(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Ez({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var BE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ku(this.lastLoginAt),this.creationTime=Ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Jf(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Xo(n,Zf(t,{idToken:r}));J(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?dP(o.providerUserInfo):[],a=wz(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Yu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function cw(n){return _(this,null,function*(){let e=ze(n);yield Jf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function wz(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dP(n){return n.map(e=>{var{providerId:t}=e,r=Km(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Iz(n,e){return _(this,null,function*(){let t=yield uP(n,{},()=>_(this,null,function*(){let r=$u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield lP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Yf.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function bz(n,e){return _(this,null,function*(){return nr(n,"POST","/v2/accounts:revokeToken",li(n,e))})}var Qu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){J(e.length!==0,"internal-error");let t=GR(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Iz(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(J(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(J(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(J(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ci("not implemented")}};function Ki(n,e){J(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Qi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Km(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Xo(this,this.stsTokenManager.getToken(this.auth,e));return J(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return sw(this,e)}reload(){return cw(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Jf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(St(this.auth.app))return Promise.reject(Nr(this.auth));let e=yield this.getIdToken();return yield Xo(this,_z(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,A=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,z=(l=t.createdAt)!==null&&l!==void 0?l:void 0,de=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:Y,emailVerified:ke,isAnonymous:bt,providerData:Ae,stsTokenManager:T}=t;J(Y&&T,e,"internal-error");let I=Qu.fromJSON(this.name,T);J(typeof Y=="string",e,"internal-error"),Ki(p,e.name),Ki(y,e.name),J(typeof ke=="boolean",e,"internal-error"),J(typeof bt=="boolean",e,"internal-error"),Ki(m,e.name),Ki(A,e.name),Ki(N,e.name),Ki(O,e.name),Ki(z,e.name),Ki(de,e.name);let C=new n({uid:Y,auth:e,email:y,emailVerified:ke,displayName:p,isAnonymous:bt,photoURL:A,phoneNumber:m,tenantId:N,stsTokenManager:I,createdAt:z,lastLoginAt:de});return Ae&&Array.isArray(Ae)&&(C.providerData=Ae.map(D=>Object.assign({},D))),O&&(C._redirectEventId=O),C}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Qu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Jf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];J(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?dP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Qu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Yu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var WR=new Map;function ui(n){Yi(n instanceof Function,"Expected a class definition");let e=WR.get(n);return e?(Yi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,WR.set(n,e),e)}var Cz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),$E=Cz;function Gf(n,e,t){return`firebase:${n}:${e}:${t}`}var Xf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Gf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Gf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Zf(this.auth,{idToken:e}).catch(()=>{});return t?Qi._fromGetAccountInfoResponse(this.auth,t,e):null}return Qi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(ui($E),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ui($E),s=Gf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let y=yield Zf(e,{idToken:h}).catch(()=>{});if(!y)break;p=yield Qi._fromGetAccountInfoResponse(e,y,h)}else p=Qi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function KR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yP(e))return"Blackberry";if(vP(e))return"Webos";if(fP(e))return"Safari";if((e.includes("chrome/")||pP(e))&&!e.includes("edge/"))return"Chrome";if(mP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function hP(n=_t()){return/firefox\//i.test(n)}function fP(n=_t()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pP(n=_t()){return/crios\//i.test(n)}function gP(n=_t()){return/iemobile/i.test(n)}function mP(n=_t()){return/android/i.test(n)}function yP(n=_t()){return/blackberry/i.test(n)}function vP(n=_t()){return/webos/i.test(n)}function uw(n=_t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Dz(n=_t()){var e;return uw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Tz(){return dR()&&document.documentMode===10}function _P(n=_t()){return uw(n)||mP(n)||vP(n)||yP(n)||/windows phone/i.test(n)||gP(n)}function EP(n,e=[]){let t;switch(n){case"Browser":t=KR(_t());break;case"Worker":t=`${KR(_t())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zi}/${r}`}var HE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Sz(t){return _(this,arguments,function*(n,e={}){return nr(n,"GET","/v2/passwordPolicy",li(n,e))})}var Az=6,zE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:Az,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var qE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ep(this),this.idTokenSubscription=new ep(this),this.beforeStateQueue=new HE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ui(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Xf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Zf(this,{idToken:e}),r=yield Qi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(St(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Jf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fz()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(St(this.app))return Promise.reject(Nr(this));let t=e?ze(e):null;return t&&J(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return St(this.app)?Promise.reject(Nr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return St(this.app)?Promise.reject(Nr(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(ui(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield Sz(this),t=new zE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield bz(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ui(e)||this._popupRedirectResolver;J(t,this,"argument-error"),this.redirectPersistenceManager=yield Xf.create(this,[ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(St(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&lz(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Zi(n){return ze(n)}var ep=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=gR(t=>this.observer=t)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var cp={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mz(n){cp=n}function wP(n){return cp.loadJS(n)}function Rz(){return cp.recaptchaEnterpriseScript}function Pz(){return cp.gapiScript}function IP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var GE=class{constructor(){this.enterprise=new WE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},WE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var xz="recaptcha-enterprise",bP="NO_RECAPTCHA",KE=class{constructor(e){this.type=xz,this.auth=Zi(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(this,null,function*(){vz(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new jE(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;qR(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(bP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&qR(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Rz();u.length!==0&&(u+=a),wP(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function Wu(n,e,t,r=!1,i=!1){return _(this,null,function*(){let o=new KE(n),s;if(i)s=bP;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function tp(n,e,t,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield Wu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>_(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield Wu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield Wu(n,e,t);return r(n,a).catch(u=>_(this,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield Wu(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield Wu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function lw(n,e){let t=Hi(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ar(o,e??{}))return i;kr(i,"already-initialized")}return t.initialize({options:e})}function Nz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ui);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function dw(n,e,t){let r=Zi(n);J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=CP(e),{host:s,port:a}=Oz(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){J(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),J(Ar(l,r.config.emulator)&&Ar(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||kz()}function CP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Oz(n){let e=CP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:QR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:QR(s)}}}function QR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function kz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Zu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,t){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}};function Fz(n,e){return _(this,null,function*(){return nr(n,"POST","/v1/accounts:update",e)})}function Lz(n,e){return _(this,null,function*(){return nr(n,"POST","/v1/accounts:signUp",e)})}function Vz(n,e){return _(this,null,function*(){return el(n,"POST","/v1/accounts:signInWithPassword",li(n,e))})}function DP(n,e){return _(this,null,function*(){return nr(n,"POST","/v1/accounts:sendOobCode",li(n,e))})}function Uz(n,e){return _(this,null,function*(){return DP(n,e)})}function jz(n,e){return _(this,null,function*(){return DP(n,e)})}function Bz(n,e){return _(this,null,function*(){return el(n,"POST","/v1/accounts:signInWithEmailLink",li(n,e))})}function $z(n,e){return _(this,null,function*(){return el(n,"POST","/v1/accounts:signInWithEmailLink",li(n,e))})}var Ju=class n extends Zu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tp(e,t,"signInWithPassword",Vz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Bz(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tp(e,r,"signUpPassword",Lz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return $z(e,{idToken:t,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function FE(n,e){return _(this,null,function*(){return el(n,"POST","/v1/accounts:signInWithIdp",li(n,e))})}function Hz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zz(n){let e=Sa(Aa(n)).link,t=e?Sa(Aa(e)).deep_link_id:null,r=Sa(Aa(n)).deep_link_id;return(r?Sa(Aa(r)).link:null)||r||t||e||n}var np=class n{constructor(e){var t,r,i,o,s,a;let u=Sa(Aa(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=Hz((i=u.mode)!==null&&i!==void 0?i:null);J(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=zz(e);try{return new n(t)}catch{return null}}};var TP=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ju._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=np.parseLink(r);return J(i,"argument-error"),Ju._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),rp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var QE=class extends rp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function qz(n,e){return _(this,null,function*(){return el(n,"POST","/v1/accounts:signUp",li(n,e))})}var Ra=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield Qi._fromIdTokenResponse(e,r,i),s=YR(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=YR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function YR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var YE=class n extends Wt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function SP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?YE._fromErrorAndOperation(n,o,e,r):o})}function Gz(n,e,t=!1){return _(this,null,function*(){let r=yield Xo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ra._forOperation(n,"link",r)})}function Wz(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(St(r.app))return Promise.reject(Nr(r));let i="reauthenticate";try{let o=yield Xo(n,SP(r,i,e,n),t);J(o.idToken,r,"internal-error");let s=aw(o.idToken);J(s,r,"internal-error");let{sub:a}=s;return J(n.uid===a,r,"user-mismatch"),Ra._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&kr(r,"user-mismatch"),o}})}function AP(n,e,t=!1){return _(this,null,function*(){if(St(n.app))return Promise.reject(Nr(n));let r="signIn",i=yield SP(n,r,e),o=yield Ra._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function hw(n,e){return _(this,null,function*(){return AP(Zi(n),e)})}function MP(n,e,t){var r;J(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),J(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),J(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(J(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(J(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function RP(n){return _(this,null,function*(){let e=Zi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function fw(n,e,t){return _(this,null,function*(){let r=Zi(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&MP(r,i,t),yield tp(r,i,"getOobCode",jz,"EMAIL_PASSWORD_PROVIDER")})}function pw(n,e,t){return _(this,null,function*(){if(St(n.app))return Promise.reject(Nr(n));let r=Zi(n),s=yield tp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qz,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&RP(n),u}),a=yield Ra._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function gw(n,e,t){return St(n.app)?Promise.reject(Nr(n)):hw(ze(n),TP.credential(e,t)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&RP(n),r}))}function mw(n,e){return _(this,null,function*(){let t=ze(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&MP(t.auth,i,e);let{email:o}=yield Uz(t.auth,i);o!==n.email&&(yield n.reload())})}function Kz(n,e){return _(this,null,function*(){return nr(n,"POST","/v1/accounts:update",e)})}function yw(r,i){return _(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=ze(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Xo(o,Kz(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function vw(n,e){let t=ze(n);return St(t.auth.app)?Promise.reject(Nr(t.auth)):Qz(t,e,null)}function Qz(n,e,t){return _(this,null,function*(){let{auth:r}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=yield Xo(n,Fz(r,o));yield n._updateTokensIfNecessary(s,!0)})}function tl(n,e,t,r){return ze(n).onIdTokenChanged(e,t,r)}function _w(n,e,t){return ze(n).beforeAuthStateChanged(e,t)}function up(n,e,t,r){return ze(n).onAuthStateChanged(e,t,r)}function Ew(n){return ze(n).signOut()}var ip="__sak";var op=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ip,"1"),this.storage.removeItem(ip),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Yz=1e3,Zz=10,Jz=(()=>{class n extends op{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_P(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);Tz()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Zz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Yz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Ci(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Ci(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Ci(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),PP=Jz;var Xz=(()=>{class n extends op{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),ww=Xz;function eq(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var tq=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield eq(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function xP(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ZE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=xP("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Or(){return window}function nq(n){Or().location.href=n}function NP(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}function rq(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function iq(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function oq(){return NP()?self:null}var OP="firebaseLocalStorageDb",sq=1,sp="firebaseLocalStorage",kP="fbase_key",es=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function lp(n,e){return n.transaction([sp],e?"readwrite":"readonly").objectStore(sp)}function aq(){let n=indexedDB.deleteDatabase(OP);return new es(n).toPromise()}function JE(){let n=indexedDB.open(OP,sq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(sp,{keyPath:kP})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(sp)?e(r):(r.close(),yield aq(),e(yield JE()))}))})}function ZR(n,e,t){return _(this,null,function*(){let r=lp(n,!0).put({[kP]:e,value:t});return new es(r).toPromise()})}function cq(n,e){return _(this,null,function*(){let t=lp(n,!1).get(e),r=yield new es(t).toPromise();return r===void 0?null:r.value})}function JR(n,e){let t=lp(n,!0).delete(e);return new es(t).toPromise()}var uq=800,lq=3,dq=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield JE(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>lq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return NP()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=tq._getInstance(oq()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield rq(),!this.activeServiceWorker)return;this.sender=new ZE(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||iq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield JE();return yield ZR(t,ip,"1"),yield JR(t,ip),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>ZR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>cq(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>JR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=lp(o,!1).getAll();return new es(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),uq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),FP=dq;var pre=IP("rcb"),gre=new Jo(3e4,6e4);function hq(n,e){return e?ui(e):(J(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Xu=class extends Zu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return FE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return FE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return FE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function fq(n){return AP(n.auth,new Xu(n),n.bypassAuthState)}function pq(n){let{auth:e,user:t}=n;return J(t,e,"internal-error"),Wz(t,new Xu(n),n.bypassAuthState)}function gq(n){return _(this,null,function*(){let{auth:e,user:t}=n;return J(t,e,"internal-error"),Gz(t,new Xu(n),n.bypassAuthState)})}var XE=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fq;case"linkViaPopup":case"linkViaRedirect":return gq;case"reauthViaPopup":case"reauthViaRedirect":return pq;default:kr(this.auth,"internal-error")}}resolve(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var mre=new Jo(2e3,1e4);var mq="pendingRedirect",Wf=new Map,ew=class n extends XE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Wf.get(this.auth._key());if(!e){try{let r=(yield yq(this.resolver,this.auth))?yield Ci(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Wf.set(this.auth._key(),e)}return this.bypassAuthState||Wf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Ci(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Ci(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function yq(n,e){return _(this,null,function*(){let t=Eq(e),r=_q(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function vq(n,e){Wf.set(n._key(),e)}function _q(n){return ui(n._redirectPersistence)}function Eq(n){return Gf(mq,n.config.apiKey,n.name)}function wq(n,e,t=!1){return _(this,null,function*(){if(St(n.app))return Promise.reject(Nr(n));let r=Zi(n),i=hq(r,e),s=yield new ew(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Iq=10*60*1e3,tw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!LP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Iq&&this.cachedEventUids.clear(),this.cachedEventUids.has(XR(e))}saveEventToCache(e){this.cachedEventUids.add(XR(e)),this.lastProcessedEventTime=Date.now()}};function XR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function LP({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function bq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LP(n);default:return!1}}function Cq(t){return _(this,arguments,function*(n,e={}){return nr(n,"GET","/v1/projects",e)})}var Dq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tq=/^https?/;function Sq(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Cq(n);for(let t of e)try{if(Aq(t))return}catch{}kr(n,"unauthorized-domain")})}function Aq(n){let e=VE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Tq.test(t))return!1;if(Dq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Mq=new Jo(3e4,6e4);function eP(){let n=Or().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Rq(n){return new Promise((e,t)=>{var r,i,o;function s(){eP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eP(),t(Zo(n,"network-request-failed"))},timeout:Mq.get()})}if(!((i=(r=Or().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Or().gapi)===null||o===void 0)&&o.load)s();else{let a=IP("iframefcb");return Or()[a]=()=>{gapi.load?s():t(Zo(n,"network-request-failed"))},wP(`${Pz()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Kf=null,e})}var Kf=null;function Pq(n){return Kf=Kf||Rq(n),Kf}var xq=new Jo(5e3,15e3),Nq="__/auth/iframe",Oq="emulator/auth/iframe",kq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lq(n){let e=n.config;J(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?ow(e,Oq):`https://${n.config.authDomain}/${Nq}`,r={apiKey:e.apiKey,appName:n.name,v:zi},i=Fq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${$u(r).slice(1)}`}function Vq(n){return _(this,null,function*(){let e=yield Pq(n),t=Or().gapi;return J(t,n,"internal-error"),e.open({where:document.body,url:Lq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kq,dontclear:!0},r=>new Promise((i,o)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Zo(n,"network-request-failed"),a=Or().setTimeout(()=>{o(s)},xq.get());function u(){Or().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var Uq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jq=500,Bq=600,$q="_blank",Hq="http://localhost",ap=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function zq(n,e,t,r=jq,i=Bq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},Uq),{width:r.toString(),height:i.toString(),top:o,left:s}),l=_t().toLowerCase();t&&(a=pP(l)?$q:t),hP(l)&&(e=e||Hq,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[m,A])=>`${y}${m}=${A},`,"");if(Dz(l)&&a!=="_self")return qq(e||"",a),new ap(null);let p=window.open(e||"",a,h);J(p,n,"popup-blocked");try{p.focus()}catch{}return new ap(p)}function qq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Gq="__/auth/handler",Wq="emulator/auth/handler",Kq=encodeURIComponent("fac");function tP(n,e,t,r,i,o){return _(this,null,function*(){J(n.config.authDomain,n,"auth-domain-config-required"),J(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zi,eventId:i};if(e instanceof rp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",pR(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof QE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${Kq}=${encodeURIComponent(u)}`:"";return`${Qq(n)}?${$u(a).slice(1)}${l}`})}function Qq({config:n}){return n.emulator?ow(n,Wq):`https://${n.authDomain}/${Gq}`}var LE="webStorageSupport",nw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ww,this._completeRedirectFn=wq,this._overrideRedirectResult=vq}_openPopup(e,t,r,i){return _(this,null,function*(){var o;Yi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield tP(e,t,r,VE(),i);return zq(e,s,xP())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield tP(e,t,r,VE(),i);return nq(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Yi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield Vq(e),r=new tw(e);return t.register("authEvent",i=>(J(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(LE,{type:LE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[LE];s!==void 0&&t(!!s),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Sq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _P()||fP()||uw()}},VP=nw;var nP="@firebase/auth",rP="1.10.0";var rw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Yq(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Zq(n){_n(new Tt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;J(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EP(n)},l=new qE(r,i,o,u);return Nz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_n(new Tt("auth-internal",e=>{let t=Zi(e.getProvider("auth").getImmediate());return(r=>new rw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$e(nP,rP,Yq(n)),$e(nP,rP,"esm2017")}var Jq=5*60,Xq=dE("authIdTokenMaxAge")||Jq,iP=null,e3=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Xq)return;let i=t?.token;iP!==i&&(iP=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Iw(n=si()){let e=Hi(n,"auth");if(e.isInitialized())return e.getImmediate();let t=lw(n,{popupRedirectResolver:VP,persistence:[FP,PP,ww]}),r=dE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=e3(o.toString());_w(t,s,()=>s(t.currentUser)),tl(t,a=>s(a))}}let i=uE("auth");return i&&dw(t,`http://${i}`),t}function t3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Mz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Zo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",t3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Zq("Browser");function jP(n){return new re(function(e){var t=tl(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var BP="auth",En=class{constructor(e){return e}},ts=class{constructor(){return qi(BP)}};var bw=new $("angularfire2.auth-instances");function V3(n,e){let t=Yo(BP,n,e);return t&&new En(t)}function U3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new En(r)}}var j3={provide:ts,deps:[[new gt,bw]]},B3={provide:En,useFactory:V3,deps:[[new gt,bw],er]};function $P(n,...e){return $e("angularfire",Pr.full,"auth"),gn([B3,j3,{provide:bw,useFactory:U3(n),multi:!0,deps:[De,Ke,xr,ai,[new gt,Wi],...e]}])}var HP=Ne(jP,!0);var zP=Ne(pw,!0,2);var dp=Ne(Iw,!0);var qP=Ne(up,!0);var GP=Ne(mw,!0,2),WP=Ne(fw,!0,2);var KP=Ne(gw,!0,2);var QP=Ne(Ew,!0,2);var YP=Ne(vw,!0,2);var ZP=Ne(yw,!0,2);var JP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XP={};var di,Dw;(function(){var n;function e(T,I){function C(){}C.prototype=I.prototype,T.D=I.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(D,S,R){for(var b=Array(arguments.length-2),$r=2;$r<arguments.length;$r++)b[$r-2]=arguments[$r];return I.prototype[S].apply(D,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,I,C){C||(C=0);var D=Array(16);if(typeof I=="string")for(var S=0;16>S;++S)D[S]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(S=0;16>S;++S)D[S]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=T.g[0],C=T.g[1],S=T.g[2];var R=T.g[3],b=I+(R^C&(S^R))+D[0]+3614090360&4294967295;I=C+(b<<7&4294967295|b>>>25),b=R+(S^I&(C^S))+D[1]+3905402710&4294967295,R=I+(b<<12&4294967295|b>>>20),b=S+(C^R&(I^C))+D[2]+606105819&4294967295,S=R+(b<<17&4294967295|b>>>15),b=C+(I^S&(R^I))+D[3]+3250441966&4294967295,C=S+(b<<22&4294967295|b>>>10),b=I+(R^C&(S^R))+D[4]+4118548399&4294967295,I=C+(b<<7&4294967295|b>>>25),b=R+(S^I&(C^S))+D[5]+1200080426&4294967295,R=I+(b<<12&4294967295|b>>>20),b=S+(C^R&(I^C))+D[6]+2821735955&4294967295,S=R+(b<<17&4294967295|b>>>15),b=C+(I^S&(R^I))+D[7]+4249261313&4294967295,C=S+(b<<22&4294967295|b>>>10),b=I+(R^C&(S^R))+D[8]+1770035416&4294967295,I=C+(b<<7&4294967295|b>>>25),b=R+(S^I&(C^S))+D[9]+2336552879&4294967295,R=I+(b<<12&4294967295|b>>>20),b=S+(C^R&(I^C))+D[10]+4294925233&4294967295,S=R+(b<<17&4294967295|b>>>15),b=C+(I^S&(R^I))+D[11]+2304563134&4294967295,C=S+(b<<22&4294967295|b>>>10),b=I+(R^C&(S^R))+D[12]+1804603682&4294967295,I=C+(b<<7&4294967295|b>>>25),b=R+(S^I&(C^S))+D[13]+4254626195&4294967295,R=I+(b<<12&4294967295|b>>>20),b=S+(C^R&(I^C))+D[14]+2792965006&4294967295,S=R+(b<<17&4294967295|b>>>15),b=C+(I^S&(R^I))+D[15]+1236535329&4294967295,C=S+(b<<22&4294967295|b>>>10),b=I+(S^R&(C^S))+D[1]+4129170786&4294967295,I=C+(b<<5&4294967295|b>>>27),b=R+(C^S&(I^C))+D[6]+3225465664&4294967295,R=I+(b<<9&4294967295|b>>>23),b=S+(I^C&(R^I))+D[11]+643717713&4294967295,S=R+(b<<14&4294967295|b>>>18),b=C+(R^I&(S^R))+D[0]+3921069994&4294967295,C=S+(b<<20&4294967295|b>>>12),b=I+(S^R&(C^S))+D[5]+3593408605&4294967295,I=C+(b<<5&4294967295|b>>>27),b=R+(C^S&(I^C))+D[10]+38016083&4294967295,R=I+(b<<9&4294967295|b>>>23),b=S+(I^C&(R^I))+D[15]+3634488961&4294967295,S=R+(b<<14&4294967295|b>>>18),b=C+(R^I&(S^R))+D[4]+3889429448&4294967295,C=S+(b<<20&4294967295|b>>>12),b=I+(S^R&(C^S))+D[9]+568446438&4294967295,I=C+(b<<5&4294967295|b>>>27),b=R+(C^S&(I^C))+D[14]+3275163606&4294967295,R=I+(b<<9&4294967295|b>>>23),b=S+(I^C&(R^I))+D[3]+4107603335&4294967295,S=R+(b<<14&4294967295|b>>>18),b=C+(R^I&(S^R))+D[8]+1163531501&4294967295,C=S+(b<<20&4294967295|b>>>12),b=I+(S^R&(C^S))+D[13]+2850285829&4294967295,I=C+(b<<5&4294967295|b>>>27),b=R+(C^S&(I^C))+D[2]+4243563512&4294967295,R=I+(b<<9&4294967295|b>>>23),b=S+(I^C&(R^I))+D[7]+1735328473&4294967295,S=R+(b<<14&4294967295|b>>>18),b=C+(R^I&(S^R))+D[12]+2368359562&4294967295,C=S+(b<<20&4294967295|b>>>12),b=I+(C^S^R)+D[5]+4294588738&4294967295,I=C+(b<<4&4294967295|b>>>28),b=R+(I^C^S)+D[8]+2272392833&4294967295,R=I+(b<<11&4294967295|b>>>21),b=S+(R^I^C)+D[11]+1839030562&4294967295,S=R+(b<<16&4294967295|b>>>16),b=C+(S^R^I)+D[14]+4259657740&4294967295,C=S+(b<<23&4294967295|b>>>9),b=I+(C^S^R)+D[1]+2763975236&4294967295,I=C+(b<<4&4294967295|b>>>28),b=R+(I^C^S)+D[4]+1272893353&4294967295,R=I+(b<<11&4294967295|b>>>21),b=S+(R^I^C)+D[7]+4139469664&4294967295,S=R+(b<<16&4294967295|b>>>16),b=C+(S^R^I)+D[10]+3200236656&4294967295,C=S+(b<<23&4294967295|b>>>9),b=I+(C^S^R)+D[13]+681279174&4294967295,I=C+(b<<4&4294967295|b>>>28),b=R+(I^C^S)+D[0]+3936430074&4294967295,R=I+(b<<11&4294967295|b>>>21),b=S+(R^I^C)+D[3]+3572445317&4294967295,S=R+(b<<16&4294967295|b>>>16),b=C+(S^R^I)+D[6]+76029189&4294967295,C=S+(b<<23&4294967295|b>>>9),b=I+(C^S^R)+D[9]+3654602809&4294967295,I=C+(b<<4&4294967295|b>>>28),b=R+(I^C^S)+D[12]+3873151461&4294967295,R=I+(b<<11&4294967295|b>>>21),b=S+(R^I^C)+D[15]+530742520&4294967295,S=R+(b<<16&4294967295|b>>>16),b=C+(S^R^I)+D[2]+3299628645&4294967295,C=S+(b<<23&4294967295|b>>>9),b=I+(S^(C|~R))+D[0]+4096336452&4294967295,I=C+(b<<6&4294967295|b>>>26),b=R+(C^(I|~S))+D[7]+1126891415&4294967295,R=I+(b<<10&4294967295|b>>>22),b=S+(I^(R|~C))+D[14]+2878612391&4294967295,S=R+(b<<15&4294967295|b>>>17),b=C+(R^(S|~I))+D[5]+4237533241&4294967295,C=S+(b<<21&4294967295|b>>>11),b=I+(S^(C|~R))+D[12]+1700485571&4294967295,I=C+(b<<6&4294967295|b>>>26),b=R+(C^(I|~S))+D[3]+2399980690&4294967295,R=I+(b<<10&4294967295|b>>>22),b=S+(I^(R|~C))+D[10]+4293915773&4294967295,S=R+(b<<15&4294967295|b>>>17),b=C+(R^(S|~I))+D[1]+2240044497&4294967295,C=S+(b<<21&4294967295|b>>>11),b=I+(S^(C|~R))+D[8]+1873313359&4294967295,I=C+(b<<6&4294967295|b>>>26),b=R+(C^(I|~S))+D[15]+4264355552&4294967295,R=I+(b<<10&4294967295|b>>>22),b=S+(I^(R|~C))+D[6]+2734768916&4294967295,S=R+(b<<15&4294967295|b>>>17),b=C+(R^(S|~I))+D[13]+1309151649&4294967295,C=S+(b<<21&4294967295|b>>>11),b=I+(S^(C|~R))+D[4]+4149444226&4294967295,I=C+(b<<6&4294967295|b>>>26),b=R+(C^(I|~S))+D[11]+3174756917&4294967295,R=I+(b<<10&4294967295|b>>>22),b=S+(I^(R|~C))+D[2]+718787259&4294967295,S=R+(b<<15&4294967295|b>>>17),b=C+(R^(S|~I))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+I&4294967295,T.g[1]=T.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,I){I===void 0&&(I=T.length);for(var C=I-this.blockSize,D=this.B,S=this.h,R=0;R<I;){if(S==0)for(;R<=C;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<I;)if(D[S++]=T.charCodeAt(R++),S==this.blockSize){i(this,D),S=0;break}}else for(;R<I;)if(D[S++]=T[R++],S==this.blockSize){i(this,D),S=0;break}}this.h=S,this.o+=I},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var I=1;I<T.length-8;++I)T[I]=0;var C=8*this.o;for(I=T.length-8;I<T.length;++I)T[I]=C&255,C/=256;for(this.u(T),T=Array(16),I=C=0;4>I;++I)for(var D=0;32>D;D+=8)T[C++]=this.g[I]>>>D&255;return T};function o(T,I){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=I(T)}function s(T,I){this.h=I;for(var C=[],D=!0,S=T.length-1;0<=S;S--){var R=T[S]|0;D&&R==I||(C[S]=R,D=!1)}this.g=C}var a={};function u(T){return-128<=T&&128>T?o(T,function(I){return new s([I|0],0>I?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return O(l(-T));for(var I=[],C=1,D=0;T>=C;D++)I[D]=T/C|0,C*=4294967296;return new s(I,0)}function h(T,I){if(T.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T.charAt(0)=="-")return O(h(T.substring(1),I));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(I,8)),D=p,S=0;S<T.length;S+=8){var R=Math.min(8,T.length-S),b=parseInt(T.substring(S,S+R),I);8>R?(R=l(Math.pow(I,R)),D=D.j(R).add(l(b))):(D=D.j(C),D=D.add(l(b)))}return D}var p=u(0),y=u(1),m=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-O(this).m();for(var T=0,I=1,C=0;C<this.g.length;C++){var D=this.i(C);T+=(0<=D?D:4294967296+D)*I,I*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(A(this))return"0";if(N(this))return"-"+O(this).toString(T);for(var I=l(Math.pow(T,6)),C=this,D="";;){var S=ke(C,I).g;C=z(C,S.j(I));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=S,A(C))return R+D;for(;6>R.length;)R="0"+R;D=R+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function A(T){if(T.h!=0)return!1;for(var I=0;I<T.g.length;I++)if(T.g[I]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=z(this,T),N(T)?-1:A(T)?0:1};function O(T){for(var I=T.g.length,C=[],D=0;D<I;D++)C[D]=~T.g[D];return new s(C,~T.h).add(y)}n.abs=function(){return N(this)?O(this):this},n.add=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],D=0,S=0;S<=I;S++){var R=D+(this.i(S)&65535)+(T.i(S)&65535),b=(R>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);D=b>>>16,R&=65535,b&=65535,C[S]=b<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function z(T,I){return T.add(O(I))}n.j=function(T){if(A(this)||A(T))return p;if(N(this))return N(T)?O(this).j(O(T)):O(O(this).j(T));if(N(T))return O(this.j(O(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var I=this.g.length+T.g.length,C=[],D=0;D<2*I;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var S=0;S<T.g.length;S++){var R=this.i(D)>>>16,b=this.i(D)&65535,$r=T.i(S)>>>16,uc=T.i(S)&65535;C[2*D+2*S]+=b*uc,de(C,2*D+2*S),C[2*D+2*S+1]+=R*uc,de(C,2*D+2*S+1),C[2*D+2*S+1]+=b*$r,de(C,2*D+2*S+1),C[2*D+2*S+2]+=R*$r,de(C,2*D+2*S+2)}for(D=0;D<I;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=I;D<2*I;D++)C[D]=0;return new s(C,0)};function de(T,I){for(;(T[I]&65535)!=T[I];)T[I+1]+=T[I]>>>16,T[I]&=65535,I++}function Y(T,I){this.g=T,this.h=I}function ke(T,I){if(A(I))throw Error("division by zero");if(A(T))return new Y(p,p);if(N(T))return I=ke(O(T),I),new Y(O(I.g),O(I.h));if(N(I))return I=ke(T,O(I)),new Y(O(I.g),I.h);if(30<T.g.length){if(N(T)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var C=y,D=I;0>=D.l(T);)C=bt(C),D=bt(D);var S=Ae(C,1),R=Ae(D,1);for(D=Ae(D,2),C=Ae(C,2);!A(D);){var b=R.add(D);0>=b.l(T)&&(S=S.add(C),R=b),D=Ae(D,1),C=Ae(C,1)}return I=z(T,S.j(I)),new Y(S,I)}for(S=p;0<=T.l(I);){for(C=Math.max(1,Math.floor(T.m()/I.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),R=l(C),b=R.j(I);N(b)||0<b.l(T);)C-=D,R=l(C),b=R.j(I);A(R)&&(R=y),S=S.add(R),T=z(T,b)}return new Y(S,T)}n.A=function(T){return ke(this,T).h},n.and=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],D=0;D<I;D++)C[D]=this.i(D)&T.i(D);return new s(C,this.h&T.h)},n.or=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],D=0;D<I;D++)C[D]=this.i(D)|T.i(D);return new s(C,this.h|T.h)},n.xor=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],D=0;D<I;D++)C[D]=this.i(D)^T.i(D);return new s(C,this.h^T.h)};function bt(T){for(var I=T.g.length+1,C=[],D=0;D<I;D++)C[D]=T.i(D)<<1|T.i(D-1)>>>31;return new s(C,T.h)}function Ae(T,I){var C=I>>5;I%=32;for(var D=T.g.length-C,S=[],R=0;R<D;R++)S[R]=0<I?T.i(R+C)>>>I|T.i(R+C+1)<<32-I:T.i(R+C);return new s(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dw=XP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,di=XP.Integer=s}).apply(typeof JP<"u"?JP:typeof self<"u"?self:typeof window<"u"?window:{});var hp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hi={};var Tw,$3,Pa,Sw,nl,fp,Aw,Mw,Rw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof hp=="object"&&hp];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var M=c[g];if(!(M in f))break e;f=f[M]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,M={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,g),c.apply(d,M)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function m(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function A(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,M,x){for(var B=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)B[Ue-2]=arguments[Ue];return d.prototype[M].apply(g,B)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function O(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let M=c.length||0,x=g.length||0;c.length=M+x;for(let B=0;B<x;B++)c[M+B]=g[B]}else c.push(g)}}class z{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function de(c){return/^[\s\xa0]*$/.test(c)}function Y(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ke(c){return ke[" "](c),c}ke[" "]=function(){};var bt=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function Ae(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function I(c){let d={};for(let f in c)d[f]=c[f];return d}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,d){let f,g;for(let M=1;M<arguments.length;M++){g=arguments[M];for(f in g)c[f]=g[f];for(let x=0;x<C.length;x++)f=C[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function S(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function R(c){a.setTimeout(()=>{throw c},0)}function b(){var c=Kg;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class $r{constructor(){this.h=this.g=null}add(d,f){let g=uc.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var uc=new z(()=>new xk,c=>c.reset());class xk{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let lc,dc=!1,Kg=new $r,vb=()=>{let c=a.Promise.resolve(void 0);lc=()=>{c.then(Nk)}};var Nk=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(f){R(f)}var d=uc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}dc=!1};function Ei(){this.s=this.s,this.C=this.C}Ei.prototype.s=!1,Ei.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ei.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var Ok=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function hc(c,d){if(Mt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(bt){e:{try{ke(d.nodeName);var M=!0;break e}catch{}M=!1}M||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:kk[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&hc.aa.h.call(this)}}A(hc,Mt);var kk={2:"touch",3:"pen",4:"mouse"};hc.prototype.h=function(){hc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fc="closure_listenable_"+(1e6*Math.random()|0),Fk=0;function Lk(c,d,f,g,M){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=M,this.key=++Fk,this.da=this.fa=!1}function Ll(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vl(c){this.src=c,this.g={},this.h=0}Vl.prototype.add=function(c,d,f,g,M){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var B=Yg(c,d,g,M);return-1<B?(d=c[B],f||(d.fa=!1)):(d=new Lk(d,this.src,x,!!g,M),d.fa=f,c.push(d)),d};function Qg(c,d){var f=d.type;if(f in c.g){var g=c.g[f],M=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=M)&&Array.prototype.splice.call(g,M,1),x&&(Ll(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Yg(c,d,f,g){for(var M=0;M<c.length;++M){var x=c[M];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return M}return-1}var Zg="closure_lm_"+(1e6*Math.random()|0),Jg={};function _b(c,d,f,g,M){if(g&&g.once)return wb(c,d,f,g,M);if(Array.isArray(d)){for(var x=0;x<d.length;x++)_b(c,d[x],f,g,M);return null}return f=nm(f),c&&c[fc]?c.K(d,f,l(g)?!!g.capture:!!g,M):Eb(c,d,f,!1,g,M)}function Eb(c,d,f,g,M,x){if(!d)throw Error("Invalid event type");var B=l(M)?!!M.capture:!!M,Ue=em(c);if(Ue||(c[Zg]=Ue=new Vl(c)),f=Ue.add(d,f,g,B,x),f.proxy)return f;if(g=Vk(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)Ok||(M=B),M===void 0&&(M=!1),c.addEventListener(d.toString(),g,M);else if(c.attachEvent)c.attachEvent(bb(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Vk(){function c(f){return d.call(c.src,c.listener,f)}let d=Uk;return c}function wb(c,d,f,g,M){if(Array.isArray(d)){for(var x=0;x<d.length;x++)wb(c,d[x],f,g,M);return null}return f=nm(f),c&&c[fc]?c.L(d,f,l(g)?!!g.capture:!!g,M):Eb(c,d,f,!0,g,M)}function Ib(c,d,f,g,M){if(Array.isArray(d))for(var x=0;x<d.length;x++)Ib(c,d[x],f,g,M);else g=l(g)?!!g.capture:!!g,f=nm(f),c&&c[fc]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=Yg(x,f,g,M),-1<f&&(Ll(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=em(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Yg(d,f,g,M)),(f=-1<c?d[c]:null)&&Xg(f))}function Xg(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[fc])Qg(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(bb(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=em(d))?(Qg(f,c),f.h==0&&(f.src=null,d[Zg]=null)):Ll(c)}}}function bb(c){return c in Jg?Jg[c]:Jg[c]="on"+c}function Uk(c,d){if(c.da)c=!0;else{d=new hc(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Xg(c),c=f.call(g,d)}return c}function em(c){return c=c[Zg],c instanceof Vl?c:null}var tm="__closure_events_fn_"+(1e9*Math.random()>>>0);function nm(c){return typeof c=="function"?c:(c[tm]||(c[tm]=function(d){return c.handleEvent(d)}),c[tm])}function Rt(){Ei.call(this),this.i=new Vl(this),this.M=this,this.F=null}A(Rt,Ei),Rt.prototype[fc]=!0,Rt.prototype.removeEventListener=function(c,d,f,g){Ib(this,c,d,f,g)};function $t(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Mt(d,c);else if(d instanceof Mt)d.target=d.target||c;else{var M=d;d=new Mt(g,c),D(d,M)}if(M=!0,f)for(var x=f.length-1;0<=x;x--){var B=d.g=f[x];M=Ul(B,g,!0,d)&&M}if(B=d.g=c,M=Ul(B,g,!0,d)&&M,M=Ul(B,g,!1,d)&&M,f)for(x=0;x<f.length;x++)B=d.g=f[x],M=Ul(B,g,!1,d)&&M}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Ll(f[g]);delete c.g[d],c.h--}}this.F=null},Rt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Rt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Ul(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var M=!0,x=0;x<d.length;++x){var B=d[x];if(B&&!B.da&&B.capture==f){var Ue=B.listener,Ct=B.ha||B.src;B.fa&&Qg(c.i,B),M=Ue.call(Ct,g)!==!1&&M}}return M&&!g.defaultPrevented}function Cb(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Db(c){c.g=Cb(()=>{c.g=null,c.i&&(c.i=!1,Db(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class jk extends Ei{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Db(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pc(c){Ei.call(this),this.h=c,this.g={}}A(pc,Ei);var Tb=[];function Sb(c){Ae(c.g,function(d,f){this.g.hasOwnProperty(f)&&Xg(d)},c),c.g={}}pc.prototype.N=function(){pc.aa.N.call(this),Sb(this)},pc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rm=a.JSON.stringify,Bk=a.JSON.parse,$k=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function im(){}im.prototype.h=null;function Ab(c){return c.h||(c.h=c.i())}function Mb(){}var gc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function om(){Mt.call(this,"d")}A(om,Mt);function sm(){Mt.call(this,"c")}A(sm,Mt);var uo={},Rb=null;function jl(){return Rb=Rb||new Rt}uo.La="serverreachability";function Pb(c){Mt.call(this,uo.La,c)}A(Pb,Mt);function mc(c){let d=jl();$t(d,new Pb(d))}uo.STAT_EVENT="statevent";function xb(c,d){Mt.call(this,uo.STAT_EVENT,c),this.stat=d}A(xb,Mt);function Ht(c){let d=jl();$t(d,new xb(d,c))}uo.Ma="timingevent";function Nb(c,d){Mt.call(this,uo.Ma,c),this.size=d}A(Nb,Mt);function yc(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function vc(){this.g=!0}vc.prototype.xa=function(){this.g=!1};function Hk(c,d,f,g,M,x){c.info(function(){if(c.g)if(x)for(var B="",Ue=x.split("&"),Ct=0;Ct<Ue.length;Ct++){var Te=Ue[Ct].split("=");if(1<Te.length){var Pt=Te[0];Te=Te[1];var xt=Pt.split("_");B=2<=xt.length&&xt[1]=="type"?B+(Pt+"="+Te+"&"):B+(Pt+"=redacted&")}}else B=null;else B=x;return"XMLHTTP REQ ("+g+") [attempt "+M+"]: "+d+`
`+f+`
`+B})}function zk(c,d,f,g,M,x,B){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+M+"]: "+d+`
`+f+`
`+x+" "+B})}function _s(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Gk(c,f)+(g?" "+g:"")})}function qk(c,d){c.info(function(){return"TIMEOUT: "+d})}vc.prototype.info=function(){};function Gk(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var M=g[1];if(Array.isArray(M)&&!(1>M.length)){var x=M[0];if(x!="noop"&&x!="stop"&&x!="close")for(var B=1;B<M.length;B++)M[B]=""}}}}return rm(f)}catch{return d}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ob={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},am;function $l(){}A($l,im),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},am=new $l;function wi(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new pc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kb}function kb(){this.i=null,this.g="",this.h=!1}var Fb={},cm={};function um(c,d,f){c.L=1,c.v=Gl(Hr(d)),c.m=f,c.P=!0,Lb(c,null)}function Lb(c,d){c.F=Date.now(),Hl(c),c.A=Hr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Zb(f.i,"t",g),c.C=0,f=c.j.J,c.h=new kb,c.g=gC(c.j,f?d:null,!c.m),0<c.O&&(c.M=new jk(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var M="readystatechange";Array.isArray(M)||(M&&(Tb[0]=M.toString()),M=Tb);for(var x=0;x<M.length;x++){var B=_b(f,M[x],g||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),mc(),Hk(c.i,c.u,c.A,c.l,c.R,c.m)}wi.prototype.ca=function(c){c=c.target;let d=this.M;d&&zr(c)==3?d.j():this.Y(c)},wi.prototype.Y=function(c){try{if(c==this.g)e:{let xt=zr(this.g);var d=this.g.Ba();let Is=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||iC(this.g)))){this.J||xt!=4||d==7||(d==8||0>=Is?mc(3):mc(2)),lm(this);var f=this.g.Z();this.X=f;t:if(Vb(this)){var g=iC(this.g);c="";var M=g.length,x=zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lo(this),_c(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<M;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==M-1)});g.length=0,this.h.g+=c,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,zk(this.i,this.u,this.A,this.l,this.R,xt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Ct=this.g;if((Ue=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(Ue)){var Te=Ue;break t}}Te=null}if(f=Te)_s(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dm(this,f);else{this.o=!1,this.s=3,Ht(12),lo(this),_c(this);break e}}if(this.P){f=!0;let Hn;for(;!this.J&&this.C<B.length;)if(Hn=Wk(this,B),Hn==cm){xt==4&&(this.s=4,Ht(14),f=!1),_s(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Fb){this.s=4,Ht(15),_s(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else _s(this.i,this.l,Hn,null),dm(this,Hn);if(Vb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||B.length!=0||this.h.h||(this.s=1,Ht(16),f=!1),this.o=this.o&&f,!f)_s(this.i,this.l,B,"[Invalid Chunked Response]"),lo(this),_c(this);else if(0<B.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),ym(Pt),Pt.M=!0,Ht(11))}}else _s(this.i,this.l,B,null),dm(this,B);xt==4&&lo(this),this.o&&!this.J&&(xt==4?dC(this.j,this):(this.o=!1,Hl(this)))}else l1(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,Ht(12)):(this.s=0,Ht(13)),lo(this),_c(this)}}}catch{}finally{}};function Vb(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Wk(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?cm:(f=Number(d.substring(f,g)),isNaN(f)?Fb:(g+=1,g+f>d.length?cm:(d=d.slice(g,g+f),c.C=g+f,d)))}wi.prototype.cancel=function(){this.J=!0,lo(this)};function Hl(c){c.S=Date.now()+c.I,Ub(c,c.I)}function Ub(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=yc(y(c.ba,c),d)}function lm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}wi.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(qk(this.i,this.A),this.L!=2&&(mc(),Ht(17)),lo(this),this.s=2,_c(this)):Ub(this,this.S-c)};function _c(c){c.j.G==0||c.J||dC(c.j,c)}function lo(c){lm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Sb(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function dm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||hm(f.h,c))){if(!c.K&&hm(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var M=g;if(M[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Zl(f),Ql(f);else break e;mm(f),Ht(18)}}else f.za=M[1],0<f.za-f.T&&37500>M[2]&&f.F&&f.v==0&&!f.C&&(f.C=yc(y(f.Za,f),6e3));if(1>=$b(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else fo(f,11)}else if((c.K||f.g==c)&&Zl(f),!de(d))for(M=f.Da.g.parse(d),d=0;d<M.length;d++){let Te=M[d];if(f.T=Te[0],Te=Te[1],f.G==2)if(Te[0]=="c"){f.K=Te[1],f.ia=Te[2];let Pt=Te[3];Pt!=null&&(f.la=Pt,f.j.info("VER="+f.la));let xt=Te[4];xt!=null&&(f.Aa=xt,f.j.info("SVER="+f.Aa));let Is=Te[5];Is!=null&&typeof Is=="number"&&0<Is&&(g=1.5*Is,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Hn=c.g;if(Hn){let Xl=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xl){var x=g.h;x.g||Xl.indexOf("spdy")==-1&&Xl.indexOf("quic")==-1&&Xl.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(fm(x,x.h),x.h=null))}if(g.D){let vm=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;vm&&(g.ya=vm,qe(g.I,g.D,vm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var B=c;if(g.qa=pC(g,g.J?g.ia:null,g.W),B.K){Hb(g.h,B);var Ue=B,Ct=g.L;Ct&&(Ue.I=Ct),Ue.B&&(lm(Ue),Hl(Ue)),g.g=B}else uC(g);0<f.i.length&&Yl(f)}else Te[0]!="stop"&&Te[0]!="close"||fo(f,7);else f.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?fo(f,7):gm(f):Te[0]!="noop"&&f.l&&f.l.ta(Te),f.v=0)}}mc(4)}catch{}}var Kk=class{constructor(c,d){this.g=c,this.map=d}};function jb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Bb(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $b(c){return c.h?1:c.g?c.g.size:0}function hm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function fm(c,d){c.g?c.g.add(d):c.h=d}function Hb(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}jb.prototype.cancel=function(){if(this.i=zb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function zb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function Qk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function Yk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function qb(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=Yk(c),g=Qk(c),M=g.length,x=0;x<M;x++)d.call(void 0,g[x],f&&f[x],c)}var Gb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zk(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),M=null;if(0<=g){var x=c[f].substring(0,g);M=c[f].substring(g+1)}else x=c[f];d(x,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function ho(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ho){this.h=c.h,zl(this,c.j),this.o=c.o,this.g=c.g,ql(this,c.s),this.l=c.l;var d=c.i,f=new Ic;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Wb(this,f),this.m=c.m}else c&&(d=String(c).match(Gb))?(this.h=!1,zl(this,d[1]||"",!0),this.o=Ec(d[2]||""),this.g=Ec(d[3]||"",!0),ql(this,d[4]),this.l=Ec(d[5]||"",!0),Wb(this,d[6]||"",!0),this.m=Ec(d[7]||"")):(this.h=!1,this.i=new Ic(null,this.h))}ho.prototype.toString=function(){var c=[],d=this.j;d&&c.push(wc(d,Kb,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(wc(d,Kb,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(wc(f,f.charAt(0)=="/"?e1:Xk,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",wc(f,n1)),c.join("")};function Hr(c){return new ho(c)}function zl(c,d,f){c.j=f?Ec(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ql(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Wb(c,d,f){d instanceof Ic?(c.i=d,r1(c.i,c.h)):(f||(d=wc(d,t1)),c.i=new Ic(d,c.h))}function qe(c,d,f){c.i.set(d,f)}function Gl(c){return qe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ec(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function wc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Jk),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Jk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Kb=/[#\/\?@]/g,Xk=/[#\?:]/g,e1=/[#\?]/g,t1=/[#\?@]/g,n1=/#/g;function Ic(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ii(c){c.g||(c.g=new Map,c.h=0,c.i&&Zk(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ic.prototype,n.add=function(c,d){Ii(this),this.i=null,c=Es(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Qb(c,d){Ii(c),d=Es(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Yb(c,d){return Ii(c),d=Es(c,d),c.g.has(d)}n.forEach=function(c,d){Ii(this),this.g.forEach(function(f,g){f.forEach(function(M){c.call(d,M,g,this)},this)},this)},n.na=function(){Ii(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let M=c[g];for(let x=0;x<M.length;x++)f.push(d[g])}return f},n.V=function(c){Ii(this);let d=[];if(typeof c=="string")Yb(this,c)&&(d=d.concat(this.g.get(Es(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Ii(this),this.i=null,c=Es(this,c),Yb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Zb(c,d,f){Qb(c,d),0<f.length&&(c.i=null,c.g.set(Es(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),B=this.V(g);for(g=0;g<B.length;g++){var M=x;B[g]!==""&&(M+="="+encodeURIComponent(String(B[g]))),c.push(M)}}return this.i=c.join("&")};function Es(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function r1(c,d){d&&!c.j&&(Ii(c),c.i=null,c.g.forEach(function(f,g){var M=g.toLowerCase();g!=M&&(Qb(this,g),Zb(this,M,f))},c)),c.j=d}function i1(c,d){let f=new vc;if(a.Image){let g=new Image;g.onload=m(bi,f,"TestLoadImage: loaded",!0,d,g),g.onerror=m(bi,f,"TestLoadImage: error",!1,d,g),g.onabort=m(bi,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=m(bi,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function o1(c,d){let f=new vc,g=new AbortController,M=setTimeout(()=>{g.abort(),bi(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(M),x.ok?bi(f,"TestPingServer: ok",!0,d):bi(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),bi(f,"TestPingServer: error",!1,d)})}function bi(c,d,f,g,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),g(f)}catch{}}function s1(){this.g=new $k}function a1(c,d,f){let g=f||"";try{qb(c,function(M,x){let B=M;l(M)&&(B=rm(M)),d.push(g+x+"="+encodeURIComponent(B))})}catch(M){throw d.push(g+"type="+encodeURIComponent("_badmap")),M}}function bc(c){this.l=c.Ub||null,this.j=c.eb||!1}A(bc,im),bc.prototype.g=function(){return new Wl(this.l,this.j)},bc.prototype.i=function(c){return function(){return c}}({});function Wl(c,d){Rt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Wl,Rt),n=Wl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Dc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cc(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Dc(this)),this.g&&(this.readyState=3,Dc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jb(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jb(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Cc(this):Dc(this),this.readyState==3&&Jb(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Cc(this))},n.Qa=function(c){this.g&&(this.response=c,Cc(this))},n.ga=function(){this.g&&Cc(this)};function Cc(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Dc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Dc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xb(c){let d="";return Ae(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function pm(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Xb(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):qe(c,d,f))}function Ye(c){Rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Ye,Rt);var c1=/^https?$/i,u1=["POST","PUT"];n=Ye.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():am.g(),this.v=this.o?Ab(this.o):Ab(am),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){eC(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var M in g)f.set(M,g[M]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(u1,d,void 0))||g||M||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,B]of f)this.g.setRequestHeader(x,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rC(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){eC(this,x)}};function eC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,tC(c),Kl(c)}function tC(c){c.A||(c.A=!0,$t(c,"complete"),$t(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$t(this,"complete"),$t(this,"abort"),Kl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kl(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nC(this):this.bb())},n.bb=function(){nC(this)};function nC(c){if(c.h&&typeof s<"u"&&(!c.v[1]||zr(c)!=4||c.Z()!=2)){if(c.u&&zr(c)==4)Cb(c.Ea,0,c);else if($t(c,"readystatechange"),zr(c)==4){c.h=!1;try{let B=c.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=B===0){var M=String(c.D).match(Gb)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),g=!c1.test(M?M.toLowerCase():"")}f=g}if(f)$t(c,"complete"),$t(c,"success");else{c.m=6;try{var x=2<zr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",tC(c)}}finally{Kl(c)}}}}function Kl(c,d){if(c.g){rC(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||$t(c,"ready");try{f.onreadystatechange=g}catch{}}}function rC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function zr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<zr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Bk(d)}};function iC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function l1(c){let d={};c=(c.g&&2<=zr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(de(c[g]))continue;var f=S(c[g]);let M=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[M]||[];d[M]=x,x.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function oC(c){this.Aa=0,this.i=[],this.j=new vc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tc("baseRetryDelayMs",5e3,c),this.cb=Tc("retryDelaySeedMs",1e4,c),this.Wa=Tc("forwardChannelMaxRetries",2,c),this.wa=Tc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new jb(c&&c.concurrentRequestLimit),this.Da=new s1,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=oC.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Ht(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=pC(this,null,this.W),Yl(this)};function gm(c){if(sC(c),c.G==3){var d=c.U++,f=Hr(c.I);if(qe(f,"SID",c.K),qe(f,"RID",d),qe(f,"TYPE","terminate"),Sc(c,f),d=new wi(c,c.j,d),d.L=2,d.v=Gl(Hr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=gC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Hl(d)}fC(c)}function Ql(c){c.g&&(ym(c),c.g.cancel(),c.g=null)}function sC(c){Ql(c),c.u&&(a.clearTimeout(c.u),c.u=null),Zl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Yl(c){if(!Bb(c.h)&&!c.s){c.s=!0;var d=c.Ga;lc||vb(),dc||(lc(),dc=!0),Kg.add(d,c),c.B=0}}function d1(c,d){return $b(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=yc(y(c.Ga,c,d),hC(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let M=new wi(this,this.j,c),x=this.o;if(this.S&&(x?(x=I(x),D(x,this.S)):x=this.S),this.m!==null||this.O||(M.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=cC(this,M,d),f=Hr(this.I),qe(f,"RID",c),qe(f,"CVER",22),this.D&&qe(f,"X-HTTP-Session-Id",this.D),Sc(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(Xb(x)))+"&"+d:this.m&&pm(f,this.m,x)),fm(this.h,M),this.Ua&&qe(f,"TYPE","init"),this.P?(qe(f,"$req",d),qe(f,"SID","null"),M.T=!0,um(M,f,null)):um(M,f,d),this.G=2}}else this.G==3&&(c?aC(this,c):this.i.length==0||Bb(this.h)||aC(this))};function aC(c,d){var f;d?f=d.l:f=c.U++;let g=Hr(c.I);qe(g,"SID",c.K),qe(g,"RID",f),qe(g,"AID",c.T),Sc(c,g),c.m&&c.o&&pm(g,c.m,c.o),f=new wi(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=cC(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),fm(c.h,f),um(f,g,d)}function Sc(c,d){c.H&&Ae(c.H,function(f,g){qe(d,g,f)}),c.l&&qb({},function(f,g){qe(d,g,f)})}function cC(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var M=c.i;let x=-1;for(;;){let B=["count="+f];x==-1?0<f?(x=M[0].g,B.push("ofs="+x)):x=0:B.push("ofs="+x);let Ue=!0;for(let Ct=0;Ct<f;Ct++){let Te=M[Ct].g,Pt=M[Ct].map;if(Te-=x,0>Te)x=Math.max(0,M[Ct].g-100),Ue=!1;else try{a1(Pt,B,"req"+Te+"_")}catch{g&&g(Pt)}}if(Ue){g=B.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function uC(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;lc||vb(),dc||(lc(),dc=!0),Kg.add(d,c),c.v=0}}function mm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=yc(y(c.Fa,c),hC(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,lC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=yc(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ht(10),Ql(this),lC(this))};function ym(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function lC(c){c.g=new wi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Hr(c.qa);qe(d,"RID","rpc"),qe(d,"SID",c.K),qe(d,"AID",c.T),qe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&qe(d,"TO",c.ja),qe(d,"TYPE","xmlhttp"),Sc(c,d),c.m&&c.o&&pm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Gl(Hr(d)),f.m=null,f.P=!0,Lb(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Ql(this),mm(this),Ht(19))};function Zl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function dC(c,d){var f=null;if(c.g==d){Zl(c),ym(c),c.g=null;var g=2}else if(hm(c.h,d))f=d.D,Hb(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var M=c.B;g=jl(),$t(g,new Nb(g,f)),Yl(c)}else uC(c);else if(M=d.s,M==3||M==0&&0<d.X||!(g==1&&d1(c,d)||g==2&&mm(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),M){case 1:fo(c,5);break;case 4:fo(c,10);break;case 3:fo(c,6);break;default:fo(c,2)}}}function hC(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function fo(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let M=!g;g=new ho(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zl(g,"https"),Gl(g),M?i1(g.toString(),f):o1(g.toString(),f)}else Ht(2);c.G=0,c.l&&c.l.sa(d),fC(c),sC(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function fC(c){if(c.G=0,c.ka=[],c.l){let d=zb(c.h);(d.length!=0||c.i.length!=0)&&(O(c.ka,d),O(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function pC(c,d,f){var g=f instanceof ho?Hr(f):new ho(f);if(g.g!="")d&&(g.g=d+"."+g.g),ql(g,g.s);else{var M=a.location;g=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;var x=new ho(null);g&&zl(x,g),d&&(x.g=d),M&&ql(x,M),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&qe(g,f,d),qe(g,"VER",c.la),Sc(c,g),g}function gC(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ye(new bc({eb:f})):new Ye(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mC(){}n=mC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Jl(){}Jl.prototype.g=function(c,d){return new hn(c,d)};function hn(c,d){Rt.call(this),this.g=new oC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!de(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!de(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ws(this)}A(hn,Rt),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){gm(this.g)},hn.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=rm(c),c=f);d.i.push(new Kk(d.Ya++,c)),d.G==3&&Yl(d)},hn.prototype.N=function(){this.g.l=null,delete this.j,gm(this.g),delete this.g,hn.aa.N.call(this)};function yC(c){om.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}A(yC,om);function vC(){sm.call(this),this.status=1}A(vC,sm);function ws(c){this.g=c}A(ws,mC),ws.prototype.ua=function(){$t(this.g,"a")},ws.prototype.ta=function(c){$t(this.g,new yC(c))},ws.prototype.sa=function(c){$t(this.g,new vC)},ws.prototype.ra=function(){$t(this.g,"b")},Jl.prototype.createWebChannel=Jl.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,Rw=hi.createWebChannelTransport=function(){return new Jl},Mw=hi.getStatEventTarget=function(){return jl()},Aw=hi.Event=uo,fp=hi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,nl=hi.ErrorCode=Bl,Ob.COMPLETE="complete",Sw=hi.EventType=Ob,Mb.EventType=gc,gc.OPEN="a",gc.CLOSE="b",gc.ERROR="c",gc.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Pa=hi.WebChannel=Mb,$3=hi.FetchXmlHttpFactory=bc,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Tw=hi.XhrIo=Ye}).apply(typeof hp<"u"?hp:typeof self<"u"?self:typeof window<"u"?window:{});var ex="@firebase/firestore",tx="4.7.10";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var Ja="11.5.0";var os=new Mr("@firebase/firestore");function xa(){return os.logLevel}function G(n,...e){if(os.logLevel<=ye.DEBUG){let t=e.map(y0);os.debug(`Firestore (${Ja}): ${n}`,...t)}}function pi(n,...e){if(os.logLevel<=ye.ERROR){let t=e.map(y0);os.error(`Firestore (${Ja}): ${n}`,...t)}}function Ua(n,...e){if(os.logLevel<=ye.WARN){let t=e.map(y0);os.warn(`Firestore (${Ja}): ${n}`,...t)}}function y0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n="Unexpected state"){let e=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: `+n;throw pi(e),new Error(e)}function Oe(n,e){n||ne()}function se(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},W=class extends Wt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ir=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ep=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},kw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Et.UNAUTHENTICATED))}shutdown(){}},Fw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Lw=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ir,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ir)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new Ep(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Et(e)}},Vw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},Uw=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Vw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},jw=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,St(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0);let r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new wp(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string"),this.R=t.token,new wp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function H3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Gx(){return new TextEncoder}var Ip=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=H3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function me(n,e){return n<e?-1:n>e?1:0}function Bw(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return me(r,i);{let o=Gx(),s=z3(o.encode(nx(n,t)),o.encode(nx(e,t)));return s!==0?s:me(r,i)}}t+=r>65535?2:1}return me(n.length,e.length)}function nx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function z3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return me(n[t],e[t]);return me(n.length,e.length)}function ja(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var rx=-62135596800,ix=1e6,At=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ix);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rx)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ix}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-rx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new At(0,0))}static max(){return new n(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ox="__name__",bp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(),r===void 0?r=e.length-t:r>e.length-t&&ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return me(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):Bw(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return di.fromString(e.substring(4,e.length-2))}},Qe=class n extends bp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},q3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wn=class n extends bp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return q3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ox}static keyField(){return new n([ox])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(Qe.fromString(e))}static fromName(e){return new n(Qe.fromString(e).popFirst(5))}static empty(){return new n(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Qe(e.slice()))}};var cl=-1,$w=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};$w.UNKNOWN_ID=-1;function G3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new At(t+1,0):new At(t,r));return new ss(i,ee.empty(),e)}function W3(n){return new ss(n.readTime,n.key,cl)}var ss=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),ee.empty(),cl)}static max(){return new n(ce.max(),ee.empty(),cl)}};function K3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:me(n.largestBatchId,e.largestBatchId))}var Q3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xa(n){return _(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==Q3)throw n;G("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Y3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ec(n){return n.name==="IndexedDbTransactionError"}var v0=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),_0=-1;function tg(n){return n==null}function ul(n){return n===0&&1/n==-1/0}function Z3(n){return typeof n=="number"&&Number.isInteger(n)&&!ul(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Wx="";function J3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sx(e)),e=X3(n.get(t),e);return sx(e)}function X3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Wx:t+="";break;default:t+=o}}return t}function sx(n){return n+Wx+""}var e5="remoteDocuments",Kx="owner";var Qx="mutationQueues";var Yx="mutations";var Zx="documentMutations",t5="remoteDocumentsV14";var Jx="remoteDocumentGlobal";var Xx="targets";var eN="targetDocuments";var tN="targetGlobal",nN="collectionParents";var rN="clientMetadata";var iN="bundles";var oN="namedQueries";var n5="indexConfiguration";var r5="indexState";var i5="indexEntries";var sN="documentOverlays";var o5="globals";var s5=[Qx,Yx,Zx,e5,Xx,Kx,tN,eN,rN,Jx,nN,iN,oN],Eie=[...s5,sN],a5=[Qx,Yx,Zx,t5,Xx,Kx,tN,eN,rN,Jx,nN,iN,oN,sN],c5=a5,u5=[...c5,n5,r5,i5];var wie=[...u5,o5];function ax(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function fs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function aN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Xe=class n{constructor(e,t){this.comparator=e,this.root=t||Lr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}},Fa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Lr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1;Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Lr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var wt=class n{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cp(this.data.getIterator())}getIteratorFrom(e){return new Cp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Cp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Fr=class n{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new n([])}unionWith(e){let t=new wt(wn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Dp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ut=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Dp("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ut.EMPTY_BYTE_STRING=new Ut("");var l5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(n){if(Oe(!!n),typeof n=="string"){let e=0,t=l5.exec(n);if(Oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(n.seconds),nanos:We(n.nanos)}}function We(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mi(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}var cN="server_timestamp",uN="__type__",lN="__previous_value__",dN="__local_write_time__";function E0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[uN])===null||t===void 0?void 0:t.stringValue)===cN}function ng(n){let e=n.mapValue.fields[lN];return E0(e)?ng(e):e}function ll(n){let e=gi(n.mapValue.fields[dN].timestampValue);return new At(e.seconds,e.nanos)}var zw=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Tp="(default)",Sp=class n{constructor(e,t){this.projectId=e,this.database=t||Tp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Tp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var w0="__type__",hN="__max__",pp={mapValue:{fields:{__type__:{stringValue:hN}}}},I0="__vector__",Ba="value";function Xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?E0(n)?4:pN(n)?9007199254740991:fN(n)?10:11:ne()}function jr(n,e){if(n===e)return!0;let t=Xi(n);if(t!==Xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ll(n).isEqual(ll(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=gi(i.timestampValue),a=gi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return mi(i.bytesValue).isEqual(mi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return We(i.geoPointValue.latitude)===We(o.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return We(i.integerValue)===We(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=We(i.doubleValue),a=We(o.doubleValue);return s===a?ul(s)===ul(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ja(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ax(s)!==ax(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!jr(s[u],a[u])))return!1;return!0}(n,e);default:return ne()}}function dl(n,e){return(n.values||[]).find(t=>jr(t,e))!==void 0}function $a(n,e){if(n===e)return 0;let t=Xi(n),r=Xi(e);if(t!==r)return me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return me(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=We(o.integerValue||o.doubleValue),u=We(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return cx(n.timestampValue,e.timestampValue);case 4:return cx(ll(n),ll(e));case 5:return Bw(n.stringValue,e.stringValue);case 6:return function(o,s){let a=mi(o),u=mi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=me(a[l],u[l]);if(h!==0)return h}return me(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=me(We(o.latitude),We(s.latitude));return a!==0?a:me(We(o.longitude),We(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ux(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},m=(a=p[Ba])===null||a===void 0?void 0:a.arrayValue,A=(u=y[Ba])===null||u===void 0?void 0:u.arrayValue,N=me(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=A?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:ux(m,A)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===pp.mapValue&&s===pp.mapValue)return 0;if(o===pp.mapValue)return 1;if(s===pp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=Bw(u[p],h[p]);if(y!==0)return y;let m=$a(a[u[p]],l[h[p]]);if(m!==0)return m}return me(u.length,h.length)}(n.mapValue,e.mapValue);default:throw ne()}}function cx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return me(n,e);let t=gi(n),r=gi(e),i=me(t.seconds,r.seconds);return i!==0?i:me(t.nanos,r.nanos)}function ux(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=$a(t[i],r[i]);if(o)return o}return me(t.length,r.length)}function Ha(n){return qw(n)}function qw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return mi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=qw(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${qw(t.fields[s])}`;return i+"}"}(n.mapValue):ne()}function yp(n){switch(Xi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ng(n);return e?16+yp(e):16;case 5:return 2*n.stringValue.length;case 6:return mi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+yp(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return fs(r.fields,(o,s)=>{i+=o.length+yp(s)}),i}(n.mapValue);default:throw ne()}}function lx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gw(n){return!!n&&"integerValue"in n}function b0(n){return!!n&&"arrayValue"in n}function dx(n){return!!n&&"nullValue"in n}function hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vp(n){return!!n&&"mapValue"in n}function fN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[w0])===null||t===void 0?void 0:t.stringValue)===I0}function il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return fs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=il(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===hN}var bie={mapValue:{fields:{[w0]:{stringValue:I0},[Ba]:{arrayValue:{}}}}};var rr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=il(t)}setAll(e){let t=wn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=il(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());vp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){fs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(il(this.value))}};function gN(n){let e=[];return fs(n.fields,(t,r)=>{let i=new wn([t]);if(vp(r)){let o=gN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Fr(e)}var or=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),rr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),rr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),rr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var za=class{constructor(e,t){this.position=e,this.inclusive=t}};function fx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ee.comparator(ee.fromName(s.referenceValue),t.key):r=$a(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function px(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}var qa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function d5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ap=class{},lt=class n extends Ap{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Kw(e,t,r):t==="array-contains"?new Zw(e,r):t==="in"?new Jw(e,r):t==="not-in"?new Xw(e,r):t==="array-contains-any"?new eI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Qw(e,r):new Yw(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison($a(t,this.value)):t!==null&&Xi(this.value)===Xi(t)&&this.matchesComparison($a(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},sr=class n extends Ap{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return mN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function mN(n){return n.op==="and"}function yN(n){return h5(n)&&mN(n)}function h5(n){for(let e of n.filters)if(e instanceof sr)return!1;return!0}function Ww(n){if(n instanceof lt)return n.field.canonicalString()+n.op.toString()+Ha(n.value);if(yN(n))return n.filters.map(e=>Ww(e)).join(",");{let e=n.filters.map(t=>Ww(t)).join(",");return`${n.op}(${e})`}}function vN(n,e){return n instanceof lt?function(r,i){return i instanceof lt&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)}(n,e):n instanceof sr?function(r,i){return i instanceof sr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&vN(s,i.filters[a]),!0):!1}(n,e):void ne()}function _N(n){return n instanceof lt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ha(t.value)}`}(n):n instanceof sr?function(t){return t.op.toString()+" {"+t.getFilters().map(_N).join(" ,")+"}"}(n):"Filter"}var Kw=class extends lt{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},Qw=class extends lt{constructor(e,t){super(e,"in",t),this.keys=EN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Yw=class extends lt{constructor(e,t){super(e,"not-in",t),this.keys=EN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function EN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var Zw=class extends lt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return b0(t)&&dl(t.arrayValue,this.value)}},Jw=class extends lt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&dl(this.value.arrayValue,t)}},Xw=class extends lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!dl(this.value.arrayValue,t)}},eI=class extends lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!b0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>dl(this.value.arrayValue,r))}};var tI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function gx(n,e=null,t=[],r=[],i=null,o=null,s=null){return new tI(n,e,t,r,i,o,s)}function C0(n){let e=se(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Ww(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),tg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ha(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ha(r)).join(",")),e.le=t}return e.le}function D0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!d5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!px(n.startAt,e.startAt)&&px(n.endAt,e.endAt)}function nI(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var as=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function f5(n,e,t,r,i,o,s,a){return new as(n,e,t,r,i,o,s,a)}function rg(n){return new as(n)}function mx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wN(n){return n.collectionGroup!==null}function ol(n){let e=se(n);if(e.he===null){e.he=[];let t=new Set;for(let o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new wt(wn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new qa(o,r))}),t.has(wn.keyField().canonicalString())||e.he.push(new qa(wn.keyField(),r))}return e.he}function Vr(n){let e=se(n);return e.Pe||(e.Pe=p5(e,ol(n))),e.Pe}function p5(n,e){if(n.limitType==="F")return gx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new qa(i.field,o)});let t=n.endAt?new za(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new za(n.startAt.position,n.startAt.inclusive):null;return gx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function rI(n,e){let t=n.filters.concat([e]);return new as(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function iI(n,e,t){return new as(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ig(n,e){return D0(Vr(n),Vr(e))&&n.limitType===e.limitType}function IN(n){return`${C0(Vr(n))}|lt:${n.limitType}`}function Na(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_N(i)).join(", ")}]`),tg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ha(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ha(i)).join(",")),`Target(${r})`}(Vr(n))}; limitType=${n.limitType})`}function og(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ol(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=fx(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,ol(r),i)||r.endAt&&!function(s,a,u){let l=fx(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,ol(r),i))}(n,e)}function g5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bN(n){return(e,t)=>{let r=!1;for(let i of ol(n)){let o=m5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function m5(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?$a(u,l):ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var yi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return aN(this.inner)}size(){return this.innerSize}};var y5=new Xe(ee.comparator);function vi(){return y5}var CN=new Xe(ee.comparator);function rl(...n){let e=CN;for(let t of n)e=e.insert(t.key,t);return e}function DN(n){let e=CN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ns(){return sl()}function TN(){return sl()}function sl(){return new yi(n=>n.toString(),(n,e)=>n.isEqual(e))}var v5=new Xe(ee.comparator),_5=new wt(ee.comparator);function we(...n){let e=_5;for(let t of n)e=e.add(t);return e}var E5=new wt(me);function w5(){return E5}function T0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ul(e)?"-0":e}}function SN(n){return{integerValue:""+n}}function I5(n,e){return Z3(e)?SN(e):T0(n,e)}var Ga=class{constructor(){this._=void 0}};function b5(n,e,t){return n instanceof Wa?function(i,o){let s={fields:{[uN]:{stringValue:cN},[dN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&E0(o)&&(o=ng(o)),o&&(s.fields[lN]=o),{mapValue:s}}(t,e):n instanceof cs?MN(n,e):n instanceof us?RN(n,e):function(i,o){let s=AN(i,o),a=yx(s)+yx(i.Ie);return Gw(s)&&Gw(i.Ie)?SN(a):T0(i.serializer,a)}(n,e)}function C5(n,e,t){return n instanceof cs?MN(n,e):n instanceof us?RN(n,e):t}function AN(n,e){return n instanceof Ka?function(r){return Gw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wa=class extends Ga{},cs=class extends Ga{constructor(e){super(),this.elements=e}};function MN(n,e){let t=PN(e);for(let r of n.elements)t.some(i=>jr(i,r))||t.push(r);return{arrayValue:{values:t}}}var us=class extends Ga{constructor(e){super(),this.elements=e}};function RN(n,e){let t=PN(e);for(let r of n.elements)t=t.filter(i=>!jr(i,r));return{arrayValue:{values:t}}}var Ka=class extends Ga{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function yx(n){return We(n.integerValue||n.doubleValue)}function PN(n){return b0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function D5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof cs&&i instanceof cs||r instanceof us&&i instanceof us?ja(r.elements,i.elements,jr):r instanceof Ka&&i instanceof Ka?jr(r.Ie,i.Ie):r instanceof Wa&&i instanceof Wa}(n.transform,e.transform)}var oI=class{constructor(e,t){this.version=e,this.transformResults=t}},fi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _p(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Qa=class{};function xN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hl(n.key,fi.none()):new ls(n.key,n.data,fi.none());{let t=n.data,r=rr.empty(),i=new wt(wn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _i(n.key,r,new Fr(i.toArray()),fi.none())}}function T5(n,e,t){n instanceof ls?function(i,o,s){let a=i.value.clone(),u=_x(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof _i?function(i,o,s){if(!_p(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=_x(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(NN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function al(n,e,t,r){return n instanceof ls?function(o,s,a,u){if(!_p(o.precondition,s))return a;let l=o.value.clone(),h=Ex(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof _i?function(o,s,a,u){if(!_p(o.precondition,s))return a;let l=Ex(o.fieldTransforms,u,s),h=s.data;return h.setAll(NN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return _p(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function S5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=AN(r.transform,i||null);o!=null&&(t===null&&(t=rr.empty()),t.set(r.field,o))}return t||null}function vx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ja(r,i,(o,s)=>D5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ls=class extends Qa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_i=class extends Qa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function NN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function _x(n,e,t){let r=new Map;Oe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,C5(s,a,t[i]))}return r}function Ex(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,b5(o,s,e))}return r}var hl=class extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},sI=class extends Qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var aI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&T5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=al(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=al(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=TN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=xN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),we())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,(t,r)=>vx(t,r))&&ja(this.baseMutations,e.baseMutations,(t,r)=>vx(t,r))}},cI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Oe(e.mutations.length===r.length);let i=function(){return v5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var uI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var lI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ct,Ce;function A5(n){switch(n){case F.OK:return ne();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ne()}}function ON(n){if(n===void 0)return pi("GRPC error has no .code"),F.UNKNOWN;switch(n){case ct.OK:return F.OK;case ct.CANCELLED:return F.CANCELLED;case ct.UNKNOWN:return F.UNKNOWN;case ct.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ct.INTERNAL:return F.INTERNAL;case ct.UNAVAILABLE:return F.UNAVAILABLE;case ct.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ct.NOT_FOUND:return F.NOT_FOUND;case ct.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ct.ABORTED:return F.ABORTED;case ct.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ct.DATA_LOSS:return F.DATA_LOSS;default:return ne()}}(Ce=ct||(ct={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var wx=null;var M5=new di([4294967295,4294967295],0);function Ix(n){let e=Gx().encode(n),t=new Dw;return t.update(e),new Uint8Array(t.digest())}function bx(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new di([t,r],0),new di([i,o],0)]}var dI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new rs(`Invalid padding: ${t}`);if(r<0)throw new rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new rs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new rs(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=di.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(di.fromNumber(r)));return i.compare(M5)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=Ix(e),[r,i]=bx(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let t=Ix(e),[r,i]=bx(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},rs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,fl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new Xe(me),vi(),we())}},fl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,we(),we(),we())}};var La=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},Rp=class{constructor(e,t){this.targetId=e,this.ge=t}},Pp=class{constructor(e,t,r=Ut.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},xp=class{constructor(){this.pe=0,this.ye=Cx(),this.we=Ut.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=we(),t=we(),r=we();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new fl(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=Cx()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Oe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},hI=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=vi(),this.$e=gp(),this.Ue=gp(),this.Ke=new Xe(me)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let o=i.target;if(nI(o))if(r===0){let s=new ee(o.path);this.ze(t,s,or.newNoDocument(s,ce.min()))}else Oe(r===1);else{let s=this.et(t);if(s!==r){let a=this.tt(e),u=a?this.nt(a,e,s):1;if(u!==0){this.Ye(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}wx?.rt(function(h,p,y,m,A){var N,O,z,de,Y,ke;let bt={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},Ae=p.unchangedNames;return Ae&&(bt.bloomFilter={applied:A===0,hashCount:(N=Ae?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(de=(z=(O=Ae?.bits)===null||O===void 0?void 0:O.bitmap)===null||z===void 0?void 0:z.length)!==null&&de!==void 0?de:0,padding:(ke=(Y=Ae?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&ke!==void 0?ke:0,mightContain:T=>{var I;return(I=m?.mightContain(T))!==null&&I!==void 0&&I}}),bt}(s,e.ge,this.ke.it(),a,u))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=mi(r).toUint8Array()}catch(u){if(u instanceof Dp)return Ua("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new dI(s,i,o)}catch(u){return Ua(u instanceof rs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&nI(a.target)){let u=new ee(a.target.path);this._t(u).has(s)||this.ut(s,u)||this.ze(s,u,or.newNoDocument(u,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=we();this.Ue.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Xe(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new Mp(e,t,this.Ke,this.Qe,r);return this.Qe=vi(),this.$e=gp(),this.Ue=gp(),this.Ke=new Xe(me),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new xp,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new wt(me),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new wt(me),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new xp),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function gp(){return new Xe(ee.comparator)}function Cx(){return new Xe(ee.comparator)}var R5={asc:"ASCENDING",desc:"DESCENDING"},P5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x5={and:"AND",or:"OR"},fI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function pI(n,e){return n.useProto3Json||tg(e)?e:{value:e}}function Np(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function N5(n,e){return Np(n,e.toTimestamp())}function Ur(n){return Oe(!!n),ce.fromTimestamp(function(t){let r=gi(t);return new At(r.seconds,r.nanos)}(n))}function S0(n,e){return gI(n,e).canonicalString()}function gI(n,e){let t=function(i){return new Qe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function FN(n){let e=Qe.fromString(n);return Oe(BN(e)),e}function mI(n,e){return S0(n.databaseId,e.path)}function Pw(n,e){let t=FN(e);if(t.get(1)!==n.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(VN(t))}function LN(n,e){return S0(n.databaseId,e)}function O5(n){let e=FN(n);return e.length===4?Qe.emptyPath():VN(e)}function yI(n){return new Qe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VN(n){return Oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Dx(n,e,t){return{name:mI(n,e),fields:t.value.mapValue.fields}}function k5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Oe(h===void 0||typeof h=="string"),Ut.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ut.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?F.UNKNOWN:ON(l.code);return new W(h,l.message||"")}(s);t=new Pp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Pw(n,r.document.name),o=Ur(r.document.updateTime),s=r.document.createTime?Ur(r.document.createTime):ce.min(),a=new rr({mapValue:{fields:r.document.fields}}),u=or.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new La(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Pw(n,r.document),o=r.readTime?Ur(r.readTime):ce.min(),s=or.newNoDocument(i,o),a=r.removedTargetIds||[];t=new La([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Pw(n,r.document),o=r.removedTargetIds||[];t=new La([],o,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new lI(i,o),a=r.targetId;t=new Rp(a,s)}}return t}function F5(n,e){let t;if(e instanceof ls)t={update:Dx(n,e.key,e.value)};else if(e instanceof hl)t={delete:mI(n,e.key)};else if(e instanceof _i)t={update:Dx(n,e.key,e.data),updateMask:q5(e.fieldMask)};else{if(!(e instanceof sI))return ne();t={verify:mI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Wa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof us)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ka)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ne()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:N5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ne()}(n,e.precondition)),t}function L5(n,e){return n&&n.length>0?(Oe(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ur(i.updateTime):Ur(o);return s.isEqual(ce.min())&&(s=Ur(o)),new oI(s,i.transformResults||[])}(t,e))):[]}function V5(n,e){return{documents:[LN(n,e.path)]}}function U5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=LN(n,i);let o=function(l){if(l.length!==0)return jN(sr.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:Oa(y.field),direction:$5(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=pI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ht:t,parent:i}}function j5(n){let e=O5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Oe(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let y=UN(p);return y instanceof sr&&yN(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(A){return new qa(ka(A.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,tg(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,m=p.values||[];return new za(m,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,m=p.values||[];return new za(m,y)}(t.endAt)),f5(e,i,s,o,a,"F",u,l)}function B5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function UN(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ka(t.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ka(t.unaryFilter.field);return lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ka(t.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ka(t.unaryFilter.field);return lt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(n):n.fieldFilter!==void 0?function(t){return lt.create(ka(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return sr.create(t.compositeFilter.filters.map(r=>UN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(t.compositeFilter.op))}(n):ne()}function $5(n){return R5[n]}function H5(n){return P5[n]}function z5(n){return x5[n]}function Oa(n){return{fieldPath:n.canonicalString()}}function ka(n){return wn.fromServerFormat(n.fieldPath)}function jN(n){return n instanceof lt?function(t){if(t.op==="=="){if(hx(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NAN"}};if(dx(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hx(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NAN"}};if(dx(t.value))return{unaryFilter:{field:Oa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oa(t.field),op:H5(t.op),value:t.value}}}(n):n instanceof sr?function(t){let r=t.getFilters().map(i=>jN(i));return r.length===1?r[0]:{compositeFilter:{op:z5(t.op),filters:r}}}(n):ne()}function q5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var pl=class n{constructor(e,t,r,i,o=ce.min(),s=ce.min(),a=Ut.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var vI=class{constructor(e){this.Tt=e}};function G5(n){let e=j5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?iI(e,e.limit,"L"):e}var Op=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(We(e.integerValue));else if("doubleValue"in e){let r=We(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),ul(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=gi(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(mi(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?pN(e)?this.ft(t,Number.MAX_SAFE_INTEGER):fN(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ne()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let o=e.fields||{};this.ft(t,53);let s=Ba,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(We(a)),this.wt(s,t),this.Rt(o[s],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),ee.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};Op.xt=new Op;var _I=class{constructor(){this.Tn=new EI}addToCollectionParentIndex(e,t){return this.Tn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(ss.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},EI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new wt(Qe.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Qe.comparator)).toArray()}};var Cie=new Uint8Array(0);var Tx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$N=41943040,Vn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn($N,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);var gl=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new n(0)}static Kn(){return new n(-1)}};var Sx="LruGarbageCollector",W5=1048576;function Ax([n,e],[t,r]){let i=me(n,t);return i===0?me(e,r):i}var wI=class{constructor(e){this.Hn=e,this.buffer=new wt(Ax),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Ax(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},II=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){G(Sx,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ec(t)?G(Sx,"Ignoring IndexedDB error during garbage collection: ",t):yield Xa(t)}yield this.er(3e5)}))}},bI=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(v0.ae);let r=new wI(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Tx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tx):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),xa()<=ye.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function K5(n,e){return new bI(n,e)}var CI=class{constructor(){this.changes=new yi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var DI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var TI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&al(r.mutation,i,Fr.empty(),At.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,t,r=we()){let i=ns();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=rl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=ns();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,we()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=vi(),s=sl(),a=function(){return sl()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof _i)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),al(h.mutation,l,h.mutation.getFieldMask(),At.now())):s.set(l.key,Fr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new DI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=sl(),i=new Xe((s,a)=>s-a),o=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Fr.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||we()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=TN();h.forEach(y=>{if(!o.has(y)){let m=xN(t.get(y),r.get(y));m!==null&&p.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ee.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(ns()),a=cl,u=o;return s.next(l=>V.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,we())).next(h=>({batchId:a,changes:DN(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=rl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=rl();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,u=>{let l=function(p,y){return new as(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,or.newInvalidDocument(h)))});let a=rl();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&al(h.mutation,l,Fr.empty(),At.now()),og(t,l)&&(a=a.insert(u,l))}),a})}};var SI=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return V.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:G5(i.bundledQuery),readTime:Ur(i.readTime)}}(t)),V.resolve()}};var AI=class{constructor(){this.overlays=new Xe(ee.comparator),this.Rr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ns();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=ns(),o=t.length+1,s=new ee(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Xe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ns(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ns(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return V.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new uI(t,r));let o=this.Rr.get(t);o===void 0&&(o=we(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}};var MI=class{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var ml=class{constructor(){this.Vr=new wt(ut.mr),this.gr=new wt(ut.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new ut(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new ut(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){let t=new ee(new Qe([])),r=new ut(t,e),i=new ut(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new ee(new Qe([])),r=new ut(t,e),i=new ut(t,e+1),o=we();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ut(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ut=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return ee.comparator(e.key,t.key)||me(e.Cr,t.Cr)}static pr(e,t){return me(e.Cr,t.Cr)||ee.comparator(e.key,t.key)}};var RI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new wt(ut.mr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new aI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new ut(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?_0:this.Fr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ut(t,0),i=new ut(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new wt(me);return t.forEach(i=>{let o=new ut(i,0),s=new ut(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),V.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ee.isDocumentKey(o)||(o=o.child(""));let s=new ut(new ee(o),0),a=new wt(me);return this.Mr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Cr)),!0)},s),V.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Oe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return V.forEach(t.mutations,i=>{let o=new ut(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new ut(t,0),i=this.Mr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var PI=class{constructor(e){this.kr=e,this.docs=function(){return new Xe(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let r=vi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():or.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=vi(),s=t.path,a=new ee(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||K3(W3(h),r)<=0||(i.has(h.key)||og(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ne()}qr(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xI(this)}getSize(e){return V.resolve(this.size)}},xI=class extends CI{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var NI=class{constructor(e){this.persistence=e,this.Qr=new yi(t=>C0(t),D0),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.$r=0,this.Ur=new ml,this.targetCount=0,this.Kr=gl.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),V.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Kr=new gl(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.zn(t),V.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Ur.vr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Ur.containsKey(t))}};var kp=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new v0(0),this.zr=!1,this.zr=!0,this.jr=new MI,this.referenceDelegate=e(this),this.Hr=new NI(this),this.indexManager=new _I,this.remoteDocumentCache=function(i){return new PI(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new vI(t),this.Yr=new SI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new AI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new RI(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new OI(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return V.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},OI=class extends Hw{constructor(e){super(),this.currentSequenceNumber=e}},kI=class n{constructor(e){this.persistence=e,this.ti=new ml,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw ne()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),V.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ii,r=>{let i=ee.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,ce.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return V.or([()=>V.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},Fp=class n{constructor(e,t){this.persistence=e,this.oi=new yi(r=>J3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=K5(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return V.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),V.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yp(e.data.value)),t}ar(e,t,r){return V.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var FI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=we(),i=we();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var LI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var VI=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return hR()?8:Y3(_t())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new LI;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(xa()<=ye.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Na(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),V.resolve()):(xa()<=ye.DEBUG&&G("QueryEngine","Query:",Na(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(xa()<=ye.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Na(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(t))):V.resolve())}rs(e,t){if(mx(t))return V.resolve(null);let r=Vr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=iI(t,null,"F"),r=Vr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=we(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.cs(t,a);return this.ls(t,l,s,u.readTime)?this.rs(e,iI(t,null,"F")):this.hs(e,l,t,u)}))})))}ss(e,t,r,i){return mx(t)||i.isEqual(ce.min())?V.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(t,o);return this.ls(t,s,r,i)?V.resolve(null):(xa()<=ye.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Na(t)),this.hs(e,s,t,G3(i,cl)).next(a=>a))})}cs(e,t){let r=new wt(bN(e));return t.forEach((i,o)=>{og(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return xa()<=ye.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Na(t)),this.ns.getDocumentsMatchingQuery(e,t,ss.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var A0="LocalStore",Q5=3e8,UI=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Xe(me),this.Is=new yi(o=>C0(o),D0),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function Y5(n,e,t,r){return new UI(n,e,t,r)}function HN(n,e){return _(this,null,function*(){let t=se(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=we();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Rs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Z5(n,e){let t=se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),m=V.resolve();return y.forEach(A=>{m=m.next(()=>h.getEntry(u,A)).next(N=>{let O=l.docVersions.get(A);Oe(O!==null),N.version.compareTo(O)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=we();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zN(n){let e=se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function J5(n,e){let t=se(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Hr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(o,h.addedDocuments,p)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(Ut.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(N,O,z){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Q5?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(y,m,h)&&a.push(t.Hr.updateTargetData(o,m))});let u=vi(),l=we();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(X5(o,s,e.documentUpdates).next(h=>{u=h.Vs,l=h.fs})),!r.isEqual(ce.min())){let h=t.Hr.getLastRemoteSnapshotVersion(o).next(p=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ts=i,o))}function X5(n,e,t){let r=we(),i=we();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=vi();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):G(A0,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Vs:s,fs:i}})}function eG(n,e){let t=se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=_0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tG(n,e){let t=se(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new pl(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function jI(n,e,t){return _(this,null,function*(){let r=se(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ec(s))throw s;G(A0,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function Mx(n,e,t){let r=se(n),i=ce.min(),o=we();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=se(u),y=p.Is.get(h);return y!==void 0?V.resolve(p.Ts.get(y)):p.Hr.getTargetData(l,h)}(r,s,Vr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:ce.min(),t?o:we())).next(a=>(nG(r,g5(e),a),{documents:a,gs:o})))}function nG(n,e,t){let r=n.Es.get(e)||ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}var Lp=class{constructor(){this.activeTargetIds=w5()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var BI=class{constructor(){this.ho=new Lp,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Lp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var $I=class{To(e){}shutdown(){}};var Rx="ConnectivityMonitor",Vp=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){G(Rx,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){G(Rx,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var mp=null;function HI(){return mp===null?mp=function(){return 268435456+Math.round(2147483648*Math.random())}():mp++,"0x"+mp.toString(16)}var xw="RestConnection",rG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},zI=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Tp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){let s=HI(),a=this.bo(e,t.toUriEncodedString());G(xw,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,o),this.vo(e,a,u,r).then(l=>(G(xw,`Received RPC '${e}' ${s}: `,l),l),l=>{throw Ua(xw,`RPC '${e}' ${s} failed with error: `,l,"url: ",a,"request:",r),l})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){let r=rG[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var qI=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}};var Vt="WebChannelConnection",GI=class extends zI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let o=HI();return new Promise((s,a)=>{let u=new Tw;u.setWithCredentials(!0),u.listenOnce(Sw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nl.NO_ERROR:let h=u.getResponseJson();G(Vt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case nl.TIMEOUT:G(Vt,`RPC '${e}' ${o} timed out`),a(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case nl.HTTP_ERROR:let p=u.getStatus();if(G(Vt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let m=y?.error;if(m&&m.status&&m.message){let A=function(O){let z=O.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(z)>=0?z:F.UNKNOWN}(m.status);a(new W(A,m.message))}else a(new W(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new W(F.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{G(Vt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);G(Vt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Wo(e,t,r){let i=HI(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Rw(),a=Mw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");G(Vt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,m=!1,A=new qI({Fo:O=>{m?G(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(y||(G(Vt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),G(Vt,`RPC '${e}' stream ${i} sending:`,O),p.send(O))},Mo:()=>p.close()}),N=(O,z,de)=>{O.listen(z,Y=>{try{de(Y)}catch(ke){setTimeout(()=>{throw ke},0)}})};return N(p,Pa.EventType.OPEN,()=>{m||(G(Vt,`RPC '${e}' stream ${i} transport opened.`),A.Qo())}),N(p,Pa.EventType.CLOSE,()=>{m||(m=!0,G(Vt,`RPC '${e}' stream ${i} transport closed`),A.Uo())}),N(p,Pa.EventType.ERROR,O=>{m||(m=!0,Ua(Vt,`RPC '${e}' stream ${i} transport errored:`,O),A.Uo(new W(F.UNAVAILABLE,"The operation could not be completed")))}),N(p,Pa.EventType.MESSAGE,O=>{var z;if(!m){let de=O.data[0];Oe(!!de);let Y=de,ke=Y?.error||((z=Y[0])===null||z===void 0?void 0:z.error);if(ke){G(Vt,`RPC '${e}' stream ${i} received error:`,ke);let bt=ke.status,Ae=function(C){let D=ct[C];if(D!==void 0)return ON(D)}(bt),T=ke.message;Ae===void 0&&(Ae=F.INTERNAL,T="Unknown error status: "+bt+" with message "+ke.message),m=!0,A.Uo(new W(Ae,T)),p.close()}else G(Vt,`RPC '${e}' stream ${i} received:`,de),A.Ko(de)}}),N(a,Aw.STAT_EVENT,O=>{O.stat===fp.PROXY?G(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===fp.NOPROXY&&G(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.$o()},0),A}};function Nw(){return typeof document<"u"?document:null}function sg(n){return new fI(n,!0)}var Up=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var Px="PersistentStream",jp=class{constructor(e,t,r,i,o,s,a,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Up(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return _(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return _(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return _(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(pi(t.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>_(this,null,function*(){this.state=0,this.start()}))}m_(e){return G(Px,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(G(Px,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},WI=class extends jp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=k5(this.serializer,e),r=function(o){if(!("targetChange"in o))return ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ce.min():s.readTime?Ur(s.readTime):ce.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=yI(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=nI(u)?{documents:V5(o,u)}:{query:U5(o,u).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=kN(o,s.resumeToken);let l=pI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ce.min())>0){a.readTime=Np(o,s.snapshotVersion.toTimestamp());let l=pI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=B5(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=yI(this.serializer),t.removeTarget=e,this.I_(t)}},KI=class extends jp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=L5(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=yI(this.serializer),this.I_(e)}b_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>F5(this.serializer,r))};this.I_(t)}};var QI=class{},YI=class extends QI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,gI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,gI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(F.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},ZI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(pi(t),this.N_=!1):G("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var ds="RemoteStore",JI=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>_(this,null,function*(){ps(this)&&(G(ds,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=se(u);l.W_.add(4),yield Dl(l),l.j_.set("Unknown"),l.W_.delete(4),yield ag(l)})}(this))}))}),this.j_=new ZI(r,i)}};function ag(n){return _(this,null,function*(){if(ps(n))for(let e of n.G_)yield e(!0)})}function Dl(n){return _(this,null,function*(){for(let e of n.G_)yield e(!1)})}function qN(n,e){let t=se(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),x0(t)?P0(t):tc(t).c_()&&R0(t,e))}function M0(n,e){let t=se(n),r=tc(t);t.K_.delete(e),r.c_()&&GN(t,e),t.K_.size===0&&(r.c_()?r.P_():ps(t)&&t.j_.set("Unknown"))}function R0(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}tc(n).y_(e)}function GN(n,e){n.H_.Ne(e),tc(n).w_(e)}function P0(n){n.H_=new hI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),tc(n).start(),n.j_.B_()}function x0(n){return ps(n)&&!tc(n).u_()&&n.K_.size>0}function ps(n){return se(n).W_.size===0}function WN(n){n.H_=void 0}function iG(n){return _(this,null,function*(){n.j_.set("Online")})}function oG(n){return _(this,null,function*(){n.K_.forEach((e,t)=>{R0(n,e)})})}function sG(n,e){return _(this,null,function*(){WN(n),x0(n)?(n.j_.q_(e),P0(n)):n.j_.set("Unknown")})}function aG(n,e,t){return _(this,null,function*(){if(n.j_.set("Online"),e instanceof Pp&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.K_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.K_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){G(ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bp(n,r)}else if(e instanceof La?n.H_.We(e):e instanceof Rp?n.H_.Ze(e):n.H_.je(e),!t.isEqual(ce.min()))try{let r=yield zN(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.K_.get(l);h&&o.K_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.K_.get(u);if(!h)return;o.K_.set(u,h.withResumeToken(Ut.EMPTY_BYTE_STRING,h.snapshotVersion)),GN(o,u);let p=new pl(h.target,u,l,h.sequenceNumber);R0(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){G(ds,"Failed to raise snapshot:",r),yield Bp(n,r)}})}function Bp(n,e,t){return _(this,null,function*(){if(!ec(e))throw e;n.W_.add(1),yield Dl(n),n.j_.set("Offline"),t||(t=()=>zN(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){G(ds,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield ag(n)}))})}function KN(n,e){return e().catch(t=>Bp(n,t,e))}function cg(n){return _(this,null,function*(){let e=se(n),t=eo(e),r=e.U_.length>0?e.U_[e.U_.length-1].batchId:_0;for(;cG(e);)try{let i=yield eG(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,uG(e,i)}catch(i){yield Bp(e,i)}QN(e)&&YN(e)})}function cG(n){return ps(n)&&n.U_.length<10}function uG(n,e){n.U_.push(e);let t=eo(n);t.c_()&&t.S_&&t.b_(e.mutations)}function QN(n){return ps(n)&&!eo(n).u_()&&n.U_.length>0}function YN(n){eo(n).start()}function lG(n){return _(this,null,function*(){eo(n).C_()})}function dG(n){return _(this,null,function*(){let e=eo(n);for(let t of n.U_)e.b_(t.mutations)})}function hG(n,e,t){return _(this,null,function*(){let r=n.U_.shift(),i=cI.from(r,e,t);yield KN(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cg(n)})}function fG(n,e){return _(this,null,function*(){e&&eo(n).S_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return A5(s)&&s!==F.ABORTED}(i.code)){let o=r.U_.shift();eo(r).h_(),yield KN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield cg(r)}})}(n,e)),QN(n)&&YN(n)})}function xx(n,e){return _(this,null,function*(){let t=se(n);t.asyncQueue.verifyOperationInProgress(),G(ds,"RemoteStore received new credentials");let r=ps(t);t.W_.add(3),yield Dl(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield ag(t)})}function pG(n,e){return _(this,null,function*(){let t=se(n);e?(t.W_.delete(2),yield ag(t)):e||(t.W_.add(2),yield Dl(t),t.j_.set("Unknown"))})}function tc(n){return n.J_||(n.J_=function(t,r,i){let o=se(t);return o.M_(),new WI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:iG.bind(null,n),No:oG.bind(null,n),Lo:sG.bind(null,n),p_:aG.bind(null,n)}),n.G_.push(e=>_(this,null,function*(){e?(n.J_.h_(),x0(n)?P0(n):n.j_.set("Unknown")):(yield n.J_.stop(),WN(n))}))),n.J_}function eo(n){return n.Y_||(n.Y_=function(t,r,i){let o=se(t);return o.M_(),new KI(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:lG.bind(null,n),Lo:fG.bind(null,n),D_:dG.bind(null,n),v_:hG.bind(null,n)}),n.G_.push(e=>_(this,null,function*(){e?(n.Y_.h_(),yield cg(n)):(yield n.Y_.stop(),n.U_.length>0&&(G(ds,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))}))),n.Y_}var XI=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function N0(n,e){if(pi("AsyncQueue",`${e}: ${n}`),ec(n))return new W(F.UNAVAILABLE,`${e}: ${n}`);throw n}var $p=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=rl(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Hp=class{constructor(){this.Z_=new Xe(ee.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ne():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ya=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,$p.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ig(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var e0=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},t0=class{constructor(){this.queries=Nx(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=se(t),o=i.queries;i.queries=Nx(),o.forEach((s,a)=>{for(let u of a.ta)u.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}};function Nx(){return new yi(n=>IN(n),ig)}function O0(n,e){return _(this,null,function*(){let t=se(n),r=3,i=e.query,o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new e0,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield t.onListen(i,!0);break;case 1:o.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=N0(s,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&F0(t)})}function k0(n,e){return _(this,null,function*(){let t=se(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function gG(n,e){let t=se(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&F0(t)}function mG(n,e,t){let r=se(n),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(t);r.queries.delete(e)}function F0(n){n.ia.forEach(e=>{e.next()})}var n0,Ox;(Ox=n0||(n0={}))._a="default",Ox.Cache="cache";var yl=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ya(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==n0.Cache}};var zp=class{constructor(e){this.key=e}},qp=class{constructor(e){this.key=e}},r0=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=we(),this.mutatedKeys=we(),this.ya=bN(e),this.wa=new $p(this.ya)}get Sa(){return this.fa}ba(e,t){let r=t?t.Da:new Hp,i=t?t.wa:this.wa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),m=og(this.query,p)?p:null,A=!!y&&this.mutatedKeys.has(y.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),O=!1;y&&m?y.data.isEqual(m.data)?A!==N&&(r.track({type:3,doc:m}),O=!0):this.va(y,m)||(r.track({type:2,doc:m}),O=!0,(u&&this.ya(m,u)>0||l&&this.ya(m,l)<0)&&(a=!0)):!y&&m?(r.track({type:0,doc:m}),O=!0):y&&!m&&(r.track({type:1,doc:y}),O=!0,(u||l)&&(a=!0)),O&&(m?(s=s.add(m),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((h,p)=>function(m,A){let N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return N(m)-N(A)}(h.type,p.type)||this.ya(h.doc,p.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,l=u!==this.ga;return this.ga=u,s.length!==0||l?{snapshot:new Ya(this.query,e.wa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Hp,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=we(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new qp(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new zp(r))}),t}Oa(e){this.fa=e.gs,this.pa=we();let t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Ya.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},L0="SyncEngine",i0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},o0=class{constructor(e){this.key=e,this.Ba=!1}},s0=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new yi(a=>IN(a),ig),this.qa=new Map,this.Qa=new Set,this.$a=new Xe(ee.comparator),this.Ua=new Map,this.Ka=new ml,this.Wa={},this.Ga=new Map,this.za=gl.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function yG(n,e,t=!0){return _(this,null,function*(){let r=nO(n),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield ZN(r,e,t,!0),i})}function vG(n,e){return _(this,null,function*(){let t=nO(n);yield ZN(t,e,!0,!1)})}function ZN(n,e,t,r){return _(this,null,function*(){let i=yield tG(n.localStore,Vr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield _G(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&qN(n.remoteStore,i),a})}function _G(n,e,t,r,i){return _(this,null,function*(){n.Ha=(p,y,m)=>function(N,O,z,de){return _(this,null,function*(){let Y=O.view.ba(z);Y.ls&&(Y=yield Mx(N.localStore,O.query,!1).then(({documents:T})=>O.view.ba(T,Y)));let ke=de&&de.targetChanges.get(O.targetId),bt=de&&de.targetMismatches.get(O.targetId)!=null,Ae=O.view.applyChanges(Y,N.isPrimaryClient,ke,bt);return Fx(N,O.targetId,Ae.Ma),Ae.snapshot})}(n,p,y,m);let o=yield Mx(n.localStore,e,!0),s=new r0(e,o.gs),a=s.ba(o.documents),u=fl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Fx(n,t,l.Ma);let h=new i0(e,t,s);return n.ka.set(e,h),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),l.snapshot})}function EG(n,e,t){return _(this,null,function*(){let r=se(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!ig(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield jI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&M0(r.remoteStore,i.targetId),a0(r,i.targetId)}).catch(Xa))):(a0(r,i.targetId),yield jI(r.localStore,i.targetId,!0))})}function wG(n,e){return _(this,null,function*(){let t=se(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),M0(t.remoteStore,r.targetId))})}function IG(n,e,t){return _(this,null,function*(){let r=MG(n);try{let i=yield function(s,a){let u=se(s),l=At.now(),h=a.reduce((m,A)=>m.add(A.key),we()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let A=vi(),N=we();return u.ds.getEntries(m,h).next(O=>{A=O,A.forEach((z,de)=>{de.isValidDocument()||(N=N.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,A)).next(O=>{p=O;let z=[];for(let de of a){let Y=S5(de,p.get(de.key).overlayedDocument);Y!=null&&z.push(new _i(de.key,Y,gN(Y.value.mapValue),fi.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,z,a)}).next(O=>{y=O;let z=O.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(m,O.batchId,z)})}).then(()=>({batchId:y.batchId,changes:DN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Wa[s.currentUser.toKey()];l||(l=new Xe(me)),l=l.insert(a,u),s.Wa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Tl(r,i.changes),yield cg(r.remoteStore)}catch(i){let o=N0(i,"Failed to persist write");t.reject(o)}})}function JN(n,e){return _(this,null,function*(){let t=se(n);try{let r=yield J5(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ua.get(o);s&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?Oe(s.Ba):i.removedDocuments.size>0&&(Oe(s.Ba),s.Ba=!1))}),yield Tl(t,r,e)}catch(r){yield Xa(r)}})}function kx(n,e,t){let r=se(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=se(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.ta)y.sa(a)&&(l=!0)}),l&&F0(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function bG(n,e,t){return _(this,null,function*(){let r=se(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ua.get(e),o=i&&i.key;if(o){let s=new Xe(ee.comparator);s=s.insert(o,or.newNoDocument(o,ce.min()));let a=we().add(o),u=new Mp(ce.min(),new Map,new Xe(me),s,a);yield JN(r,u),r.$a=r.$a.remove(o),r.Ua.delete(e),V0(r)}else yield jI(r.localStore,e,!1).then(()=>a0(r,e,t)).catch(Xa)})}function CG(n,e){return _(this,null,function*(){let t=se(n),r=e.batch.batchId;try{let i=yield Z5(t.localStore,e);eO(t,r,null),XN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tl(t,i)}catch(i){yield Xa(i)}})}function DG(n,e,t){return _(this,null,function*(){let r=se(n);try{let i=yield function(s,a){let u=se(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Oe(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);eO(r,e,t),XN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tl(r,i)}catch(i){yield Xa(i)}})}function XN(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function eO(n,e,t){let r=se(n),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function a0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||tO(n,r)})}function tO(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(M0(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),V0(n))}function Fx(n,e,t){for(let r of t)r instanceof zp?(n.Ka.addReference(r.key,e),TG(n,r)):r instanceof qp?(G(L0,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||tO(n,r.key)):ne()}function TG(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(G(L0,"New document in limbo: "+t),n.Qa.add(r),V0(n))}function V0(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new ee(Qe.fromString(e)),r=n.za.next();n.Ua.set(r,new o0(t)),n.$a=n.$a.insert(t,r),qN(n.remoteStore,new pl(Vr(rg(t.path)),r,"TargetPurposeLimboResolution",v0.ae))}}function Tl(n,e,t){return _(this,null,function*(){let r=se(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,u)=>{s.push(r.Ha(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=FI.Yi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.La.p_(i),yield function(u,l){return _(this,null,function*(){let h=se(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(l,y=>V.forEach(y.Hi,m=>h.persistence.referenceDelegate.addReference(p,y.targetId,m)).next(()=>V.forEach(y.Ji,m=>h.persistence.referenceDelegate.removeReference(p,y.targetId,m)))))}catch(p){if(!ec(p))throw p;G(A0,"Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let m=h.Ts.get(y),A=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(A);h.Ts=h.Ts.insert(y,N)}}})}(r.localStore,o))})}function SG(n,e){return _(this,null,function*(){let t=se(n);if(!t.currentUser.isEqual(e)){G(L0,"User change. New user:",e.toKey());let r=yield HN(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(u=>{u.reject(new W(F.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tl(t,r.Rs)}})}function AG(n,e){let t=se(n),r=t.Ua.get(e);if(r&&r.Ba)return we().add(r.key);{let i=we(),o=t.qa.get(e);if(!o)return i;for(let s of o){let a=t.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function nO(n){let e=se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=JN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bG.bind(null,e),e.La.p_=gG.bind(null,e.eventManager),e.La.Ja=mG.bind(null,e.eventManager),e}function MG(n){let e=se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DG.bind(null,e),e}var rO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=sg(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return Y5(this.persistence,new VI,t.initialUser,this.serializer)}Xa(t){return new kp(kI.ri,this.serializer)}Za(t){return new BI}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),c0=class extends rO{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Oe(this.persistence.referenceDelegate instanceof Fp);let r=this.persistence.referenceDelegate.garbageCollector;return new II(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new kp(r=>Fp.ri(r,t),this.serializer)}};var RG=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SG.bind(null,this.syncEngine),yield pG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new t0}()}createDatastore(t){let r=sg(t.databaseInfo.databaseId),i=function(s){return new GI(s)}(t.databaseInfo);return function(s,a,u,l){return new YI(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new JI(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>kx(this.syncEngine,r,0),function(){return Vp.D()?new Vp:new $I}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let y=new s0(o,s,a,u,l,h);return p&&(y.ja=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(o){return _(this,null,function*(){let s=se(o);G(ds,"RemoteStore shutting down."),s.W_.add(5),yield Dl(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var vl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var to="FirestoreClient",u0=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=Ip.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){G(to,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(G(to,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=N0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Ow(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),G(to,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield HN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Lx(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield PG(n);G(to,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>xx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>xx(e.remoteStore,i)),n._onlineComponents=e})}function PG(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G(to,"Using user provided OfflineComponentProvider");try{yield Ow(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ua("Error using user provided cache. Falling back to memory cache: "+t),yield Ow(n,new rO)}}else G(to,"Using default OfflineComponentProvider"),yield Ow(n,new c0(void 0));return n._offlineComponents})}function iO(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(G(to,"Using user provided OnlineComponentProvider"),yield Lx(n,n._uninitializedComponentsProvider._online)):(G(to,"Using default OnlineComponentProvider"),yield Lx(n,new RG))),n._onlineComponents})}function xG(n){return iO(n).then(e=>e.syncEngine)}function Gp(n){return _(this,null,function*(){let e=yield iO(n),t=e.eventManager;return t.onListen=yG.bind(null,e.syncEngine),t.onUnlisten=EG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wG.bind(null,e.syncEngine),t})}function NG(n,e,t={}){let r=new ir;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new vl({next:y=>{h.su(),s.enqueueAndForget(()=>k0(o,p));let m=y.docs.has(a);!m&&y.fromCache?l.reject(new W(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&y.fromCache&&u&&u.source==="server"?l.reject(new W(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new yl(rg(a.path),h,{includeMetadataChanges:!0,Ta:!0});return O0(o,p)}(yield Gp(n),n.asyncQueue,e,t,r)})),r.promise}function OG(n,e,t={}){let r=new ir;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new vl({next:y=>{h.su(),s.enqueueAndForget(()=>k0(o,p)),y.fromCache&&u.source==="server"?l.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new yl(a,h,{includeMetadataChanges:!0,Ta:!0});return O0(o,p)}(yield Gp(n),n.asyncQueue,e,t,r)})),r.promise}function oO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Vx=new Map;function sO(n,e,t){if(!t)throw new W(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kG(n,e,t,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ux(n){if(!ee.isDocumentKey(n))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jx(n){if(ee.isDocumentKey(n))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ug(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne()}function Un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ug(n);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var aO="firestore.googleapis.com",Bx=!0,Wp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aO,this.ssl=Bx}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Bx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$N;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<W5)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Za=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kw;switch(r.type){case"firstParty":return new Uw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Vx.get(t);r&&(G("ComponentProvider","Removing Datastore"),Vx.delete(t),r.terminate())}(this),Promise.resolve()}};function cO(n,e,t,r={}){var i;let o=(n=Un(n,Za))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==aO&&o.host!==a&&Ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!Ar(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=Et.MOCK_USER;else{l=sR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Et(p)}n._authCredentials=new Fw(new Ep(l,h))}}var hs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Kt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ji=class n extends hs{constructor(e,t,r){super(e,t,rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function uO(n,e,...t){if(n=ze(n),sO("collection","path",e),n instanceof Za){let r=Qe.fromString(e,...t);return jx(r),new Ji(n,null,r)}{if(!(n instanceof Kt||n instanceof Ji))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qe.fromString(e,...t));return jx(r),new Ji(n.firestore,null,r)}}function U0(n,e,...t){if(n=ze(n),arguments.length===1&&(e=Ip.newId()),sO("doc","path",e),n instanceof Za){let r=Qe.fromString(e,...t);return Ux(r),new Kt(n,null,new ee(r))}{if(!(n instanceof Kt||n instanceof Ji))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Qe.fromString(e,...t));return Ux(r),new Kt(n.firestore,n instanceof Ji?n.converter:null,new ee(r))}}var $x="AsyncQueue",Kp=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Up(this,"async_queue_retry"),this.Su=()=>{let r=Nw();r&&G($x,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;let t=Nw();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=Nw();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new ir;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return _(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ec(e))throw e;G($x,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw pi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=XI.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&ne()}verifyOperationInProgress(){}Mu(){return _(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};function Hx(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Br=class extends Za{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Kp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Kp(e),this._firestoreClient=void 0,yield e}})}};function lO(n,e){let t=typeof n=="object"?n:si(),r=typeof n=="string"?n:e||Tp,i=Hi(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Vf("firestore");o&&cO(i,...o)}return i}function lg(n){if(n._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FG(n),n._firestoreClient}function FG(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new zw(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oO(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new u0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var _l=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ut.fromBase64String(e))}catch(t){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var El=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Qp=class{constructor(e){this._methodName=e}};var wl=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}};var Il=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var LG=/^__.*__$/,l0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _i(e,this.data,this.fieldMask,t,this.fieldTransforms):new ls(e,this.data,t,this.fieldTransforms)}};function dO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var d0=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Yp(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(dO(this.Lu)&&LG.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},h0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sg(e)}ju(e,t,r,i=!1){return new d0({Lu:e,methodName:t,zu:r,path:wn.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function j0(n){let e=n._freezeSettings(),t=sg(n._databaseId);return new h0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hO(n,e,t,r,i,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);gO("Data must be an object, but it was:",s,r);let a=fO(r,s),u,l;if(o.merge)u=new Fr(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=UG(e,p,t);if(!s.contains(y))throw new W(F.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);BG(h,y)||h.push(y)}u=new Fr(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new l0(new rr(a),u,l)}function VG(n,e,t,r=!1){return B0(t,n.ju(r?4:3,e))}function B0(n,e){if(pO(n=ze(n)))return gO("Unsupported field value:",e,n),fO(n,e);if(n instanceof Qp)return function(r,i){if(!dO(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=B0(a,i.Ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=At.fromDate(r);return{timestampValue:Np(i.serializer,o)}}if(r instanceof At){let o=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Np(i.serializer,o)}}if(r instanceof wl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:kN(i.serializer,r._byteString)};if(r instanceof Kt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:S0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Il)return function(s,a){return{mapValue:{fields:{[w0]:{stringValue:I0},[Ba]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Wu("VectorValues must only contain numeric values.");return T0(a.serializer,l)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${ug(r)}`)}(n,e)}function fO(n,e){let t={};return aN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(n,(r,i)=>{let o=B0(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function pO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof At||n instanceof wl||n instanceof _l||n instanceof Kt||n instanceof Qp||n instanceof Il)}function gO(n,e,t){if(!pO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ug(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function UG(n,e,t){if((e=ze(e))instanceof El)return e._internalPath;if(typeof e=="string")return mO(n,e);throw Yp("Field path arguments must be of type string or ",n,!1,void 0,t)}var jG=new RegExp("[~\\*/\\[\\]]");function mO(n,e,t){if(e.search(jG)>=0)throw Yp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new El(...e.split("."))._internalPath}catch{throw Yp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new W(F.INVALID_ARGUMENT,a+n+u)}function BG(n,e){return n.some(t=>t.isEqual(e))}var Zp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new f0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},f0=class extends Zp{data(){return super.data()}};function $0(n,e){return typeof e=="string"?mO(n,e):e instanceof El?e._internalPath:e._delegate._internalPath}function yO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bl=class{},p0=class extends bl{};function vO(n,e,...t){let r=[];e instanceof bl&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof g0).length,a=o.filter(u=>u instanceof Jp).length;if(s>1||s>0&&a>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Jp=class n extends p0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return EO(e._query,t),new hs(e.firestore,e.converter,rI(e._query,t))}_parse(e){let t=j0(e.firestore);return function(o,s,a,u,l,h,p){let y;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){qx(p,h);let A=[];for(let N of p)A.push(zx(u,o,N));y={arrayValue:{values:A}}}else y=zx(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||qx(p,h),y=VG(a,s,p,h==="in"||h==="not-in");return lt.create(l,h,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function _O(n,e,t){let r=e,i=$0("where",n);return Jp._create(i,r,t)}var g0=class n extends bl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:sr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)EO(s,u),s=rI(s,u)}(e._query,t),new hs(e.firestore,e.converter,rI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function zx(n,e,t){if(typeof(t=ze(t))=="string"){if(t==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wN(e)&&t.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Qe.fromString(t));if(!ee.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lx(n,new ee(r))}if(t instanceof Kt)return lx(n,t._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ug(t)}.`)}function qx(n,e){if(!Array.isArray(n)||n.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var m0=class{convertValue(e,t="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return fs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ba].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>We(s.doubleValue));return new Il(o)}convertGeoPoint(e){return new wl(We(e.latitude),We(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ng(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ll(e));default:return null}}convertTimestamp(e){let t=gi(e);return new At(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Qe.fromString(e);Oe(BN(r));let i=new Sp(r.get(1),r.get(3)),o=new ee(r.popFirst(5));return i.isEqual(t)||pi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function wO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var is=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xp=class extends Zp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Va=class extends Xp{data(e={}){return super.data(e)}},eg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new is(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Va(this._firestore,this._userDataWriter,r.key,r,new is(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new is(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new is(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:$G(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function $G(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}function IO(n){n=Un(n,Kt);let e=Un(n.firestore,Br);return NG(lg(e),n._key).then(t=>SO(e,n,t))}var Cl=class extends m0{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}};function bO(n){n=Un(n,hs);let e=Un(n.firestore,Br),t=lg(e),r=new Cl(e);return yO(n._query),OG(t,n._query).then(i=>new eg(e,r,n,i))}function CO(n,e,t){n=Un(n,Kt);let r=Un(n.firestore,Br),i=wO(n.converter,e,t);return z0(r,[hO(j0(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,fi.none())])}function DO(n){return z0(Un(n.firestore,Br),[new hl(n._key,fi.none())])}function TO(n,e){let t=Un(n.firestore,Br),r=U0(n),i=wO(n.converter,e);return z0(t,[hO(j0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,fi.exists(!1))]).then(()=>r)}function H0(n,...e){var t,r,i;n=ze(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Hx(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Hx(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Kt)l=Un(n.firestore,Br),h=rg(n._key.path),u={next:p=>{e[s]&&e[s](SO(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=Un(n,hs);l=Un(p.firestore,Br),h=p._query;let y=new Cl(l);u={next:m=>{e[s]&&e[s](new eg(l,y,p,m))},error:e[s+1],complete:e[s+2]},yO(n._query)}return function(y,m,A,N){let O=new vl(N),z=new yl(m,O,A);return y.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return O0(yield Gp(y),z)})),()=>{O.su(),y.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return k0(yield Gp(y),z)}))}}(lg(l),h,a,u)}function z0(n,e){return function(r,i){let o=new ir;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return IG(yield xG(r),i,o)})),o.promise}(lg(n),e)}function SO(n,e,t){let r=t.docs.get(e._key),i=new Cl(n);return new Xp(n,i,e._key,r,new is(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Ja=i})(zi),_n(new Tt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Br(new Lw(r.getProvider("auth-internal")),new jw(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sp(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),$e(ex,tx,e),$e(ex,tx,"esm2017")})();var dg=function(){return dg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},dg.apply(this,arguments)};var qG={includeMetadataChanges:!1};function q0(n,e){return e===void 0&&(e=qG),new re(function(t){var r=H0(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function AO(n){return q0(n,{includeMetadataChanges:!0})}function MO(n,e){return e===void 0&&(e={}),AO(n).pipe(X(function(t){return G0(t,e)}))}function G0(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:dg(dg({},r),(t={},t[e.idField]=n.id,t))}function RO(n){return q0(n,{includeMetadataChanges:!0}).pipe(X(function(e){return e.docs}))}function PO(n,e){return e===void 0&&(e={}),RO(n).pipe(X(function(t){return t.map(function(r){return G0(r,e)})}))}var ar=class{constructor(e){return e}},xO="firestore",W0=class{constructor(){return qi(xO)}};var K0=new $("angularfire2.firestore-instances");function GG(n,e){let t=Yo(xO,n,e);return t&&new ar(t)}function WG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ar(r)}}var KG={provide:W0,deps:[[new gt,K0]]},QG={provide:ar,useFactory:GG,deps:[[new gt,K0],er]};function NO(n,...e){return $e("angularfire",Pr.full,"fst"),gn([QG,KG,{provide:K0,useFactory:WG(n),multi:!0,deps:[De,Ke,xr,ai,[new gt,ts],[new gt,Wi],...e]}])}var hg=Ne(PO,!0);var OO=Ne(MO,!0);var fg=Ne(TO,!0,2);var no=Ne(uO,!0,2);var kO=Ne(DO,!0,2);var ro=Ne(U0,!0,2);var FO=Ne(IO,!0);var LO=Ne(bO,!0);var pg=Ne(lO,!0);var VO=Ne(vO,!0,2);var gg=Ne(CO,!0,2);var UO=Ne(_O,!0,2);var jt=class n{constructor(e,t){this.auth=e;this.firestore=t;qP(this.auth,r=>{this.currentUserSubject.next(r)})}currentUserSubject=new ht(null);currentUser$=this.currentUserSubject.asObservable();signUp(e,t){return zP(this.auth,e,t).then(r=>{let i=ro(this.firestore,`users/${r.user.uid}`);return gg(i,{email:e,plan:"free",verified:!1,signupSource:"app_direct",createdAt:new Date,onboardingStep:0,reminderEnabled:!0}).then(()=>r)})}sendVerificationEmail(e){return GP(e)}login(e,t){return KP(this.auth,e,t)}logout(){return QP(this.auth)}sendPasswordReset(e){return WP(this.auth,e)}updateUserProfile(e,t){let r=this.auth.currentUser;if(!r)return Promise.reject("No user is logged in");let i=[ZP(r,{displayName:e})];return t&&t!==r.email&&i.push(YP(r,t)),Promise.all(i)}get currentUser(){return this.auth.currentUser}get isLoggedIn(){return!!this.auth.currentUser}getUserPlan(){return this.currentUser$.pipe(Ot(e=>{if(!e)return Z("free");let t=ro(this.firestore,`users/${e.uid}`);return OO(t).pipe(X(r=>r?.plan||"free"))}))}static \u0275fac=function(t){return new(t||n)(K(En),K(ar))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var YG=()=>["/dashboard"],ZG=()=>["/medication-search"],JG=()=>["/tracking-list"],XG=()=>["/dosage-correction"],e9=()=>["/login"],t9=()=>["/register"],n9=()=>["/profile"];function r9(n,e){if(n&1&&(E(0,"div",14),w(1),v()),n&2){let t=Q();P(),ie(" Welcome back, ",t.userEmail," ")}}function i9(n,e){n&1&&(E(0,"button",9),w(1,"Login"),v()),n&2&&L("routerLink",sn(1,e9))}function o9(n,e){n&1&&(E(0,"button",9),w(1,"Register"),v()),n&2&&L("routerLink",sn(1,t9))}function s9(n,e){n&1&&(E(0,"button",9),w(1,"Profile"),v()),n&2&&L("routerLink",sn(1,n9))}function a9(n,e){if(n&1){let t=mn();E(0,"button",15),ue("click",function(){nn(t);let i=Q();return rn(i.signOut())}),w(1,"Sign Out"),v()}}var mg=class n{constructor(e,t){this.authService=e;this.router=t}currentYear=new Date().getFullYear();title="doseninja";isMenuOpen=!1;isDarkMode=!1;isLoggedIn=!1;userEmail=null;ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.isLoggedIn=!!e,this.userEmail=e?.email||null})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,document.body.classList.toggle("dark",this.isDarkMode)}signOut(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(U(jt),U(Lt))};static \u0275cmp=be({type:n,selectors:[["app-root"]],decls:30,vars:17,consts:[[1,"app-container"],[1,"app-header"],[1,"app-header-container"],["href","/",1,"logo-link"],["src","assets/logo.png","alt","Dose Ninja Logo",1,"logo"],["class","welcome-message",4,"ngIf"],[1,"theme-toggle-btn",3,"click"],[1,"hamburger-menu",3,"click"],[1,"app-nav"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],[3,"click",4,"ngIf"],[1,"app-content"],["routerLink","/privacy-policy"],[1,"welcome-message"],[3,"click"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"header",1)(2,"div",2)(3,"a",3),Fe(4,"img",4),v(),te(5,r9,2,1,"div",5),E(6,"button",6),ue("click",function(){return r.toggleDarkMode()}),w(7),v(),E(8,"button",7),ue("click",function(){return r.toggleMenu()}),w(9,"\u2630"),v(),E(10,"nav",8)(11,"button",9),w(12,"Dashboard"),v(),E(13,"button",9),w(14,"Medication Search"),v(),E(15,"button",9),w(16,"Tracking List"),v(),E(17,"button",9),w(18,"Dosage Correction"),v(),te(19,i9,2,2,"button",10)(20,o9,2,2,"button",10)(21,s9,2,2,"button",10)(22,a9,2,0,"button",11),v()()(),E(23,"div",12),Fe(24,"router-outlet"),v(),E(25,"footer")(26,"p"),w(27),v(),E(28,"a",13),w(29,"Privacy Policy"),v()()()),t&2&&(P(5),L("ngIf",r.isLoggedIn&&r.userEmail),P(2),ie(" ",r.isDarkMode?"\u2600\uFE0F Light Mode":"\u{1F319} Dark Mode"," "),P(3),sa("active",r.isMenuOpen),P(),L("routerLink",sn(13,YG)),P(2),L("routerLink",sn(14,ZG)),P(2),L("routerLink",sn(15,JG)),P(2),L("routerLink",sn(16,XG)),P(2),L("ngIf",!r.isLoggedIn),P(),L("ngIf",!r.isLoggedIn),P(),L("ngIf",r.isLoggedIn),P(),L("ngIf",r.isLoggedIn),P(5),ie("\xA9 ",r.currentYear," Dose Ninja. All rights reserved."))},dependencies:[Gt,ku,Ln,xe,Be],styles:['@charset "UTF-8";.app-header[_ngcontent-%COMP%]{background:#ffffffbf;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 2px 12px #0000000a;position:sticky;top:0;z-index:999;padding:.5rem 0;transition:background-color .3s ease}body.dark[_ngcontent-%COMP%]   .app-header[_ngcontent-%COMP%]{background:#1e1e1ed9;box-shadow:0 2px 12px #0000004d}.app-header-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;max-width:1200px;margin:0 auto;padding:0 1rem}.logo-link[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none}.logo-link[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:110px;width:auto;margin-right:.75rem}.logo-link[_ngcontent-%COMP%] + .welcome-message[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:var(--color-muted)}@media (max-width: 768px){.logo-link[_ngcontent-%COMP%] + .welcome-message[_ngcontent-%COMP%]{margin-top:.5rem;text-align:center;display:block;width:100%}}body.dark[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{color:var(--text-color-light)}.hamburger-menu[_ngcontent-%COMP%]{display:none;background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text)}.app-nav[_ngcontent-%COMP%]{display:flex;gap:1rem}.app-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;font-size:.95rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.app-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--color-text)}.theme-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.theme-toggle-btn[_ngcontent-%COMP%]:hover{color:var(--color-text)}@media (max-width: 768px){.hamburger-menu[_ngcontent-%COMP%]{display:block}.app-nav[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background-color:var(--color-surface);flex-direction:column;align-items:center;display:none;padding:1rem 0;box-shadow:0 2px 10px #0000000d}body.dark[_ngcontent-%COMP%]   .app-nav[_ngcontent-%COMP%]{background-color:#222}.app-nav.active[_ngcontent-%COMP%]{display:flex}}']})};var c9="type.googleapis.com/google.protobuf.Int64Value",u9="type.googleapis.com/google.protobuf.UInt64Value";function HO(n,e){let t={};for(let r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function yg(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>yg(e));if(typeof n=="function"||typeof n=="object")return HO(n,e=>yg(e));throw new Error("Data cannot be encoded in JSON: "+n)}function nc(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case c9:case u9:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>nc(e)):typeof n=="function"||typeof n=="object"?HO(n,e=>nc(e)):n}var X0="functions";var jO={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ln=class n extends Wt{constructor(e,t,r){super(`${X0}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,n.prototype)}};function l9(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function vg(n,e){let t=l9(n),r=t,i;try{let o=e&&e.error;if(o){let s=o.status;if(typeof s=="string"){if(!jO[s])return new ln("internal","internal");t=jO[s],r=s}let a=o.message;typeof a=="string"&&(r=a),i=o.details,i!==void 0&&(i=nc(i))}}catch{}return t==="ok"?null:new ln(t,r,i)}var Y0=class{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,St(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i?.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return _(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return _(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return _(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return _(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var Z0="us-central1",d9=/^data: (.*?)(?:\n|$)/;function h9(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new ln("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var J0=class{constructor(e,t,r,i,o=Z0,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new Y0(e,t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Z0}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function f9(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function p9(n,e,t){let r=i=>m9(n,e,i,t||{});return r.stream=(i,o)=>v9(n,e,i,o),r}function g9(n,e,t,r){return _(this,null,function*(){t["Content-Type"]="application/json";let i;try{i=yield r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=yield i.json()}catch{}return{status:i.status,json:o}})}function zO(n,e){return _(this,null,function*(){let t={},r=yield n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t})}function m9(n,e,t,r){let i=n._url(e);return y9(n,i,t,r)}function y9(n,e,t,r){return _(this,null,function*(){t=yg(t);let i={data:t},o=yield zO(n,r),s=r.timeout||7e4,a=h9(s),u=yield Promise.race([g9(e,i,o,n.fetchImpl),a.promise,n.cancelAllRequests]);if(a.cancel(),!u)throw new ln("cancelled","Firebase Functions instance was deleted.");let l=vg(u.status,u.json);if(l)throw l;if(!u.json)throw new ln("internal","Response is not valid JSON object.");let h=u.json.data;if(typeof h>"u"&&(h=u.json.result),typeof h>"u")throw new ln("internal","Response is missing data field.");return{data:nc(h)}})}function v9(n,e,t,r){let i=n._url(e);return _9(n,i,t,r||{})}function _9(n,e,t,r){return _(this,null,function*(){var i;t=yg(t);let o={data:t},s=yield zO(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=yield n.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:s,signal:r?.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){let N=new ln("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let A=vg(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let u,l,h=new Promise((m,A)=>{u=m,l=A});(i=r?.signal)===null||i===void 0||i.addEventListener("abort",()=>{let m=new ln("cancelled","Request was cancelled.");l(m)});let p=a.body.getReader(),y=E9(p,u,l,r?.signal);return{stream:{[Symbol.asyncIterator](){let m=y.getReader();return{next(){return _(this,null,function*(){let{value:N,done:O}=yield m.read();return{value:N,done:O}})},return(){return _(this,null,function*(){return yield m.cancel(),{done:!0,value:void 0}})}}}},data:h}})}function E9(n,e,t,r){let i=(s,a)=>{let u=s.match(d9);if(!u)return;let l=u[1];try{let h=JSON.parse(l);if("result"in h){e(nc(h.result));return}if("message"in h){a.enqueue(nc(h.message));return}if("error"in h){let p=vg(0,h);a.error(p),t(p);return}}catch(h){if(h instanceof ln){a.error(h),t(h);return}}},o=new TextDecoder;return new ReadableStream({start(s){let a="";return u();function u(){return _(this,null,function*(){if(r?.aborted){let l=new ln("cancelled","Request was cancelled");return s.error(l),t(l),Promise.resolve()}try{let{value:l,done:h}=yield n.read();if(h){a.trim()&&i(a.trim(),s),s.close();return}if(r?.aborted){let y=new ln("cancelled","Request was cancelled");s.error(y),t(y),yield n.cancel();return}a+=o.decode(l,{stream:!0});let p=a.split(`
`);a=p.pop()||"";for(let y of p)y.trim()&&i(y.trim(),s);return u()}catch(l){let h=l instanceof ln?l:vg(0,null);s.error(h),t(h)}})}},cancel(){return n.cancel()}})}var BO="@firebase/functions",$O="0.12.3";var w9="auth-internal",I9="app-check-internal",b9="messaging-internal";function C9(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(w9),s=t.getProvider(b9),a=t.getProvider(I9);return new J0(i,o,s,a,r)};_n(new Tt(X0,e,"PUBLIC").setMultipleInstances(!0)),$e(BO,$O,n),$e(BO,$O,"esm2017")}function qO(n=si(),e=Z0){let r=Hi(ze(n),X0).getImmediate({identifier:e}),i=Vf("functions");return i&&GO(r,...i),r}function GO(n,e,t){f9(ze(n),e,t)}function WO(n,e,t){return p9(ze(n),e,t)}C9();var ms=class{constructor(e){return e}},KO="functions",eb=class{constructor(){return qi(KO)}};var tb=new $("angularfire2.functions-instances");function D9(n,e){let t=Yo(KO,n,e);return t&&new ms(t)}function T9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ms(r)}}var S9={provide:eb,deps:[[new gt,tb]]},A9={provide:ms,useFactory:D9,deps:[[new gt,tb],er]};function QO(n,...e){return $e("angularfire",Pr.full,"fn"),gn([A9,S9,{provide:tb,useFactory:T9(n),multi:!0,deps:[De,Ke,xr,ai,[new gt,ts],[new gt,Wi],...e]}])}var YO=Ne(qO,!0),ZO=Ne(WO,!0);var Sl={production:!0,drugBankBaseUrl:"https://api.drugbank.com/v1",drugBankToken:"YOUR_TOKEN_HERE",firebase:{apiKey:"AIzaSyDdUtaYxgkH4TxX2XDxfCtEcklUuPSXihQ",authDomain:"dose-ninja-final.firebaseapp.com",projectId:"dose-ninja-final",storageBucket:"dose-ninja-final.appspot.com",messagingSenderId:"155512503267",appId:"1:155512503267:web:1def1b0853badaa0417ed6",measurementId:"G-J10TWQ7STL"}};var io=class n{constructor(e,t){this.firestore=e;this.auth=t}addTrackedMedication(e){let t=this.auth.currentUser;if(!t)return Promise.reject("User not logged in");let r=no(this.firestore,`users/${t.uid}/trackedMedications`);return fg(r,he(j({},e),{addedAt:new Date})).then(()=>{})}getTrackedMedications(){return new re(e=>{this.auth.onAuthStateChanged(t=>{if(t){let r=no(this.firestore,`users/${t.uid}/trackedMedications`);hg(r,{idField:"id"}).subscribe({next:o=>e.next(o),error:o=>e.error(o),complete:()=>e.complete()})}else e.next([]),e.complete()})})}removeMedication(e){let t=this.auth.currentUser;if(!t)return Promise.reject("User not logged in");let r=ro(this.firestore,`users/${t.uid}/trackedMedications/${e}`);return kO(r)}isMedicationTracked(e){return _(this,null,function*(){let t=this.auth.currentUser;if(!t)return!1;let r=no(this.firestore,`users/${t.uid}/trackedMedications`),i=VO(r,UO("rxcui","==",e));return!(yield LO(i)).empty})}static \u0275fac=function(t){return new(t||n)(K(ar),K(En))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var rc=class n{constructor(e,t){this.firestore=e;this.auth=t}saveReminderSettings(e){return _(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not logged in");let r=ro(this.firestore,`reminders/${t.uid}`);yield gg(r,e,{merge:!0})})}getReminderSettings(e){return _(this,null,function*(){let t=ro(this.firestore,`reminders/${e}`),r=yield FO(t);return r.exists()?r.data():null})}getTodaysReminders(){let e=this.auth.currentUser;if(!e)return new re(i=>{i.next([]),i.complete()});let t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date().getDay()],r=no(this.firestore,`users/${e.uid}/reminders`);return hg(r,{idField:"id"}).pipe(X(i=>i.filter(o=>o.daysOfWeek.includes(t))))}static \u0275fac=function(t){return new(t||n)(K(ar),K(En))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function M9(n,e){if(n&1&&(E(0,"li"),w(1),v()),n&2){let t=e.$implicit;P(),t_(" ",t.medicationName," @ ",t.time," ")}}function R9(n,e){if(n&1&&(E(0,"div")(1,"p"),w(2),v(),E(3,"ul"),te(4,M9,2,2,"li",8),v(),E(5,"a",9),w(6,"Manage Reminders"),v()()),n&2){let t=Q(2);P(2),ie("\u{1F514} You have ",t.todaysReminders.length," reminder(s) today."),P(2),L("ngForOf",t.todaysReminders)}}function P9(n,e){n&1&&(E(0,"p"),w(1,"No reminders for today."),v())}function x9(n,e){if(n&1&&(E(0,"section",6)(1,"h3"),w(2,"Today's Reminders"),v(),te(3,R9,7,2,"div",7)(4,P9,2,0,"ng-template",null,1,ou),v()),n&2){let t=ru(5),r=Q();P(3),L("ngIf",r.todaysReminders.length>0)("ngIfElse",t)}}function N9(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2),v(),w(3),Fe(4,"br"),E(5,"small"),w(6),v()()),n&2){let t=e.$implicit;P(2),Je(t.name),P(),ie(" \u2014 ",t.description," "),P(3),ie("RxCUI: ",t.rxcui,"")}}function O9(n,e){if(n&1&&(E(0,"div")(1,"ul"),te(2,N9,7,3,"li",8),v(),E(3,"a",10),w(4,"View All"),v()()),n&2){let t=Q().ngIf;P(2),L("ngForOf",t.slice(0,3))}}function k9(n,e){if(n&1&&(Xv(0),te(1,O9,5,1,"div",7),e_()),n&2){let t=e.ngIf;Q();let r=ru(10);P(),L("ngIf",t.length>0)("ngIfElse",r)}}function F9(n,e){n&1&&(E(0,"p"),w(1,"You haven't tracked any medications yet."),v(),E(2,"a",11),w(3,"Start Tracking"),v())}var _g=class n{constructor(e,t){this.trackingService=e;this.reminderService=t}trackedMedications$;todaysReminders=[];ngOnInit(){this.trackedMedications$=this.trackingService.getTrackedMedications(),this.reminderService.getTodaysReminders().subscribe(e=>{this.todaysReminders=e})}static \u0275fac=function(t){return new(t||n)(U(io),U(rc))};static \u0275cmp=be({type:n,selectors:[["app-dashboard"]],decls:11,vars:4,consts:[["noMeds",""],["noReminders",""],[1,"dashboard"],["class","reminder-summary",4,"ngIf"],[1,"medication-overview"],[4,"ngIf"],[1,"reminder-summary"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["routerLink","/user-profile"],["routerLink","/tracking-list"],["routerLink","/medication-search"]],template:function(t,r){t&1&&(E(0,"div",2)(1,"h2"),w(2,"Welcome Back"),v(),te(3,x9,6,2,"section",3),E(4,"section",4)(5,"h3"),w(6,"Your Tracked Medications"),v(),te(7,k9,2,2,"ng-container",5),ua(8,"async"),te(9,F9,4,0,"ng-template",null,0,ou),v()()),t&2&&(P(3),L("ngIf",r.todaysReminders),P(4),L("ngIf",kh(8,2,r.trackedMedications$)))},dependencies:[xe,On,Be,f_,Gt,Ln,Uo],styles:[".dashboard[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem}.dashboard[_ngcontent-%COMP%]   .medication-overview[_ngcontent-%COMP%]{background:#f9f9f9;padding:1rem;border-radius:8px}.dashboard[_ngcontent-%COMP%]   .medication-overview[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.dashboard[_ngcontent-%COMP%]   .medication-overview[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem}.dashboard[_ngcontent-%COMP%]   .medication-overview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-top:.5rem;color:#007bff;text-decoration:underline;cursor:pointer}"]})};function L9(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Warnings:"),v(),w(3),v()),n&2){let t=Q().ngIf;P(3),ie(" ",t.warnings,"")}}function V9(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Interactions:"),v(),w(3),v()),n&2){let t=Q().ngIf;P(3),ie(" ",t.interactions.join(", ")," ")}}function U9(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Drug Class:"),v(),w(3),v()),n&2){let t=Q().ngIf;P(3),ie(" ",t.drugClass.join(", ")," ")}}function j9(n,e){if(n&1&&(E(0,"div",3)(1,"h2",4),w(2),v(),E(3,"ul",5)(4,"li")(5,"strong"),w(6,"Description:"),v(),w(7),v(),E(8,"li")(9,"strong"),w(10,"Generic Dosage:"),v(),w(11),v(),E(12,"li")(13,"strong"),w(14,"Frequency:"),v(),w(15),v(),E(16,"li")(17,"strong"),w(18,"Indications:"),v(),w(19),v(),E(20,"li")(21,"strong"),w(22,"Side Effects:"),v(),w(23),v(),E(24,"li")(25,"strong"),w(26,"Precautions:"),v(),w(27),v(),te(28,L9,4,1,"li",6)(29,V9,4,1,"li",6)(30,U9,4,1,"li",6),v()()),n&2){let t=e.ngIf;P(2),Je(t.name),P(5),ie(" ",t.description,""),P(4),ie(" ",t.genericDosage,""),P(4),ie(" ",t.frequency,""),P(4),ie(" ",t.indications,""),P(4),ie(" ",t.sideEffects,""),P(4),ie(" ",t.precautions,""),P(),L("ngIf",t.warnings),P(),L("ngIf",t.interactions==null?null:t.interactions.length),P(),L("ngIf",t.drugClass==null?null:t.drugClass.length)}}function B9(n,e){n&1&&(E(0,"h2"),w(1,"\u274C Error"),v())}function $9(n,e){if(n&1&&(E(0,"p"),w(1),v()),n&2){let t=Q(2);P(),Je(t.errorMessage)}}function H9(n,e){n&1&&(E(0,"h2"),w(1,"\u{1F504} Loading..."),v())}function z9(n,e){if(n&1&&(E(0,"div",3),te(1,B9,2,0,"h2",6)(2,$9,2,1,"p",6)(3,H9,2,0,"h2",6),v()),n&2){let t=Q();P(),L("ngIf",t.errorMessage),P(),L("ngIf",t.errorMessage),P(),L("ngIf",!t.errorMessage)}}var Eg=class n{constructor(e){this.route=e}drugId=null;drug=null;errorMessage=null;ngOnInit(){this.drugId=this.route.snapshot.paramMap.get("rxcui"),this.drugId?this.drug={id:this.drugId,name:"Ibuprofen",description:"Pain relief and anti-inflammatory",genericDosage:"200mg",frequency:"Every 6-8 hours",indications:"Pain, fever, inflammation",sideEffects:"Nausea, dizziness, GI upset",precautions:"Avoid alcohol and prolonged use",warnings:"Not for use in late pregnancy or kidney issues",interactions:["Aspirin","Warfarin"],drugClass:["NSAID","Analgesic"]}:this.errorMessage="Drug ID not found."}static \u0275fac=function(t){return new(t||n)(U(Fn))};static \u0275cmp=be({type:n,selectors:[["app-drug-details"]],decls:4,vars:2,consts:[["loadingOrError",""],[1,"drug-details-container"],["class","card in-view",4,"ngIf","ngIfElse"],[1,"card","in-view"],[1,"drug-name"],[1,"drug-info-list"],[4,"ngIf"]],template:function(t,r){if(t&1&&(E(0,"div",1),te(1,j9,31,10,"div",2)(2,z9,4,3,"ng-template",null,0,ou),v()),t&2){let i=ru(3);P(),L("ngIf",r.drug)("ngIfElse",i)}},dependencies:[xe,Be],styles:[".drug-details-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1rem;margin-top:2rem}.drug-details-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;max-width:800px;padding:2rem;background:#ffffff0d;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.15);border-radius:16px;color:var(--text-color);box-shadow:0 8px 30px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .6s ease forwards;opacity:0;transform:translateY(20px)}.drug-details-container[_ngcontent-%COMP%]   .card.in-view[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.drug-name[_ngcontent-%COMP%]{font-size:2.2rem;color:var(--color-primary);margin-bottom:1.2rem;text-align:center}.drug-info-list[_ngcontent-%COMP%]{list-style:none;padding:0;font-size:1.1rem}.drug-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem;line-height:1.5}.drug-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-secondary)}.section[_ngcontent-%COMP%]{margin-top:2rem}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-accent);margin-bottom:.5rem;font-size:1.2rem}.section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}.section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1.25rem;list-style:disc}.section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.4rem}.chip-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.chip-group[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{background-color:var(--color-secondary);color:#fff;padding:.4rem .75rem;border-radius:999px;font-size:.85rem;font-weight:500;box-shadow:0 2px 5px #0000001a}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};var ck=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(U(wr),U(vt))};static \u0275dir=Ge({type:n})}return n})(),Nl=(()=>{class n extends ck{static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=Ge({type:n,features:[on]})}return n})(),vs=new $(""),q9={provide:vs,useExisting:Sn(()=>ub),multi:!0},ub=(()=>{class n extends Nl{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=Ge({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Ir([q9]),on]})}return n})(),G9={provide:vs,useExisting:Sn(()=>It),multi:!0};function W9(){let n=xn()?xn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var K9=new $(""),It=(()=>{class n extends ck{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!W9())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(U(wr),U(vt),U(K9,8))};static \u0275dir=Ge({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ue("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Ir([G9]),on]})}return n})();function lb(n){return n==null||db(n)===0}function db(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Mg=new $(""),hb=new $(""),Q9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Se=class{static min(e){return Y9(e)}static max(e){return Z9(e)}static required(e){return uk(e)}static requiredTrue(e){return J9(e)}static email(e){return X9(e)}static minLength(e){return e6(e)}static maxLength(e){return t6(e)}static pattern(e){return n6(e)}static nullValidator(e){return Ig()}static compose(e){return gk(e)}static composeAsync(e){return yk(e)}};function Y9(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Z9(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function uk(n){return lb(n.value)?{required:!0}:null}function J9(n){return n.value===!0?null:{required:!0}}function X9(n){return lb(n.value)||Q9.test(n.value)?null:{email:!0}}function e6(n){return e=>{let t=e.value?.length??db(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function t6(n){return e=>{let t=e.value?.length??db(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function n6(n){if(!n)return Ig;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(lb(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Ig(n){return null}function lk(n){return n!=null}function dk(n){return Ni(n)?Pe(n):n}function hk(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function fk(n,e){return e.map(t=>t(n))}function r6(n){return!n.validate}function pk(n){return n.map(e=>r6(e)?e:t=>e.validate(t))}function gk(n){if(!n)return null;let e=n.filter(lk);return e.length==0?null:function(t){return hk(fk(t,e))}}function mk(n){return n!=null?gk(pk(n)):null}function yk(n){if(!n)return null;let e=n.filter(lk);return e.length==0?null:function(t){let r=fk(t,e).map(dk);return Ym(r).pipe(X(hk))}}function vk(n){return n!=null?yk(pk(n)):null}function XO(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function _k(n){return n._rawValidators}function Ek(n){return n._rawAsyncValidators}function rb(n){return n?Array.isArray(n)?n:[n]:[]}function bg(n,e){return Array.isArray(n)?n.includes(e):n===e}function ek(n,e){let t=rb(e);return rb(n).forEach(i=>{bg(t,i)||t.push(i)}),t}function tk(n,e){return rb(e).filter(t=>!bg(n,t))}var Cg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=mk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ys=class extends Cg{name;get formDirective(){return null}get path(){return null}},oo=class extends Cg{_parent=null;name=null;valueAccessor=null},Dg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},i6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Wse=he(j({},i6),{"[class.ng-submitted]":"isSubmitted"}),Bt=(()=>{class n extends Dg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(U(oo,2))};static \u0275dir=Ge({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&sa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[on]})}return n})(),jn=(()=>{class n extends Dg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(U(ys,10))};static \u0275dir=Ge({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&sa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[on]})}return n})();var Al="VALID",wg="INVALID",ic="PENDING",Ml="DISABLED",so=class{},Tg=class extends so{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Rl=class extends so{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Pl=class extends so{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},oc=class extends so{status;source;constructor(e,t){super(),this.status=e,this.source=t}},ib=class extends so{source;constructor(e){super(),this.source=e}},ob=class extends so{source;constructor(e){super(),this.source=e}};function fb(n){return(Rg(n)?n.validators:n)||null}function o6(n){return Array.isArray(n)?mk(n):n||null}function pb(n,e){return(Rg(e)?e.asyncValidators:n)||null}function s6(n){return Array.isArray(n)?vk(n):n||null}function Rg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function wk(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[t])throw new q(1001,"")}function Ik(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new q(1002,"")})}var sc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pn(this.statusReactive)}set status(e){Pn(()=>this.statusReactive.set(e))}_status=la(()=>this.statusReactive());statusReactive=ra(void 0);get valid(){return this.status===Al}get invalid(){return this.status===wg}get pending(){return this.status==ic}get disabled(){return this.status===Ml}get enabled(){return this.status!==Ml}errors;get pristine(){return Pn(this.pristineReactive)}set pristine(e){Pn(()=>this.pristineReactive.set(e))}_pristine=la(()=>this.pristineReactive());pristineReactive=ra(!0);get dirty(){return!this.pristine}get touched(){return Pn(this.touchedReactive)}set touched(e){Pn(()=>this.touchedReactive.set(e))}_touched=la(()=>this.touchedReactive());touchedReactive=ra(!1);get untouched(){return!this.touched}_events=new et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ek(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ek(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tk(e,this._rawAsyncValidators))}hasValidator(e){return bg(this._rawValidators,e)}hasAsyncValidator(e){return bg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Pl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Pl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Rl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Rl(!0,r))}markAsPending(e={}){this.status=ic;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ml,this.errors=null,this._forEachChild(i=>{i.disable(he(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tg(this.value,r)),this._events.next(new oc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Al,this._forEachChild(r=>{r.enable(he(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Al||this.status===ic)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tg(this.value,t)),this._events.next(new oc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ml:Al}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ic,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=dk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new oc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?Ml:this.errors?wg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ic)?ic:this._anyControlsHaveStatus(wg)?wg:Al}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Rl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Pl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=o6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=s6(this._rawAsyncValidators)}},ac=class extends sc{constructor(e,t,r){super(fb(t),pb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Ik(this,!0,e),Object.keys(e).forEach(r=>{wk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var sb=class extends ac{};var Ol=new $("",{providedIn:"root",factory:()=>kl}),kl="always";function bk(n,e){return[...e.path,n]}function ab(n,e,t=kl){gb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),c6(n,e),l6(n,e),u6(n,e),a6(n,e)}function nk(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ag(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Sg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function a6(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gb(n,e){let t=_k(n);e.validator!==null?n.setValidators(XO(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Ek(n);e.asyncValidator!==null?n.setAsyncValidators(XO(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Sg(e._rawValidators,i),Sg(e._rawAsyncValidators,i)}function Ag(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=_k(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=Ek(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Sg(e._rawValidators,r),Sg(e._rawAsyncValidators,r),t}function c6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Ck(n,e)})}function u6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Ck(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Ck(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function l6(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function d6(n,e){n==null,gb(n,e)}function h6(n,e){return Ag(n,e)}function Dk(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function f6(n){return Object.getPrototypeOf(n.constructor)===Nl}function p6(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Tk(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===It?t=o:f6(o)?r=o:i=o}),i||r||t||null}function g6(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function rk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ik(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var xl=class extends sc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(fb(t),pb(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ik(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ik(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var m6=n=>n instanceof xl;var y6={provide:oo,useExisting:Sn(()=>Fl)},ok=Promise.resolve(),Fl=(()=>{class n extends oo{_changeDetectorRef;callSetDisabledState;control=new xl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new it;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Tk(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Dk(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ab(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){ok.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ki(r);ok.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?bk(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(U(ys,9),U(Mg,10),U(hb,10),U(vs,10),U(Oi,8),U(Ol,8))};static \u0275dir=Ge({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Ir([y6]),on,mr]})}return n})();var Bn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var v6={provide:vs,useExisting:Sn(()=>mb),multi:!0};var _6=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mb=(()=>{class n extends Nl{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=k(Ol,{optional:!0})??kl;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(oo),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(U(wr),U(vt),U(_6),U(Ke))};static \u0275dir=Ge({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[Ir([v6]),on]})}return n})();var Sk=new $("");var E6={provide:ys,useExisting:Sn(()=>In)},In=(()=>{class n extends ys{callSetDisabledState;get submitted(){return Pn(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=la(()=>this._submittedReactive());_submittedReactive=ra(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new it;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ag(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return ab(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){nk(t.control||null,t,!1),g6(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),p6(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new ib(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new ob(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(nk(r||null,t),m6(i)&&(ab(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);d6(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&h6(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){gb(this.form,this),this._oldForm&&Ag(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(U(Mg,10),U(hb,10),U(Ol,8))};static \u0275dir=Ge({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ue("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Ir([E6]),on,mr]})}return n})();var w6={provide:oo,useExisting:Sn(()=>bn)},bn=(()=>{class n extends oo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new it;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Tk(this,o)}ngOnChanges(t){this._added||this._setUpControl(),Dk(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return bk(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(U(ys,13),U(Mg,10),U(hb,10),U(vs,10),U(Sk,8))};static \u0275dir=Ge({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Ir([w6]),on,mr]})}return n})();var I6={provide:vs,useExisting:Sn(()=>cc),multi:!0};function Ak(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function b6(n){return n.split(":")[0]}var cc=(()=>{class n extends Nl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=Ak(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=b6(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=Ge({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ir([I6]),on]})}return n})(),Pg=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Ak(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(U(vt),U(wr),U(cc,9))};static \u0275dir=Ge({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),C6={provide:vs,useExisting:Sn(()=>Mk),multi:!0};function sk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function D6(n){return n.split(":")[0]}var Mk=(()=>{class n extends Nl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=D6(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=Ge({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Ir([C6]),on]})}return n})(),xg=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(sk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(sk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(U(vt),U(wr),U(Mk,9))};static \u0275dir=Ge({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var T6=(()=>{class n{_validator=Ig;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ig,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ge({type:n,features:[mr]})}return n})();var S6={provide:Mg,useExisting:Sn(()=>yb),multi:!0};var yb=(()=>{class n extends T6{required;inputName="required";normalizeInput=ki;createValidator=t=>uk;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=ti(n)))(i||n)}})();static \u0275dir=Ge({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&eu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Ir([S6]),on]})}return n})();var Rk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=An({})}return n})(),cb=class extends sc{constructor(e,t,r){super(fb(t),pb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Ik(this,!1,e),e.forEach((r,i)=>{wk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function ak(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var $n=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return ak(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new ac(i,o)}record(t,r=null){let i=this._reduceControls(t);return new sb(i,r)}control(t,r,i){let o={};return this.useNonNullable?(ak(r)?o=r:(o.validators=r,o.asyncValidators=i),new xl(t,he(j({},o),{nonNullable:!0}))):new xl(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new cb(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof xl)return t;if(t instanceof sc)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ao=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ol,useValue:t.callSetDisabledState??kl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=An({imports:[Rk]})}return n})(),dn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sk,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ol,useValue:t.callSetDisabledState??kl}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mn({type:n});static \u0275inj=An({imports:[Rk]})}return n})();function A6(n,e){n&1&&(E(0,"div"),w(1,"Email is required."),v())}function M6(n,e){n&1&&(E(0,"div"),w(1,"Please enter a valid email address."),v())}function R6(n,e){if(n&1&&(E(0,"div",15),te(1,A6,2,0,"div",16)(2,M6,2,0,"div",16),v()),n&2){let t,r,i=Q();P(),L("ngIf",(t=i.loginForm.get("email"))==null||t.errors==null?null:t.errors.required),P(),L("ngIf",(r=i.loginForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function P6(n,e){n&1&&(E(0,"div"),w(1,"Password is required."),v())}function x6(n,e){n&1&&(E(0,"div"),w(1,"Password must be at least 6 characters."),v())}function N6(n,e){if(n&1&&(E(0,"div",15),te(1,P6,2,0,"div",16)(2,x6,2,0,"div",16),v()),n&2){let t,r,i=Q();P(),L("ngIf",(t=i.loginForm.get("password"))==null||t.errors==null?null:t.errors.required),P(),L("ngIf",(r=i.loginForm.get("password"))==null||r.errors==null?null:r.errors.minlength)}}function O6(n,e){if(n&1&&(E(0,"div",15),w(1),v()),n&2){let t=Q();P(),Je(t.errorMessage)}}function k6(n,e){if(n&1&&(E(0,"div",17),w(1),v()),n&2){let t=Q();P(),Je(t.resendSuccessMessage)}}function F6(n,e){if(n&1){let t=mn();E(0,"div",18)(1,"p"),w(2,"Didn't receive the email?"),v(),E(3,"button",19),ue("click",function(){nn(t);let i=Q();return rn(i.resendVerification())}),w(4,"Resend Verification Email"),v()()}}var Ng=class n{constructor(e,t,r,i){this.fb=e;this.router=t;this.authService=r;this.elRef=i;this.loginForm=this.fb.group({email:["",[Se.required,Se.email]],password:["",[Se.required,Se.minLength(6)]]})}loginForm;errorMessage="";showResend=!1;unverifiedUser=null;resendSuccessMessage="";ngAfterViewInit(){let e=this.elRef.nativeElement.querySelector(".card");if(e){let t=new IntersectionObserver(([r])=>{r.isIntersecting&&(e.classList.add("in-view"),t.unobserve(e))},{threshold:.1});t.observe(e)}}onSubmit(){if(this.errorMessage="",this.resendSuccessMessage="",this.showResend=!1,this.loginForm.valid){let{email:e,password:t}=this.loginForm.value;this.authService.login(e,t).then(r=>{let i=r.user;i.emailVerified?this.router.navigate(["/dashboard"]):(this.unverifiedUser=i,this.showResend=!0,this.errorMessage="\u{1F4E9} Please verify your email address before logging in.",this.authService.logout())}).catch(r=>{this.errorMessage=r.message||"An error occurred during login."})}else this.markFormGroupTouched(this.loginForm)}resendVerification(){this.unverifiedUser&&this.authService.sendVerificationEmail(this.unverifiedUser).then(()=>{this.resendSuccessMessage="\u2705 Verification email resent. Please check your inbox.",this.showResend=!1}).catch(e=>{this.errorMessage="\u26A0\uFE0F Failed to resend email. Try again later."})}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t.markAsTouched()})}static \u0275fac=function(t){return new(t||n)(U($n),U(Lt),U(jt),U(vt))};static \u0275cmp=be({type:n,selectors:[["app-login"]],decls:27,vars:7,consts:[[1,"login-container","card"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password"],["class","success-message",4,"ngIf"],["class","resend-container",4,"ngIf"],["type","submit",3,"disabled"],[1,"forgot-link"],["routerLink","/forgot-password"],[1,"register-link"],["routerLink","/register"],[1,"error-message"],[4,"ngIf"],[1,"success-message"],[1,"resend-container"],["type","button",3,"click"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"Login"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",2)(5,"label",3),w(6,"Email"),v(),Fe(7,"input",4),te(8,R6,3,2,"div",5),v(),E(9,"div",2)(10,"label",6),w(11,"Password"),v(),Fe(12,"input",7),te(13,N6,3,2,"div",5),v(),te(14,O6,2,1,"div",5)(15,k6,2,1,"div",8)(16,F6,5,0,"div",9),E(17,"button",10),w(18,"Login"),v(),E(19,"p",11)(20,"a",12),w(21,"Forgot your password?"),v()(),E(22,"div",13)(23,"p"),w(24,"Don't have an account? "),E(25,"a",14),w(26,"Register here"),v()()()()()),t&2){let i,o;P(3),L("formGroup",r.loginForm),P(5),L("ngIf",((i=r.loginForm.get("email"))==null?null:i.invalid)&&(((i=r.loginForm.get("email"))==null?null:i.dirty)||((i=r.loginForm.get("email"))==null?null:i.touched))),P(5),L("ngIf",((o=r.loginForm.get("password"))==null?null:o.invalid)&&(((o=r.loginForm.get("password"))==null?null:o.dirty)||((o=r.loginForm.get("password"))==null?null:o.touched))),P(),L("ngIf",r.errorMessage),P(),L("ngIf",r.resendSuccessMessage),P(),L("ngIf",r.showResend),P(),L("disabled",r.loginForm.invalid)}},dependencies:[xe,Be,dn,Bn,It,Bt,jn,In,bn,Gt,Ln],styles:["[_nghost-%COMP%]{color:var(--text-color)}.login-container[_ngcontent-%COMP%]{max-width:500px;margin:4rem auto;padding:2rem;background-color:var(--color-card-bg, #f9f9f9);border-radius:12px;box-shadow:0 0 20px #0003}h2[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:1.75rem;font-weight:600;color:var(--text-color)}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.95rem;color:var(--text-color)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem;border-radius:8px;border:1px solid #ccc;background-color:var(--input-bg, #fff);color:var(--text-color)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.85rem;color:red}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;text-align:center;margin-top:-1rem}.login-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:green;font-size:.9rem;text-align:center;margin-top:-1rem}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:var(--color-muted)}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;color:var(--color-primary);border:none;font-weight:500;cursor:pointer;text-decoration:underline;transition:color .2s ease}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#1565c0}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border-radius:999px;background-color:var(--color-primary);color:#fff;border:none;cursor:pointer;transition:background-color .2s ease}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1565c0}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#aaa;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.95rem;color:var(--color-muted)}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;font-weight:500}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}body.dark[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{background-color:#222}body.dark[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], body.dark[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:var(--text-color-light)}body.dark[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#2a2a2a;border-color:#555}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]{color:#ccc}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#90caf9}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#42a5f5}"]})};var L6=["cardRef"],V6=()=>({id:"firstName",label:"First Name",type:"text"}),U6=()=>({id:"lastName",label:"Last Name",type:"text"}),j6=()=>({id:"birthDate",label:"Birth Date",type:"date"}),B6=()=>({id:"username",label:"Username",type:"text"}),$6=()=>({id:"email",label:"Email",type:"email"}),H6=n=>({id:"password",label:"Password",type:n}),z6=n=>({id:"confirmPassword",label:"Confirm Password",type:n}),q6=(n,e,t,r,i,o,s)=>[n,e,t,r,i,o,s];function G6(n,e){if(n&1&&(E(0,"div",9),w(1),v()),n&2){let t=Q();P(),ie(" ",t.successMessage," ")}}function W6(n,e){if(n&1&&(E(0,"div",10),w(1),v()),n&2){let t=Q();P(),ie(" ",t.errorMessage," ")}}function K6(n,e){if(n&1){let t=mn();E(0,"div",15),Fe(1,"input",16),E(2,"button",17),ue("click",function(){nn(t);let i=Q(2);return rn(i.togglePasswordVisibility())}),w(3),v()()}if(n&2){let t=Q().$implicit,r=Q();P(),L("type",r.passwordVisible?"text":"password")("id",t.id)("formControlName",t.id),P(2),ie(" ",r.passwordVisible?"\u{1F648}":"\u{1F441}\uFE0F"," ")}}function Q6(n,e){if(n&1){let t=mn();E(0,"div",15),Fe(1,"input",16),E(2,"button",17),ue("click",function(){nn(t);let i=Q(2);return rn(i.toggleConfirmPasswordVisibility())}),w(3),v()()}if(n&2){let t=Q().$implicit,r=Q();P(),L("type",r.confirmPasswordVisible?"text":"password")("id",t.id)("formControlName",t.id),P(2),ie(" ",r.confirmPasswordVisible?"\u{1F648}":"\u{1F441}\uFE0F"," ")}}function Y6(n,e){if(n&1&&Fe(0,"input",18),n&2){let t=Q().$implicit;L("type",t.type)("id",t.id)("formControlName",t.id)}}function Z6(n,e){if(n&1&&(E(0,"div"),w(1),v()),n&2){let t=Q(2).$implicit;P(),ie(" ",t.label," is required. ")}}function J6(n,e){n&1&&(E(0,"div"),w(1," Please enter a valid email address. "),v())}function X6(n,e){n&1&&(E(0,"div"),w(1," Password must be at least 6 characters. "),v())}function eW(n,e){n&1&&(E(0,"div"),w(1," You must be at least 18 years old. "),v())}function tW(n,e){if(n&1&&(E(0,"div",19),te(1,Z6,2,1,"div",20)(2,J6,2,0,"div",20)(3,X6,2,0,"div",20)(4,eW,2,0,"div",20),v()),n&2){let t,r,i,o,s=Q().$implicit,a=Q();P(),L("ngIf",(t=a.registerForm.get(s.id))==null||t.errors==null?null:t.errors.required),P(),L("ngIf",s.id==="email"&&((r=a.registerForm.get(s.id))==null||r.errors==null?null:r.errors.email)),P(),L("ngIf",s.id==="password"&&((i=a.registerForm.get(s.id))==null||i.errors==null?null:i.errors.minlength)),P(),L("ngIf",s.id==="birthDate"&&((o=a.registerForm.get(s.id))==null||o.errors==null?null:o.errors.underage))}}function nW(n,e){if(n&1&&(E(0,"div",11)(1,"label",12),w(2),v(),te(3,K6,4,4,"div",13)(4,Q6,4,4,"div",13)(5,Y6,1,3,"input",14)(6,tW,5,4,"div",5),v()),n&2){let t,r=e.$implicit,i=Q();P(),L("for",r.id),P(),Je(r.label),P(),L("ngIf",r.id==="password"),P(),L("ngIf",r.id==="confirmPassword"),P(),L("ngIf",r.id!=="password"&&r.id!=="confirmPassword"),P(),L("ngIf",((t=i.registerForm.get(r.id))==null?null:t.invalid)&&(((t=i.registerForm.get(r.id))==null?null:t.dirty)||((t=i.registerForm.get(r.id))==null?null:t.touched)))}}function rW(n,e){n&1&&(E(0,"div",19),w(1," Passwords must match. "),v())}var Og=class n{constructor(e,t,r){this.fb=e;this.authService=t;this.router=r;this.registerForm=this.fb.group({firstName:["",Se.required],lastName:["",Se.required],birthDate:["",[Se.required,this.validateAge]],username:["",Se.required],email:["",[Se.required,Se.email]],password:["",[Se.required,Se.minLength(6)]],confirmPassword:["",Se.required]},{validators:this.mustMatchValidator})}registerForm;cardRef;passwordVisible=!1;confirmPasswordVisible=!1;errorMessage="";successMessage="";ngAfterViewInit(){let e=new IntersectionObserver(([t])=>{t.isIntersecting&&this.cardRef?.nativeElement&&(this.cardRef.nativeElement.classList.add("in-view"),e.disconnect())},{threshold:.3});this.cardRef?.nativeElement&&e.observe(this.cardRef.nativeElement)}onSubmit(){if(this.registerForm.valid){let{email:e,password:t}=this.registerForm.value;this.authService.signUp(e,t).then(r=>(console.log("\u2705 Firestore user document created"),this.authService.sendVerificationEmail(r.user).then(()=>{this.successMessage="\u{1F4E7} Verification email sent! Please check your inbox.",this.errorMessage="",setTimeout(()=>{this.router.navigate(["/login"])},2500)}))).catch(r=>{console.error("\u274C Firebase Registration Error:",r),this.errorMessage=r.message||"Registration failed."})}else this.markFormGroupTouched(this.registerForm)}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t instanceof ac?this.markFormGroupTouched(t):t.markAsTouched()})}validateAge(e){let t=new Date(e.value),r=new Date,i=r.getFullYear()-t.getFullYear(),o=r.getMonth()-t.getMonth();return(o<0||o===0&&r.getDate()<t.getDate())&&i--,i<18?{underage:!0}:null}mustMatchValidator(e){let t=e.get("password")?.value,r=e.get("confirmPassword")?.value;return t===r?null:{mustMatch:!0}}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}toggleConfirmPasswordVisibility(){this.confirmPasswordVisible=!this.confirmPasswordVisible}static \u0275fac=function(t){return new(t||n)(U($n),U(jt),U(Lt))};static \u0275cmp=be({type:n,selectors:[["app-register"]],viewQuery:function(t,r){if(t&1&&Oh(L6,5),t&2){let i;tu(i=nu())&&(r.cardRef=i.first)}},decls:14,vars:23,consts:[[1,"card","in-view","register-container"],["class","toast success-toast",4,"ngIf"],["class","toast error-toast",4,"ngIf"],[1,"register-form",3,"ngSubmit","formGroup"],["class","form-group",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[1,"login-link"],["routerLink","/login"],[1,"toast","success-toast"],[1,"toast","error-toast"],[1,"form-group"],[3,"for"],["class","password-wrapper",4,"ngIf"],["class","form-control",3,"type","id","formControlName",4,"ngIf"],[1,"password-wrapper"],[3,"type","id","formControlName"],["type","button",1,"toggle-icon",3,"click"],[1,"form-control",3,"type","id","formControlName"],[1,"error-message"],[4,"ngIf"]],template:function(t,r){if(t&1&&(E(0,"div",0),te(1,G6,2,1,"div",1)(2,W6,2,1,"div",2),E(3,"h2"),w(4,"Register"),v(),E(5,"form",3),ue("ngSubmit",function(){return r.onSubmit()}),te(6,nW,7,6,"div",4)(7,rW,2,0,"div",5),E(8,"button",6),w(9," Register "),v(),E(10,"div",7),w(11," Already have an account? "),E(12,"a",8),w(13,"Login here"),v()()()()),t&2){let i;P(),L("ngIf",r.successMessage),P(),L("ngIf",r.errorMessage),P(3),L("formGroup",r.registerForm),P(),L("ngForOf",eA(15,q6,sn(6,V6),sn(7,U6),sn(8,j6),sn(9,B6),sn(10,$6),n_(11,H6,r.passwordVisible?"text":"password"),n_(13,z6,r.confirmPasswordVisible?"text":"password"))),P(),L("ngIf",(r.registerForm.errors==null?null:r.registerForm.errors.mustMatch)&&((i=r.registerForm.get("confirmPassword"))==null?null:i.touched)),P(),L("disabled",r.registerForm.invalid)}},dependencies:[xe,On,Be,dn,Bn,It,Bt,jn,In,bn,Gt,Ln],styles:[".register-container[_ngcontent-%COMP%]{max-width:600px;margin:4rem auto;padding:2.5rem;background-color:var(--color-card-bg);border-radius:12px;box-shadow:0 0 20px #0003}.register-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:1.75rem;font-weight:600;color:var(--color-text);text-align:center}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.95rem;color:var(--text-color)}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:1rem;border-radius:8px;background-color:var(--input-bg);border:1px solid #ccc;color:var(--text-color)}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:.25rem;color:red;font-size:.875rem}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;font-size:1.2rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.register-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;text-align:left}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;background-color:var(--color-primary);color:#fff;padding:.75rem 1.5rem;border-radius:999px;font-weight:500;font-size:1rem;border:none;cursor:pointer;transition:background-color .2s ease}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#aaa;cursor:not-allowed}.login-link[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:.95rem;text-align:center;color:var(--color-muted)}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function iW(n,e){n&1&&(E(0,"div",4),w(1,"\u{1F504} Loading your tracked meds..."),v())}function oW(n,e){if(n&1&&(E(0,"div",5),w(1),v()),n&2){let t=Q();P(),Je(t.errorMessage)}}function sW(n,e){n&1&&(E(0,"div")(1,"p"),w(2,"No medications are currently being tracked."),v()())}function aW(n,e){if(n&1){let t=mn();E(0,"li",7)(1,"div",8)(2,"h4"),w(3),v(),E(4,"p")(5,"strong"),w(6,"RxCUI:"),v(),w(7),v(),E(8,"p"),w(9),v(),E(10,"p")(11,"em"),w(12),ua(13,"date"),v()(),E(14,"button",9),ue("click",function(){let i=nn(t).$implicit,o=Q(2);return rn(o.removeFromTracking(i))}),w(15,"\u{1F5D1}\uFE0F Remove"),v()()()}if(n&2){let t=e.$implicit;P(3),Je(t.name),P(4),ie(" ",t.rxcui,""),P(2),Je(t.description),P(3),ie("Added: ",rA(13,4,t.addedAt.toDate==null?null:t.addedAt.toDate(),"short"),"")}}function cW(n,e){if(n&1&&(E(0,"ul"),te(1,aW,16,7,"li",6),v()),n&2){let t=Q();P(),L("ngForOf",t.trackedMedications)}}var kg=class n{constructor(e,t){this.trackingService=e;this.authService=t}trackedMedications=[];loading=!0;errorMessage="";ngOnInit(){this.trackingService.getTrackedMedications().subscribe({next:e=>{this.trackedMedications=e,this.loading=!1},error:e=>{this.errorMessage="Failed to load tracked medications.",console.error(e),this.loading=!1}})}removeFromTracking(e){if(!e.id){console.warn("No document ID found for this medication.");return}this.trackingService.removeMedication(e.id).then(()=>{this.trackedMedications=this.trackedMedications.filter(t=>t.id!==e.id)}).catch(t=>{console.error("Failed to remove medication:",t),this.errorMessage="Could not remove medication. Please try again."})}static \u0275fac=function(t){return new(t||n)(U(io),U(jt))};static \u0275cmp=be({type:n,selectors:[["app-tracking-list"]],decls:7,vars:4,consts:[[1,"tracking-list"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"error"],["class","med-item",4,"ngFor","ngForOf"],[1,"med-item"],[1,"med-card"],[3,"click"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"Your Tracked Medications"),v(),te(3,iW,2,0,"div",1)(4,oW,2,1,"div",2)(5,sW,3,0,"div",3)(6,cW,2,1,"ul",3),v()),t&2&&(P(3),L("ngIf",r.loading),P(),L("ngIf",r.errorMessage),P(),L("ngIf",!r.loading&&r.trackedMedications.length===0),P(),L("ngIf",r.trackedMedications.length>0))},dependencies:[xe,On,Be,p_,Gt],styles:[".tracking-container[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_fadeInUp .5s ease both}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.tracking-summary[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem;color:var(--text-color-light);text-align:right}.drug-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem;border-radius:10px;overflow:hidden;box-shadow:0 4px 12px #00000026}.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .drug-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.05);padding:12px;text-align:left;font-size:.95rem;transition:background-color .3s ease}.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;font-weight:600}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ffffff0d}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ffffff05}body[_ngcontent-%COMP%]:not(.dark)   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#1976d21a}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#90caf926}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .25s ease}.pill-button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border:none;padding:6px 14px;border-radius:999px;cursor:pointer;font-size:.85rem;font-weight:500;transition:background-color .25s ease,transform .15s ease;box-shadow:0 2px 6px #00000014;text-decoration:none;display:inline-block}.pill-button[_ngcontent-%COMP%]:hover{background-color:#1565c0;transform:scale(1.05)}.pill-button.danger[_ngcontent-%COMP%]{background-color:#e74c3c}.pill-button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.empty-msg[_ngcontent-%COMP%]{margin-top:1rem;font-style:italic;color:var(--text-color-muted);text-align:center}@media (max-width: 768px){.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .drug-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 6px;font-size:.85rem}.pill-button[_ngcontent-%COMP%]{font-size:.8rem;padding:4px 10px}}"]})};function uW(n,e){n&1&&(E(0,"div",8),w(1,"\u{1F504} Loading..."),v())}function lW(n,e){if(n&1&&(E(0,"div",9),w(1),v()),n&2){let t=Q();P(),ie(" ",t.trackingMessage," ")}}function dW(n,e){if(n&1&&(E(0,"div",10),w(1),v()),n&2){let t=Q();P(),ie(" ",t.errorMessage," ")}}function hW(n,e){if(n&1&&(E(0,"div"),w(1),v()),n&2){let t=Q();P(),ie(' No results found for "',t.searchTerm,'". ')}}function fW(n,e){n&1&&(E(0,"div"),w(1," Start typing to search medications. "),v())}function pW(n,e){if(n&1){let t=mn();E(0,"li",13)(1,"div",14)(2,"h4"),w(3),v(),E(4,"p")(5,"strong"),w(6,"RxCUI:"),v(),w(7),v(),E(8,"p"),w(9),v(),E(10,"button",2),ue("click",function(){let i=nn(t).$implicit,o=Q(2);return rn(o.trackMedication(i))}),w(11,"\u2795 Track"),v()()()}if(n&2){let t=e.$implicit;P(3),ie("\u{1F48A} ",t.name,""),P(4),ie(" ",t.rxcui,""),P(2),Je(t.description)}}function gW(n,e){if(n&1&&(E(0,"ul",11),te(1,pW,12,3,"li",12),v()),n&2){let t=Q();P(),L("ngForOf",t.searchResults)}}var Fg=class n{constructor(e,t,r){this.http=e;this.trackingService=t;this.authService=r}searchTerm="";searchResults=[];loading=!1;errorMessage="";trackingMessage="";ngOnInit(){}searchDrugs(){if(!this.searchTerm.trim()){this.searchResults=[];return}let e=`https://rxnav.nlm.nih.gov/REST/drugs.json?name=${encodeURIComponent(this.searchTerm)}`;this.loading=!0,this.errorMessage="",this.searchResults=[],this.http.get(e).pipe(X(t=>t?.drugGroup?.conceptGroup?t.drugGroup.conceptGroup.flatMap(r=>r?.conceptProperties?r.conceptProperties.map(i=>({name:i.name,description:i.synonym||"",rxcui:i.rxcui||""})):[]):[])).subscribe({next:t=>{this.searchResults=t,this.loading=!1},error:t=>{console.error("\u274C RxNav API error:",t),this.errorMessage="Failed to fetch medications.",this.loading=!1}})}trackMedication(e){this.trackingMessage="",this.authService.currentUser$.subscribe(t=>{if(!t){alert("You must be logged in to track medications.");return}this.trackingService.isMedicationTracked(e.rxcui).then(r=>{if(r){this.trackingMessage=`${e.name} is already being tracked.`;return}let i={name:e.name,description:e.description,rxcui:e.rxcui,addedAt:new Date};this.trackingService.addTrackedMedication(i).then(()=>{this.trackingMessage=`${e.name} has been added to your tracked medications.`}).catch(o=>{console.error("Error tracking medication:",o),this.trackingMessage="An error occurred while tracking the medication."})})})}static \u0275fac=function(t){return new(t||n)(U(pa),U(io),U(jt))};static \u0275cmp=be({type:n,selectors:[["app-medication-search"]],decls:12,vars:7,consts:[[1,"medication-search"],["type","text","placeholder","Enter medication name...","aria-label","Search term",3,"ngModelChange","keyup.enter","ngModel"],[3,"click"],["class","loading-spinner",4,"ngIf"],["class","toast-message success",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],["class","results-list",4,"ngIf"],[1,"loading-spinner"],[1,"toast-message","success"],[1,"error-message"],[1,"results-list"],["class","drug-item",4,"ngFor","ngForOf"],[1,"drug-item"],[1,"drug-card"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"Search Medications"),v(),E(3,"input",1),ca("ngModelChange",function(o){return iu(r.searchTerm,o)||(r.searchTerm=o),o}),ue("keyup.enter",function(){return r.searchDrugs()}),v(),E(4,"button",2),ue("click",function(){return r.searchDrugs()}),w(5,"Search"),v(),te(6,uW,2,0,"div",3)(7,lW,2,1,"div",4)(8,dW,2,1,"div",5)(9,hW,2,1,"div",6)(10,fW,2,0,"div",6)(11,gW,2,1,"ul",7),v()),t&2&&(P(3),aa("ngModel",r.searchTerm),P(3),L("ngIf",r.loading),P(),L("ngIf",r.trackingMessage),P(),L("ngIf",r.errorMessage),P(),L("ngIf",!r.loading&&r.searchResults.length===0&&!r.errorMessage&&r.searchTerm),P(),L("ngIf",!r.loading&&r.searchResults.length===0&&!r.errorMessage&&!r.searchTerm),P(),L("ngIf",r.searchResults.length>0))},dependencies:[xe,On,Be,ao,It,Bt,Fl,Gt,Uo],styles:[".medication-search[_ngcontent-%COMP%]{padding:2rem;font-family:Segoe UI,sans-serif;color:var(--text-color)}.medication-search[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:1rem}.medication-search[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;max-width:400px;padding:.75rem 1rem;font-size:1rem;border-radius:12px;border:1px solid rgba(255,255,255,.2);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);background:#ffffff1a;color:var(--text-color);margin-bottom:1rem;box-shadow:0 4px 20px #0000001a}.medication-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-weight:700;border:none;border-radius:8px;cursor:pointer;background:#4fc3f7;color:#fff;margin-left:.5rem;transition:background .2s ease-in-out}.medication-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0288d1}.medication-search[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .medication-search[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .medication-search[_ngcontent-%COMP%]   .toast-message[_ngcontent-%COMP%]{margin-top:1rem;font-weight:500}.medication-search[_ngcontent-%COMP%]   .toast-message.success[_ngcontent-%COMP%]{color:#2e7d32}.medication-search[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#d32f2f}.medication-search[_ngcontent-%COMP%]   .results-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:1.5rem}.medication-search[_ngcontent-%COMP%]   .drug-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease forwards;opacity:0}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]{background:#ffffff1f;-webkit-backdrop-filter:blur(14px);backdrop-filter:blur(14px);border:1px solid rgba(255,255,255,.2);border-radius:18px;padding:1.2rem;margin-bottom:1rem;box-shadow:0 8px 30px #00000014;transition:transform .2s ease;color:var(--text-color)}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.3rem;font-size:1.2rem}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:.6rem;background:#66bb6a}.medication-search[_ngcontent-%COMP%]   .drug-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#388e3c}@keyframes _ngcontent-%COMP%_fadeInUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.medication-search   body.light-theme[_nghost-%COMP%], body.light-theme   [_nghost-%COMP%]{--text-color: #111}.medication-search   body.dark-theme[_nghost-%COMP%], body.dark-theme   [_nghost-%COMP%]{--text-color: #f5f5f5}"]})};function mW(n,e){if(n&1&&(E(0,"option",15),w(1),v()),n&2){let t=e.$implicit;L("ngValue",t),P(),ie(" ",t.name," ")}}function yW(n,e){n&1&&(E(0,"div"),w(1," Dosage is required. "),v())}function vW(n,e){if(n&1&&(E(0,"div",16),te(1,yW,2,0,"div",17),v()),n&2){let t,r=Q();P(),L("ngIf",(t=r.correctionForm.get("dosage"))==null||t.errors==null?null:t.errors.required)}}function _W(n,e){n&1&&(E(0,"div",18),w(1," \u2705 Dosage correction submitted successfully! "),v())}var Lg=class n{constructor(e){this.fb=e;this.correctionForm=this.fb.group({drugName:["",Se.required],patientWeight:["",Se.required],patientAge:["",Se.required],patientCreatinine:["",Se.required]})}correctionForm;submitted=!1;allDrugs=[];ngOnInit(){this.allDrugs=[{id:1,name:"Acetaminophen",description:"Used to treat pain and reduce fever",genericDosage:"325-650 mg",frequency:"Every 4-6 hours as needed",indications:"Pain, fever",sideEffects:"Rare",precautions:"Liver disease"},{id:2,name:"Ibuprofen",description:"Used to treat pain, fever, and inflammation",genericDosage:"200-400 mg",frequency:"Every 4-6 hours as needed",indications:"Pain, fever, inflammation",sideEffects:"Upset stomach, headache",precautions:"Stomach ulcers, kidney disease"},{id:3,name:"Amoxicillin",description:"Used to treat bacterial infections",genericDosage:"250-500 mg",frequency:"Every 8 hours",indications:"Bacterial infections",sideEffects:"Diarrhea, nausea",precautions:"Penicillin allergy"},{id:4,name:"Levothyroxine",description:"Used to treat hypothyroidism",genericDosage:"25-300 mcg",frequency:"Once daily",indications:"Hypothyroidism",sideEffects:"Weight loss, anxiety, tremors",precautions:"Heart disease"},{id:5,name:"Amlodipine",description:"Used to treat high blood pressure and chest pain",genericDosage:"2.5-10 mg",frequency:"Once daily",indications:"Hypertension, angina",sideEffects:"Swelling, dizziness, headache",precautions:"Heart failure"},{id:6,name:"Metoprolol",description:"Used to treat high blood pressure and heart problems",genericDosage:"25-450 mg",frequency:"1-3 times daily",indications:"Hypertension, angina, heart failure",sideEffects:"Dizziness, fatigue, slow heart rate",precautions:"Asthma"},{id:7,name:"Simvastatin",description:"Used to lower cholesterol",genericDosage:"5-40 mg",frequency:"Once daily",indications:"High cholesterol, prevention of cardiovascular disease",sideEffects:"Muscle pain, nausea, headache",precautions:"Liver disease"},{id:8,name:"Omeprazole",description:"Used to treat heartburn and acid reflux",genericDosage:"10-40 mg",frequency:"Once daily",indications:"GERD, ulcers",sideEffects:"Headache, diarrhea, stomach pain",precautions:"Long-term use"},{id:9,name:"Losartan",description:"Used to treat high blood pressure",genericDosage:"25-100 mg",frequency:"Once daily",indications:"Hypertension",sideEffects:"Dizziness, headache",precautions:"Pregnancy"},{id:10,name:"Albuterol",description:"Used to treat asthma and breathing problems",genericDosage:"2-4 mg",frequency:"3-4 times daily",indications:"Asthma, COPD",sideEffects:"Tremors, nervousness, increased heart rate",precautions:"Heart disease"},{id:11,name:"Gabapentin",description:"Used to treat seizures and nerve pain",genericDosage:"300-3600 mg",frequency:"3 times daily",indications:"Seizures, nerve pain",sideEffects:"Dizziness, drowsiness, fatigue",precautions:"Kidney disease"},{id:12,name:"Hydrochlorothiazide",description:"Used to treat high blood pressure and fluid retention",genericDosage:"12.5-50 mg",frequency:"Once daily",indications:"Hypertension, edema",sideEffects:"Dizziness, headache, dehydration",precautions:"Kidney disease, diabetes"}]}onSubmit(){this.submitted=!0,this.correctionForm.valid&&console.log("Form submitted:",this.correctionForm.value)}static \u0275fac=function(t){return new(t||n)(U($n))};static \u0275cmp=be({type:n,selectors:[["app-dosage-correction"]],decls:25,vars:5,consts:[[1,"card","in-view","correction-form-container"],[1,"correction-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","drug"],["id","drug","formControlName","drug",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["for","medicationName"],["type","text","id","medicationName","formControlName","medicationName","readonly","",1,"form-control"],["for","dosage"],["type","text","id","dosage","formControlName","dosage",1,"form-control"],["class","error-message",4,"ngIf"],["for","notes"],["id","notes","formControlName","notes",1,"form-control"],["type","submit",3,"disabled"],["class","success-message",4,"ngIf"],[3,"ngValue"],[1,"error-message"],[4,"ngIf"],[1,"success-message"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"Dosage Correction"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",2)(5,"label",3),w(6,"Select Medication"),v(),E(7,"select",4),te(8,mW,2,2,"option",5),v()(),E(9,"div",2)(10,"label",6),w(11,"Medication Name"),v(),Fe(12,"input",7),v(),E(13,"div",2)(14,"label",8),w(15,"Dosage"),v(),Fe(16,"input",9),te(17,vW,2,1,"div",10),v(),E(18,"div",2)(19,"label",11),w(20,"Notes"),v(),Fe(21,"textarea",12),v(),E(22,"button",13),w(23," Submit Correction "),v()(),te(24,_W,2,0,"div",14),v()),t&2){let i;P(3),L("formGroup",r.correctionForm),P(5),L("ngForOf",r.allDrugs),P(9),L("ngIf",((i=r.correctionForm.get("dosage"))==null?null:i.invalid)&&(((i=r.correctionForm.get("dosage"))==null?null:i.dirty)||((i=r.correctionForm.get("dosage"))==null?null:i.touched))),P(5),L("disabled",r.correctionForm.invalid),P(2),L("ngIf",r.submitted)}},dependencies:[dn,Bn,Pg,xg,It,cc,Bt,jn,In,bn,ao,xe,On,Be],styles:[".correction-form-container[_ngcontent-%COMP%]{max-width:600px;margin:3rem auto;padding:2rem;text-align:center}.correction-form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem}.correction-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{text-align:left}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;display:block;margin-bottom:.25rem}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.6rem 1rem;border-radius:8px;border:1px solid #ccc;font-size:1rem}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.85rem;margin-top:.3rem}.correction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;padding:.6rem 1.5rem;font-size:1rem;font-weight:500;border-radius:999px;border:none;cursor:pointer;transition:background-color .2s ease}.correction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.correction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.success-message[_ngcontent-%COMP%]{margin-top:1.5rem;color:green;font-weight:500}"]})};var EW=["animatedCard"];function wW(n,e){n&1&&(E(0,"p",13),w(1,"Welcome back, Ninja \u{1F44B}"),v())}function IW(n,e){n&1&&(E(0,"a",14,0)(2,"div",10),w(3,"\u{1F4DD}"),v(),E(4,"div",11),w(5,"Register"),v(),E(6,"div",12),w(7,"Create a Dose Ninja account"),v()())}function bW(n,e){n&1&&(E(0,"a",15,0)(2,"div",10),w(3,"\u{1F510}"),v(),E(4,"div",11),w(5,"Login"),v(),E(6,"div",12),w(7,"Access your personalized dashboard"),v()())}function CW(n,e){n&1&&(E(0,"a",16,0)(2,"div",10),w(3,"\u{1F4CA}"),v(),E(4,"div",11),w(5,"Dashboard"),v(),E(6,"div",12),w(7,"View trends and recent activity"),v()())}var Vg=class n{searchQuery="";searchResults=[];isLoggedIn=!0;cards;ngAfterViewInit(){let e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&(r.target.classList.add("in-view"),e.unobserve(r.target))})},{threshold:.1});this.cards.forEach(t=>e.observe(t.nativeElement))}searchDrugs(){this.searchQuery.trim()?this.searchResults=[{name:"Acetaminophen",description:"Pain reliever and fever reducer"},{name:"Ibuprofen",description:"Anti-inflammatory used to treat pain and swelling"}].filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.searchResults=[]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-home"]],viewQuery:function(t,r){if(t&1&&Oh(EW,5,vt),t&2){let i;tu(i=nu())&&(r.cards=i)}},decls:19,vars:4,consts:[["animatedCard",""],[1,"home-layout"],[1,"hero-header"],[1,"subtext"],["class","welcome-msg",4,"ngIf"],[1,"module-grid"],["routerLink","/register","class","module-card register-card","title","Create a new account",4,"ngIf"],["routerLink","/login","class","module-card login-card","title","Log in to your profile",4,"ngIf"],["routerLink","/dashboard","class","module-card dashboard-card","title","Your full medication overview",4,"ngIf"],["routerLink","/tracking-list","title","See what's currently being tracked",1,"module-card","tracking-card"],[1,"card-icon"],[1,"card-title"],[1,"card-subtext"],[1,"welcome-msg"],["routerLink","/register","title","Create a new account",1,"module-card","register-card"],["routerLink","/login","title","Log in to your profile",1,"module-card","login-card"],["routerLink","/dashboard","title","Your full medication overview",1,"module-card","dashboard-card"]],template:function(t,r){t&1&&(E(0,"div",1)(1,"div",2)(2,"h1"),w(3,"Dose Ninja"),v(),E(4,"p",3),w(5,"Never forget if you took that pill"),v(),te(6,wW,2,0,"p",4),v(),E(7,"div",5),te(8,IW,8,0,"a",6)(9,bW,8,0,"a",7)(10,CW,8,0,"a",8),E(11,"a",9,0)(13,"div",10),w(14,"\u{1F48A}"),v(),E(15,"div",11),w(16,"Tracking List"),v(),E(17,"div",12),w(18,"Your current medication list"),v()()()()),t&2&&(P(6),L("ngIf",r.isLoggedIn),P(2),L("ngIf",!r.isLoggedIn),P(),L("ngIf",!r.isLoggedIn),P(),L("ngIf",r.isLoggedIn))},dependencies:[ao,xe,Be],styles:['@charset "UTF-8";.home-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4rem 1rem;text-align:center;min-height:100vh}.hero-header[_ngcontent-%COMP%]{margin-bottom:3rem}.hero-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:.5rem;color:var(--color-primary)}.hero-header[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--color-muted)}.hero-header[_ngcontent-%COMP%]   .welcome-msg[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--color-secondary);margin-top:1rem}.module-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;margin-top:2rem}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.module-card[_ngcontent-%COMP%]{width:180px;height:180px;display:inline-flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;border:2px solid var(--color-primary);border-radius:16px;font-weight:600;text-decoration:none;color:var(--color-primary);background-color:#1976d20d;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInUp .5s ease both;cursor:pointer}.module-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem}.module-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.module-card[_ngcontent-%COMP%]   .card-subtext[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-muted);margin-top:.25rem;text-align:center;max-width:140px;line-height:1.3}.module-card[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff;transform:scale(1.05)}.module-card[_ngcontent-%COMP%]:hover   .card-subtext[_ngcontent-%COMP%]{color:#e0e0e0}.module-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.module-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.module-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.module-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.register-card[_ngcontent-%COMP%]{background-color:#4caf501a}.login-card[_ngcontent-%COMP%]{background-color:#2196f31a}.dashboard-card[_ngcontent-%COMP%]{background-color:#ff98001a}.tracking-card[_ngcontent-%COMP%]{background-color:#9c27b01a}@media (max-width: 600px){.home-layout[_ngcontent-%COMP%]{padding:2rem 1rem}.hero-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.hero-header[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:1rem}.module-grid[_ngcontent-%COMP%]{gap:1.5rem}.module-card[_ngcontent-%COMP%]{width:140px;height:140px;font-size:.9rem}.module-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2rem}.module-card[_ngcontent-%COMP%]   .card-subtext[_ngcontent-%COMP%]{font-size:.75rem}}']})};function DW(n,e){if(n&1&&(E(0,"div",23),w(1),v()),n&2){let t=Q();P(),ie(" ",t.successMessage," ")}}function TW(n,e){if(n&1&&(E(0,"div",24),w(1),v()),n&2){let t=Q();P(),ie(" ",t.errorMessage," ")}}function SW(n,e){n&1&&(E(0,"div",4)(1,"label",25),w(2,"Reminder Time"),v(),Fe(3,"input",26),v())}var Ug=class n{constructor(e,t,r){this.fb=e;this.authService=t;this.reminderService=r;this.profileForm=this.fb.group({username:["",Se.required],email:["",[Se.required,Se.email]],notifications:["enabled"],dailyRemindersEnabled:[!0],reminderTime:["08:00"],contactMethod:["email"]})}profileForm;currentUser=null;successMessage="";errorMessage="";ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.currentUser=e,e&&(this.profileForm.patchValue({username:e.displayName||"",email:e.email||""}),this.reminderService.getReminderSettings(e.uid).then(t=>{t&&this.profileForm.patchValue({dailyRemindersEnabled:t.dailyRemindersEnabled,reminderTime:t.reminderTime,contactMethod:t.contactMethod})}).catch(t=>{console.warn("No reminder settings found or error:",t)}))})}onSubmit(){if(this.profileForm.valid&&this.currentUser){let{username:e,email:t,dailyRemindersEnabled:r,reminderTime:i,contactMethod:o}=this.profileForm.value;this.authService.updateUserProfile(e,t).then(()=>this.reminderService.saveReminderSettings({dailyRemindersEnabled:r,reminderTime:i,contactMethod:o})).then(()=>{this.successMessage="\u2705 Profile and reminder settings updated!",this.errorMessage=""}).catch(s=>{console.error("Error:",s),this.errorMessage=s.message||"Failed to save changes.",this.successMessage=""})}}toggleDarkMode(){document.body.classList.toggle("dark")}static \u0275fac=function(t){return new(t||n)(U($n),U(jt),U(rc))};static \u0275cmp=be({type:n,selectors:[["app-user-profile"]],decls:41,vars:5,consts:[[1,"card","user-profile-container"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username"],["for","email"],["type","email","id","email","formControlName","email"],["for","notifications"],["id","notifications","formControlName","notifications"],["value","enabled"],["value","disabled"],["type","checkbox","formControlName","dailyRemindersEnabled"],["class","form-group",4,"ngIf"],["for","contactMethod"],["id","contactMethod","formControlName","contactMethod"],["value","email"],["value","sms"],[1,"form-group","toggle-group"],["for","themeToggle"],["type","checkbox","id","themeToggle",3,"change"],["type","submit",3,"disabled"],[1,"success-message"],[1,"error-message"],["for","reminderTime"],["type","time","id","reminderTime","formControlName","reminderTime"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"User Profile"),v(),te(3,DW,2,1,"div",1)(4,TW,2,1,"div",2),E(5,"form",3),ue("ngSubmit",function(){return r.onSubmit()}),E(6,"div",4)(7,"label",5),w(8,"Username"),v(),Fe(9,"input",6),v(),E(10,"div",4)(11,"label",7),w(12,"Email"),v(),Fe(13,"input",8),v(),E(14,"div",4)(15,"label",9),w(16,"Notifications"),v(),E(17,"select",10)(18,"option",11),w(19,"Enabled"),v(),E(20,"option",12),w(21,"Disabled"),v()()(),E(22,"div",4)(23,"label"),Fe(24,"input",13),w(25," Enable Daily Reminders "),v()(),te(26,SW,4,0,"div",14),E(27,"div",4)(28,"label",15),w(29,"Preferred Contact Method"),v(),E(30,"select",16)(31,"option",17),w(32,"Email"),v(),E(33,"option",18),w(34,"SMS (future)"),v()()(),E(35,"div",19)(36,"label",20),w(37,"Dark Mode"),v(),E(38,"input",21),ue("change",function(){return r.toggleDarkMode()}),v()(),E(39,"button",22),w(40,"Save Changes"),v()()()),t&2){let i;P(3),L("ngIf",r.successMessage),P(),L("ngIf",r.errorMessage),P(),L("formGroup",r.profileForm),P(21),L("ngIf",(i=r.profileForm.get("dailyRemindersEnabled"))==null?null:i.value),P(13),L("disabled",r.profileForm.invalid)}},dependencies:[xe,Be,dn,Bn,Pg,xg,It,ub,cc,Bt,jn,In,bn],styles:['@charset "UTF-8";.user-profile-container[_ngcontent-%COMP%]{max-width:600px;margin:3rem auto;padding:2rem;border-radius:16px;background:#ffffff0d;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:inset 0 0 .5px #ffffff0d,0 8px 20px #00000014;animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards;color:var(--text-color)}h2[_ngcontent-%COMP%]{text-align:center;color:var(--color-primary);margin-bottom:1.5rem}.success-message[_ngcontent-%COMP%]{background-color:#d0f0d8;color:#2e7d32;padding:.75rem 1rem;border-radius:8px;border-left:4px solid #43a047;margin-bottom:1rem;font-weight:500}.error-message[_ngcontent-%COMP%]{background-color:#fdecea;color:#c62828;padding:.75rem 1rem;border-radius:8px;border-left:4px solid #e53935;margin-bottom:1rem;font-weight:500}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.4rem;font-weight:500;color:var(--text-color)}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem 1rem;border-radius:8px;border:1px solid #ccc;font-size:1rem;background-color:#fff;color:#000}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px #6495ed4d}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;padding:.75rem;font-size:1rem;border:none;border-radius:999px;cursor:pointer;transition:background-color .3s ease}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 600px){.user-profile-container[_ngcontent-%COMP%]{padding:1.5rem;margin:2rem 1rem}.profile-form[_ngcontent-%COMP%]{gap:1rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem .8rem}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.95rem;padding:.6rem 1rem}}']})};function AW(n,e){if(n&1&&(E(0,"div",11),w(1),v()),n&2){let t=Q();P(),ie(" ",t.toastMessage," ")}}function MW(n,e){if(n&1){let t=mn();E(0,"div",12)(1,"div",13)(2,"h3"),w(3,"Confirm Deletion Request"),v(),E(4,"p"),w(5,"Are you sure you want to submit this request?"),v(),E(6,"div",14)(7,"button",15),ue("click",function(){nn(t);let i=Q();return rn(i.confirmRequest())}),w(8,"Yes, Confirm"),v(),E(9,"button",15),ue("click",function(){nn(t);let i=Q();return rn(i.cancelRequest())}),w(10,"Cancel"),v()()()()}}var jg=class n{constructor(e){this.fb=e;this.requestForm=this.fb.group({email:["",[Se.required,Se.email]],reason:[""]});let t=this.auth.currentUser;t?.email&&this.requestForm.patchValue({email:t.email})}requestForm;toastMessage="";showConfirmModal=!1;db=pg();auth=dp();onDeleteRequest(){this.requestForm.invalid||(this.showConfirmModal=!0)}confirmRequest(){return _(this,null,function*(){let{email:e,reason:t}=this.requestForm.value;try{yield fg(no(this.db,"deletionRequests"),{email:e,reason:t,timestamp:new Date().toISOString()}),this.toastMessage="\u2705 Your deletion request has been received.",this.requestForm.reset()}catch(r){console.error("\u274C Firestore error:",r),this.toastMessage="\u274C Failed to submit request. Try again later."}this.showConfirmModal=!1,setTimeout(()=>this.toastMessage="",5e3)})}cancelRequest(){this.showConfirmModal=!1}static \u0275fac=function(t){return new(t||n)(U($n))};static \u0275cmp=be({type:n,selectors:[["app-privacy-policy"]],decls:106,vars:4,consts:[[1,"privacy-container"],["class","toast success-toast",4,"ngIf"],["href","https://policies.google.com/technologies/ads","target","_blank","rel","noopener"],["href","mailto:privacy@doseninja.com"],[1,"deletion-request-section"],[1,"deletion-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","reason"],["id","reason","formControlName","reason","rows","3"],["type","submit",3,"disabled"],["class","modal-overlay",4,"ngIf"],[1,"toast","success-toast"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-buttons"],[3,"click"]],template:function(t,r){t&1&&(E(0,"div",0),te(1,AW,2,1,"div",1),E(2,"h1"),w(3,"Privacy Policy"),v(),E(4,"p")(5,"strong"),w(6,"Last Updated:"),v(),w(7," April 15, 2025"),v(),E(8,"h2"),w(9,"1. Information We Collect"),v(),E(10,"ul")(11,"li"),w(12,"Name, email address, and optional birth date"),v(),E(13,"li"),w(14,"Medication data, reminder preferences, and usage logs"),v(),E(15,"li"),w(16,"Device info such as IP address, browser type, and OS"),v()(),E(17,"h2"),w(18,"2. How We Use Your Data"),v(),E(19,"ul")(20,"li"),w(21,"To personalize your reminders and medication tracking"),v(),E(22,"li"),w(23,"To analyze feature usage and improve app functionality"),v(),E(24,"li"),w(25,"To display non-personalized ads in the free version"),v()(),E(26,"h2"),w(27,"3. Email Communications"),v(),E(28,"p"),w(29," We may send medication reminders and system updates. You can manage communication preferences in your profile settings. "),v(),E(30,"h2"),w(31,"4. Ads and Monetization"),v(),E(32,"p"),w(33," Dose Ninja displays "),E(34,"strong"),w(35,"non-personalized ads"),v(),w(36," through networks such as Google AdSense. These ads do not use health data for targeting. Upgrade to a paid plan to remove ads. "),Fe(37,"br"),w(38," \u{1F517} "),E(39,"a",2),w(40,"Learn more about Google's ad practices"),v()(),E(41,"h2"),w(42,"5. Third-Party Services"),v(),E(43,"p"),w(44," We use the following trusted services: "),v(),E(45,"ul")(46,"li")(47,"strong"),w(48,"Firebase"),v(),w(49," \u2013 authentication, cloud storage, and analytics"),v(),E(50,"li")(51,"strong"),w(52,"Stripe"),v(),w(53," \u2013 payment processing"),v(),E(54,"li")(55,"strong"),w(56,"Google AdSense"),v(),w(57," \u2013 ad delivery"),v()(),E(58,"h2"),w(59,"6. HIPAA Alignment"),v(),E(60,"p"),w(61," Dose Ninja is not a HIPAA Covered Entity, but we align with HIPAA best practices: "),v(),E(62,"ul")(63,"li"),w(64,"End-to-end encryption of sensitive data"),v(),E(65,"li"),w(66,"Strict access controls and secure authentication"),v(),E(67,"li"),w(68,"No PHI is transmitted to third-party services"),v()(),E(69,"h2"),w(70,"7. Your Data Rights"),v(),E(71,"ul")(72,"li"),w(73,"Access, export, or delete your data any time"),v(),E(74,"li"),w(75,"Request assistance at "),E(76,"strong")(77,"a",3),w(78,"privacy@doseninja.com"),v()()()(),E(79,"h2"),w(80,"8. Data Retention"),v(),E(81,"p"),w(82,"We delete your data within 30 days of confirmed deletion request or account closure."),v(),E(83,"h2"),w(84,"9. Children\u2019s Privacy"),v(),E(85,"p"),w(86," Dose Ninja is intended for users aged 18 and older. We do not knowingly collect information from children under 13. "),v(),E(87,"h2"),w(88,"10. Contact Us"),v(),E(89,"p"),w(90," \u{1F4E9} "),E(91,"strong"),w(92,"Email:"),v(),E(93,"a",3),w(94,"privacy@doseninja.com"),v()()(),E(95,"div",4)(96,"h3"),w(97,"\u{1F5D1}\uFE0F Request Data Deletion"),v(),E(98,"form",5),ue("ngSubmit",function(){return r.onDeleteRequest()}),E(99,"div",6)(100,"label",7),w(101,"Reason (optional)"),v(),Fe(102,"textarea",8),v(),E(103,"button",9),w(104,"Submit Request"),v()()(),te(105,MW,11,0,"div",10)),t&2&&(P(),L("ngIf",r.toastMessage),P(97),L("formGroup",r.requestForm),P(5),L("disabled",r.requestForm.invalid),P(2),L("ngIf",r.showConfirmModal))},dependencies:[xe,Be,dn,Bn,It,Bt,jn,In,bn,Uo],styles:['@charset "UTF-8";.privacy-container[_ngcontent-%COMP%]{max-width:800px;margin:3rem auto;padding:2rem;border-radius:16px;background:#ffffff0d;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:inset 0 0 .5px #ffffff0d,0 8px 20px #00000014;animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards;color:var(--text-color)}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:var(--color-primary);margin-bottom:1rem}p[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{color:var(--text-color);font-size:1rem;line-height:1.6}ul[_ngcontent-%COMP%]{margin-left:1.5rem;margin-bottom:1.5rem;list-style-type:disc}a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{border:none;border-top:1px solid rgba(255,255,255,.1);margin:2rem 0}.toast[_ngcontent-%COMP%]{padding:1rem;border-radius:12px;margin-bottom:1.5rem;font-size:1rem;font-weight:500;animation:_ngcontent-%COMP%_fadeSlideDown .4s ease-in-out;box-shadow:0 4px 16px #00000014;background:#ffffff1a;color:var(--text-color)}.success-toast[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-left:6px solid #28a745}.deletion-request-section[_ngcontent-%COMP%]{margin-top:3rem;padding:2rem;background:#ffffff0d;border-radius:16px;box-shadow:0 4px 20px #0000000d;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}.deletion-request-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-primary);margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem}.deletion-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ccc;border-radius:8px;font-size:1rem;background-color:#fff;color:#000}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px #6495ed4d}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;background-color:var(--color-primary);color:#fff;border:none;border-radius:999px;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s ease}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0006;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;max-width:400px;width:90%;color:#000;box-shadow:0 4px 20px #0003;animation:_ngcontent-%COMP%_fadeInUp .3s ease-in-out;text-align:center}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.25rem;color:var(--color-primary)}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:1.5rem}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:.95rem;border-radius:8px;border:none;cursor:pointer;font-weight:600;transition:all .3s ease}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background-color:var(--color-primary);color:#fff}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child:hover{background-color:#1565c0}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#eee;color:#333}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{background-color:#ddd}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeSlideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 600px){.privacy-container[_ngcontent-%COMP%]{padding:1.5rem;margin:2rem 1rem}h1[_ngcontent-%COMP%]{font-size:1.5rem}p[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{font-size:.95rem}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']})};var Bg=class n{constructor(e){this.http=e}baseUrl=Sl.drugBankBaseUrl;token=Sl.drugBankToken;getHeaders(){return new br({Authorization:`Bearer ${this.token}`})}searchByName(e){return this.http.get(`${this.baseUrl}/us/drug_names?q=${encodeURIComponent(e)}`,{headers:this.getHeaders()})}searchByIngredient(e){return this.http.get(`${this.baseUrl}/us/ingredient_names?q=${encodeURIComponent(e)}`,{headers:this.getHeaders()})}getDrugById(e){return this.http.get(`${this.baseUrl}/us/drugs/${e}`,{headers:this.getHeaders()})}static \u0275fac=function(t){return new(t||n)(K(pa))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function PW(n,e){if(n&1&&(E(0,"div",4),w(1),v()),n&2){let t=Q();P(),ie(" \u26A0\uFE0F ",t.errorMessage," ")}}function xW(n,e){if(n&1&&(E(0,"div",5)(1,"h3"),w(2,"Response:"),v(),E(3,"pre"),w(4),ua(5,"json"),v()()),n&2){let t=Q();P(4),Je(kh(5,1,t.testResult))}}var $g=class n{constructor(e){this.drugbank=e}testResult=null;errorMessage="";ngOnInit(){}runTest(){this.errorMessage="",this.testResult=null,this.drugbank.searchByName("aspirin").subscribe({next:e=>this.testResult=e,error:e=>this.errorMessage=e.message||"Unknown error"})}static \u0275fac=function(t){return new(t||n)(U(Bg))};static \u0275cmp=be({type:n,selectors:[["app-admin-test"]],decls:7,vars:2,consts:[[1,"admin-test-container"],[3,"click"],["class","error-message",4,"ngIf"],["class","result",4,"ngIf"],[1,"error-message"],[1,"result"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"DrugBank API Test"),v(),E(3,"button",1),ue("click",function(){return r.runTest()}),w(4,"Search \u201Caspirin\u201D"),v(),te(5,PW,2,1,"div",2)(6,xW,6,3,"div",3),v()),t&2&&(P(5),L("ngIf",r.errorMessage),P(),L("ngIf",r.testResult))},dependencies:[xe,Be,g_,dn],styles:['@charset "UTF-8";.admin-test-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:1.5rem;background:var(--color-surface);color:var(--text-color);border-radius:8px;box-shadow:0 2px 8px #0000001a}.admin-test-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--color-primary)}.admin-test-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--color-primary);color:#fff;border:none;border-radius:4px;cursor:pointer;margin-bottom:1rem;transition:filter .2s ease}.admin-test-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{filter:brightness(.95)}.admin-test-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#c00;margin-bottom:1rem}.admin-test-container[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#f5f5f5;padding:1rem;border-radius:4px;overflow:auto;max-height:400px;color:var(--text-color)}body.dark[_ngcontent-%COMP%]   .admin-test-container[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--text-color-light);box-shadow:0 2px 8px #00000080}body.dark[_ngcontent-%COMP%]   .admin-test-container[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#2a2a2a;color:var(--text-color)}']})};function NW(n,e){if(n&1&&(E(0,"div",9),w(1),v()),n&2){let t=Q();P(),Je(t.message)}}function OW(n,e){if(n&1&&(E(0,"div",10),w(1),v()),n&2){let t=Q();P(),Je(t.error)}}var Hg=class n{constructor(e,t){this.fb=e;this.auth=t;this.form=this.fb.group({email:["",[Se.required,Se.email]]})}form;message="";error="";onSubmit(){return _(this,null,function*(){if(this.message="",this.error="",this.form.invalid){this.error="Please enter a valid email.";return}try{yield this.auth.sendPasswordReset(this.form.value.email),this.message="\u2705 Password reset email sent. Please check your inbox.",this.form.reset()}catch(e){console.error("Password Reset Error:",e),this.error="\u274C Failed to send reset email. Try again later."}})}static \u0275fac=function(t){return new(t||n)(U($n),U(jt))};static \u0275cmp=be({type:n,selectors:[["app-forgot-password"]],decls:14,vars:4,consts:[[1,"forgot-password-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","required",""],["type","submit",3,"disabled"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["routerLink","/login",1,"back-link"],[1,"success-message"],[1,"error-message"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"Forgot Password"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",2)(5,"label",3),w(6,"Email Address"),v(),Fe(7,"input",4),v(),E(8,"button",5),w(9,"Send Reset Link"),v()(),te(10,NW,2,1,"div",6)(11,OW,2,1,"div",7),E(12,"a",8),w(13,"Back to Login"),v()()),t&2&&(P(3),L("formGroup",r.form),P(5),L("disabled",r.form.invalid),P(2),L("ngIf",r.message),P(),L("ngIf",r.error))},dependencies:[xe,Be,dn,Bn,It,Bt,jn,yb,In,bn,Gt,Ln],styles:[".forgot-password-container[_ngcontent-%COMP%]{max-width:400px;margin:3rem auto;padding:2rem;background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;box-shadow:0 4px 20px #0000001a}.forgot-password-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--color-primary)}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:8px;border:1px solid #ccc;font-size:1rem}.forgot-password-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:var(--color-primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer}.forgot-password-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#1565c0}.forgot-password-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{margin-top:1rem;color:green;font-size:.95rem}.forgot-password-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:1rem;color:red;font-size:.95rem}.forgot-password-container[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{display:block;margin-top:2rem;text-align:center;color:var(--color-primary);text-decoration:none}.forgot-password-container[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var zg=class n{functions=k(ms);createCheckoutSession(e,t){let r=ZO(this.functions,"createCheckoutSession");return Pe(r({email:e,billingPeriod:t})).pipe(X(i=>i.data.url))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var qg=class n{constructor(e){this.stripeService=e}billingPeriod="monthly";loading=!1;auth=k(En);get priceLabel(){return this.billingPeriod==="yearly"?"$49.99/year":"$4.99/month"}upgrade(){alert("Upgrade function started"),this.loading=!0,HP(this.auth).pipe(qn(1)).subscribe(e=>{e?.email?(console.log("\u2705 Logged in as:",e.email),this.stripeService.createCheckoutSession(e.email,this.billingPeriod).subscribe({next:t=>{console.log("\u{1F517} Stripe session URL received:",t),t?window.location.href=t:(alert("No URL returned from Stripe."),this.loading=!1)},error:t=>{console.error("\u274C Stripe checkout error:",t),this.loading=!1,alert("There was an issue with Stripe checkout.")}})):(console.warn("\u26A0\uFE0F No user is currently logged in."),this.loading=!1,alert("Please log in to upgrade."))})}static \u0275fac=function(t){return new(t||n)(U(zg))};static \u0275cmp=be({type:n,selectors:[["app-upgrade"]],decls:50,vars:4,consts:[[1,"upgrade-container"],[1,"billing-toggle"],["type","radio","name","billing","value","monthly",3,"ngModelChange","ngModel"],["type","radio","name","billing","value","yearly",3,"ngModelChange","ngModel"],[1,"discount"],[1,"plan-comparison"],[1,"plan-card","free"],[1,"included"],[1,"excluded"],["disabled",""],[1,"plan-card","premium"],[3,"click","disabled"],[1,"faq-link"],["routerLink","/faq"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h1"),w(2,"Upgrade to Dose Ninja Premium"),v(),E(3,"p"),w(4,"Unlock powerful features to stay on top of your medications."),v(),E(5,"div",1)(6,"label")(7,"input",2),ca("ngModelChange",function(o){return iu(r.billingPeriod,o)||(r.billingPeriod=o),o}),v(),w(8," Monthly "),v(),E(9,"label")(10,"input",3),ca("ngModelChange",function(o){return iu(r.billingPeriod,o)||(r.billingPeriod=o),o}),v(),w(11," Yearly "),E(12,"span",4),w(13,"(Save 20%)"),v()()(),E(14,"div",5)(15,"div",6)(16,"h2"),w(17,"Free"),v(),E(18,"ul")(19,"li",7),w(20,"\u2714\uFE0F Medication search"),v(),E(21,"li",7),w(22,"\u2714\uFE0F Daily reminders"),v(),E(23,"li",7),w(24,"\u2714\uFE0F Basic dashboard"),v(),E(25,"li",8),w(26,"\u274C No history tracking"),v(),E(27,"li",8),w(28,"\u274C Ads shown"),v()(),E(29,"button",9),w(30,"Current Plan"),v()(),E(31,"div",10)(32,"h2"),w(33,"Premium"),v(),E(34,"ul")(35,"li",7),w(36,"\u2714\uFE0F No ads"),v(),E(37,"li",7),w(38,"\u2714\uFE0F Unlimited tracking"),v(),E(39,"li",7),w(40,"\u2714\uFE0F Smart drug interactions"),v(),E(41,"li",7),w(42,"\u2714\uFE0F Export logs (PDF/CSV)"),v(),E(43,"li",7),w(44,"\u2714\uFE0F Streak tracking"),v()(),E(45,"button",11),ue("click",function(){return r.upgrade()}),w(46),v()()(),E(47,"div",12)(48,"a",13),w(49,"Learn more in our FAQ"),v()()()),t&2&&(P(7),aa("ngModel",r.billingPeriod),P(3),aa("ngModel",r.billingPeriod),P(35),L("disabled",r.loading),P(),ie(" ",r.loading?"Processing...":r.billingPeriod==="yearly"?"Upgrade \u2013 $49.99/year":"Upgrade \u2013 $4.99/month"," "))},dependencies:[xe,ao,It,mb,Bt,Fl],styles:[".upgrade-container[_ngcontent-%COMP%]{text-align:center;padding:3rem 1.5rem 5rem;color:#222;background:transparent}.upgrade-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:700;margin-bottom:.5rem;color:inherit}.upgrade-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#555;margin-bottom:2rem}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]{background:#0000000f;border-radius:50px;padding:.75rem 1.5rem;display:inline-flex;gap:2rem;align-items:center;justify-content:center;box-shadow:0 0 12px #0000001a;margin-bottom:2.5rem;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:1rem;cursor:pointer;display:flex;align-items:center}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:.5rem}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]{color:#2e7d32;font-size:.9rem;margin-left:6px}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:20px;padding:2rem;width:320px;box-shadow:0 10px 25px #00000026;border:1px solid #ddd;transition:transform .3s,border-color .3s;color:#222}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]:hover{transform:scale(1.03);border-color:#4caf50}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center;gap:.5rem;color:#111}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin-bottom:1.5rem;font-size:1rem}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.6rem 0;display:flex;align-items:center;gap:.5rem}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.included[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.excluded[_ngcontent-%COMP%]{color:#c62828;text-decoration:line-through;font-weight:500}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:10px;font-weight:700;font-size:1rem;cursor:pointer;transition:background .3s}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#43a047}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#888;cursor:not-allowed}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card.free[_ngcontent-%COMP%]{border:1px solid #aaa}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card.premium[_ngcontent-%COMP%]{border:1px solid #4caf50}.upgrade-container[_ngcontent-%COMP%]   .faq-link[_ngcontent-%COMP%]{margin-top:2rem}.upgrade-container[_ngcontent-%COMP%]   .faq-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:underline;font-size:.95rem}@media screen and (max-width: 768px){.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]})};var Gg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-upgrade-success"]],decls:9,vars:0,consts:[[1,"upgrade-result","success"],["routerLink","/dashboard",1,"button"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h1"),w(2,"\u{1F389} Thank You for Upgrading!"),v(),E(3,"p"),w(4,"You now have access to Dose Ninja Premium features."),v(),E(5,"p"),w(6,"Enjoy unlimited tracking, no ads, and smart medication insights."),v(),E(7,"a",1),w(8,"Go to Dashboard"),v()())},styles:[".upgrade-result[_ngcontent-%COMP%]{text-align:center;margin-top:3rem}.upgrade-result.success[_ngcontent-%COMP%]{color:#2e7d32}.upgrade-result.cancel[_ngcontent-%COMP%]{color:#c62828}.upgrade-result[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-block;margin-top:1.5rem;padding:.75rem 1.5rem;background-color:#1976d2;color:#fff;border:none;border-radius:8px;text-decoration:none}.upgrade-result[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}"]})};var Wg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-upgrade-cancel"]],decls:9,vars:0,consts:[[1,"upgrade-result","cancel"],["routerLink","/upgrade",1,"button"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h1"),w(2,"\u26A0\uFE0F Upgrade Canceled"),v(),E(3,"p"),w(4,"It looks like your upgrade didn\u2019t complete."),v(),E(5,"p"),w(6,"If this was a mistake, you can try again anytime."),v(),E(7,"a",1),w(8,"Try Again"),v()())},styles:[".upgrade-result[_ngcontent-%COMP%]{text-align:center;margin-top:3rem}.upgrade-result.success[_ngcontent-%COMP%]{color:#2e7d32}.upgrade-result.cancel[_ngcontent-%COMP%]{color:#c62828}.upgrade-result[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:inline-block;margin-top:1.5rem;padding:.75rem 1.5rem;background-color:#1976d2;color:#fff;border:none;border-radius:8px;text-decoration:none}.upgrade-result[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}"]})};var Pk=[{path:"",component:Vg},{path:"dashboard",component:_g},{path:"drug-details/:rxcui",component:Eg},{path:"login",component:Ng},{path:"register",component:Og},{path:"profile",component:Ug},{path:"tracking-list",component:kg},{path:"medication-search",component:Fg},{path:"dosage-correction",component:Lg},{path:"upgrade",component:qg},{path:"upgrade-success",component:Gg},{path:"upgrade-cancel",component:Wg},{path:"privacy-policy",component:jg},{path:"admin-test",component:$g},{path:"forgot-password",component:Hg},{path:"**",redirectTo:""}];D_(mg,{providers:[iE(Pk),xR(()=>NR(Sl.firebase)),$P(()=>dp()),NO(()=>pg()),QO(()=>YO())]});
