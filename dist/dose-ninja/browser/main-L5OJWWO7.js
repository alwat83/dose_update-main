var SO=Object.defineProperty,AO=Object.defineProperties;var MO=Object.getOwnPropertyDescriptors;var J0=Object.getOwnPropertySymbols,RO=Object.getPrototypeOf,PO=Object.prototype.hasOwnProperty,xO=Object.prototype.propertyIsEnumerable,NO=Reflect.get;var X0=(n,e,t)=>e in n?SO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,U=(n,e)=>{for(var t in e||={})PO.call(e,t)&&X0(n,t,e[t]);if(J0)for(var t of J0(e))xO.call(e,t)&&X0(n,t,e[t]);return n},he=(n,e)=>AO(n,MO(e));var ui=(n,e,t)=>NO(RO(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=u=>{try{a(t.next(u))}catch(l){i(l)}},s=u=>{try{a(t.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((t=t.apply(n,e)).next())});function mg(n,e){return Object.is(n,e)}var ot=null,El=!1,yg=1,fn=Symbol("SIGNAL");function ye(n){let e=ot;return ot=n,e}function vg(){return ot}var ic={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function oc(n){if(El)throw new Error("");if(ot===null)return;ot.consumerOnSignalRead(n);let e=ot.nextProducerIndex++;if(Cl(ot),e<ot.producerNode.length&&ot.producerNode[e]!==n&&rc(ot)){let t=ot.producerNode[e];bl(t,ot.producerIndexOfThis[e])}ot.producerNode[e]!==n&&(ot.producerNode[e]=n,ot.producerIndexOfThis[e]=rc(ot)?tb(n,ot,e):0),ot.producerLastReadVersion[e]=n.version}function eb(){yg++}function _g(n){if(!(rc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===yg)){if(!n.producerMustRecompute(n)&&!bg(n)){gg(n);return}n.producerRecomputeValue(n),gg(n)}}function Eg(n){if(n.liveConsumerNode===void 0)return;let e=El;El=!0;try{for(let t of n.liveConsumerNode)t.dirty||OO(t)}finally{El=e}}function wg(){return ot?.consumerAllowSignalWrites!==!1}function OO(n){n.dirty=!0,Eg(n),n.consumerMarkedDirty?.(n)}function gg(n){n.dirty=!1,n.lastCleanEpoch=yg}function Il(n){return n&&(n.nextProducerIndex=0),ye(n)}function Ig(n,e){if(ye(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(rc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)bl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function bg(n){Cl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(_g(t),r!==t.version))return!0}return!1}function Cg(n){if(Cl(n),rc(n))for(let e=0;e<n.producerNode.length;e++)bl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function tb(n,e,t){if(nb(n),n.liveConsumerNode.length===0&&rb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=tb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function bl(n,e){if(nb(n),n.liveConsumerNode.length===1&&rb(n))for(let r=0;r<n.producerNode.length;r++)bl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Cl(i),i.producerIndexOfThis[r]=e}}function rc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Cl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function nb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function rb(n){return n.producerNode!==void 0}function Dg(n,e){let t=Object.create(kO);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(_g(t),oc(t),t.value===wl)throw t.error;return t.value};return r[fn]=t,r}var fg=Symbol("UNSET"),pg=Symbol("COMPUTING"),wl=Symbol("ERRORED"),kO=he(U({},ic),{value:fg,dirty:!0,error:null,equal:mg,kind:"computed",producerMustRecompute(n){return n.value===fg||n.value===pg},producerRecomputeValue(n){if(n.value===pg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=pg;let t=Il(n),r,i=!1;try{r=n.computation(),ye(null),i=e!==fg&&e!==wl&&r!==wl&&n.equal(e,r)}catch(o){r=wl,n.error=o}finally{Ig(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function FO(){throw new Error}var ib=FO;function ob(n){ib(n)}function Tg(n){ib=n}var LO=null;function Sg(n,e){let t=Object.create(Dl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(oc(t),t.value);return r[fn]=t,r}function sc(n,e){wg()||ob(n),n.equal(n.value,e)||(n.value=e,VO(n))}function Ag(n,e){wg()||ob(n),sc(n,e(n.value))}var Dl=he(U({},ic),{equal:mg,value:void 0,kind:"signal"});function VO(n){n.version++,eb(),Eg(n),LO?.()}function Mg(n){let e=ye(null);try{return n()}finally{ye(e)}}var Rg;function ac(){return Rg}function Nr(n){let e=Rg;return Rg=n,e}var Tl=Symbol("NotFound");function oe(n){return typeof n=="function"}function rs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Sl=rs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Yi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Qe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof Sl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{sb(o)}catch(s){e=e??[],s instanceof Sl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Sl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Yi(t,e)}remove(e){let{_finalizers:t}=this;t&&Yi(t,e),e instanceof n&&e._removeParent(this)}};Qe.EMPTY=(()=>{let n=new Qe;return n.closed=!0,n})();var Pg=Qe.EMPTY;function Al(n){return n instanceof Qe||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function sb(n){oe(n)?n():n.unsubscribe()}var xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var is={setTimeout(n,e,...t){let{delegate:r}=is;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=is;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Ml(n){is.setTimeout(()=>{let{onUnhandledError:e}=xn;if(e)e(n);else throw n})}function cc(){}var ab=xg("C",void 0,void 0);function cb(n){return xg("E",void 0,n)}function ub(n){return xg("N",n,void 0)}function xg(n,e,t){return{kind:n,value:e,error:t}}var Zi=null;function os(n){if(xn.useDeprecatedSynchronousErrorHandling){let e=!Zi;if(e&&(Zi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Zi;if(Zi=null,t)throw r}}else n()}function lb(n){xn.useDeprecatedSynchronousErrorHandling&&Zi&&(Zi.errorThrown=!0,Zi.error=n)}var Ji=class extends Qe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Al(e)&&e.add(this)):this.destination=zO}static create(e,t,r){return new ss(e,t,r)}next(e){this.isStopped?Og(ub(e),this):this._next(e)}error(e){this.isStopped?Og(cb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Og(ab,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},$O=Function.prototype.bind;function Ng(n,e){return $O.call(n,e)}var kg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Rl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Rl(r)}else Rl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Rl(t)}}},ss=class extends Ji{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&xn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ng(e.next,o),error:e.error&&Ng(e.error,o),complete:e.complete&&Ng(e.complete,o)}):i=e}this.destination=new kg(i)}};function Rl(n){xn.useDeprecatedSynchronousErrorHandling?lb(n):Ml(n)}function HO(n){throw n}function Og(n,e){let{onStoppedNotification:t}=xn;t&&is.setTimeout(()=>t(n,e))}var zO={closed:!0,next:cc,error:HO,complete:cc};var as=typeof Symbol=="function"&&Symbol.observable||"@@observable";function tn(n){return n}function Fg(...n){return Lg(n)}function Lg(n){return n.length===0?tn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=GO(t)?t:new ss(t,r,i);return os(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=db(r),new r((i,o)=>{let s=new ss({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[as](){return this}pipe(...t){return Lg(t)(this)}toPromise(t){return t=db(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function db(n){var e;return(e=n??xn.Promise)!==null&&e!==void 0?e:Promise}function qO(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function GO(n){return n&&n instanceof Ji||qO(n)&&Al(n)}function Vg(n){return oe(n?.lift)}function Ee(n){return e=>{if(Vg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(n,e,t,r,i){return new Ug(n,e,t,r,i)}var Ug=class extends Ji{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function cs(){return Ee((n,e)=>{let t=null;n._refCount++;let r=ve(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var us=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Vg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qe;let t=this.getSubject();e.add(this.source.subscribe(ve(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qe.EMPTY)}return e}refCount(){return cs()(this)}};var hb=rs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Je=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Pl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new hb}next(t){os(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){os(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){os(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Pg:(this.currentObservers=null,o.push(t),new Qe(()=>{this.currentObservers=null,Yi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new Pl(e,t),n})(),Pl=class extends Je{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Pg}};var st=class extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var jg={now(){return(jg.delegate||Date).now()},delegate:void 0};var xl=class extends Qe{constructor(e,t){super()}schedule(e,t=0){return this}};var uc={setInterval(n,e,...t){let{delegate:r}=uc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=uc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ls=class extends xl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return uc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&uc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Yi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ds=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ds.now=jg.now;var hs=class extends ds{constructor(e,t=ds.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Bg=new hs(ls);var Nl=class extends ls{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Ol=class extends hs{};var $g=new Ol(Nl);var $t=new le(n=>n.complete());function fb(n){return n&&oe(n.schedule)}function pb(n){return n[n.length-1]}function kl(n){return oe(pb(n))?n.pop():void 0}function li(n){return fb(pb(n))?n.pop():void 0}function Hg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function mb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function gb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xi(n){return this instanceof Xi?(this.v=n,this):new Xi(n)}function yb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(M){return Promise.resolve(M).then(m,p)}}function a(m,M){r[m]&&(i[m]=function(N){return new Promise(function(O,z){o.push([m,N,O,z])>1||u(m,N)})},M&&(i[m]=M(i[m])))}function u(m,M){try{l(r[m](M))}catch(N){y(o[0][3],N)}}function l(m){m.value instanceof Xi?Promise.resolve(m.value.v).then(h,p):y(o[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function y(m,M){m(M),o.shift(),o.length&&u(o[0][0],o[0][1])}}function vb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gb=="function"?gb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Fl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ll(n){return oe(n?.then)}function Vl(n){return oe(n[as])}function Ul(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function jl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function WO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bl=WO();function $l(n){return oe(n?.[Bl])}function Hl(n){return yb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Xi(t.read());if(i)return yield Xi(void 0);yield yield Xi(r)}}finally{t.releaseLock()}})}function zl(n){return oe(n?.getReader)}function et(n){if(n instanceof le)return n;if(n!=null){if(Vl(n))return KO(n);if(Fl(n))return QO(n);if(Ll(n))return YO(n);if(Ul(n))return _b(n);if($l(n))return ZO(n);if(zl(n))return JO(n)}throw jl(n)}function KO(n){return new le(e=>{let t=n[as]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function QO(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function YO(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ml)})}function ZO(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function _b(n){return new le(e=>{XO(n,e).catch(t=>e.error(t))})}function JO(n){return _b(Hl(n))}function XO(n,e){var t,r,i,o;return mb(this,void 0,void 0,function*(){try{for(t=vb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ht(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function di(n,e=0){return Ee((t,r)=>{t.subscribe(ve(r,i=>Ht(r,n,()=>r.next(i),e),()=>Ht(r,n,()=>r.complete(),e),i=>Ht(r,n,()=>r.error(i),e)))})}function hi(n,e=0){return Ee((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Eb(n,e){return et(n).pipe(hi(e),di(e))}function wb(n,e){return et(n).pipe(hi(e),di(e))}function Ib(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function bb(n,e){return new le(t=>{let r;return Ht(t,e,()=>{r=n[Bl](),Ht(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function ql(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{Ht(t,e,()=>{let r=n[Symbol.asyncIterator]();Ht(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Cb(n,e){return ql(Hl(n),e)}function Db(n,e){if(n!=null){if(Vl(n))return Eb(n,e);if(Fl(n))return Ib(n,e);if(Ll(n))return wb(n,e);if(Ul(n))return ql(n,e);if($l(n))return bb(n,e);if(zl(n))return Cb(n,e)}throw jl(n)}function Ne(n,e){return e?Db(n,e):et(n)}function Z(...n){let e=li(n);return Ne(n,e)}function fs(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function zg(n){return!!n&&(n instanceof le||oe(n.lift)&&oe(n.subscribe))}var Or=rs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function te(n,e){return Ee((t,r)=>{let i=0;t.subscribe(ve(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:ek}=Array;function tk(n,e){return ek(e)?n(...e):n(e)}function Gl(n){return te(e=>tk(n,e))}var{isArray:nk}=Array,{getPrototypeOf:rk,prototype:ik,keys:ok}=Object;function Wl(n){if(n.length===1){let e=n[0];if(nk(e))return{args:e,keys:null};if(sk(e)){let t=ok(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function sk(n){return n&&typeof n=="object"&&rk(n)===ik}function Kl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function lc(...n){let e=li(n),t=kl(n),{args:r,keys:i}=Wl(n);if(r.length===0)return Ne([],e);let o=new le(ak(r,e,i?s=>Kl(i,s):tn));return t?o.pipe(Gl(t)):o}function ak(n,e,t=tn){return r=>{Tb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Tb(e,()=>{let l=Ne(n[u],e),h=!1;l.subscribe(ve(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Tb(n,e,t){n?Ht(t,n,e):e()}function Sb(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,y=()=>{p&&!u.length&&!l&&e.complete()},m=N=>l<r?M(N):u.push(N),M=N=>{o&&e.next(N),l++;let O=!1;et(t(N,h++)).subscribe(ve(e,z=>{i?.(z),o?m(z):e.next(z)},()=>{O=!0},void 0,()=>{if(O)try{for(l--;u.length&&l<r;){let z=u.shift();s?Ht(e,s,()=>M(z)):M(z)}y()}catch(z){e.error(z)}}))};return n.subscribe(ve(e,m,()=>{p=!0,y()})),()=>{a?.()}}function Xe(n,e,t=1/0){return oe(e)?Xe((r,i)=>te((o,s)=>e(r,o,i,s))(et(n(r,i))),t):(typeof e=="number"&&(t=e),Ee((r,i)=>Sb(r,i,n,t)))}function ps(n=1/0){return Xe(tn,n)}function Ab(){return ps(1)}function gs(...n){return Ab()(Ne(n,li(n)))}function Ql(n){return new le(e=>{et(n()).subscribe(e)})}function qg(...n){let e=kl(n),{args:t,keys:r}=Wl(n),i=new le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;et(t[h]).subscribe(ve(o,y=>{p||(p=!0,l--),a[h]=y},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Kl(r,a):a),o.complete())}))}});return e?i.pipe(Gl(e)):i}function Vt(n,e){return Ee((t,r)=>{let i=0;t.subscribe(ve(r,o=>n.call(e,o,i++)&&r.next(o)))})}function kr(n){return Ee((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ve(t,void 0,void 0,s=>{o=et(n(s,kr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Mb(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ve(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Kn(n,e){return oe(e)?Xe(n,e,1):Xe(n,1)}function fi(n){return Ee((e,t)=>{let r=!1;e.subscribe(ve(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Nn(n){return n<=0?()=>$t:Ee((e,t)=>{let r=0;e.subscribe(ve(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Yl(n=ck){return Ee((e,t)=>{let r=!1;e.subscribe(ve(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ck(){return new Or}function pi(n){return Ee((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Fr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Vt((i,o)=>n(i,o,r)):tn,Nn(1),t?fi(e):Yl(()=>new Or))}function ms(n){return n<=0?()=>$t:Ee((e,t)=>{let r=[];e.subscribe(ve(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Gg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Vt((i,o)=>n(i,o,r)):tn,ms(1),t?fi(e):Yl(()=>new Or))}function Wg(n,e){return Ee(Mb(n,e,arguments.length>=2,!0))}function Kg(...n){let e=li(n);return Ee((t,r)=>{(e?gs(n,t,e):gs(n,t)).subscribe(r)})}function zt(n,e){return Ee((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ve(r,u=>{i?.unsubscribe();let l=0,h=o++;et(n(u,h)).subscribe(i=ve(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qg(n){return Ee((e,t)=>{et(n).subscribe(ve(t,()=>t.complete(),cc)),!t.closed&&e.subscribe(t)})}function Et(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ve(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):tn}var vC="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",q=class extends Error{code;constructor(e,t){super(_C(e,t)),this.code=e}};function uk(n){return`NG0${Math.abs(n)}`}function _C(n,e){return`${uk(n)}${e?": "+e:""}`}var EC=Symbol("InputSignalNode#UNSET"),lk=he(U({},Dl),{transformFn:void 0,applyValueToInputSignal(n,e){sc(n,e)}});function wC(n,e){let t=Object.create(lk);t.value=n,t.transformFn=e?.transform;function r(){if(oc(t),t.value===EC){let i=null;throw new q(-950,i)}return t.value}return r[fn]=t,r}function Ic(n){return{toString:n}.toString()}var Zl="__parameters__";function dk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function IC(n,e,t){return Ic(()=>{let r=dk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Zl)?u[Zl]:Object.defineProperty(u,Zl,{value:[]})[Zl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var um=globalThis;function Ve(n){for(let e in n)if(n[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function hk(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Gt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Gt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Rb(n,e){return n?e?`${n} ${e}`:n:e||""}var fk=Ve({__forward_ref__:Ve});function yn(n){return n.__forward_ref__=yn,n.toString=function(){return Gt(this())},n}function Ut(n){return bC(n)?n():n}function bC(n){return typeof n=="function"&&n.hasOwnProperty(fk)&&n.__forward_ref__===yn}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vn(n){return{providers:n.providers||[],imports:n.imports||[]}}function xd(n){return Pb(n,DC)||Pb(n,TC)}function CC(n){return xd(n)!==null}function Pb(n,e){return n.hasOwnProperty(e)?n[e]:null}function pk(n){let e=n&&(n[DC]||n[TC]);return e||null}function xb(n){return n&&(n.hasOwnProperty(Nb)||n.hasOwnProperty(gk))?n[Nb]:null}var DC=Ve({\u0275prov:Ve}),Nb=Ve({\u0275inj:Ve}),TC=Ve({ngInjectableDef:Ve}),gk=Ve({ngInjectorDef:Ve}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function SC(n){return n&&!!n.\u0275providers}var mk=Ve({\u0275cmp:Ve}),yk=Ve({\u0275dir:Ve}),vk=Ve({\u0275pipe:Ve}),_k=Ve({\u0275mod:Ve}),sd=Ve({\u0275fac:Ve}),pc=Ve({__NG_ELEMENT_ID__:Ve}),Ob=Ve({__NG_ENV_ID__:Ve});function bs(n){return typeof n=="string"?n:n==null?"":String(n)}function Ek(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bs(n)}function AC(n,e){throw new q(-200,n)}function iy(n,e){throw new q(-201,!1)}var fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(fe||{}),lm;function MC(){return lm}function qt(n){let e=lm;return lm=n,e}function RC(n,e,t){let r=xd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&fe.Optional)return null;if(e!==void 0)return e;iy(n,"Injector")}var wk={},eo=wk,dm="__NG_DI_FLAG__",ad=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Tl:eo,r)}},cd="ngTempTokenPath",Ik="ngTokenPath",bk=/\n/gm,Ck="\u0275",kb="__source";function Dk(n,e=fe.Default){if(ac()===void 0)throw new q(-203,!1);if(ac()===null)return RC(n,void 0,e);{let t=ac(),r;return t instanceof ad?r=t.injector:r=t,r.get(n,e&fe.Optional?null:void 0,e)}}function W(n,e=fe.Default){return(MC()||Dk)(Ut(n),e)}function k(n,e=fe.Default){return W(n,Nd(e))}function Nd(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function hm(n){let e=[];for(let t=0;t<n.length;t++){let r=Ut(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,o=fe.Default;for(let s=0;s<r.length;s++){let a=r[s],u=Tk(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(W(i,o))}else e.push(W(r))}return e}function PC(n,e){return n[dm]=e,n.prototype[dm]=e,n}function Tk(n){return n[dm]}function Sk(n,e,t,r){let i=n[cd];throw e[kb]&&i.unshift(e[kb]),n.message=Ak(`
`+n.message,i,t,r),n[Ik]=i,n[cd]=null,n}function Ak(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==Ck?n.slice(2):n;let i=Gt(e);if(Array.isArray(e))i=e.map(Gt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Gt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(bk,`
  `)}`}var dt=PC(IC("Optional"),8);var Mk=PC(IC("SkipSelf"),4);function no(n,e){let t=n.hasOwnProperty(sd);return t?n[sd]:null}function Rk(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function Pk(n){return n.flat(Number.POSITIVE_INFINITY)}function oy(n,e){n.forEach(t=>Array.isArray(t)?oy(t,e):e(t))}function xC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ud(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xk(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function Nk(n,e,t){let r=bc(n,e);return r>=0?n[r|1]=t:(r=~r,xk(n,r,e,t)),r}function Yg(n,e){let t=bc(n,e);if(t>=0)return n[t|1]}function bc(n,e){return Ok(n,e,1)}function Ok(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ro={},pn=[],gc=new $(""),NC=new $("",-1),OC=new $(""),ld=class{get(e,t=eo){if(t===eo){let r=new Error(`NullInjectorError: No provider for ${Gt(e)}!`);throw r.name="NullInjectorError",r}return t}};function kC(n,e){let t=n[_k]||null;if(!t&&e===!0)throw new Error(`Type ${Gt(n)} does not have '\u0275mod' property.`);return t}function io(n){return n[mk]||null}function kk(n){return n[yk]||null}function Fk(n){return n[vk]||null}function rn(n){return{\u0275providers:n}}function Lk(...n){return{\u0275providers:FC(!0,n),\u0275fromNgModule:!0}}function FC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return oy(e,s=>{let a=s;fm(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&LC(i,o),t}function LC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];sy(i,o=>{e(o,r)})}}function fm(n,e,t,r){if(n=Ut(n),!n)return!1;let i=null,o=xb(n),s=!o&&io(n);if(!o&&!s){let u=n.ngModule;if(o=xb(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)fm(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{oy(o.imports,h=>{fm(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&LC(l,e)}if(!a){let l=no(i)||(()=>new i);e({provide:i,useFactory:l,deps:pn},i),e({provide:OC,useValue:i,multi:!0},i),e({provide:gc,useValue:()=>W(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;sy(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function sy(n,e){for(let t of n)SC(t)&&(t=t.\u0275providers),Array.isArray(t)?sy(t,e):e(t)}var Vk=Ve({provide:String,useValue:Ve});function VC(n){return n!==null&&typeof n=="object"&&Vk in n}function Uk(n){return!!(n&&n.useExisting)}function jk(n){return!!(n&&n.useFactory)}function Cs(n){return typeof n=="function"}function Bk(n){return!!n.useClass}var Od=new $(""),ed={},Fb={},Zg;function ay(){return Zg===void 0&&(Zg=new ld),Zg}var lt=class{},mc=class extends lt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,gm(e,s=>this.processProvider(s)),this.records.set(NC,ys(void 0,this)),i.has("environment")&&this.records.set(lt,ys(void 0,this));let o=this.records.get(Od);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(OC,pn,fe.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Tl:eo,r)}destroy(){hc(this),this._destroyed=!0;let e=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return hc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){hc(this);let t=Nr(this),r=qt(void 0),i;try{return e()}finally{Nr(t),qt(r)}}get(e,t=eo,r=fe.Default){if(hc(this),e.hasOwnProperty(Ob))return e[Ob](this);r=Nd(r);let i,o=Nr(this),s=qt(void 0);try{if(!(r&fe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Gk(e)&&xd(e);l&&this.injectableDefInScope(l)?u=ys(pm(e),ed):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&fe.Self?ay():this.parent;return t=r&fe.Optional&&t===eo?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[cd]=a[cd]||[]).unshift(Gt(e)),o)throw a;return Sk(a,e,"R3InjectorError",this.source)}else throw a}finally{qt(s),Nr(o)}}resolveInjectorInitializers(){let e=ye(null),t=Nr(this),r=qt(void 0),i;try{let o=this.get(gc,pn,fe.Self);for(let s of o)s()}finally{Nr(t),qt(r),ye(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Gt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ut(e);let t=Cs(e)?e:Ut(e&&e.provide),r=Hk(e);if(!Cs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ys(void 0,ed,!0),i.factory=()=>hm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ye(null);try{return t.value===Fb?AC(Gt(e)):t.value===ed&&(t.value=Fb,t.value=t.factory()),typeof t.value=="object"&&t.value&&qk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ye(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ut(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function pm(n){let e=xd(n),t=e!==null?e.factory:no(n);if(t!==null)return t;if(n instanceof $)throw new q(204,!1);if(n instanceof Function)return $k(n);throw new q(204,!1)}function $k(n){if(n.length>0)throw new q(204,!1);let t=pk(n);return t!==null?()=>t.factory(n):()=>new n}function Hk(n){if(VC(n))return ys(void 0,n.useValue);{let e=UC(n);return ys(e,ed)}}function UC(n,e,t){let r;if(Cs(n)){let i=Ut(n);return no(i)||pm(i)}else if(VC(n))r=()=>Ut(n.useValue);else if(jk(n))r=()=>n.useFactory(...hm(n.deps||[]));else if(Uk(n))r=()=>W(Ut(n.useExisting));else{let i=Ut(n&&(n.useClass||n.provide));if(zk(n))r=()=>new i(...hm(n.deps));else return no(i)||pm(i)}return r}function hc(n){if(n.destroyed)throw new q(205,!1)}function ys(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zk(n){return!!n.deps}function qk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Gk(n){return typeof n=="function"||typeof n=="object"&&n instanceof $}function gm(n,e){for(let t of n)Array.isArray(t)?gm(t,e):t&&SC(t)?gm(t.\u0275providers,e):e(t)}function ht(n,e){let t;n instanceof mc?(hc(n),t=n):t=new ad(n);let r,i=Nr(t),o=qt(void 0);try{return e()}finally{Nr(i),qt(o)}}function jC(){return MC()!==void 0||ac()!=null}function cy(n){if(!jC())throw new q(-203,!1)}function Wk(n){return typeof n=="function"}var Br=0,pe=1,ne=2,Mt=3,kn=4,Fn=5,dd=6,hd=7,Wt=8,Ds=9,Lr=10,at=11,yc=12,Lb=13,Ps=14,Yn=15,oo=16,vs=17,Vr=18,kd=19,BC=20,gi=21,Jg=22,fd=23,gn=24,ws=25,mn=26,$C=1;var so=7,pd=8,Ts=9,nn=10;function mi(n){return Array.isArray(n)&&typeof n[$C]=="object"}function $r(n){return Array.isArray(n)&&n[$C]===!0}function HC(n){return(n.flags&4)!==0}function xs(n){return n.componentOffset>-1}function uy(n){return(n.flags&1)===1}function Zn(n){return!!n.template}function gd(n){return(n[ne]&512)!==0}function Cc(n){return(n[ne]&256)===256}var mm=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function zC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var nr=(()=>{let n=()=>qC;return n.ngInherit=!0,n})();function qC(n){return n.type.prototype.ngOnChanges&&(n.setInput=Qk),Kk}function Kk(){let n=WC(this),e=n?.current;if(e){let t=n.previous;if(t===ro)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Qk(n,e,t,r,i){let o=this.declaredInputs[r],s=WC(n)||Yk(n,{previous:ro,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new mm(l&&l.currentValue,t,u===ro),zC(n,e,i,t)}var GC="__ngSimpleChanges__";function WC(n){return n[GC]||null}function Yk(n,e){return n[GC]=e}var Vb=null;var ke=function(n,e=null,t){Vb?.(n,e,t)},Zk="svg",Jk="math";function Jn(n){for(;Array.isArray(n);)n=n[Br];return n}function KC(n,e){return Jn(e[n])}function rr(n,e){return Jn(e[n.index])}function QC(n,e){return n.data[e]}function YC(n,e){return n[e]}function Xn(n,e){let t=e[n];return mi(t)?t:t[Br]}function Xk(n){return(n[ne]&4)===4}function ly(n){return(n[ne]&128)===128}function e1(n){return $r(n[Mt])}function md(n,e){return e==null?null:n[e]}function ZC(n){n[vs]=0}function JC(n){n[ne]&1024||(n[ne]|=1024,ly(n)&&Dc(n))}function t1(n,e){for(;n>0;)e=e[Ps],n--;return e}function Fd(n){return!!(n[ne]&9216||n[gn]?.dirty)}function ym(n){n[Lr].changeDetectionScheduler?.notify(8),n[ne]&64&&(n[ne]|=1024),Fd(n)&&Dc(n)}function Dc(n){n[Lr].changeDetectionScheduler?.notify(0);let e=ao(n);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!ly(e)));)e=ao(e)}function XC(n,e){if(Cc(n))throw new q(911,!1);n[gi]===null&&(n[gi]=[]),n[gi].push(e)}function n1(n,e){if(n[gi]===null)return;let t=n[gi].indexOf(e);t!==-1&&n[gi].splice(t,1)}function ao(n){let e=n[Mt];return $r(e)?e[Mt]:e}function dy(n){return n[hd]??=[]}function hy(n){return n.cleanup??=[]}function r1(n,e,t,r){let i=dy(e);i.push(t),n.firstCreatePass&&hy(n).push(r,i.length-1)}var de={lFrame:cD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vm=!1;function i1(){return de.lFrame.elementDepthCount}function o1(){de.lFrame.elementDepthCount++}function s1(){de.lFrame.elementDepthCount--}function eD(){return de.bindingsEnabled}function a1(){return de.skipHydrationRootTNode!==null}function c1(n){return de.skipHydrationRootTNode===n}function u1(){de.skipHydrationRootTNode=null}function we(){return de.lFrame.lView}function Rt(){return de.lFrame.tView}function _n(n){return de.lFrame.contextLView=n,n[Wt]}function En(n){return de.lFrame.contextLView=null,n}function Kt(){let n=tD();for(;n!==null&&n.type===64;)n=n.parent;return n}function tD(){return de.lFrame.currentTNode}function l1(){let n=de.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Tc(n,e){let t=de.lFrame;t.currentTNode=n,t.isParent=e}function nD(){return de.lFrame.isParent}function d1(){de.lFrame.isParent=!1}function h1(){return de.lFrame.contextLView}function rD(){return vm}function Ub(n){let e=vm;return vm=n,e}function Ld(){let n=de.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function f1(){return de.lFrame.bindingIndex}function p1(n){return de.lFrame.bindingIndex=n}function Vd(){return de.lFrame.bindingIndex++}function iD(n){let e=de.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function g1(){return de.lFrame.inI18n}function m1(n,e){let t=de.lFrame;t.bindingIndex=t.bindingRootIndex=n,_m(e)}function y1(){return de.lFrame.currentDirectiveIndex}function _m(n){de.lFrame.currentDirectiveIndex=n}function v1(n){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function oD(){return de.lFrame.currentQueryIndex}function fy(n){de.lFrame.currentQueryIndex=n}function _1(n){let e=n[pe];return e.type===2?e.declTNode:e.type===1?n[Fn]:null}function sD(n,e,t){if(t&fe.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&fe.Host);)if(i=_1(o),i===null||(o=o[Ps],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=de.lFrame=aD();return r.currentTNode=e,r.lView=n,!0}function py(n){let e=aD(),t=n[pe];de.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function aD(){let n=de.lFrame,e=n===null?null:n.child;return e===null?cD(n):e}function cD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function uD(){let n=de.lFrame;return de.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var lD=uD;function gy(){let n=uD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function E1(n){return(de.lFrame.contextLView=t1(n,de.lFrame.contextLView))[Wt]}function mo(){return de.lFrame.selectedIndex}function co(n){de.lFrame.selectedIndex=n}function my(){let n=de.lFrame;return QC(n.tView,n.selectedIndex)}function w1(){return de.lFrame.currentNamespace}var dD=!0;function yy(){return dD}function vy(n){dD=n}function I1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=qC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function hD(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function td(n,e,t){fD(n,e,3,t)}function nd(n,e,t,r){(n[ne]&3)===t&&fD(n,e,t,r)}function Xg(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function fD(n,e,t,r){let i=r!==void 0?n[vs]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[vs]+=65536),(a<o||o==-1)&&(b1(n,t,e,u),n[vs]=(n[vs]&4294901760)+u+2),u++}function jb(n,e){ke(4,n,e);let t=ye(null);try{e.call(n)}finally{ye(t),ke(5,n,e)}}function b1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ne]>>14<n[vs]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,jb(a,o)):jb(a,o)}var Is=-1,uo=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function C1(n){return(n.flags&8)!==0}function D1(n){return(n.flags&16)!==0}function T1(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];S1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function pD(n){return n===3||n===4||n===6}function S1(n){return n.charCodeAt(0)===64}function vc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?Bb(n,t,i,null,e[++r]):Bb(n,t,i,null,null))}}return n}function Bb(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function gD(n){return n!==Is}function yd(n){return n&32767}function A1(n){return n>>16}function vd(n,e){let t=A1(n),r=e;for(;t>0;)r=r[Ps],t--;return r}var Em=!0;function _d(n){let e=Em;return Em=n,e}var M1=256,mD=M1-1,yD=5,R1=0,Qn={};function P1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(pc)&&(r=t[pc]),r==null&&(r=t[pc]=R1++);let i=r&mD,o=1<<i;e.data[n+(i>>yD)]|=o}function Ed(n,e){let t=vD(n,e);if(t!==-1)return t;let r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,em(r.data,n),em(e,null),em(r.blueprint,null));let i=_y(n,e),o=n.injectorIndex;if(gD(i)){let s=yd(i),a=vd(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function em(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function _y(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=bD(i),r===null)return Is;if(t++,i=i[Ps],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Is}function wm(n,e,t){P1(n,e,t)}function x1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(pD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function _D(n,e,t){if(t&fe.Optional||n!==void 0)return n;iy(e,"NodeInjector")}function ED(n,e,t,r){if(t&fe.Optional&&r===void 0&&(r=null),(t&(fe.Self|fe.Host))===0){let i=n[Ds],o=qt(void 0);try{return i?i.get(e,r,t&fe.Optional):RC(e,r,t&fe.Optional)}finally{qt(o)}}return _D(r,e,t)}function wD(n,e,t,r=fe.Default,i){if(n!==null){if(e[ne]&2048&&!(r&fe.Self)){let s=F1(n,e,t,r,Qn);if(s!==Qn)return s}let o=ID(n,e,t,r,Qn);if(o!==Qn)return o}return ED(e,t,r,i)}function ID(n,e,t,r,i){let o=O1(t);if(typeof o=="function"){if(!sD(e,n,r))return r&fe.Host?_D(i,t,r):ED(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&fe.Optional))iy(t);else return s}finally{lD()}}else if(typeof o=="number"){let s=null,a=vD(n,e),u=Is,l=r&fe.Host?e[Yn][Fn]:null;for((a===-1||r&fe.SkipSelf)&&(u=a===-1?_y(n,e):e[a+8],u===Is||!Hb(r,!1)?a=-1:(s=e[pe],a=yd(u),e=vd(u,e)));a!==-1;){let h=e[pe];if($b(o,a,h.data)){let p=N1(a,e,t,s,r,l);if(p!==Qn)return p}u=e[a+8],u!==Is&&Hb(r,e[pe].data[a+8]===l)&&$b(o,a,e)?(s=h,a=yd(u),e=vd(u,e)):a=-1}}return i}function N1(n,e,t,r,i,o){let s=e[pe],a=s.data[n+8],u=r==null?xs(a)&&Em:r!=s&&(a.type&3)!==0,l=i&fe.Host&&o===a,h=rd(a,s,t,u,l);return h!==null?_c(e,s,h,a):Qn}function rd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,y=i?a+h:l;for(let m=p;m<y;m++){let M=s[m];if(m<u&&t===M||m>=u&&M.type===t)return m}if(i){let m=s[u];if(m&&Zn(m)&&m.type===t)return u}return null}function _c(n,e,t,r){let i=n[t],o=e.data;if(i instanceof uo){let s=i;s.resolving&&AC(Ek(o[t]));let a=_d(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?qt(s.injectImpl):null,h=sD(n,r,fe.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&I1(t,o[t],e)}finally{l!==null&&qt(l),_d(a),s.resolving=!1,lD()}}return i}function O1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(pc)?n[pc]:void 0;return typeof e=="number"?e>=0?e&mD:k1:e}function $b(n,e,t){let r=1<<n;return!!(t[e+(n>>yD)]&r)}function Hb(n,e){return!(n&fe.Self)&&!(n&fe.Host&&e)}var to=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wD(this._tNode,this._lView,e,Nd(r),t)}};function k1(){return new to(Kt(),we())}function Hr(n){return Ic(()=>{let e=n.prototype.constructor,t=e[sd]||Im(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[sd]||Im(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Im(n){return bC(n)?()=>{let e=Im(Ut(n));return e&&e()}:no(n)}function F1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!gd(s);){let a=ID(o,s,t,r|fe.Self,Qn);if(a!==Qn)return a;let u=o.parent;if(!u){let l=s[BC];if(l){let h=l.get(t,Qn,r);if(h!==Qn)return h}u=bD(s),s=s[Ps]}o=u}return i}function bD(n){let e=n[pe],t=e.type;return t===2?e.declTNode:t===1?n[Fn]:null}function Ey(n){return x1(Kt(),n)}function zb(n,e=null,t=null,r){let i=CD(n,e,t,r);return i.resolveInjectorInitializers(),i}function CD(n,e=null,t=null,r,i=new Set){let o=[t||pn,Lk(n)];return r=r||(typeof n=="object"?void 0:Gt(n)),new mc(o,e||ay(),r||null,i)}var We=class n{static THROW_IF_NOT_FOUND=eo;static NULL=new ld;static create(e,t){if(Array.isArray(e))return zb({name:""},t,e,"");{let r=e.name??"";return zb({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>W(NC)});static __NG_ELEMENT_ID__=-1};var L1=new $("");L1.__NG_ELEMENT_ID__=n=>{let e=Kt();if(e===null)throw new q(204,!1);if(e.type&2)return e.value;if(n&fe.Optional)return null;throw new q(204,!1)};var DD=!1,Ns=(()=>{class n{static __NG_ELEMENT_ID__=V1;static __NG_ENV_ID__=t=>t}return n})(),bm=class extends Ns{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return XC(this._lView,e),()=>n1(this._lView,e)}};function V1(){return new bm(we())}var lo=class{},TD=new $("",{providedIn:"root",factory:()=>!1});var SD=new $(""),AD=new $(""),ir=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new st(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ud=(()=>{class n{internalPendingTasks=k(ir);scheduler=k(lo);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return _(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Cm=class extends Je{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,jC()&&(this.destroyRef=k(Ns,{optional:!0})??void 0,this.pendingTasks=k(ir,{optional:!0})??void 0)}emit(e){let t=ye(null);try{super.next(e)}finally{ye(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Qe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},tt=Cm;function wd(...n){}function MD(n){let e,t;function r(){n=wd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function qb(n){return queueMicrotask(()=>n()),()=>{n=wd}}var wy="isAngularZone",Id=wy+"_ID",U1=0,be=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new tt(!1);onMicrotaskEmpty=new tt(!1);onStable=new tt(!1);onError=new tt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=DD}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,$1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(wy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,j1,wd,wd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},j1={};function Iy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function B1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){MD(()=>{n.callbackScheduled=!1,Dm(n),n.isCheckStableRunning=!0,Iy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Dm(n)}function $1(n){let e=()=>{B1(n)},t=U1++;n._inner=n._inner.fork({name:"angular",properties:{[wy]:!0,[Id]:t,[Id+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(H1(u))return r.invokeTask(o,s,a,u);try{return Gb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Wb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Gb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!z1(u)&&e(),Wb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Dm(n),Iy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Dm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Gb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Wb(n){n._nesting--,Iy(n)}var Tm=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new tt;onMicrotaskEmpty=new tt;onStable=new tt;onError=new tt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function H1(n){return RD(n,"__ignore_ng_zone__")}function z1(n){return RD(n,"__scheduler_tick__")}function RD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var er=class{_console=console;handleError(e){this._console.error("ERROR",e)}},q1=new $("",{providedIn:"root",factory:()=>{let n=k(be),e=k(er);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Kb(n,e){return wC(n,e)}function G1(n){return wC(EC,n)}var PD=(Kb.required=G1,Kb);function W1(){return Os(Kt(),we())}function Os(n,e){return new ft(rr(n,e))}var ft=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=W1}return n})();function K1(n){return n instanceof ft?n.nativeElement:n}function Q1(n){return typeof n=="function"&&n[fn]!==void 0}function ks(n,e){let t=Sg(n,e?.equal),r=t[fn];return t.set=i=>sc(r,i),t.update=i=>Ag(r,i),t.asReadonly=Y1.bind(t),t}function Y1(){let n=this[fn];if(n.readonlyFn===void 0){let e=()=>this();e[fn]=n,n.readonlyFn=e}return n.readonlyFn}function xD(n){return Q1(n)&&typeof n.set=="function"}function Z1(){return this._results[Symbol.iterator]()}var Sm=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Je}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Pk(e);(this._changesDetected=!Rk(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Z1};function ND(n){return(n.flags&128)===128}var OD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(OD||{}),kD=new Map,J1=0;function X1(){return J1++}function eF(n){kD.set(n[kd],n)}function Am(n){kD.delete(n[kd])}var Qb="__ngContext__";function Sc(n,e){mi(e)?(n[Qb]=e[kd],eF(e)):n[Qb]=e}function FD(n){return VD(n[yc])}function LD(n){return VD(n[kn])}function VD(n){for(;n!==null&&!$r(n);)n=n[kn];return n}var Mm;function UD(n){Mm=n}function tF(){if(Mm!==void 0)return Mm;if(typeof document<"u")return document;throw new q(210,!1)}var by=new $("",{providedIn:"root",factory:()=>nF}),nF="ng",Cy=new $(""),or=new $("",{providedIn:"platform",factory:()=>"unknown"});var Dy=new $("",{providedIn:"root",factory:()=>tF().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rF="h",iF="b";var jD=!1,oF=new $("",{providedIn:"root",factory:()=>jD});var Ty=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Ty||{}),Fs=new $(""),Yb=new Set;function Ac(n){Yb.has(n)||(Yb.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var BD=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=sF}return n})();function sF(){return new BD(we(),Kt())}var _s=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(_s||{}),$D=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),aF=[_s.EarlyRead,_s.Write,_s.MixedReadWrite,_s.Read],cF=(()=>{class n{ngZone=k(be);scheduler=k(lo);errorHandler=k(er,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(Fs,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ke(16),this.executing=!0;for(let r of aF)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ke(17)}register(t){let{view:r}=t;r!==void 0?((r[ws]??=[]).push(t),Dc(r),r[ne]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ty.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Rm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ws];e&&(this.view[ws]=e.filter(t=>t!==this))}};function Sy(n,e){!e?.injector&&cy(Sy);let t=e?.injector??k(We);return Ac("NgAfterNextRender"),lF(n,t,e,!0)}function uF(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function lF(n,e,t,r){let i=e.get($D);i.impl??=e.get(cF);let o=e.get(Fs,null,{optional:!0}),s=t?.phase??_s.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(Ns):null,u=e.get(BD,null,{optional:!0}),l=new Rm(i.impl,uF(n,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var dF=()=>null;function HD(n,e,t=!1){return dF(n,e,t)}function zD(n,e){let t=n.contentQueries;if(t!==null){let r=ye(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];fy(o),a.contentQueries(2,e[s],s)}}}finally{ye(r)}}}function Pm(n,e,t){fy(0);let r=ye(null);try{e(n,t)}finally{ye(r)}}function qD(n,e,t){if(HC(e)){let r=ye(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{ye(r)}}}var tr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(tr||{});var Jl;function hF(){if(Jl===void 0&&(Jl=null,um.trustedTypes))try{Jl=um.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Jl}function Zb(n){return hF()?.createScriptURL(n)||n}var bd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vC})`}};function jd(n){return n instanceof bd?n.changingThisBreaksApplicationSecurity:n}function GD(n,e){let t=fF(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${vC})`)}return t===e}function fF(n){return n instanceof bd&&n.getTypeName()||null}var pF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gF(n){return n=String(n),n.match(pF)?n:"unsafe:"+n}var Ay=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ay||{});function mF(n){let e=KD();return e?e.sanitize(Ay.URL,n)||"":GD(n,"URL")?jd(n):gF(bs(n))}function yF(n){let e=KD();if(e)return Zb(e.sanitize(Ay.RESOURCE_URL,n)||"");if(GD(n,"ResourceURL"))return Zb(jd(n));throw new q(904,!1)}function vF(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?yF:mF}function WD(n,e,t){return vF(e,t)(n)}function KD(){let n=we();return n&&n[Lr].sanitizer}function QD(n){return n instanceof Function?n():n}function _F(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var YD="ng-template";function EF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&_F(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(My(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function My(n){return n.type===4&&n.value!==YD}function wF(n,e,t){let r=n.type===4&&!t?YD:n.value;return e===r}function IF(n,e,t){let r=4,i=n.attrs,o=i!==null?DF(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!On(r)&&!On(u))return!1;if(s&&On(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!wF(n,u,t)||u===""&&e.length===1){if(On(r))return!1;s=!0}}else if(r&8){if(i===null||!EF(n,i,u,t)){if(On(r))return!1;s=!0}}else{let l=e[++a],h=bF(u,i,My(n),t);if(h===-1){if(On(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(On(r))return!1;s=!0}}}}return On(r)||s}function On(n){return(n&1)===0}function bF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return TF(e,n)}function CF(n,e,t=!1){for(let r=0;r<e.length;r++)if(IF(n,e[r],t))return!0;return!1}function DF(n){for(let e=0;e<n.length;e++){let t=n[e];if(pD(t))return e}return n.length}function TF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function Jb(n,e){return n?":not("+e.trim()+")":e}function SF(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!On(s)&&(e+=Jb(o,i),i=""),r=s,o=o||!On(r);t++}return i!==""&&(e+=Jb(o,i)),e}function AF(n){return n.map(SF).join(",")}function MF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!On(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var sr={};function RF(n,e){return n.createText(e)}function PF(n,e,t){n.setValue(e,t)}function ZD(n,e,t){return n.createElement(e,t)}function Cd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function Xb(n,e,t,r,i){r!==null?Cd(n,e,t,r,i):JD(n,e,t)}function xF(n,e,t){n.removeChild(null,e,t)}function NF(n,e,t){n.setAttribute(e,"style",t)}function OF(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&T1(n,e,r),i!==null&&OF(n,e,i),o!==null&&NF(n,e,o)}function Ry(n,e,t,r,i,o,s,a,u,l,h){let p=mn+r,y=p+i,m=kF(p,y),M=typeof l=="function"?l():l;return m[pe]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:h}}function kF(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:sr);return t}function FF(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ry(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Py(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Br]=i,p[ne]=r|4|128|8|64|1024,(l!==null||n&&n[ne]&2048)&&(p[ne]|=2048),ZC(p),p[Mt]=p[Ps]=n,p[Wt]=t,p[Lr]=s||n&&n[Lr],p[at]=a||n&&n[at],p[Ds]=u||n&&n[Ds]||null,p[Fn]=o,p[kd]=X1(),p[dd]=h,p[BC]=l,p[Yn]=e.type==2?n[Yn]:p,p}function LF(n,e,t){let r=rr(e,n),i=FF(t),o=n[Lr].rendererFactory,s=xy(n,Py(n,i,null,eT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function eT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function tT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function xy(n,e){return n[yc]?n[Lb][kn]=e:n[yc]=e,n[Lb]=e,e}function x(n=1){nT(Rt(),we(),mo()+n,!1)}function nT(n,e,t,r){if(!r)if((e[ne]&3)===3){let o=n.preOrderCheckHooks;o!==null&&td(e,o,t)}else{let o=n.preOrderHooks;o!==null&&nd(e,o,0,t)}co(t)}var Bd=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Bd||{});function xm(n,e,t,r){let i=ye(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Bd.SignalBased)!==0&&(u=e[o][fn]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):zC(e,u,o,r)}finally{ye(i)}}function rT(n,e,t,r,i){let o=mo(),s=r&2;try{co(-1),s&&e.length>mn&&nT(n,e,mn,!1),ke(s?2:0,i),t(r,i)}finally{co(o),ke(s?3:1,i)}}function Ny(n,e,t){HF(n,e,t),(t.flags&64)===64&&zF(n,e,t)}function iT(n,e,t=rr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function VF(n,e,t,r){let o=r.get(oF,jD)||t===tr.ShadowDom,s=n.selectRootElement(e,o);return UF(s),s}function UF(n){jF(n)}var jF=()=>null;function BF(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oT(n,e,t,r,i,o,s,a){if(!a&&Oy(e,n,t,r,i)){xs(e)&&$F(t,e.index);return}if(e.type&3){let u=rr(e,t);r=BF(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function $F(n,e){let t=Xn(e,n);t[ne]&16||(t[ne]|=64)}function HF(n,e,t){let r=t.directiveStart,i=t.directiveEnd;xs(t)&&LF(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ed(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=_c(e,n,s,t);if(Sc(u,e),o!==null&&KF(e,s-r,u,a,t,o),Zn(a)){let l=Xn(t.index,e);l[Wt]=_c(e,n,s,t)}}}function zF(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=y1();try{co(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];_m(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&qF(u,l)}}finally{co(-1),_m(s)}}function qF(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function sT(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];CF(e,o.selectors,!1)&&(r??=[],Zn(o)?r.unshift(o):r.push(o))}return r}function GF(n,e,t,r,i,o){let s=rr(n,e);WF(e[at],s,o,n.value,t,r,i)}function WF(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?bs(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function KF(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];xm(r,t,u,l)}}function QF(n,e){let t=n[Ds],r=t?t.get(er,null):null;r&&r.handleError(e)}function Oy(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];xm(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];xm(h,l,r,i),a=!0}return a}function YF(n,e){let t=Xn(e,n),r=t[pe];ZF(r,t);let i=t[Br];i!==null&&t[dd]===null&&(t[dd]=HD(i,t[Ds])),ke(18),ky(r,t,t[Wt]),ke(19,t[Wt])}function ZF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ky(n,e,t){py(e);try{let r=n.viewQuery;r!==null&&Pm(1,r,t);let i=n.template;i!==null&&rT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Vr]?.finishViewCreation(n),n.staticContentQueries&&zD(n,e),n.staticViewQueries&&Pm(2,n.viewQuery,t);let o=n.components;o!==null&&JF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ne]&=-5,gy()}}function JF(n,e){for(let t=0;t<e.length;t++)YF(n,e[t])}function XF(n,e,t,r){let i=ye(null);try{let o=e.tView,a=n[ne]&4096?4096:16,u=Py(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[oo]=l;let h=n[Vr];return h!==null&&(u[Vr]=h.createEmbeddedView(o)),ky(o,u,t),u}finally{ye(i)}}function eC(n,e){return!e||e.firstChild===null||ND(n)}var eL;function Fy(n,e){return eL(n,e)}var Ur=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ur||{});function aT(n){return(n.flags&32)===32}function Es(n,e,t,r,i){if(r!=null){let o,s=!1;$r(r)?o=r:mi(r)&&(s=!0,r=r[Br]);let a=Jn(r);n===0&&t!==null?i==null?JD(e,t,a):Cd(e,t,a,i||null,!0):n===1&&t!==null?Cd(e,t,a,i||null,!0):n===2?xF(e,a,s):n===3&&e.destroyNode(a),o!=null&&hL(e,n,o,t,i)}}function tL(n,e){cT(n,e),e[Br]=null,e[Fn]=null}function nL(n,e,t,r,i,o){r[Br]=i,r[Fn]=e,$d(n,r,t,1,i,o)}function cT(n,e){e[Lr].changeDetectionScheduler?.notify(9),$d(n,e,e[at],2,null,null)}function rL(n){let e=n[yc];if(!e)return tm(n[pe],n);for(;e;){let t=null;if(mi(e))t=e[yc];else{let r=e[nn];r&&(t=r)}if(!t){for(;e&&!e[kn]&&e!==n;)mi(e)&&tm(e[pe],e),e=e[Mt];e===null&&(e=n),mi(e)&&tm(e[pe],e),t=e&&e[kn]}e=t}}function Ly(n,e){let t=n[Ts],r=t.indexOf(e);t.splice(r,1)}function uT(n,e){if(Cc(e))return;let t=e[at];t.destroyNode&&$d(n,e,t,3,null,null),rL(e)}function tm(n,e){if(Cc(e))return;let t=ye(null);try{e[ne]&=-129,e[ne]|=256,e[gn]&&Cg(e[gn]),oL(n,e),iL(n,e),e[pe].type===1&&e[at].destroy();let r=e[oo];if(r!==null&&$r(e[Mt])){r!==e[Mt]&&Ly(r,e);let i=e[Vr];i!==null&&i.detachView(n)}Am(e)}finally{ye(t)}}function iL(n,e){let t=n.cleanup,r=e[hd];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[hd]=null);let i=e[gi];if(i!==null){e[gi]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[fd];if(o!==null){e[fd]=null;for(let s of o)s.destroy()}}function oL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof uo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ke(4,a,u);try{u.call(a)}finally{ke(5,a,u)}}else{ke(4,i,o);try{o.call(i)}finally{ke(5,i,o)}}}}}function sL(n,e,t){return aL(n,e.parent,t)}function aL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Br];if(xs(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===tr.None||i===tr.Emulated)return null}return rr(r,t)}function cL(n,e,t){return lL(n,e,t)}function uL(n,e,t){return n.type&40?rr(n,t):null}var lL=uL,tC;function Vy(n,e,t,r){let i=sL(n,r,e),o=e[at],s=r.parent||e[Fn],a=cL(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Xb(o,i,t[u],a,!1);else Xb(o,i,t,a,!1);tC!==void 0&&tC(o,r,e,t,i)}function fc(n,e){if(e!==null){let t=e.type;if(t&3)return rr(e,n);if(t&4)return Nm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return fc(n,r);{let i=n[e.index];return $r(i)?Nm(-1,i):Jn(i)}}else{if(t&128)return fc(n,e.next);if(t&32)return Fy(e,n)()||Jn(n[e.index]);{let r=lT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ao(n[Yn]);return fc(i,r)}else return fc(n,e.next)}}}return null}function lT(n,e){if(e!==null){let r=n[Yn][Fn],i=e.projection;return r.projection[i]}return null}function Nm(n,e){let t=nn+n+1;if(t<e.length){let r=e[t],i=r[pe].firstChild;if(i!==null)return fc(r,i)}return e[so]}function Uy(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Sc(Jn(a),r),t.flags|=2),!aT(t))if(u&8)Uy(n,e,t.child,r,i,o,!1),Es(e,n,i,a,o);else if(u&32){let l=Fy(t,r),h;for(;h=l();)Es(e,n,i,h,o);Es(e,n,i,a,o)}else u&16?dL(n,e,r,t,i,o):Es(e,n,i,a,o);t=s?t.projectionNext:t.next}}function $d(n,e,t,r,i,o){Uy(t,r,n.firstChild,e,i,o,!1)}function dL(n,e,t,r,i,o){let s=t[Yn],u=s[Fn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Es(e,n,i,h,o)}else{let l=u,h=s[Mt];ND(r)&&(l.flags|=128),Uy(n,e,l,h,i,o,!0)}}function hL(n,e,t,r,i){let o=t[so],s=Jn(t);o!==s&&Es(e,n,r,o,i);for(let a=nn;a<t.length;a++){let u=t[a];$d(u[pe],u,n,e,r,o)}}function fL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ur.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ur.Important),n.setStyle(t,r,i,o))}}function Dd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Jn(o)),$r(o)&&pL(o,r);let s=t.type;if(s&8)Dd(n,e,t.child,r);else if(s&32){let a=Fy(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=lT(e,t);if(Array.isArray(a))r.push(...a);else{let u=ao(e[Yn]);Dd(u[pe],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function pL(n,e){for(let t=nn;t<n.length;t++){let r=n[t],i=r[pe].firstChild;i!==null&&Dd(r[pe],r,i,e)}n[so]!==n[Br]&&e.push(n[so])}function dT(n){if(n[ws]!==null){for(let e of n[ws])e.impl.addSequence(e);n[ws].length=0}}var hT=[];function gL(n){return n[gn]??mL(n)}function mL(n){let e=hT.pop()??Object.create(vL);return e.lView=n,e}function yL(n){n.lView[gn]!==n&&(n.lView=null,hT.push(n))}var vL=he(U({},ic),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Dc(n.lView)},consumerOnSignalRead(){this.lView[gn]=this}});function _L(n){let e=n[gn]??Object.create(EL);return e.lView=n,e}var EL=he(U({},ic),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ao(n.lView);for(;e&&!fT(e[pe]);)e=ao(e);e&&JC(e)},consumerOnSignalRead(){this.lView[gn]=this}});function fT(n){return n.type!==2}function pT(n){if(n[fd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[fd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ne]&8192)}}var wL=100;function gT(n,e=!0,t=0){let i=n[Lr].rendererFactory,o=!1;o||i.begin?.();try{IL(n,t)}catch(s){throw e&&QF(n,s),s}finally{o||i.end?.()}}function IL(n,e){let t=rD();try{Ub(!0),Om(n,e);let r=0;for(;Fd(n);){if(r===wL)throw new q(103,!1);r++,Om(n,1)}}finally{Ub(t)}}function bL(n,e,t,r){if(Cc(e))return;let i=e[ne],o=!1,s=!1;py(e);let a=!0,u=null,l=null;o||(fT(n)?(l=gL(e),u=Il(l)):vg()===null?(a=!1,l=_L(e),u=Il(l)):e[gn]&&(Cg(e[gn]),e[gn]=null));try{ZC(e),p1(n.bindingStartIndex),t!==null&&rT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let m=n.preOrderCheckHooks;m!==null&&td(e,m,null)}else{let m=n.preOrderHooks;m!==null&&nd(e,m,0,null),Xg(e,0)}if(s||CL(e),pT(e),mT(e,0),n.contentQueries!==null&&zD(n,e),!o)if(h){let m=n.contentCheckHooks;m!==null&&td(e,m)}else{let m=n.contentHooks;m!==null&&nd(e,m,1),Xg(e,1)}TL(n,e);let p=n.components;p!==null&&vT(e,p,0);let y=n.viewQuery;if(y!==null&&Pm(2,y,r),!o)if(h){let m=n.viewCheckHooks;m!==null&&td(e,m)}else{let m=n.viewHooks;m!==null&&nd(e,m,2),Xg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Jg]){for(let m of e[Jg])m();e[Jg]=null}o||(dT(e),e[ne]&=-73)}catch(h){throw o||Dc(e),h}finally{l!==null&&(Ig(l,u),a&&yL(l)),gy()}}function mT(n,e){for(let t=FD(n);t!==null;t=LD(t))for(let r=nn;r<t.length;r++){let i=t[r];yT(i,e)}}function CL(n){for(let e=FD(n);e!==null;e=LD(e)){if(!(e[ne]&2))continue;let t=e[Ts];for(let r=0;r<t.length;r++){let i=t[r];JC(i)}}}function DL(n,e,t){ke(18);let r=Xn(e,n);yT(r,t),ke(19,r[Wt])}function yT(n,e){ly(n)&&Om(n,e)}function Om(n,e){let r=n[pe],i=n[ne],o=n[gn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&bg(o)),s||=!1,o&&(o.dirty=!1),n[ne]&=-9217,s)bL(r,n,r.template,n[Wt]);else if(i&8192){pT(n),mT(n,1);let a=r.components;a!==null&&vT(n,a,1),dT(n)}}function vT(n,e,t){for(let r=0;r<e.length;r++)DL(n,e[r],t)}function TL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)co(~i);else{let o=i,s=t[++r],a=t[++r];m1(s,o);let u=e[o];ke(24,u),a(2,u),ke(25,u)}}}finally{co(-1)}}function jy(n,e){let t=rD()?64:1088;for(n[Lr].changeDetectionScheduler?.notify(e);n;){n[ne]|=t;let r=ao(n);if(gd(n)&&!r)return n;n=r}return null}function _T(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function SL(n,e,t,r=!0){let i=e[pe];if(AL(i,e,n,t),r){let s=Nm(t,n),a=e[at],u=a.parentNode(n[so]);u!==null&&nL(i,n[Fn],a,e,u,s)}let o=e[dd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function km(n,e){if(n.length<=nn)return;let t=nn+e,r=n[t];if(r){let i=r[oo];i!==null&&i!==n&&Ly(i,r),e>0&&(n[t-1][kn]=r[kn]);let o=ud(n,nn+e);tL(r[pe],r);let s=o[Vr];s!==null&&s.detachView(o[pe]),r[Mt]=null,r[kn]=null,r[ne]&=-129}return r}function AL(n,e,t,r){let i=nn+r,o=t.length;r>0&&(t[i-1][kn]=e),r<o-nn?(e[kn]=t[i],xC(t,nn+r,e)):(t.push(e),e[kn]=null),e[Mt]=t;let s=e[oo];s!==null&&t!==s&&ET(s,e);let a=e[Vr];a!==null&&a.insertView(n),ym(e),e[ne]|=128}function ET(n,e){let t=n[Ts],r=e[Mt];if(mi(r))n[ne]|=2;else{let i=r[Mt][Yn];e[Yn]!==i&&(n[ne]|=2)}t===null?n[Ts]=[e]:t.push(e)}var Ec=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[pe];return Dd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Wt]}set context(e){this._lView[Wt]=e}get destroyed(){return Cc(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Mt];if($r(e)){let t=e[pd],r=t?t.indexOf(this):-1;r>-1&&(km(e,r),ud(t,r))}this._attachedToViewContainer=!1}uT(this._lView[pe],this._lView)}onDestroy(e){XC(this._lView,e)}markForCheck(){jy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){ym(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,gT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=gd(this._lView),t=this._lView[oo];t!==null&&!e&&Ly(t,this._lView),cT(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=gd(this._lView),r=this._lView[oo];r!==null&&!t&&ET(r,this._lView),ym(this._lView)}};var ho=(()=>{class n{static __NG_ELEMENT_ID__=PL}return n})(),ML=ho,RL=class extends ML{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=XF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ec(i)}};function PL(){return Hd(Kt(),we())}function Hd(n,e){return n.type&4?new RL(e,n,Os(n,e)):null}function By(n,e,t,r,i){let o=n.data[e];if(o===null)o=xL(n,e,t,r,i),g1()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=l1();o.injectorIndex=s===null?-1:s.injectorIndex}return Tc(o,!0),o}function xL(n,e,t,r,i){let o=tD(),s=nD(),a=s?o:o&&o.parent,u=n.data[e]=OL(n,a,t,e,r,i);return NL(n,u,o,s),u}function NL(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function OL(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return a1()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var WQ=new RegExp(`^(\\d+)*(${iF}|${rF})*(.*)`);var kL=()=>null;function nC(n,e){return kL(n,e)}var FL=class{},wT=class{},Fm=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Gt(e)}.`)}},zd=class{static NULL=new Fm},Ss=class{},ar=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>LL()}return n})();function LL(){let n=we(),e=Kt(),t=Xn(e.index,n);return(mi(t)?t:n)[at]}var VL=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var nm={},Lm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Nd(r);let i=this.injector.get(e,nm,r);return i!==nm||t===nm?i:this.parentInjector.get(e,t,r)}};function rC(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Rb(i,a);else if(o==2){let u=a,l=e[++s];r=Rb(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function B(n,e=fe.Default){let t=we();if(t===null)return W(n,e);let r=Kt();return wD(r,t,Ut(n),e)}function IT(){let n="invalid";throw new Error(n)}function bT(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,u=null,l=null,h=jL(s);h===null?a=s:[a,u,l]=h,HL(n,e,t,a,o,u,l)}o!==null&&r!==null&&UL(t,r,o)}function UL(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new q(-301,!1);r.push(e[i],o)}}function jL(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Zn(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,BL(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function BL(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function $L(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function HL(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let y=0;y<a;y++){let m=r[y];!u&&Zn(m)&&(u=!0,$L(n,t,y)),wm(Ed(t,e),n,m.type)}QL(t,n.data.length,a);for(let y=0;y<a;y++){let m=r[y];m.providersResolver&&m.providersResolver(m)}let l=!1,h=!1,p=tT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let y=0;y<a;y++){let m=r[y];if(t.mergedAttrs=vc(t.mergedAttrs,m.hostAttrs),qL(n,t,e,p,m),KL(p,m,i),s!==null&&s.has(m)){let[N,O]=s.get(m);t.directiveToIndex.set(m.type,[p,N+t.directiveStart,O+t.directiveStart])}else(o===null||!o.has(m))&&t.directiveToIndex.set(m.type,p);m.contentQueries!==null&&(t.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(t.flags|=64);let M=m.type.prototype;!l&&(M.ngOnChanges||M.ngOnInit||M.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(M.ngOnChanges||M.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}zL(n,t,o)}function zL(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))iC(0,e,i,r),iC(1,e,i,r),sC(e,r,!1);else{let o=t.get(i);oC(0,e,o,r),oC(1,e,o,r),sC(e,r,!0)}}}function iC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),CT(e,o)}}function oC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),CT(e,s)}}function CT(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function sC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||My(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function qL(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=no(i.type,!0)),s=new uo(o,Zn(i),B);n.blueprint[r]=s,t[r]=s,GL(n,e,r,tT(n,t,i.hostVars,sr),i)}function GL(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;WL(s)!=a&&s.push(a),s.push(t,r,o)}}function WL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function KL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Zn(e)&&(t[""]=n)}}function QL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function DT(n,e,t,r,i,o,s,a){let u=e.consts,l=md(u,s),h=By(e,n,2,r,l);return o&&bT(e,t,h,md(u,a),i),h.mergedAttrs=vc(h.mergedAttrs,h.attrs),h.attrs!==null&&rC(h,h.attrs,!1),h.mergedAttrs!==null&&rC(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function TT(n,e){hD(n,e),HC(e)&&n.queries.elementEnd(e)}var Td=class extends zd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=io(e);return new As(t,this.ngModule)}};function YL(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Bd.SignalBased)!==0};return i&&(o.transform=i),o})}function ZL(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function JL(n,e,t){let r=e instanceof lt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Lm(t,r):t}function XL(n){let e=n.get(Ss,null);if(e===null)throw new q(407,!1);let t=n.get(VL,null),r=n.get(lo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function eV(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return ZD(e,t,t==="svg"?Zk:t==="math"?Jk:null)}var As=class extends wT{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=YL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ZL(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=AF(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){ke(22);let o=ye(null);try{let s=this.componentDef,a=r?["ng-version","19.2.6"]:MF(this.componentDef.selectors[0]),u=Ry(0,null,null,1,0,null,null,null,null,[a],null),l=JL(s,i||this.ngModule,e),h=XL(l),p=h.rendererFactory.createRenderer(null,s),y=r?VF(p,r,s.encapsulation,l):eV(s,p),m=Py(null,u,null,512|eT(s),null,null,h,p,l,null,HD(y,l,!0));m[mn]=y,py(m);let M=null;try{let N=DT(mn,u,m,"#host",()=>[this.componentDef],!0,0);y&&(XD(p,y,N),Sc(y,m)),Ny(u,m,N),qD(u,N,m),TT(u,N),t!==void 0&&tV(N,this.ngContentSelectors,t),M=Xn(N.index,m),m[Wt]=M[Wt],ky(u,m,null)}catch(N){throw M!==null&&Am(M),Am(m),N}finally{ke(23),gy()}return new Vm(this.componentType,m)}finally{ye(o)}}},Vm=class extends FL{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=QC(t[pe],mn),this.location=Os(this._tNode,t),this.instance=Xn(this._tNode.index,t)[Wt],this.hostView=this.changeDetectorRef=new Ec(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Oy(r,i[pe],i,e,t);this.previousInputValues.set(e,t);let s=Xn(r.index,i);jy(s,1)}get injector(){return new to(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var yi=(()=>{class n{static __NG_ELEMENT_ID__=nV}return n})();function nV(){let n=Kt();return AT(n,we())}var rV=yi,ST=class extends rV{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Os(this._hostTNode,this._hostLView)}get injector(){return new to(this._hostTNode,this._hostLView)}get parentInjector(){let e=_y(this._hostTNode,this._hostLView);if(gD(e)){let t=vd(e,this._hostLView),r=yd(e),i=t[pe].data[r+8];return new to(i,t)}else return new to(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=aC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,eC(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!Wk(e),a;if(s)a=t;else{let M=t||{};a=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=s?e:new As(io(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let N=(s?l:this.parentInjector).get(lt,null);N&&(o=N)}let h=io(u.componentType??{}),p=nC(this._lContainer,h?.id??null),y=p?.firstChild??null,m=u.create(l,i,y,o);return this.insertImpl(m.hostView,a,eC(this._hostTNode,p)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(e1(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Mt],l=new ST(u,u[Fn],u[Mt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return SL(s,i,o,r),e.attachToViewContainerRef(),xC(rm(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=aC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=km(this._lContainer,t);r&&(ud(rm(this._lContainer),t),uT(r[pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=km(this._lContainer,t);return r&&ud(rm(this._lContainer),t)!=null?new Ec(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function aC(n){return n[pd]}function rm(n){return n[pd]||(n[pd]=[])}function AT(n,e){let t,r=e[n.index];return $r(r)?t=r:(t=_T(r,e,null,n),e[n.index]=t,xy(e,t)),oV(t,e,n,r),new ST(t,n,e)}function iV(n,e){let t=n[at],r=t.createComment(""),i=rr(e,n),o=t.parentNode(i);return Cd(t,o,r,t.nextSibling(i),!1),r}var oV=cV,sV=()=>!1;function aV(n,e,t){return sV(n,e,t)}function cV(n,e,t,r){if(n[so])return;let i;t.type&8?i=Jn(r):i=iV(e,t),n[so]=i}var Um=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},jm=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)$y(e,t).matches!==null&&this.queries[t].setDirty()}},Bm=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=mV(e):this.predicate=e}},$m=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Hm=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,uV(t,o)),this.matchTNodeWithReadOption(e,t,rd(t,e,o,!1,!1))}else r===ho?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,rd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ft||i===yi||i===ho&&t.type&4)this.addMatch(t.index,-2);else{let o=rd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function uV(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function lV(n,e){return n.type&11?Os(n,e):n.type&4?Hd(n,e):null}function dV(n,e,t,r){return t===-1?lV(e,n):t===-2?hV(n,e,r):_c(n,n[pe],t,e)}function hV(n,e,t){if(t===ft)return Os(e,n);if(t===ho)return Hd(e,n);if(t===yi)return AT(e,n)}function MT(n,e,t,r){let i=e[Vr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(dV(e,h,s[u+1],t.metadata.read))}}i.matches=a}return i.matches}function zm(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=MT(n,e,i,t);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=nn;p<h.length;p++){let y=h[p];y[oo]===y[Mt]&&zm(y[pe],y,l,r)}if(h[Ts]!==null){let p=h[Ts];for(let y=0;y<p.length;y++){let m=p[y];zm(m[pe],m,l,r)}}}}}return r}function fV(n,e){return n[Vr].queries[e].queryList}function pV(n,e,t){let r=new Sm((t&4)===4);return r1(n,e,r,r.destroy),(e[Vr]??=new jm).queries.push(new Um(r))-1}function gV(n,e,t){let r=Rt();return r.firstCreatePass&&(yV(r,new Bm(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),pV(r,we(),e)}function mV(n){return n.split(",").map(e=>e.trim())}function yV(n,e,t){n.queries===null&&(n.queries=new $m),n.queries.track(new Hm(e,t))}function $y(n,e){return n.queries.getByIndex(e)}function vV(n,e){let t=n[pe],r=$y(t,e);return r.crossesNgTemplate?zm(t,n,e,[]):MT(t,n,r,e)}var Ms=class{},Hy=class{};var qm=class extends Ms{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Td(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=kC(e);this._bootstrapComponents=QD(o.bootstrap),this._r3Injector=CD(e,t,[{provide:Ms,useValue:this},{provide:zd,useValue:this.componentFactoryResolver},...r],Gt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Gm=class extends Hy{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new qm(this.moduleType,e,[])}};var Sd=class extends Ms{injector;componentFactoryResolver=new Td(this);instance=null;constructor(e){super();let t=new mc([...e.providers,{provide:Ms,useValue:this},{provide:zd,useValue:this.componentFactoryResolver}],e.parent||ay(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Mc(n,e,t=null){return new Sd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var _V=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=FC(!1,t.type),i=r.length>0?Mc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(W(lt))})}return n})();function Me(n){return Ic(()=>{let e=PT(n),t=he(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===OD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(_V).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||tr.Emulated,styles:n.styles||pn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Ac("NgStandalone"),xT(t);let r=n.dependencies;return t.directiveDefs=cC(r,!1),t.pipeDefs=cC(r,!0),t.id=CV(t),t})}function EV(n){return io(n)||kk(n)}function wV(n){return n!==null}function wn(n){return Ic(()=>({type:n.type,bootstrap:n.bootstrap||pn,declarations:n.declarations||pn,imports:n.imports||pn,exports:n.exports||pn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function IV(n,e){if(n==null)return ro;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Bd.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function bV(n){if(n==null)return ro;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function $e(n){return Ic(()=>{let e=PT(n);return xT(e),e})}function RT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function PT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ro,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||pn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:IV(n.inputs,e),outputs:bV(n.outputs),debugInfo:null}}function xT(n){n.features?.forEach(e=>e(n))}function cC(n,e){if(!n)return null;let t=e?Fk:EV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(wV)}function CV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function DV(n){return Object.getPrototypeOf(n.prototype).constructor}function Qt(n){let e=DV(n.type),t=!0,r=[n];for(;e;){let i;if(Zn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=im(n.inputs),s.declaredInputs=im(n.declaredInputs),s.outputs=im(n.outputs);let a=i.hostBindings;a&&RV(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&AV(n,u),l&&MV(n,l),TV(n,i),hk(n.outputs,i.outputs),Zn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Qt&&(t=!1)}}e=Object.getPrototypeOf(e)}SV(r)}function TV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function SV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vc(i.hostAttrs,t=vc(t,i.hostAttrs))}}function im(n){return n===ro?{}:n===pn?[]:n}function AV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function MV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function RV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function NT(n){return xV(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function PV(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function xV(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function zy(n,e,t){return n[e]=t}function OT(n,e){return n[e]}function jr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Ad(n,e,t,r){let i=jr(n,e,t);return jr(n,e+1,r)||i}function NV(n,e,t,r,i){let o=Ad(n,e,t,r);return jr(n,e+2,i)||o}function OV(n,e,t,r,i,o){let s=Ad(n,e,t,r);return Ad(n,e+2,i,o)||s}function kV(n,e,t,r,i,o,s,a,u){let l=e.consts,h=By(e,n,4,s||null,a||null);eD()&&bT(e,t,h,md(l,u),sT),h.mergedAttrs=vc(h.mergedAttrs,h.attrs),hD(e,h);let p=h.tView=Ry(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function FV(n,e,t,r,i,o,s,a,u,l){let h=t+mn,p=e.firstCreatePass?kV(h,e,n,r,i,o,s,a,u):e.data[h];Tc(p,!1);let y=LV(e,n,p,t);yy()&&Vy(e,n,y,p),Sc(y,n);let m=_T(y,n,y,p);return n[h]=m,xy(n,m),aV(m,p,n),uy(p)&&Ny(e,n,p),u!=null&&iT(n,p,l),p}function re(n,e,t,r,i,o,s,a){let u=we(),l=Rt(),h=md(l.consts,o);return FV(u,l,n,e,t,r,i,h,s,a),re}var LV=VV;function VV(n,e,t,r){return vy(!0),e[at].createComment("")}var kT=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var FT=new $("");var UV=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new Wm})}return n})(),Wm=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function yo(n){return!!n&&typeof n.then=="function"}function LT(n){return!!n&&typeof n.subscribe=="function"}var VT=new $("");function qy(n){return rn([{provide:VT,multi:!0,useValue:n}])}var UT=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=k(VT,{optional:!0})??[];injector=k(We);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ht(this.injector,i);if(yo(o))t.push(o);else if(LT(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qd=new $("");function jV(){Tg(()=>{throw new q(600,!1)})}function BV(n){return n.isBoundToModule}var $V=10;var fo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(q1);afterRenderManager=k($D);zonelessEnabled=k(TD);rootEffectScheduler=k(UV);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Je;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(ir).hasPendingTasks.pipe(te(t=>!t));constructor(){k(Fs,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=k(lt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=We.NULL){ke(10);let o=t instanceof wT;if(!this._injector.get(UT).done){let m="";throw new q(405,m)}let a;o?a=t:a=this._injector.get(zd).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let u=BV(a)?void 0:this._injector.get(Ms),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,y=h.injector.get(FT,null);return y?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),id(this.components,h),y?.unregisterApplication(p)}),this._loadComponent(h),ke(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ke(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ty.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new q(101,!1);let t=ye(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ye(t),this.afterTick.next(),ke(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ss,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<$V;)ke(14),this.synchronizeOnce(),ke(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)HV(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Fd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;id(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(qd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>id(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function id(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function HV(n,e,t,r){if(!t&&!Fd(n))return;gT(n,e,t&&!r?0:1)}function Rc(n,e,t,r){let i=we(),o=Vd();if(jr(i,o,e)){let s=Rt(),a=my();GF(a,i,n,e,t,r)}return Rc}function zV(n,e,t,r){return jr(n,Vd(),t)?e+bs(t)+r:sr}function qV(n,e,t,r,i,o){let s=f1(),a=Ad(n,s,t,i);return iD(2),a?e+bs(t)+r+bs(i)+o:sr}function Xl(n,e){return n<<17|e<<2}function po(n){return n>>17&32767}function GV(n){return(n&2)==2}function WV(n,e){return n&131071|e<<17}function Km(n){return n|2}function Rs(n){return(n&131068)>>2}function om(n,e){return n&-131069|e<<2}function KV(n){return(n&1)===1}function Qm(n){return n|1}function QV(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=po(s),u=Rs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||bc(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let y=po(n[a+1]);n[r+1]=Xl(y,a),y!==0&&(n[y+1]=om(n[y+1],r)),n[a+1]=WV(n[a+1],r)}else n[r+1]=Xl(a,0),a!==0&&(n[a+1]=om(n[a+1],r)),a=r;else n[r+1]=Xl(u,0),a===0?a=r:n[u+1]=om(n[u+1],r),u=r;l&&(n[r+1]=Km(n[r+1])),uC(n,h,r,!0),uC(n,h,r,!1),YV(e,h,n,r,o),s=Xl(a,u),o?e.classBindings=s:e.styleBindings=s}function YV(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&bc(o,e)>=0&&(t[r+1]=Qm(t[r+1]))}function uC(n,e,t,r){let i=n[t+1],o=e===null,s=r?po(i):Rs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];ZV(u,e)&&(a=!0,n[s+1]=r?Qm(l):Km(l)),s=r?po(l):Rs(l)}a&&(n[t+1]=r?Km(i):Qm(i))}function ZV(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?bc(n,e)>=0:!1}function F(n,e,t){let r=we(),i=Vd();if(jr(r,i,e)){let o=Rt(),s=my();oT(o,s,r,n,e,r[at],t,!1)}return F}function lC(n,e,t,r,i){Oy(e,n,t,i?"class":"style",r)}function Ls(n,e){return JV(n,e,null,!0),Ls}function JV(n,e,t,r){let i=we(),o=Rt(),s=iD(2);if(o.firstUpdatePass&&e2(o,n,s,r),e!==sr&&jr(i,s,e)){let a=o.data[mo()];o2(o,a,i,i[at],n,i[s+1]=s2(e,t),r,s)}}function XV(n,e){return e>=n.expandoStartIndex}function e2(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[mo()],s=XV(n,t);a2(o,r)&&e===null&&!s&&(e=!1),e=t2(i,o,e,r),QV(i,o,e,t,s,r)}}function t2(n,e,t,r){let i=v1(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=sm(null,n,e,t,r),t=wc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=sm(i,n,e,t,r),o===null){let u=n2(n,e,r);u!==void 0&&Array.isArray(u)&&(u=sm(null,n,e,u[1],r),u=wc(u,e.attrs,r),r2(n,e,r,u))}else o=i2(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function n2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Rs(r)!==0)return n[po(r)]}function r2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[po(i)]=r}function i2(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=wc(r,s,t)}return wc(r,e.attrs,t)}function sm(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=wc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function wc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Nk(n,s,t?!0:e[++o]))}return n===void 0?null:n}function o2(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=KV(l)?dC(u,e,t,i,Rs(l),s):void 0;if(!Md(h)){Md(o)||GV(l)&&(o=dC(u,null,t,i,a,s));let p=KC(mo(),t);fL(r,s,p,i,o)}}function dC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,y=t[i+1];y===sr&&(y=p?pn:void 0);let m=p?Yg(y,r):h===r?y:void 0;if(l&&!Md(m)&&(m=Yg(u,r)),Md(m)&&(a=m,s))return a;let M=n[i+1];i=s?po(M):Rs(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Yg(u,r))}return a}function Md(n){return n!==void 0}function s2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Gt(jd(n)))),n}function a2(n,e){return(n.flags&(e?8:16))!==0}function E(n,e,t,r){let i=we(),o=Rt(),s=mn+n,a=i[at],u=o.firstCreatePass?DT(s,o,i,e,sT,eD(),t,r):o.data[s],l=c2(o,i,u,a,e,n);i[s]=l;let h=uy(u);return Tc(u,!0),XD(a,l,u),!aT(u)&&yy()&&Vy(o,i,l,u),(i1()===0||h)&&Sc(l,i),o1(),h&&(Ny(o,i,u),qD(o,u,i)),r!==null&&iT(i,u),E}function v(){let n=Kt();nD()?d1():(n=n.parent,Tc(n,!1));let e=n;c1(e)&&u1(),s1();let t=Rt();return t.firstCreatePass&&TT(t,e),e.classesWithoutHost!=null&&C1(e)&&lC(t,e,we(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&D1(e)&&lC(t,e,we(),e.stylesWithoutHost,!1),v}function Oe(n,e,t,r){return E(n,e,t,r),v(),Oe}var c2=(n,e,t,r,i,o)=>(vy(!0),ZD(r,i,w1()));function Ln(){return we()}var Rd="en-US";var u2=Rd;function l2(n){typeof n=="string"&&(u2=n.toLowerCase().replace(/_/g,"-"))}function hC(n,e,t){return function r(i){if(i===Function)return t;let o=xs(n)?Xn(n.index,e):e;jy(o,5);let s=e[Wt],a=fC(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=fC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function fC(n,e,t,r){let i=ye(null);try{return ke(6,e,t),t(r)!==!1}catch(o){return d2(n,o),!1}finally{ke(7,e,t),ye(i)}}function d2(n,e){let t=n[Ds],r=t?t.get(er,null):null;r&&r.handleError(e)}function pC(n,e,t,r,i,o){let s=e[t],a=e[pe],l=a.data[t].outputs[r],h=s[l],p=a.firstCreatePass?hy(a):null,y=dy(e),m=h.subscribe(o),M=y.length;y.push(o,m),p&&p.push(i,n.index,M,-(M+1))}var h2=(n,e,t)=>{};function ue(n,e,t,r){let i=we(),o=Rt(),s=Kt();return jT(o,i,i[at],s,n,e,r),ue}function f2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[hd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function jT(n,e,t,r,i,o,s){let a=uy(r),l=n.firstCreatePass?hy(n):null,h=dy(e),p=!0;if(r.type&3||s){let y=rr(r,e),m=s?s(y):y,M=h.length,N=s?z=>s(Jn(z[r.index])):r.index,O=null;if(!s&&a&&(O=f2(n,e,i,r.index)),O!==null){let z=O.__ngLastListenerFn__||O;z.__ngNextListenerFn__=o,O.__ngLastListenerFn__=o,p=!1}else{o=hC(r,e,o),h2(m,i,o);let z=t.listen(m,i,o);h.push(o,z),l&&l.push(i,N,M,M+1)}}else o=hC(r,e,o);if(p){let y=r.outputs?.[i],m=r.hostDirectiveOutputs?.[i];if(m&&m.length)for(let M=0;M<m.length;M+=2){let N=m[M],O=m[M+1];pC(r,e,N,O,i,o)}if(y&&y.length)for(let M of y)pC(r,e,M,i,i,o)}}function X(n=1){return E1(n)}function Gd(n,e,t){gV(n,e,t)}function Pc(n){let e=we(),t=Rt(),r=oD();fy(r+1);let i=$y(t,r);if(n.dirty&&Xk(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=vV(e,r);n.reset(o,K1),n.notifyOnChanges()}return!0}return!1}function xc(){return fV(we(),oD())}function p2(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function BT(n){let e=h1();return YC(e,mn+n)}function w(n,e=""){let t=we(),r=Rt(),i=n+mn,o=r.firstCreatePass?By(r,i,1,e,null):r.data[i],s=g2(r,t,o,e,n);t[i]=s,yy()&&Vy(r,t,s,o),Tc(o,!1)}var g2=(n,e,t,r,i)=>(vy(!0),RF(e[at],r));function je(n){return Se("",n,""),je}function Se(n,e,t){let r=we(),i=zV(r,n,e,t);return i!==sr&&$T(r,mo(),i),Se}function Gy(n,e,t,r,i){let o=we(),s=qV(o,n,e,t,r,i);return s!==sr&&$T(o,mo(),s),Gy}function $T(n,e,t){let r=KC(e,n);PF(n[at],r,t)}function Vs(n,e,t){xD(e)&&(e=e());let r=we(),i=Vd();if(jr(r,i,e)){let o=Rt(),s=my();oT(o,s,r,n,e,r[at],t,!1)}return Vs}function Nc(n,e){let t=xD(n);return t&&n.set(e),t}function Us(n,e){let t=we(),r=Rt(),i=Kt();return jT(r,t,t[at],i,n,e),Us}function m2(n,e,t){let r=Rt();if(r.firstCreatePass){let i=Zn(n);Ym(t,r.data,r.blueprint,i,!0),Ym(e,r.data,r.blueprint,i,!1)}}function Ym(n,e,t,r,i){if(n=Ut(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ym(n[o],e,t,r,i);else{let o=Rt(),s=we(),a=Kt(),u=Cs(n)?n:Ut(n.provide),l=UC(n),h=a.providerIndexes&1048575,p=a.directiveStart,y=a.providerIndexes>>20;if(Cs(n)||!n.multi){let m=new uo(l,i,B),M=cm(u,e,i?h:h+y,p);M===-1?(wm(Ed(a,s),o,u),am(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),s.push(m)):(t[M]=m,s[M]=m)}else{let m=cm(u,e,h+y,p),M=cm(u,e,h,h+y),N=m>=0&&t[m],O=M>=0&&t[M];if(i&&!O||!i&&!N){wm(Ed(a,s),o,u);let z=_2(i?v2:y2,t.length,i,r,l);!i&&O&&(t[M].providerFactory=z),am(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),s.push(z)}else{let z=HT(t[i?M:m],l,!i&&r);am(o,n,m>-1?m:M,z)}!i&&r&&O&&t[M].componentProviders++}}}function am(n,e,t,r){let i=Cs(e),o=Bk(e);if(i||o){let u=(o?Ut(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function HT(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function cm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function y2(n,e,t,r){return Zm(this.multi,[])}function v2(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=_c(t,t[pe],this.providerFactory.index,r);o=a.slice(0,s),Zm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],Zm(i,o);return o}function Zm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function _2(n,e,t,r,i){let o=new uo(n,t,B);return o.multi=[],o.index=e,o.componentProviders=0,HT(o,i,r&&!t),o}function cr(n,e=[]){return t=>{t.providersResolver=(r,i)=>m2(r,i?i(n):n,e)}}function wt(n,e,t){let r=Ld()+n,i=we();return i[r]===sr?zy(i,r,t?e.call(t):e()):OT(i,r)}function vo(n,e,t,r){return qT(we(),Ld(),n,e,t,r)}function zT(n,e,t,r,i,o,s,a,u,l){let h=Ld()+n,p=we(),y=OV(p,h,t,r,i,o);return NV(p,h+4,s,a,u)||y?zy(p,h+7,l?e.call(l,t,r,i,o,s,a,u):e(t,r,i,o,s,a,u)):OT(p,h+7)}function E2(n,e){let t=n[e];return t===sr?void 0:t}function qT(n,e,t,r,i,o){let s=e+t;return jr(n,s,i)?zy(n,s+1,o?r.call(o,i):r(i)):E2(n,s+1)}function GT(n,e){let t=Rt(),r,i=n+mn;t.firstCreatePass?(r=w2(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=no(r.type,!0)),s,a=qt(B);try{let u=_d(!1),l=o();return _d(u),p2(t,we(),i,l),l}finally{qt(a)}}function w2(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function WT(n,e,t){let r=n+mn,i=we(),o=YC(i,r);return I2(i,r)?qT(i,Ld(),e,o.transform,t,o):o.transform(t)}function I2(n,e){return n[pe].data[e].pure}function KT(n,e){return Hd(n,e)}var go=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},QT=new go("19.2.6"),Jm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Wd=(()=>{class n{compileModuleSync(t){return new Gm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=kC(t),o=QD(i.declarations).reduce((s,a)=>{let u=io(a);return u&&s.push(new As(u)),s},[]);return new Jm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var b2=(()=>{class n{zone=k(be);changeDetectionScheduler=k(lo);applicationRef=k(fo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function C2({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new be(he(U({},D2()),{scheduleInRootZone:t})),[{provide:be,useFactory:n},{provide:gc,multi:!0,useFactory:()=>{let r=k(b2,{optional:!0});return()=>r.initialize()}},{provide:gc,multi:!0,useFactory:()=>{let r=k(T2);return()=>{r.initialize()}}},e===!0?{provide:SD,useValue:!0}:[],{provide:AD,useValue:t??DD}]}function D2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var T2=(()=>{class n{subscription=new Qe;initialized=!1;zone=k(be);pendingTasks=k(ir);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var S2=(()=>{class n{appRef=k(fo);taskService=k(ir);ngZone=k(be);zonelessEnabled=k(TD);tracing=k(Fs,{optional:!0});disableScheduling=k(SD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Qe;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Id):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(AD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Tm||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?qb:MD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Id+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qb(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function A2(){return typeof $localize<"u"&&$localize.locale||Rd}var Wy=new $("",{providedIn:"root",factory:()=>k(Wy,fe.Optional|fe.SkipSelf)||A2()});var Xm=new $(""),M2=new $("");function dc(n){return!n.moduleRef}function R2(n){let e=dc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(be);return t.run(()=>{dc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(er,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),dc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Xm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Xm);s.add(o),n.moduleRef.onDestroy(()=>{id(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return x2(r,t,()=>{let o=e.get(UT);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Wy,Rd);if(l2(s||Rd),!e.get(M2,!0))return dc(n)?e.get(fo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(dc(n)){let u=e.get(fo);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return P2(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function P2(n,e){let t=n.injector.get(fo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new q(-403,!1);e.push(n)}function x2(n,e,t){try{let r=t();return yo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var od=null;function N2(n=[],e){return We.create({name:e,providers:[{provide:Od,useValue:"platform"},{provide:Xm,useValue:new Set([()=>od=null])},...n]})}function O2(n=[]){if(od)return od;let e=N2(n);return od=e,jV(),k2(e),e}function k2(n){let e=n.get(Cy,null);ht(n,()=>{e?.forEach(t=>t())})}function Ky(){return!1}var _o=(()=>{class n{static __NG_ELEMENT_ID__=F2}return n})();function F2(n){return L2(Kt(),we(),(n&16)===16)}function L2(n,e,t){if(xs(n)&&!t){let r=Xn(n.index,e);return new Ec(r,r)}else if(n.type&175){let r=e[Yn];return new Ec(r,e)}return null}var ey=class{constructor(){}supports(e){return NT(e)}create(e){return new ty(e)}},V2=(n,e)=>e,ty=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||V2}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<gC(r,i,o)?t:r,a=gC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let y=0;y<l;y++){let m=y<o.length?o[y]:o[y]=0,M=m+y;h<=M&&M<l&&(o[y]=m+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!NT(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,PV(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new ny(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},ny=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},ry=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Pd=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new ry,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function gC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function mC(){return new Qy([new ey])}var Qy=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:mC});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||mC()),deps:[[n,new Mk,new dt]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function YT(n){ke(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=O2(r),o=[C2({}),{provide:lo,useExisting:S2},...t||[]],s=new Sd({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return R2({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{ke(9)}}function vi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ur(n){return Mg(n)}function js(n,e){return Dg(n,e?.equal)}var yC=class{[fn];constructor(e){this[fn]=e}destroy(){this[fn].destroy()}};function ZT(n){let e=io(n);if(!e)return null;let t=new As(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var nt=new $("");var eS=null;function In(){return eS}function Yy(n){eS??=n}var Oc=class{},kc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(tS),providedIn:"platform"})}return n})(),Zy=new $(""),tS=(()=>{class n extends kc{_location;_history;_doc=k(nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return In().getBaseHref(this._doc)}onPopState(t){let r=In().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=In().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Kd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function JT(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Vn(n){return n&&n[0]!=="?"?`?${n}`:n}var Un=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(Yd),providedIn:"root"})}return n})(),Qd=new $(""),Yd=(()=>{class n extends Un{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Kd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Vn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Vn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Vn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(W(kc),W(Qd,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_i=(()=>{class n{_subject=new Je;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=B2(JT(XT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Vn(r))}normalize(t){return n.stripTrailingSlash(j2(this._basePath,XT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Vn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Vn;static joinWithSlash=Kd;static stripTrailingSlash=JT;static \u0275fac=function(r){return new(r||n)(W(Un))};static \u0275prov=H({token:n,factory:()=>U2(),providedIn:"root"})}return n})();function U2(){return new _i(W(Un))}function j2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function XT(n){return n.replace(/\/index.html$/,"")}function B2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Jy=(()=>{class n extends Un{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Kd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Vn(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Vn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(W(kc),W(Qd,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var Zd=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},bn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Zd(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),nS(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);nS(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(B(yi),B(ho),B(Qy))};static \u0275dir=$e({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function nS(n,e){n.context.$implicit=e.item}var He=(()=>{class n{_viewContainer;_context=new Jd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){rS(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){rS(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(B(yi),B(ho))};static \u0275dir=$e({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Jd=class{$implicit=null;ngIf=null};function rS(n,e){if(n&&!n.createEmbeddedView)throw new q(2020,!1)}var Xy=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=RT({name:"json",type:n,pure:!1})}return n})();var Re=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=wn({type:n});static \u0275inj=vn({})}return n})();function Fc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ev="browser",iS="server";function Xd(n){return n===iS}var Eo=class{};var oS=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new tv(k(nt),window)})}return n})(),tv=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=$2(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function $2(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var nh=new $(""),ov=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(W(nh),W(be))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Lc=class{_doc;constructor(e){this._doc=e}manager},eh="ng-app-id";function sS(n){for(let e of n)e.remove()}function aS(n,e){let t=e.createElement("style");return t.textContent=n,t}function H2(n,e,t,r){let i=n.head?.querySelectorAll(`style[${eh}="${e}"],link[${eh}="${e}"]`);if(i)for(let o of i)o.removeAttribute(eh),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function rv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var sv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Xd(o),H2(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,aS);r?.forEach(i=>this.addUsage(i,this.external,rv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(sS(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])sS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,aS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,rv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(eh,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(W(nt),W(by),W(Dy,8),W(or))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),nv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},av=/%COMP%/g;var uS="%COMP%",z2=`_nghost-${uS}`,q2=`_ngcontent-${uS}`,G2=!0,W2=new $("",{providedIn:"root",factory:()=>G2});function K2(n){return q2.replace(av,n)}function Q2(n){return z2.replace(av,n)}function lS(n,e){return e.map(t=>t.replace(av,n))}var cv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u,l=null,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=Xd(a),this.defaultRenderer=new Vc(t,s,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===tr.ShadowDom&&(r=he(U({},r),{encapsulation:tr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof th?i.applyToHost(t):i instanceof Uc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,y=this.tracingService;switch(r.encapsulation){case tr.Emulated:o=new th(u,l,r,this.appId,h,s,a,p,y);break;case tr.ShadowDom:return new iv(u,l,t,r,s,a,this.nonce,p,y);default:o=new Uc(u,l,r,h,s,a,p,y);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(W(ov),W(sv),W(by),W(W2),W(nt),W(or),W(be),W(Dy),W(Fs,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Vc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(nv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(cS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=nv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=nv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ur.DashCase|Ur.Important)?e.style.setProperty(t,r,i&Ur.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ur.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=In().getGlobalEventTarget(this.doc,e),!e))throw new q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function cS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var iv=class extends Vc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=lS(i.id,h);for(let y of h){let m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=y,this.shadowRoot.appendChild(m)}let p=i.getExternalStyles?.();if(p)for(let y of p){let m=rv(y,o);a&&m.setAttribute("nonce",a),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Uc=class extends Vc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?lS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},th=class extends Uc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=K2(h),this.hostAttr=Q2(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var rh=class n extends Oc{supportsDOMEvents=!0;static makeCurrent(){Yy(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Y2();return t==null?null:Z2(t)}resetBaseElement(){jc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fc(document.cookie,e)}},jc=null;function Y2(){return jc=jc||document.querySelector("base"),jc?jc.getAttribute("href"):null}function Z2(n){return new URL(n,document.baseURI).pathname}var J2=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),hS=(()=>{class n extends Lc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(W(nt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),dS=["alt","control","meta","shift"],X2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},eU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},fS=(()=>{class n extends Lc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>In().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),dS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=X2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),dS.forEach(s=>{if(s!==i){let a=eU[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(W(nt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function uv(n,e){return YT(U({rootComponent:n},tU(e)))}function tU(n){return{appProviders:[...sU,...n?.providers??[]],platformProviders:oU}}function nU(){rh.makeCurrent()}function rU(){return new er}function iU(){return UD(document),document}var oU=[{provide:or,useValue:ev},{provide:Cy,useValue:nU,multi:!0},{provide:nt,useFactory:iU}];var sU=[{provide:Od,useValue:"root"},{provide:er,useFactory:rU},{provide:nh,useClass:hS,multi:!0,deps:[nt]},{provide:nh,useClass:fS,multi:!0,deps:[nt]},cv,sv,ov,{provide:Ss,useExisting:cv},{provide:Eo,useClass:J2},[]];var $s=class{},Bc=class{},lr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var oh=class{encodeKey(e){return pS(e)}encodeValue(e){return pS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function aU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=t.get(s)||[];u.push(a),t.set(s,u)}),t}var cU=/%(\d[a-f0-9])/gi,uU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pS(n){return encodeURIComponent(n).replace(cU,(e,t)=>uU[t]??e)}function ih(n){return`${n}`}var zr=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new oh,e.fromString){if(e.fromObject)throw new q(2805,!1);this.map=aU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ih):[ih(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ih(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ih(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var sh=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function lU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function gS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function mS(n){return typeof Blob<"u"&&n instanceof Blob}function yS(n){return typeof FormData<"u"&&n instanceof FormData}function dU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var vS="Content-Type",_S="Accept",wS="X-Request-URL",IS="text/plain",bS="application/json",hU=`${bS}, ${IS}, */*`,Bs=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(lU(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new lr,this.context??=new sh,!this.params)this.params=new zr,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||gS(this.body)||mS(this.body)||yS(this.body)||dU(this.body)?this.body:this.body instanceof zr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||yS(this.body)?null:mS(this.body)?this.body.type||null:gS(this.body)?null:typeof this.body=="string"?IS:this.body instanceof zr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?bS:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((y,m)=>y.set(m,e.setHeaders[m]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((y,m)=>y.set(m,e.setParams[m]),h)),new n(t,r,s,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},wo=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(wo||{}),Hs=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new lr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ah=class n extends Hs{constructor(e={}){super(e)}type=wo.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},$c=class n extends Hs{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=wo.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Hc=class extends Hs{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},fU=200,pU=204;function lv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Ei=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Bs)o=t;else{let u;i.headers instanceof lr?u=i.headers:u=new lr(i.headers);let l;i.params&&(i.params instanceof zr?l=i.params:l=new zr({fromObject:i.params})),o=new Bs(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=Z(o).pipe(Kn(u=>this.handler.handle(u)));if(t instanceof Bs||i.observe==="events")return s;let a=s.pipe(Vt(u=>u instanceof $c));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(te(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new q(2806,!1);return u.body}));case"blob":return a.pipe(te(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new q(2807,!1);return u.body}));case"text":return a.pipe(te(u=>{if(u.body!==null&&typeof u.body!="string")throw new q(2808,!1);return u.body}));case"json":default:return a.pipe(te(u=>u.body))}case"response":return a;default:throw new q(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new zr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,lv(i,r))}post(t,r,i={}){return this.request("POST",t,lv(i,r))}put(t,r,i={}){return this.request("PUT",t,lv(i,r))}static \u0275fac=function(r){return new(r||n)(W($s))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var gU=new $("");function CS(n,e){return e(n)}function mU(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function yU(n,e,t){return(r,i)=>ht(t,()=>e(r,o=>n(o,i)))}var DS=new $(""),hv=new $(""),TS=new $(""),fv=new $("",{providedIn:"root",factory:()=>!0});function vU(){let n=null;return(e,t)=>{n===null&&(n=(k(DS,{optional:!0})??[]).reduceRight(mU,CS));let r=k(ir);if(k(fv)){let o=r.add();return n(e,t).pipe(pi(()=>r.remove(o)))}else return n(e,t)}}var ch=(()=>{class n extends $s{backend;injector;chain=null;pendingTasks=k(ir);contributeToStability=k(fv);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(hv),...this.injector.get(TS,[])]));this.chain=r.reduceRight((i,o)=>yU(i,o,this.injector),CS)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(pi(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(W(Bc),W(lt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var _U=/^\)\]\}',?\n/,EU=RegExp(`^${wS}:`,"m");function wU(n){return"responseURL"in n&&n.responseURL?n.responseURL:EU.test(n.getAllResponseHeaders())?n.getResponseHeader(wS):null}var dv=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new q(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Ne(r.\u0275loadImpl()):Z(null)).pipe(zt(()=>new le(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((N,O)=>s.setRequestHeader(N,O.join(","))),t.headers.has(_S)||s.setRequestHeader(_S,hU),!t.headers.has(vS)){let N=t.detectContentTypeHeader();N!==null&&s.setRequestHeader(vS,N)}if(t.responseType){let N=t.responseType.toLowerCase();s.responseType=N!=="json"?N:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let N=s.statusText||"OK",O=new lr(s.getAllResponseHeaders()),z=wU(s)||t.url;return u=new ah({headers:O,status:s.status,statusText:N,url:z}),u},h=()=>{let{headers:N,status:O,statusText:z,url:ce}=l(),K=null;O!==pU&&(K=typeof s.response>"u"?s.responseText:s.response),O===0&&(O=K?fU:0);let xe=O>=200&&O<300;if(t.responseType==="json"&&typeof K=="string"){let vt=K;K=K.replace(_U,"");try{K=K!==""?JSON.parse(K):null}catch(Te){K=vt,xe&&(xe=!1,K={error:Te,text:K})}}xe?(o.next(new $c({body:K,headers:N,status:O,statusText:z,url:ce||void 0})),o.complete()):o.error(new Hc({error:K,headers:N,status:O,statusText:z,url:ce||void 0}))},p=N=>{let{url:O}=l(),z=new Hc({error:N,status:s.status||0,statusText:s.statusText||"Unknown Error",url:O||void 0});o.error(z)},y=!1,m=N=>{y||(o.next(l()),y=!0);let O={type:wo.DownloadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),t.responseType==="text"&&s.responseText&&(O.partialText=s.responseText),o.next(O)},M=N=>{let O={type:wo.UploadProgress,loaded:N.loaded};N.lengthComputable&&(O.total=N.total),o.next(O)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",p),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",M)),s.send(a),o.next({type:wo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",p),t.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",M)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(W(Eo))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),SS=new $(""),IU="XSRF-TOKEN",bU=new $("",{providedIn:"root",factory:()=>IU}),CU="X-XSRF-TOKEN",DU=new $("",{providedIn:"root",factory:()=>CU}),zc=class{},TU=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(W(nt),W(or),W(bU))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function SU(n,e){let t=n.url.toLowerCase();if(!k(SS)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=k(zc).getToken(),i=k(DU);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var pv=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(pv||{});function AU(n,e){return{\u0275kind:n,\u0275providers:e}}function AS(...n){let e=[Ei,dv,ch,{provide:$s,useExisting:ch},{provide:Bc,useFactory:()=>k(gU,{optional:!0})??k(dv)},{provide:hv,useValue:SU,multi:!0},{provide:SS,useValue:!0},{provide:zc,useClass:TU}];for(let t of n)e.push(...t.\u0275providers);return rn(e)}var ES=new $("");function MS(){return AU(pv.LegacyInterceptors,[{provide:ES,useFactory:vU},{provide:hv,useExisting:ES,multi:!0}])}var Io=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=wn({type:n});static \u0275inj=vn({providers:[AS(MS())]})}return n})();var RS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(W(nt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ae="primary",ru=Symbol("RouteTitle"),Ev=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Do(n){return new Ev(n)}function VS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function RU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dr(n[t],e[t]))return!1;return!0}function dr(n,e){let t=n?wv(n):void 0,r=e?wv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!US(n[i],e[i]))return!1;return!0}function wv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function US(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function jS(n){return n.length>0?n[n.length-1]:null}function Di(n){return zg(n)?n:yo(n)?Ne(Promise.resolve(n)):Z(n)}var PU={exact:$S,subset:HS},BS={exact:xU,subset:NU,ignored:()=>!0};function PS(n,e,t){return PU[t.paths](n.root,e.root,t.matrixParams)&&BS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function xU(n,e){return dr(n,e)}function $S(n,e,t){if(!bo(n.segments,e.segments)||!dh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!$S(n.children[r],e.children[r],t))return!1;return!0}function NU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>US(n[t],e[t]))}function HS(n,e,t){return zS(n,e,e.segments,t)}function zS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!bo(i,t)||e.hasChildren()||!dh(i,t,r))}else if(n.segments.length===t.length){if(!bo(n.segments,t)||!dh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!HS(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!bo(n.segments,i)||!dh(n.segments,i,r)||!n.children[ae]?!1:zS(n.children[ae],e,o,r)}}function dh(n,e,t){return e.every((r,i)=>BS[t](n[i].parameters,r.parameters))}var fr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ae([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){return FU.serialize(this)}},Ae=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hh(this)}},wi=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Do(this.parameters),this._parameterMap}toString(){return GS(this)}};function OU(n,e){return bo(n,e)&&n.every((t,r)=>dr(t.parameters,e[r].parameters))}function bo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function kU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var To=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new Ii,providedIn:"root"})}return n})(),Ii=class{parse(e){let t=new bv(e);return new fr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qc(e.root,!0)}`,r=UU(e.queryParams),i=typeof e.fragment=="string"?`#${LU(e.fragment)}`:"";return`${t}${r}${i}`}},FU=new Ii;function hh(n){return n.segments.map(e=>GS(e)).join("/")}function qc(n,e){if(!n.hasChildren())return hh(n);if(e){let t=n.children[ae]?qc(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${qc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=kU(n,(r,i)=>i===ae?[qc(n.children[ae],!1)]:[`${i}:${qc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${hh(n)}/${t[0]}`:`${hh(n)}/(${t.join("//")})`}}function qS(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uh(n){return qS(n).replace(/%3B/gi,";")}function LU(n){return encodeURI(n)}function Iv(n){return qS(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fh(n){return decodeURIComponent(n)}function xS(n){return fh(n.replace(/\+/g,"%20"))}function GS(n){return`${Iv(n.path)}${VU(n.parameters)}`}function VU(n){return Object.entries(n).map(([e,t])=>`;${Iv(e)}=${Iv(t)}`).join("")}function UU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${uh(t)}=${uh(i)}`).join("&"):`${uh(t)}=${uh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var jU=/^[^\/()?;#]+/;function mv(n){let e=n.match(jU);return e?e[0]:""}var BU=/^[^\/()?;=#]+/;function $U(n){let e=n.match(BU);return e?e[0]:""}var HU=/^[^=?&#]+/;function zU(n){let e=n.match(HU);return e?e[0]:""}var qU=/^[^&#]+/;function GU(n){let e=n.match(qU);return e?e[0]:""}var bv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new Ae(e,t)),r}parseSegment(){let e=mv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new wi(fh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=$U(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=mv(this.remaining);i&&(r=i,this.capture(r))}e[fh(t)]=fh(r)}parseQueryParam(e){let t=zU(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=GU(this.remaining);s&&(r=s,this.capture(r))}let i=xS(t),o=xS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new Ae([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function WS(n){return n.segments.length>0?new Ae([],{[ae]:n}):n}function KS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=KS(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ae(n.segments,e);return WU(t)}function WU(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new Ae(n.segments.concat(e.segments),e.children)}return n}function bi(n){return n instanceof fr}function QS(n,e,t=null,r=null){let i=YS(n);return ZS(i,e,t,r)}function YS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new Ae(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=WS(r);return e??i}function ZS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return yv(i,i,i,t,r);let o=KU(e);if(o.toRoot())return yv(i,i,new Ae([],{}),t,r);let s=QU(o,i,n),a=s.processChildren?Wc(s.segmentGroup,s.index,o.commands):XS(s.segmentGroup,s.index,o.commands);return yv(i,s.segmentGroup,a,t,r)}function gh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Qc(n){return typeof n=="object"&&n!=null&&n.outlets}function yv(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=JS(n,e,t);let a=WS(KS(s));return new fr(a,o,i)}function JS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=JS(o,e,t)}),new Ae(n.segments,r)}var mh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&gh(r[0]))throw new q(4003,!1);let i=r.find(Qc);if(i&&i!==jS(r))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function KU(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new mh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new mh(t,e,r)}var Gs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function QU(n,e,t){if(n.isAbsolute)return new Gs(e,!0,0);if(!t)return new Gs(e,!1,NaN);if(t.parent===null)return new Gs(t,!0,0);let r=gh(n.commands[0])?0:1,i=t.segments.length-1+r;return YU(t,i,n.numberOfDoubleDots)}function YU(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new q(4005,!1);i=r.segments.length}return new Gs(r,!1,i-o)}function ZU(n){return Qc(n[0])?n[0].outlets:{[ae]:n}}function XS(n,e,t){if(n??=new Ae([],{}),n.segments.length===0&&n.hasChildren())return Wc(n,e,t);let r=JU(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ae(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new Ae(n.segments.slice(r.pathIndex),n.children),Wc(o,0,i)}else return r.match&&i.length===0?new Ae(n.segments,{}):r.match&&!n.hasChildren()?Cv(n,e,t):r.match?Wc(n,0,i):Cv(n,e,t)}function Wc(n,e,t){if(t.length===0)return new Ae(n.segments,{});{let r=ZU(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=Wc(n.children[ae],e,t);return new Ae(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=XS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ae(n.segments,i)}}function JU(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Qc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!OS(u,l,s))return o;r+=2}else{if(!OS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Cv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Qc(o)){let u=XU(o.outlets);return new Ae(r,u)}if(i===0&&gh(t[0])){let u=n.segments[e];r.push(new wi(u.path,NS(t[0]))),i++;continue}let s=Qc(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&gh(a)?(r.push(new wi(s,NS(a))),i+=2):(r.push(new wi(s,{})),i++)}return new Ae(r,{})}function XU(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Cv(new Ae([],{}),0,r))}),e}function NS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function OS(n,e,t){return n==t.path&&dr(e,t.parameters)}var ph="imperative",ct=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ct||{}),sn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ci=class extends sn{type=ct.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cn=class extends sn{urlAfterRedirects;type=ct.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Zt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Zt||{}),Ks=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ks||{}),hr=class extends sn{reason;code;type=ct.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pr=class extends sn{reason;code;type=ct.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Qs=class extends sn{error;target;type=ct.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yc=class extends sn{urlAfterRedirects;state;type=ct.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yh=class extends sn{urlAfterRedirects;state;type=ct.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vh=class extends sn{urlAfterRedirects;state;shouldActivate;type=ct.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_h=class extends sn{urlAfterRedirects;state;type=ct.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Eh=class extends sn{urlAfterRedirects;state;type=ct.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wh=class{route;type=ct.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ih=class{route;type=ct.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bh=class{snapshot;type=ct.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ch=class{snapshot;type=ct.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dh=class{snapshot;type=ct.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Th=class{snapshot;type=ct.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ys=class{routerEvent;position;anchor;type=ct.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Zc=class{},Zs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function ej(n,e){return n.providers&&!n._injector&&(n._injector=Mc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function jn(n){return n.outlet||ae}function tj(n,e){let t=n.filter(r=>jn(r)===e);return t.push(...n.filter(r=>jn(r)!==e)),t}function iu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Sh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return iu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new So(this.rootInjector)}},So=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Sh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(W(lt))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ah=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Dv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Dv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Tv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Tv(e,this._root).map(t=>t.value)}};function Dv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Dv(n,t);if(r)return r}return null}function Tv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Tv(n,t);if(r.length)return r.unshift(e),r}return[]}var on=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function qs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Jc=class extends Ah{snapshot;constructor(e,t){super(e),this.snapshot=t,Ov(this,e)}toString(){return this.snapshot.toString()}};function eA(n){let e=nj(n),t=new st([new wi("",{})]),r=new st({}),i=new st({}),o=new st({}),s=new st(""),a=new Dn(t,r,o,s,i,ae,n,e.root);return a.snapshot=e.root,new Jc(new on(a,[]),e)}function nj(n){let e={},t={},r={},i="",o=new Co([],e,r,i,t,ae,n,null,{});return new Xc("",new on(o,[]))}var Dn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(te(l=>l[ru]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>Do(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>Do(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&nA(i)&&(r.resolve[ru]=i.title),r}var Co=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ru]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Do(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Do(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Xc=class extends Ah{url;constructor(e,t){super(t),this.url=e,Ov(this,t)}toString(){return tA(this._root)}};function Ov(n,e){e.value._routerState=n,e.children.forEach(t=>Ov(n,t))}function tA(n){let e=n.children.length>0?` { ${n.children.map(tA).join(", ")} } `:"";return`${n.value}${e}`}function vv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),dr(e.params,t.params)||n.paramsSubject.next(t.params),RU(e.url,t.url)||n.urlSubject.next(t.url),dr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Sv(n,e){let t=dr(n.params,e.params)&&OU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Sv(n.parent,e.parent))}function nA(n){return typeof n.title=="string"||n.title===null}var rA=new $(""),ou=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ae;activateEvents=new tt;deactivateEvents=new tt;attachEvents=new tt;detachEvents=new tt;routerOutletData=PD(void 0);parentContexts=k(So);location=k(yi);changeDetector=k(_o);inputBinder=k(su,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Av(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[nr]})}return n})(),Av=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Dn?this.route:e===So?this.childContexts:e===rA?this.outletData:this.parent.get(e,t)}},su=new $(""),kv=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=lc([r.queryParams,r.params,r.data]).pipe(zt(([o,s,a],u)=>(a=U(U(U({},o),s),a),u===0?Z(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=ZT(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function rj(n,e,t){let r=eu(n,e._root,t?t._root:void 0);return new Jc(r,e)}function eu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=ij(n,e,t);return new on(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>eu(n,a)),s}}let r=oj(e.value),i=e.children.map(o=>eu(n,o));return new on(r,i)}}function ij(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return eu(n,r,i);return eu(n,r)})}function oj(n){return new Dn(new st(n.url),new st(n.params),new st(n.queryParams),new st(n.fragment),new st(n.data),n.outlet,n.component,n)}var Js=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},iA="ngNavigationCancelingError";function Rh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=bi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=oA(!1,Zt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function oA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[iA]=!0,t.cancellationCode=e,t}function sj(n){return sA(n)&&bi(n.url)}function sA(n){return!!n&&n[iA]}var aj=(n,e,t,r)=>te(i=>(new Mv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Mv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=qs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=qs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Th(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ch(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(vv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),vv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ph=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ws=class{component;route;constructor(e,t){this.component=e,this.route=t}};function cj(n,e,t){let r=n._root,i=e?e._root:null;return Gc(r,i,t,[r.value])}function uj(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ea(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!CC(n)?n:e.get(n):r}function Gc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=qs(e);return n.children.forEach(s=>{lj(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Kc(a,t.getContext(s),i)),i}function lj(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=dj(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ph(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Gc(n,e,a?a.children:null,r,i):Gc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ws(a.outlet.component,s))}else s&&Kc(e,a,i),i.canActivateChecks.push(new Ph(r)),o.component?Gc(n,null,a?a.children:null,r,i):Gc(n,null,t,r,i);return i}function dj(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!bo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bo(n.url,e.url)||!dr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sv(n,e)||!dr(n.queryParams,e.queryParams);case"paramsChange":default:return!Sv(n,e)}}function Kc(n,e,t){let r=qs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Kc(s,e.children.getContext(o),t):Kc(s,null,t):Kc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ws(e.outlet.component,i)):t.canDeactivateChecks.push(new Ws(null,i)):t.canDeactivateChecks.push(new Ws(null,i))}function au(n){return typeof n=="function"}function hj(n){return typeof n=="boolean"}function fj(n){return n&&au(n.canLoad)}function pj(n){return n&&au(n.canActivate)}function gj(n){return n&&au(n.canActivateChild)}function mj(n){return n&&au(n.canDeactivate)}function yj(n){return n&&au(n.canMatch)}function aA(n){return n instanceof Or||n?.name==="EmptyError"}var lh=Symbol("INITIAL_VALUE");function Xs(){return zt(n=>lc(n.map(e=>e.pipe(Nn(1),Kg(lh)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===lh)return lh;if(t===!1||vj(t))return t}return!0}),Vt(e=>e!==lh),Nn(1)))}function vj(n){return bi(n)||n instanceof Js}function _j(n,e){return Xe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(he(U({},t),{guardsResult:!0})):Ej(s,r,i,n).pipe(Xe(a=>a&&hj(a)?wj(r,o,n,e):Z(a)),te(a=>he(U({},t),{guardsResult:a})))})}function Ej(n,e,t,r){return Ne(n).pipe(Xe(i=>Tj(i.component,i.route,t,e,r)),Fr(i=>i!==!0,!0))}function wj(n,e,t,r){return Ne(e).pipe(Kn(i=>gs(bj(i.route.parent,r),Ij(i.route,r),Dj(n,i.path,t),Cj(n,i.route,t))),Fr(i=>i!==!0,!0))}function Ij(n,e){return n!==null&&e&&e(new Dh(n)),Z(!0)}function bj(n,e){return n!==null&&e&&e(new bh(n)),Z(!0)}function Cj(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Ql(()=>{let s=iu(e)??t,a=ea(o,s),u=pj(a)?a.canActivate(e,n):ht(s,()=>a(e,n));return Di(u).pipe(Fr())}));return Z(i).pipe(Xs())}function Dj(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>uj(s)).filter(s=>s!==null).map(s=>Ql(()=>{let a=s.guards.map(u=>{let l=iu(s.node)??t,h=ea(u,l),p=gj(h)?h.canActivateChild(r,n):ht(l,()=>h(r,n));return Di(p).pipe(Fr())});return Z(a).pipe(Xs())}));return Z(o).pipe(Xs())}function Tj(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=iu(e)??i,l=ea(a,u),h=mj(l)?l.canDeactivate(n,e,t,r):ht(u,()=>l(n,e,t,r));return Di(h).pipe(Fr())});return Z(s).pipe(Xs())}function Sj(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=ea(s,n),u=fj(a)?a.canLoad(e,t):ht(n,()=>a(e,t));return Di(u)});return Z(o).pipe(Xs(),cA(r))}function cA(n){return Fg(Et(e=>{if(typeof e!="boolean")throw Rh(n,e)}),te(e=>e===!0))}function Aj(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=ea(s,n),u=yj(a)?a.canMatch(e,t):ht(n,()=>a(e,t));return Di(u)});return Z(o).pipe(Xs(),cA(r))}var tu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},nu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function zs(n){return fs(new tu(n))}function Mj(n){return fs(new q(4e3,!1))}function Rj(n){return fs(oA(!1,Zt.GuardRejected))}var Rv=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[ae])return Mj(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,params:m,data:M,title:N}=i,O=ht(o,()=>a({params:m,data:M,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:y,title:N}));if(O instanceof fr)throw new nu(O);t=O}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new nu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new fr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new Ae(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Pv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Pj(n,e,t,r,i){let o=uA(n,e,t);return o.matched?(r=ej(e,r),Aj(r,e,t,i).pipe(te(s=>s===!0?o:U({},Pv)))):Z(o)}function uA(n,e,t){if(e.path==="**")return xj(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},Pv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||VS)(t,n,e);if(!i)return U({},Pv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?U(U({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function xj(n){return{matched:!0,parameters:n.length>0?jS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function kS(n,e,t,r){return t.length>0&&kj(n,t,r)?{segmentGroup:new Ae(e,Oj(r,new Ae(t,n.children))),slicedSegments:[]}:t.length===0&&Fj(n,t,r)?{segmentGroup:new Ae(n.segments,Nj(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ae(n.segments,n.children),slicedSegments:t}}function Nj(n,e,t,r){let i={};for(let o of t)if(Nh(n,e,o)&&!r[jn(o)]){let s=new Ae([],{});i[jn(o)]=s}return U(U({},r),i)}function Oj(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&jn(r)!==ae){let i=new Ae([],{});t[jn(r)]=i}return t}function kj(n,e,t){return t.some(r=>Nh(n,e,r)&&jn(r)!==ae)}function Fj(n,e,t){return t.some(r=>Nh(n,e,r))}function Nh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Lj(n,e,t){return e.length===0&&!n.children[t]}var xv=class{};function Vj(n,e,t,r,i,o,s="emptyOnly"){return new Nv(n,e,t,r,i,s,o).recognize()}var Uj=31,Nv=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Rv(this.urlSerializer,this.urlTree)}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=kS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:t,rootSnapshot:r})=>{let i=new on(r,t),o=new Xc("",i),s=QS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Co([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(te(r=>({children:r,rootSnapshot:t})),kr(r=>{if(r instanceof nu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof tu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(te(s=>s instanceof on?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ne(o).pipe(Kn(s=>{let a=r.children[s],u=tj(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Wg((s,a)=>(s.push(...a),s)),fi(null),Gg(),Xe(s=>{if(s===null)return zs(r);let a=lA(s);return jj(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return Ne(t).pipe(Kn(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(kr(l=>{if(l instanceof tu)return Z(null);throw l}))),Fr(u=>!!u),kr(u=>{if(aA(u))return Lj(r,i,o)?Z(new xv):zs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return jn(r)!==s&&(s===ae||!Nh(i,o,r))?zs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):zs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:y}=uA(t,i,o);if(!u)return zs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Uj&&(this.allowRedirects=!1));let m=new Co(o,l,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,FS(i),jn(i),i.component??i._loadedComponent??null,i,LS(i)),M=Mh(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(M.params),m.data=Object.freeze(M.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,m,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Xe(O=>this.processSegment(e,r,t,O.concat(y),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Pj(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(zt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(zt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:y,remainingSegments:m}=u,M=new Co(y,p,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,FS(r),jn(r),r.component??r._loadedComponent??null,r,LS(r)),N=Mh(M,s,this.paramsInheritanceStrategy);M.params=Object.freeze(N.params),M.data=Object.freeze(N.data);let{segmentGroup:O,slicedSegments:z}=kS(t,y,m,l);if(z.length===0&&O.hasChildren())return this.processChildren(h,l,O,M).pipe(te(K=>new on(M,K)));if(l.length===0&&z.length===0)return Z(new on(M,[]));let ce=jn(r)===o;return this.processSegment(h,l,O,z,ce?ae:o,!0,M).pipe(te(K=>new on(M,K instanceof on?[K]:[])))}))):zs(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):Sj(e,t,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,t).pipe(Et(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Rj(t))):Z({routes:[],injector:e})}};function jj(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function Bj(n){let e=n.value.routeConfig;return e&&e.path===""}function lA(n){let e=[],t=new Set;for(let r of n){if(!Bj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=lA(r.children);e.push(new on(r.value,i))}return e.filter(r=>!t.has(r))}function FS(n){return n.data||{}}function LS(n){return n.resolve||{}}function $j(n,e,t,r,i,o){return Xe(s=>Vj(n,e,t,r,s.extractedUrl,i,o).pipe(te(({state:a,tree:u})=>he(U({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function Hj(n,e){return Xe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of dA(u))s.add(l);let a=0;return Ne(s).pipe(Kn(u=>o.has(u)?zj(u,r,n,e):(u.data=Mh(u,u.parent,n).resolve,Z(void 0))),Et(()=>a++),ms(1),Xe(u=>a===s.size?Z(t):$t))})}function dA(n){let e=n.children.map(t=>dA(t)).flat();return[n,...e]}function zj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!nA(i)&&(o[ru]=i.title),qj(o,n,e,r).pipe(te(s=>(n._resolvedData=s,n.data=Mh(n,n.parent,t).resolve,null)))}function qj(n,e,t,r){let i=wv(n);if(i.length===0)return Z({});let o={};return Ne(i).pipe(Xe(s=>Gj(n[s],e,t,r).pipe(Fr(),Et(a=>{if(a instanceof Js)throw Rh(new Ii,a);o[s]=a}))),ms(1),te(()=>o),kr(s=>aA(s)?$t:fs(s)))}function Gj(n,e,t,r){let i=iu(e)??r,o=ea(n,i),s=o.resolve?o.resolve(e,t):ht(i,()=>o(e,t));return Di(s)}function _v(n){return zt(e=>{let t=n(e);return t?Ne(t).pipe(te(()=>e)):Z(e)})}var Fv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[ru]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(hA),providedIn:"root"})}return n})(),hA=(()=>{class n extends Fv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(W(RS))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ao=new $("",{providedIn:"root",factory:()=>({})}),Lv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Me({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Oe(0,"router-outlet")},dependencies:[ou],encapsulation:2})}return n})();function Vv(n){let e=n.children&&n.children.map(Vv),t=e?he(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=Lv),t}var Mo=new $(""),Oh=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(Wd);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Di(t.loadComponent()).pipe(te(pA),Et(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),pi(()=>{this.componentLoaders.delete(t)})),i=new us(r,()=>new Je).pipe(cs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=fA(r,this.compiler,t,this.onLoadEndListener).pipe(pi(()=>{this.childrenLoaders.delete(r)})),s=new us(o,()=>new Je).pipe(cs());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fA(n,e,t,r){return Di(n.loadChildren()).pipe(te(pA),Xe(i=>i instanceof Hy||Array.isArray(i)?Z(i):Ne(e.compileModuleAsync(i))),te(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Mo,[],{optional:!0,self:!0}).flat()),{routes:s.map(Vv),injector:o}}))}function Wj(n){return n&&typeof n=="object"&&"default"in n}function pA(n){return Wj(n)?n.default:n}var kh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(Kj),providedIn:"root"})}return n})(),Kj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Uv=new $(""),jv=new $("");function gA(n,e,t){let r=n.get(jv),i=n.get(nt);return n.get(be).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),Qj(n))),{onViewTransitionCreated:u}=r;return u&&ht(n,()=>u({transition:a,from:e,to:t})),s})}function Qj(n){return new Promise(e=>{Sy({read:()=>setTimeout(e)},{injector:n})})}var Bv=new $(""),Fh=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Je;transitionAbortSubject=new Je;configLoader=k(Oh);environmentInjector=k(lt);destroyRef=k(Ns);urlSerializer=k(To);rootContexts=k(So);location=k(_i);inputBindingEnabled=k(su,{optional:!0})!==null;titleStrategy=k(Fv);options=k(Ao,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(kh);createViewTransition=k(Uv,{optional:!0});navigationErrorHandler=k(Bv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new wh(i)),r=i=>this.events.next(new Ih(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(he(U({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new st(null),this.transitions.pipe(Vt(r=>r!==null),zt(r=>{let i=!1,o=!1;return Z(r).pipe(zt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Zt.SupersededByNewNavigation),$t;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?he(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new pr(s.id,this.urlSerializer.serialize(s.rawUrl),l,Ks.IgnoredSameUrlNavigation)),s.resolve(!1),$t}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Z(s).pipe(zt(l=>(this.events.next(new Ci(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?$t:Promise.resolve(l))),$j(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Et(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=he(U({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Yc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:y,extras:m}=s,M=new Ci(l,this.urlSerializer.serialize(h),p,y);this.events.next(M);let N=eA(this.rootComponentType).snapshot;return this.currentTransition=r=he(U({},s),{targetSnapshot:N,urlAfterRedirects:h,extras:he(U({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,Z(r)}else{let l="";return this.events.next(new pr(s.id,this.urlSerializer.serialize(s.extractedUrl),l,Ks.IgnoredByUrlHandlingStrategy)),s.resolve(!1),$t}}),Et(s=>{let a=new yh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),te(s=>(this.currentTransition=r=he(U({},s),{guards:cj(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),_j(this.environmentInjector,s=>this.events.next(s)),Et(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Rh(this.urlSerializer,s.guardsResult);let a=new vh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Vt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Zt.GuardRejected),!1)),_v(s=>{if(s.guards.canActivateChecks.length!==0)return Z(s).pipe(Et(a=>{let u=new _h(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),zt(a=>{let u=!1;return Z(a).pipe(Hj(this.paramsInheritanceStrategy,this.environmentInjector),Et({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Zt.NoDataFromResolver)}}))}),Et(a=>{let u=new Eh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),_v(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Et(h=>{u.component=h}),te(()=>{})));for(let h of u.children)l.push(...a(h));return l};return lc(a(s.targetSnapshot.root)).pipe(fi(null),Nn(1))}),_v(()=>this.afterPreactivation()),zt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ne(u).pipe(te(()=>r)):Z(r)}),te(s=>{let a=rj(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=he(U({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Et(()=>{this.events.next(new Zc)}),aj(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Nn(1),Et({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Cn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Qg(this.transitionAbortSubject.pipe(Et(s=>{throw s}))),pi(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),kr(s=>{if(this.destroyed)return r.resolve(!1),$t;if(o=!0,sA(s))this.events.next(new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),sj(s)?this.events.next(new Zs(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Qs(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=ht(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Js){let{message:l,cancellationCode:h}=Rh(this.urlSerializer,u);this.events.next(new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Zs(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return $t}))}))}cancelNavigationTransition(t,r,i){let o=new hr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yj(n){return n!==ph}var mA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(Zj),providedIn:"root"})}return n})(),xh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Zj=(()=>{class n extends xh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),yA=(()=>{class n{urlSerializer=k(To);options=k(Ao,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(_i);urlHandlingStrategy=k(kh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new fr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof fr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=eA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>k(Jj),providedIn:"root"})}return n})(),Jj=(()=>{class n extends yA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Ci?this.updateStateMemento():t instanceof pr?this.commitTransition(r):t instanceof Yc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Zc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof hr&&(t.code===Zt.GuardRejected||t.code===Zt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Qs?this.restoreHistory(r,!0):t instanceof Cn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=U(U({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=U(U({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Lh(n,e){n.events.pipe(Vt(t=>t instanceof Cn||t instanceof hr||t instanceof Qs||t instanceof pr),te(t=>t instanceof Cn||t instanceof pr?0:(t instanceof hr?t.code===Zt.Redirect||t.code===Zt.SupersededByNewNavigation:!1)?2:1),Vt(t=>t!==2),Nn(1)).subscribe(()=>{e()})}var Xj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(kT);stateManager=k(yA);options=k(Ao,{optional:!0})||{};pendingTasks=k(ir);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(Fh);urlSerializer=k(To);location=k(_i);urlHandlingStrategy=k(kh);_events=new Je;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(mA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Mo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(su,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Qe;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof hr&&r.code!==Zt.Redirect&&r.code!==Zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Cn)this.navigated=!0;else if(r instanceof Zs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Yj(i.source)},s);this.scheduleNavigation(a,ph,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}nB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ph,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=U({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Vv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=U(U({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let y=i?i.snapshot:this.routerState.snapshot.root;p=YS(y)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return ZS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=bi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ph,null,r)}navigate(t,r={skipLocationChange:!1}){return tB(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},Xj):r===!1?i=U({},eB):i=r,bi(t))return PS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return PS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,y)=>{a=p,u=y});let h=this.pendingTasks.add();return Lh(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tB(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new q(4008,!1)}function nB(n){return!(n instanceof Zc)&&!(n instanceof Zs)}var xt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Je;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Cn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(bi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:WD(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:bi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(B(Pt),B(Dn),Ey("tabindex"),B(ar),B(ft),B(Un))};static \u0275dir=$e({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&ue("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Rc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",vi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",vi],replaceUrl:[2,"replaceUrl","replaceUrl",vi],routerLink:"routerLink"},features:[nr]})}return n})();var cu=class{};var vA=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Vt(t=>t instanceof Cn),Kn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Mc(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ne(i).pipe(ps())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Z(null);let o=i.pipe(Xe(s=>s===null?Z(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ne([o,s]).pipe(ps())}else return o})}static \u0275fac=function(r){return new(r||n)(W(Pt),W(Wd),W(lt),W(cu),W(Oh))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_A=new $(""),rB=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ci?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof pr&&t.code===Ks.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ys&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ys(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){IT()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function Hv(n,...e){return rn([{provide:Mo,multi:!0,useValue:n},[],{provide:Dn,useFactory:EA,deps:[Pt]},{provide:qd,multi:!0,useFactory:wA},e.map(t=>t.\u0275providers)])}function EA(n){return n.routerState.root}function uu(n,e){return{\u0275kind:n,\u0275providers:e}}function wA(){let n=k(We);return e=>{let t=n.get(fo);if(e!==t.components[0])return;let r=n.get(Pt),i=n.get(IA);n.get(zv)===1&&r.initialNavigation(),n.get(DA,null,fe.Optional)?.setUpPreloading(),n.get(_A,null,fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var IA=new $("",{factory:()=>new Je}),zv=new $("",{providedIn:"root",factory:()=>1});function bA(){let n=[{provide:zv,useValue:0},qy(()=>{let e=k(We);return e.get(Zy,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(Pt),o=e.get(IA);Lh(i,()=>{r(!0)}),e.get(Fh).afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))})];return uu(2,n)}function CA(){let n=[qy(()=>{k(Pt).setUpLocationChangeListener()}),{provide:zv,useValue:2}];return uu(3,n)}var DA=new $("");function TA(n){return uu(0,[{provide:DA,useExisting:vA},{provide:cu,useExisting:n}])}function SA(){return uu(8,[kv,{provide:su,useExisting:kv}])}function AA(n){Ac("NgRouterViewTransitions");let e=[{provide:Uv,useValue:gA},{provide:jv,useValue:U({skipNextTransition:!!n?.skipInitialTransition},n)}];return uu(9,e)}var MA=[_i,{provide:To,useClass:Ii},Pt,So,{provide:Dn,useFactory:EA,deps:[Pt]},Oh,[]],jt=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[MA,[],{provide:Mo,multi:!0,useValue:t},[],r?.errorHandler?{provide:Bv,useValue:r.errorHandler}:[],{provide:Ao,useValue:r||{}},r?.useHash?oB():sB(),iB(),r?.preloadingStrategy?TA(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?aB(r):[],r?.bindToComponentInputs?SA().\u0275providers:[],r?.enableViewTransitions?AA().\u0275providers:[],cB()]}}static forChild(t){return{ngModule:n,providers:[{provide:Mo,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=wn({type:n});static \u0275inj=vn({})}return n})();function iB(){return{provide:_A,useFactory:()=>{let n=k(oS),e=k(be),t=k(Ao),r=k(Fh),i=k(To);return t.scrollOffset&&n.setOffset(t.scrollOffset),new rB(i,r,n,e,t)}}}function oB(){return{provide:Un,useClass:Jy}}function sB(){return{provide:Un,useClass:Yd}}function aB(n){return[n.initialNavigation==="disabled"?CA().\u0275providers:[],n.initialNavigation==="enabledBlocking"?bA().\u0275providers:[]]}var $v=new $("");function cB(){return[{provide:$v,useFactory:wA},{provide:qd,multi:!0,useExisting:$v}]}var RA=()=>{};var xA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},uB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Vh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,y=(a&15)<<2|l>>6,m=l&63;u||(m=64,s||(y=64)),r.push(t[h],t[p],t[y],t[m])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):uB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Gv;let y=o<<2|a>>4;if(r.push(y),l!==64){let m=a<<4&240|l>>2;if(r.push(m),p!==64){let M=l<<6&192|p;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Gv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lB=function(n){let e=xA(n);return Vh.encodeByteArray(e,!0)},lu=function(n){return lB(n).replace(/\./g,"")},Uh=function(n){try{return Vh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var dB=()=>NA().__FIREBASE_DEFAULTS__,hB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},fB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Uh(n[1]);return e&&JSON.parse(e)},jh=()=>{try{return RA()||dB()||hB()||fB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kv=n=>{var e,t;return(t=(e=jh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Bh=n=>{let e=Kv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Qv=()=>{var n;return(n=jh())===null||n===void 0?void 0:n.config},Yv=n=>{var e;return(e=jh())===null||e===void 0?void 0:e[`_${n}`]};var Ro=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function OA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[lu(JSON.stringify(t)),lu(JSON.stringify(s)),""].join(".")}function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function pB(){var n;let e=(n=jh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function VA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UA(){let n=pt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function jA(){return!pB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function du(){try{return typeof indexedDB=="object"}catch{return!1}}function BA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var gB="FirebaseError",Bt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bn.prototype.create)}},Bn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?mB(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Bt(i,a,r)}};function mB(n,e){return n.replace(yB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var yB=/\{\$([^}]+)}/g;function $A(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function gr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(PA(o)&&PA(s)){if(!gr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function PA(n){return n!==null&&typeof n=="object"}function hu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ta(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function na(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function HA(n,e){let t=new Wv(n,e);return t.subscribe.bind(t)}var Wv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");vB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=qv),i.error===void 0&&(i.error=qv),i.complete===void 0&&(i.complete=qv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function vB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qv(){}var WX=4*60*60*1e3;function ze(n){return n&&n._delegate?n._delegate:n}var It=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Po="[DEFAULT]";var Zv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Ro;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EB(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_B(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function _B(n){return n===Po?void 0:n}function EB(n){return n.instantiationMode==="EAGER"}var $h=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Zv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var wB=[],me=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(me||{}),IB={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},bB=me.INFO,CB={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},DB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=CB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},mr=class{constructor(e){this.name=e,this._logLevel=bB,this._logHandler=DB,this._userLogHandler=null,wB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}};var TB=(n,e)=>e.some(t=>n instanceof t),zA,qA;function SB(){return zA||(zA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AB(){return qA||(qA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var GA=new WeakMap,Xv=new WeakMap,WA=new WeakMap,Jv=new WeakMap,t_=new WeakMap;function MB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(yr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&GA.set(t,n)}).catch(()=>{}),t_.set(e,n),e}function RB(n){if(Xv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Xv.set(n,e)}var e_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Xv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function KA(n){e_=n(e_)}function PB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Hh(this),e,...t);return WA.set(r,e.sort?e.sort():[e]),yr(r)}:AB().includes(n)?function(...e){return n.apply(Hh(this),e),yr(GA.get(this))}:function(...e){return yr(n.apply(Hh(this),e))}}function xB(n){return typeof n=="function"?PB(n):(n instanceof IDBTransaction&&RB(n),TB(n,SB())?new Proxy(n,e_):n)}function yr(n){if(n instanceof IDBRequest)return MB(n);if(Jv.has(n))return Jv.get(n);let e=xB(n);return e!==n&&(Jv.set(n,e),t_.set(e,n)),e}var Hh=n=>t_.get(n);function YA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=yr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(yr(s.result),u.oldVersion,u.newVersion,yr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var NB=["get","getKey","getAll","getAllKeys","count"],OB=["put","add","delete","clear"],n_=new Map;function QA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(n_.get(e))return n_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=OB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||NB.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&u.done]))[0]})};return n_.set(e,o),o}KA(n=>he(U({},n),{get:(e,t,r)=>QA(e,t)||n.get(e,t,r),has:(e,t)=>!!QA(e,t)||n.has(e,t)}));var i_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(kB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function kB(n){let e=n.getComponent();return e?.type==="VERSION"}var o_="@firebase/app",ZA="0.11.4";var qr=new mr("@firebase/app"),FB="@firebase/app-compat",LB="@firebase/analytics-compat",VB="@firebase/analytics",UB="@firebase/app-check-compat",jB="@firebase/app-check",BB="@firebase/auth",$B="@firebase/auth-compat",HB="@firebase/database",zB="@firebase/data-connect",qB="@firebase/database-compat",GB="@firebase/functions",WB="@firebase/functions-compat",KB="@firebase/installations",QB="@firebase/installations-compat",YB="@firebase/messaging",ZB="@firebase/messaging-compat",JB="@firebase/performance",XB="@firebase/performance-compat",e$="@firebase/remote-config",t$="@firebase/remote-config-compat",n$="@firebase/storage",r$="@firebase/storage-compat",i$="@firebase/firestore",o$="@firebase/vertexai",s$="@firebase/firestore-compat",a$="firebase",c$="11.6.0";var s_="[DEFAULT]",u$={[o_]:"fire-core",[FB]:"fire-core-compat",[VB]:"fire-analytics",[LB]:"fire-analytics-compat",[jB]:"fire-app-check",[UB]:"fire-app-check-compat",[BB]:"fire-auth",[$B]:"fire-auth-compat",[HB]:"fire-rtdb",[zB]:"fire-data-connect",[qB]:"fire-rtdb-compat",[GB]:"fire-fn",[WB]:"fire-fn-compat",[KB]:"fire-iid",[QB]:"fire-iid-compat",[YB]:"fire-fcm",[ZB]:"fire-fcm-compat",[JB]:"fire-perf",[XB]:"fire-perf-compat",[e$]:"fire-rc",[t$]:"fire-rc-compat",[n$]:"fire-gcs",[r$]:"fire-gcs-compat",[i$]:"fire-fst",[s$]:"fire-fst-compat",[o$]:"fire-vertex","fire-js":"fire-js",[a$]:"fire-js-all"};var fu=new Map,l$=new Map,a_=new Map;function JA(n,e){try{n.container.addComponent(e)}catch(t){qr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function an(n){let e=n.name;if(a_.has(e))return qr.debug(`There were multiple attempts to register component ${e}.`),!1;a_.set(e,n);for(let t of fu.values())JA(t,n);for(let t of l$.values())JA(t,n);return!0}function Ai(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bt(n){return n==null?!1:n.settings!==void 0}var d$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new Bn("app","Firebase",d$);var c_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new It("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}};var Mi=c$;function d_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:s_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Si.create("bad-app-name",{appName:String(i)});if(t||(t=Qv()),!t)throw Si.create("no-options");let o=fu.get(i);if(o){if(gr(t,o.options)&&gr(r,o.config))return o;throw Si.create("duplicate-app",{appName:i})}let s=new $h(i);for(let u of a_.values())s.addComponent(u);let a=new c_(t,r,s);return fu.set(i,a),a}function Gr(n=s_){let e=fu.get(n);if(!e&&n===s_&&Qv())return d_();if(!e)throw Si.create("no-app",{appName:n});return e}function zh(){return Array.from(fu.values())}function Ue(n,e,t){var r;let i=(r=u$[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qr.warn(a.join(" "));return}an(new It(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var h$="firebase-heartbeat-database",f$=1,pu="firebase-heartbeat-store",r_=null;function nM(){return r_||(r_=YA(h$,f$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Si.create("idb-open",{originalErrorMessage:n.message})})),r_}function p$(n){return _(this,null,function*(){try{let t=(yield nM()).transaction(pu),r=yield t.objectStore(pu).get(rM(n));return yield t.done,r}catch(e){if(e instanceof Bt)qr.warn(e.message);else{let t=Si.create("idb-get",{originalErrorMessage:e?.message});qr.warn(t.message)}}})}function XA(n,e){return _(this,null,function*(){try{let r=(yield nM()).transaction(pu,"readwrite");yield r.objectStore(pu).put(e,rM(n)),yield r.done}catch(t){if(t instanceof Bt)qr.warn(t.message);else{let r=Si.create("idb-set",{originalErrorMessage:t?.message});qr.warn(r.message)}}})}function rM(n){return`${n.name}!${n.options.appId}`}var g$=1024,m$=30,u_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new l_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=eM();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>m$){let s=v$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qr.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=eM(),{heartbeatsToSend:r,unsentEntries:i}=y$(this._heartbeatsCache.heartbeats),o=lu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return qr.warn(t),""}})}};function eM(){return new Date().toISOString().substring(0,10)}function y$(n,e=g$){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),tM(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),tM(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var l_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return du()?BA().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield p$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return XA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function tM(n){return lu(JSON.stringify({version:2,heartbeats:n})).length}function v$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function _$(n){an(new It("platform-logger",e=>new i_(e),"PRIVATE")),an(new It("heartbeat",e=>new u_(e),"PRIVATE")),Ue(o_,ZA,n),Ue(o_,ZA,"esm2017"),Ue("fire-js","")}_$("");var E$="firebase",w$="11.6.0";Ue(E$,w$,"app");function h_(n){n===void 0&&(cy(h_),n=k(We));let e=n.get(Ud);return t=>new le(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var vr=new go("ANGULARFIRE2_VERSION");function No(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ri=(n,e)=>{let t=e?[e]:zh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},ra=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(ra||{}),iM=Ky()&&typeof Zone<"u"?ra.WARN:ra.SILENT;var qh=class{zone;delegate;constructor(e,t=$g){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},_r=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=k(be);this.outsideAngular=t.runOutsideAngular(()=>new qh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new qh(typeof Zone>"u"?void 0:Zone.current,Bg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oM=!1;function I$(n,e){!oM&&(iM>ra.SILENT||Ky())&&(oM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),iM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function b$(n){let e=k(be,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function xo(n){let e=k(be,{optional:!0});return e?e.run(()=>n()):n()}var C$=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ht(t,()=>xo(()=>n.apply(void 0,r)))),qe=(n,e,t)=>(t||=e?ra.WARN:ra.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(_r),s=k(Ud),a=k(lt)}catch{return I$(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=xo(()=>s.add())),i[l]=C$(i[l],r,a));let u=b$(()=>n.apply(this,i));return e?u instanceof le?u.pipe(hi(o.outsideAngular),di(o.insideAngular),h_(a)):u instanceof Promise?xo(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>ht(a,()=>xo(()=>l(p))),p=>ht(a,()=>xo(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:xo(()=>u):u instanceof le?u.pipe(hi(o.outsideAngular),di(o.insideAngular)):xo(()=>u)});var $n=class{constructor(e){return e}},Wr=class{constructor(){return zh()}};function D$(n){return n&&n.length===1?n[0]:new $n(Gr())}var f_=new $("angularfire2._apps"),T$={provide:$n,useFactory:D$,deps:[[new dt,f_]]},S$={provide:Wr,deps:[[new dt,f_]]};function A$(n){return(e,t)=>{let r=t.get(or);Ue("angularfire",vr.full,"core"),Ue("angularfire",vr.full,"app"),Ue("angular",QT.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new $n(i)}}function sM(n,...e){return rn([T$,S$,{provide:f_,useFactory:A$(n),multi:!0,deps:[be,We,_r,...e]}])}var aM=qe(d_,!0);var M$=new Map,R$={activated:!1,tokenObservers:[]},P$={initialized:!1,enabled:!1};function Hn(n){return M$.get(n)||Object.assign({},R$)}function dM(){return P$}var x$="https://content-firebaseappcheck.googleapis.com/v1";var N$="exchangeDebugToken",cM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Jee=24*60*60*1e3;var m_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return _(this,null,function*(){this.stop();try{this.pending=new Ro,this.pending.promise.catch(t=>{}),yield O$(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ro,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function O$(n){return new Promise(e=>{setTimeout(e,n)})}var k$={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Pi=new Bn("appCheck","AppCheck",k$);function hM(n){if(!Hn(n).activated)throw Pi.create("use-before-activation",{appName:n.name})}function fM(r,i){return _(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let m=yield s.getHeartbeatsHeader();m&&(o["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(m){throw Pi.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw Pi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(m){throw Pi.create("fetch-parse-error",{originalErrorMessage:m?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,y=Date.now();return{token:l.token,expireTimeMillis:y+p,issuedAtTimeMillis:y}})}function pM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${x$}/projects/${t}/apps/${r}:${N$}?key=${i}`,body:{debug_token:e}}}var F$="firebase-app-check-database",L$=1,y_="firebase-app-check-store";var Gh=null;function V$(){return Gh||(Gh=new Promise((n,e)=>{try{let t=indexedDB.open(F$,L$);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Pi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(y_,{keyPath:"compositeKey"})}}}catch(t){e(Pi.create("storage-open",{originalErrorMessage:t?.message}))}}),Gh)}function U$(n,e){return j$(B$(n),e)}function j$(n,e){return _(this,null,function*(){let r=(yield V$()).transaction(y_,"readwrite"),o=r.objectStore(y_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Pi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function B$(n){return`${n.options.appId}-${n.name}`}var gu=new mr("@firebase/app-check");function p_(n,e){return du()?U$(n,e).catch(t=>{gu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gM(){return dM().enabled}function mM(){return _(this,null,function*(){let n=dM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var $$={error:"UNKNOWN_ERROR"};function H$(n){return Vh.encodeString(JSON.stringify(n),!1)}function v_(n,e=!1,t=!1){return _(this,null,function*(){let r=n.app;hM(r);let i=Hn(r),o=i.token,s;if(o&&!mu(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(mu(l)?o=l:yield p_(r,void 0))}if(!e&&o&&mu(o))return{token:o.token};let a=!1;if(gM())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=fM(pM(r,yield mM()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield p_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gu.warn(l.message):t&&gu.error(l),g_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Hn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?gu.warn(l.message):t&&gu.error(l),s=l}let u;return o?s?mu(o)?u={token:o.token,internalError:s}:u=g_(s):(u={token:o.token},i.token=o,yield p_(r,o)):u=g_(s),a&&W$(r,u),u})}function z$(n){return _(this,null,function*(){let e=n.app;hM(e);let{provider:t}=Hn(e);if(gM()){let r=yield mM(),{token:i}=yield fM(pM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function q$(n,e,t,r){let{app:i}=n,o=Hn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&mu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),uM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>uM(n))}function yM(n,e){let t=Hn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function uM(n){let{app:e}=n,t=Hn(e),r=t.tokenRefresher;r||(r=G$(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function G$(n){let{app:e}=n;return new m_(()=>_(this,null,function*(){let t=Hn(e),r;if(t.token?r=yield v_(n,!0):r=yield v_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Hn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},cM.RETRIAL_MIN_WAIT,cM.RETRIAL_MAX_WAIT)}function W$(n,e){let t=Hn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function mu(n){return n.expireTimeMillis-Date.now()>0}function g_(n){return{token:H$($$),error:n}}var __=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Hn(this.app);for(let t of e)yM(this.app,t.next);return Promise.resolve()}};function K$(n,e){return new __(n,e)}function Q$(n){return{getToken:e=>v_(n,e),getLimitedUseToken:()=>z$(n),addTokenListener:e=>q$(n,"INTERNAL",e),removeTokenListener:e=>yM(n.app,e)}}var Y$="@firebase/app-check",Z$="0.8.13";var J$="app-check",lM="app-check-internal";function X$(){an(new It(J$,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return K$(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(lM).initialize()})),an(new It(lM,n=>{let e=n.getProvider("app-check").getImmediate();return Q$(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ue(Y$,Z$)}X$();var eH="app-check";var xi=class{constructor(){return Ri(eH)}};var tH=["localhost","0.0.0.0","127.0.0.1"],dte=typeof window<"u"&&tH.includes(window.location.hostname);function NM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var OM=NM,kM=new Bn("auth","Firebase",NM());var Jh=new mr("@firebase/auth");function nH(n,...e){Jh.logLevel<=me.WARN&&Jh.warn(`Auth (${Mi}): ${n}`,...e)}function Kh(n,...e){Jh.logLevel<=me.ERROR&&Jh.error(`Auth (${Mi}): ${n}`,...e)}function Ir(n,...e){throw H_(n,...e)}function Oo(n,...e){return H_(n,...e)}function FM(n,e,t){let r=Object.assign(Object.assign({},OM()),{[e]:t});return new Bn("auth","Firebase",r).create(e,{appName:n.name})}function Er(n){return FM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return kM.create(n,...e)}function Y(n,e,...t){if(!n)throw H_(e,...t)}function Kr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Kh(e),new Error(e)}function ki(n,e){n||Kr(e)}function b_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rH(){return vM()==="http:"||vM()==="https:"}function vM(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function iH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rH()||LA()||"connection"in navigator)?navigator.onLine:!0}function oH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ko=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ki(t>e,"Short delay should be less than long delay!"),this.isMobile=kA()||VA()}get(){return iH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function z_(n,e){ki(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cH=new ko(3e4,6e4);function Yr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function zn(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){return LM(n,i,()=>_(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=hu(Object.assign({key:n.config.apiKey},h)).slice(1),y=yield n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);let m=Object.assign({method:e,headers:y},l);return FA()||(m.referrerPolicy="no-referrer"),Xh.fetch()(yield VM(n,n.config.apiHost,t,p),m)}))})}function LM(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},sH),e);try{let i=new C_(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Wh(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wh(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Wh(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Wh(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw FM(n,h,l);Ir(n,h)}}catch(i){if(i instanceof Bt)throw i;Ir(n,"network-request-failed",{message:String(i)})}})}function Cu(o,s,a,u){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield zn(n,e,t,r,i);return"mfaPendingCredential"in l&&Ir(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function VM(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?z_(n.config,i):`${n.config.apiScheme}://${i}`;return aH.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function uH(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var C_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Oo(this.auth,"network-request-failed")),cH.get())})}};function Wh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Oo(n,e,r);return i.customData._tokenResponse=t,i}function _M(n){return n!==void 0&&n.enterprise!==void 0}var D_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return uH(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function lH(n,e){return _(this,null,function*(){return zn(n,"GET","/v2/recaptchaConfig",Yr(n,e))})}function dH(n,e){return _(this,null,function*(){return zn(n,"POST","/v1/accounts:delete",e)})}function ef(n,e){return _(this,null,function*(){return zn(n,"POST","/v1/accounts:lookup",e)})}function vu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function q_(n,e=!1){return _(this,null,function*(){let t=ze(n),r=yield t.getIdToken(e),i=G_(r);Y(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:vu(E_(i.auth_time)),issuedAtTime:vu(E_(i.iat)),expirationTime:vu(E_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function E_(n){return Number(n)*1e3}function G_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Uh(t);return i?JSON.parse(i):(Kh("Failed to decode base64 JWT payload"),null)}catch(i){return Kh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function EM(n){let e=G_(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Fo(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Bt&&hH(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function hH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var T_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Eu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function tf(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Fo(n,ef(t,{idToken:r}));Y(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?UM(o.providerUserInfo):[],a=fH(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Eu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function W_(n){return _(this,null,function*(){let e=ze(n);yield tf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function fH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UM(n){return n.map(e=>{var{providerId:t}=e,r=Hg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function pH(n,e){return _(this,null,function*(){let t=yield LM(n,{},()=>_(this,null,function*(){let r=hu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield VM(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Xh.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function gH(n,e){return _(this,null,function*(){return zn(n,"POST","/v2/accounts:revokeToken",Yr(n,e))})}var _u=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=EM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield pH(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Y(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Y(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Kr("not implemented")}};function Ni(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Oi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new T_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Eu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Fo(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return q_(this,e)}reload(){return W_(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield tf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(bt(this.auth.app))return Promise.reject(Er(this.auth));let e=yield this.getIdToken();return yield Fo(this,dH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,m=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,M=(s=t.photoURL)!==null&&s!==void 0?s:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,O=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,z=(l=t.createdAt)!==null&&l!==void 0?l:void 0,ce=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:xe,isAnonymous:vt,providerData:Te,stsTokenManager:T}=t;Y(K&&T,e,"internal-error");let I=_u.fromJSON(this.name,T);Y(typeof K=="string",e,"internal-error"),Ni(p,e.name),Ni(y,e.name),Y(typeof xe=="boolean",e,"internal-error"),Y(typeof vt=="boolean",e,"internal-error"),Ni(m,e.name),Ni(M,e.name),Ni(N,e.name),Ni(O,e.name),Ni(z,e.name),Ni(ce,e.name);let C=new n({uid:K,auth:e,email:y,emailVerified:xe,displayName:p,isAnonymous:vt,photoURL:M,phoneNumber:m,tenantId:N,stsTokenManager:I,createdAt:z,lastLoginAt:ce});return Te&&Array.isArray(Te)&&(C.providerData=Te.map(D=>Object.assign({},D))),O&&(C._redirectEventId=O),C}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new _u;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield tf(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];Y(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?UM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new _u;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Eu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var wM=new Map;function Qr(n){ki(n instanceof Function,"Expected a class definition");let e=wM.get(n);return e?(ki(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,wM.set(n,e),e)}var mH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),S_=mH;function Qh(n,e,t){return`firebase:${n}:${e}:${t}`}var nf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Qh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Qh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield ef(this.auth,{idToken:e}).catch(()=>{});return t?Oi._fromGetAccountInfoResponse(this.auth,t,e):null}return Oi._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(Qr(S_),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Qr(S_),s=Qh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let y=yield ef(e,{idToken:h}).catch(()=>{});if(!y)break;p=yield Oi._fromGetAccountInfoResponse(e,y,h)}else p=Oi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function IM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qM(e))return"Blackberry";if(GM(e))return"Webos";if(BM(e))return"Safari";if((e.includes("chrome/")||$M(e))&&!e.includes("edge/"))return"Chrome";if(zM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function jM(n=pt()){return/firefox\//i.test(n)}function BM(n=pt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $M(n=pt()){return/crios\//i.test(n)}function HM(n=pt()){return/iemobile/i.test(n)}function zM(n=pt()){return/android/i.test(n)}function qM(n=pt()){return/blackberry/i.test(n)}function GM(n=pt()){return/webos/i.test(n)}function K_(n=pt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yH(n=pt()){var e;return K_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vH(){return UA()&&document.documentMode===10}function WM(n=pt()){return K_(n)||zM(n)||GM(n)||qM(n)||/windows phone/i.test(n)||HM(n)}function KM(n,e=[]){let t;switch(n){case"Browser":t=IM(pt());break;case"Worker":t=`${IM(pt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Mi}/${r}`}var A_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function _H(t){return _(this,arguments,function*(n,e={}){return zn(n,"GET","/v2/passwordPolicy",Yr(n,e))})}var EH=6,M_=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:EH,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var R_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rf(this),this.idTokenSubscription=new rf(this),this.beforeStateQueue=new A_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qr(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield nf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield ef(this,{idToken:e}),r=yield Oi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(bt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield tf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oH()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(bt(this.app))return Promise.reject(Er(this));let t=e?ze(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return bt(this.app)?Promise.reject(Er(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bt(this.app)?Promise.reject(Er(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Qr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield _H(this),t=new M_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield gH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Qr(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=yield nf.create(this,[Qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;if(bt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&nH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Fi(n){return ze(n)}var rf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=HA(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var hf={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wH(n){hf=n}function QM(n){return hf.loadJS(n)}function IH(){return hf.recaptchaEnterpriseScript}function bH(){return hf.gapiScript}function YM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var P_=class{constructor(){this.enterprise=new x_}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},x_=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var CH="recaptcha-enterprise",ZM="NO_RECAPTCHA",N_=class{constructor(e){this.type=CH,this.auth=Fi(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(this,null,function*(){lH(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new D_(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(o,s,a){let u=window.grecaptcha;_M(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(ZM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new P_().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&_M(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=IH();u.length!==0&&(u+=a),QM(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})})}};function yu(n,e,t,r=!1,i=!1){return _(this,null,function*(){let o=new N_(n),s;if(i)s=ZM;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function of(n,e,t,r,i){return _(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield yu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>_(this,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=yield yu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield yu(n,e,t);return r(n,a).catch(u=>_(this,null,function*(){var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=yield yu(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)}))}else{let a=yield yu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function Q_(n,e){let t=Ai(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(gr(o,e??{}))return i;Ir(i,"already-initialized")}return t.initialize({options:e})}function DH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Qr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Y_(n,e,t){let r=Fi(n);Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=JM(e),{host:s,port:a}=TH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Y(gr(l,r.config.emulator)&&gr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,i||SH()}function JM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function TH(n){let e=JM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:bM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:bM(s)}}}function bM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function SH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var wu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,t){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}};function AH(n,e){return _(this,null,function*(){return zn(n,"POST","/v1/accounts:update",e)})}function MH(n,e){return _(this,null,function*(){return zn(n,"POST","/v1/accounts:signUp",e)})}function RH(n,e){return _(this,null,function*(){return Cu(n,"POST","/v1/accounts:signInWithPassword",Yr(n,e))})}function XM(n,e){return _(this,null,function*(){return zn(n,"POST","/v1/accounts:sendOobCode",Yr(n,e))})}function PH(n,e){return _(this,null,function*(){return XM(n,e)})}function xH(n,e){return _(this,null,function*(){return XM(n,e)})}function NH(n,e){return _(this,null,function*(){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",Yr(n,e))})}function OH(n,e){return _(this,null,function*(){return Cu(n,"POST","/v1/accounts:signInWithEmailLink",Yr(n,e))})}var Iu=class n extends wu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return of(e,t,"signInWithPassword",RH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return NH(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return of(e,r,"signUpPassword",MH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return OH(e,{idToken:t,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function w_(n,e){return _(this,null,function*(){return Cu(n,"POST","/v1/accounts:signInWithIdp",Yr(n,e))})}function kH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FH(n){let e=ta(na(n)).link,t=e?ta(na(e)).deep_link_id:null,r=ta(na(n)).deep_link_id;return(r?ta(na(r)).link:null)||r||t||e||n}var sf=class n{constructor(e){var t,r,i,o,s,a;let u=ta(na(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=kH((i=u.mode)!==null&&i!==void 0?i:null);Y(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=FH(e);try{return new n(t)}catch{return null}}};var eR=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Iu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=sf.parseLink(r);return Y(i,"argument-error"),Iu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),af=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var O_=class extends af{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function LH(n,e){return _(this,null,function*(){return Cu(n,"POST","/v1/accounts:signUp",Yr(n,e))})}var ia=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield Oi._fromIdTokenResponse(e,r,i),s=CM(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=CM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function CM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var k_=class n extends Bt{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function tR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?k_._fromErrorAndOperation(n,o,e,r):o})}function VH(n,e,t=!1){return _(this,null,function*(){let r=yield Fo(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ia._forOperation(n,"link",r)})}function UH(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(bt(r.app))return Promise.reject(Er(r));let i="reauthenticate";try{let o=yield Fo(n,tR(r,i,e,n),t);Y(o.idToken,r,"internal-error");let s=G_(o.idToken);Y(s,r,"internal-error");let{sub:a}=s;return Y(n.uid===a,r,"user-mismatch"),ia._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ir(r,"user-mismatch"),o}})}function nR(n,e,t=!1){return _(this,null,function*(){if(bt(n.app))return Promise.reject(Er(n));let r="signIn",i=yield tR(n,r,e),o=yield ia._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Z_(n,e){return _(this,null,function*(){return nR(Fi(n),e)})}function rR(n,e,t){var r;Y(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),Y(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),Y(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(Y(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(Y(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function iR(n){return _(this,null,function*(){let e=Fi(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function J_(n,e,t){return _(this,null,function*(){let r=Fi(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&rR(r,i,t),yield of(r,i,"getOobCode",xH,"EMAIL_PASSWORD_PROVIDER")})}function X_(n,e,t){return _(this,null,function*(){if(bt(n.app))return Promise.reject(Er(n));let r=Fi(n),s=yield of(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LH,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&iR(n),u}),a=yield ia._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function eE(n,e,t){return bt(n.app)?Promise.reject(Er(n)):Z_(ze(n),eR.credential(e,t)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&iR(n),r}))}function tE(n,e){return _(this,null,function*(){let t=ze(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&rR(t.auth,i,e);let{email:o}=yield PH(t.auth,i);o!==n.email&&(yield n.reload())})}function jH(n,e){return _(this,null,function*(){return zn(n,"POST","/v1/accounts:update",e)})}function nE(r,i){return _(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=ze(n),a={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=yield Fo(o,jH(o.auth,a));o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null;let l=o.providerData.find(({providerId:h})=>h==="password");l&&(l.displayName=o.displayName,l.photoURL=o.photoURL),yield o._updateTokensIfNecessary(u)})}function rE(n,e){let t=ze(n);return bt(t.auth.app)?Promise.reject(Er(t.auth)):BH(t,e,null)}function BH(n,e,t){return _(this,null,function*(){let{auth:r}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=yield Fo(n,AH(r,o));yield n._updateTokensIfNecessary(s,!0)})}function Du(n,e,t,r){return ze(n).onIdTokenChanged(e,t,r)}function iE(n,e,t){return ze(n).beforeAuthStateChanged(e,t)}function ff(n,e,t,r){return ze(n).onAuthStateChanged(e,t,r)}function oE(n){return ze(n).signOut()}var cf="__sak";var uf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var $H=1e3,HH=10,zH=(()=>{class n extends uf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);vH()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,HH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},$H)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield ui(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield ui(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield ui(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),oR=zH;var qH=(()=>{class n extends uf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),sE=qH;function GH(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var WH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),l=yield GH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function sR(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var F_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=sR("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let y=p;if(y.data.eventId===l)switch(y.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(y.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function wr(){return window}function KH(n){wr().location.href=n}function aR(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}function QH(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function YH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function ZH(){return aR()?self:null}var cR="firebaseLocalStorageDb",JH=1,lf="firebaseLocalStorage",uR="fbase_key",Lo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pf(n,e){return n.transaction([lf],e?"readwrite":"readonly").objectStore(lf)}function XH(){let n=indexedDB.deleteDatabase(cR);return new Lo(n).toPromise()}function L_(){let n=indexedDB.open(cR,JH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(lf,{keyPath:uR})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(lf)?e(r):(r.close(),yield XH(),e(yield L_()))}))})}function DM(n,e,t){return _(this,null,function*(){let r=pf(n,!0).put({[uR]:e,value:t});return new Lo(r).toPromise()})}function ez(n,e){return _(this,null,function*(){let t=pf(n,!1).get(e),r=yield new Lo(t).toPromise();return r===void 0?null:r.value})}function TM(n,e){let t=pf(n,!0).delete(e);return new Lo(t).toPromise()}var tz=800,nz=3,rz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield L_(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>nz)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return aR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=WH._getInstance(ZH()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield QH(),!this.activeServiceWorker)return;this.sender=new F_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||YH()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield L_();return yield DM(t,cf,"1"),yield TM(t,cf),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>DM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>ez(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>TM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=pf(o,!1).getAll();return new Lo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),tz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),lR=rz;var _te=YM("rcb"),Ete=new ko(3e4,6e4);function iz(n,e){return e?Qr(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var bu=class extends wu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return w_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return w_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return w_(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function oz(n){return nR(n.auth,new bu(n),n.bypassAuthState)}function sz(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),UH(t,new bu(n),n.bypassAuthState)}function az(n){return _(this,null,function*(){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),VH(t,new bu(n),n.bypassAuthState)})}var V_=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oz;case"linkViaPopup":case"linkViaRedirect":return az;case"reauthViaPopup":case"reauthViaRedirect":return sz;default:Ir(this.auth,"internal-error")}}resolve(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ki(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var wte=new ko(2e3,1e4);var cz="pendingRedirect",Yh=new Map,U_=class n extends V_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Yh.get(this.auth._key());if(!e){try{let r=(yield uz(this.resolver,this.auth))?yield ui(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yh.set(this.auth._key(),e)}return this.bypassAuthState||Yh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return ui(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ui(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function uz(n,e){return _(this,null,function*(){let t=hz(e),r=dz(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function lz(n,e){Yh.set(n._key(),e)}function dz(n){return Qr(n._redirectPersistence)}function hz(n){return Qh(cz,n.config.apiKey,n.name)}function fz(n,e,t=!1){return _(this,null,function*(){if(bt(n.app))return Promise.reject(Er(n));let r=Fi(n),i=iz(r,e),s=yield new U_(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var pz=10*60*1e3,j_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!dR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Oo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pz&&this.cachedEventUids.clear(),this.cachedEventUids.has(SM(e))}saveEventToCache(e){this.cachedEventUids.add(SM(e)),this.lastProcessedEventTime=Date.now()}};function SM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function dR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function gz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dR(n);default:return!1}}function mz(t){return _(this,arguments,function*(n,e={}){return zn(n,"GET","/v1/projects",e)})}var yz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vz=/^https?/;function _z(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield mz(n);for(let t of e)try{if(Ez(t))return}catch{}Ir(n,"unauthorized-domain")})}function Ez(n){let e=b_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!vz.test(t))return!1;if(yz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var wz=new ko(3e4,6e4);function AM(){let n=wr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Iz(n){return new Promise((e,t)=>{var r,i,o;function s(){AM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AM(),t(Oo(n,"network-request-failed"))},timeout:wz.get()})}if(!((i=(r=wr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=wr().gapi)===null||o===void 0)&&o.load)s();else{let a=YM("iframefcb");return wr()[a]=()=>{gapi.load?s():t(Oo(n,"network-request-failed"))},QM(`${bH()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Zh=null,e})}var Zh=null;function bz(n){return Zh=Zh||Iz(n),Zh}var Cz=new ko(5e3,15e3),Dz="__/auth/iframe",Tz="emulator/auth/iframe",Sz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Az=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mz(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?z_(e,Tz):`https://${n.config.authDomain}/${Dz}`,r={apiKey:e.apiKey,appName:n.name,v:Mi},i=Az.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${hu(r).slice(1)}`}function Rz(n){return _(this,null,function*(){let e=yield bz(n),t=wr().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:Mz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sz,dontclear:!0},r=>new Promise((i,o)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Oo(n,"network-request-failed"),a=wr().setTimeout(()=>{o(s)},Cz.get());function u(){wr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var Pz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xz=500,Nz=600,Oz="_blank",kz="http://localhost",df=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Fz(n,e,t,r=xz,i=Nz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},Pz),{width:r.toString(),height:i.toString(),top:o,left:s}),l=pt().toLowerCase();t&&(a=$M(l)?Oz:t),jM(l)&&(e=e||kz,u.scrollbars="yes");let h=Object.entries(u).reduce((y,[m,M])=>`${y}${m}=${M},`,"");if(yH(l)&&a!=="_self")return Lz(e||"",a),new df(null);let p=window.open(e||"",a,h);Y(p,n,"popup-blocked");try{p.focus()}catch{}return new df(p)}function Lz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Vz="__/auth/handler",Uz="emulator/auth/handler",jz=encodeURIComponent("fac");function MM(n,e,t,r,i,o){return _(this,null,function*(){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Mi,eventId:i};if(e instanceof af){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",$A(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof O_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${jz}=${encodeURIComponent(u)}`:"";return`${Bz(n)}?${hu(a).slice(1)}${l}`})}function Bz({config:n}){return n.emulator?z_(n,Uz):`https://${n.authDomain}/${Vz}`}var I_="webStorageSupport",B_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sE,this._completeRedirectFn=fz,this._overrideRedirectResult=lz}_openPopup(e,t,r,i){return _(this,null,function*(){var o;ki((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield MM(e,t,r,b_(),i);return Fz(e,s,sR())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield MM(e,t,r,b_(),i);return KH(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ki(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield Rz(e),r=new j_(e);return t.register("authEvent",i=>(Y(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(I_,{type:I_},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[I_];s!==void 0&&t(!!s),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_z(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WM()||BM()||K_()}},hR=B_;var RM="@firebase/auth",PM="1.10.0";var $_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function $z(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Hz(n){an(new It("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Y(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KM(n)},l=new R_(r,i,o,u);return DH(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),an(new It("auth-internal",e=>{let t=Fi(e.getProvider("auth").getImmediate());return(r=>new $_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(RM,PM,$z(n)),Ue(RM,PM,"esm2017")}var zz=5*60,qz=Yv("authIdTokenMaxAge")||zz,xM=null,Gz=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>qz)return;let i=t?.token;xM!==i&&(xM=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function aE(n=Gr()){let e=Ai(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Q_(n,{popupRedirectResolver:hR,persistence:[lR,oR,sE]}),r=Yv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=Gz(o.toString());iE(t,s,()=>s(t.currentUser)),Du(t,a=>s(a))}}let i=Kv("auth");return i&&Y_(t,`http://${i}`),t}function Wz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Oo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Wz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Hz("Browser");function pR(n){return new le(function(e){var t=Du(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var gR="auth",qn=class{constructor(e){return e}},Vo=class{constructor(){return Ri(gR)}};var cE=new $("angularfire2.auth-instances");function R4(n,e){let t=No(gR,n,e);return t&&new qn(t)}function P4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new qn(r)}}var x4={provide:Vo,deps:[[new dt,cE]]},N4={provide:qn,useFactory:R4,deps:[[new dt,cE],$n]};function mR(n,...e){return Ue("angularfire",vr.full,"auth"),rn([N4,x4,{provide:cE,useFactory:P4(n),multi:!0,deps:[be,We,_r,Wr,[new dt,xi],...e]}])}var yR=qe(pR,!0);var vR=qe(X_,!0,2);var gf=qe(aE,!0);var _R=qe(ff,!0);var ER=qe(tE,!0,2),wR=qe(J_,!0,2);var IR=qe(eE,!0,2);var bR=qe(oE,!0,2);var CR=qe(rE,!0,2);var DR=qe(nE,!0,2);var Tn=class n{constructor(e){this.auth=e;_R(this.auth,t=>{this.currentUserSubject.next(t)})}currentUserSubject=new st(null);currentUser$=this.currentUserSubject.asObservable();signUp(e,t){return vR(this.auth,e,t)}sendVerificationEmail(e){return ER(e)}login(e,t){return IR(this.auth,e,t)}logout(){return bR(this.auth)}sendPasswordReset(e){return wR(this.auth,e)}updateUserProfile(e,t){let r=this.auth.currentUser;if(!r)return Promise.reject("No user is logged in");let i=[DR(r,{displayName:e})];return t&&t!==r.email&&i.push(CR(r,t)),Promise.all(i)}get currentUser(){return this.auth.currentUser}get isLoggedIn(){return!!this.auth.currentUser}static \u0275fac=function(t){return new(t||n)(W(qn))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var O4=()=>["/dashboard"],k4=()=>["/medication-search"],F4=()=>["/tracking-list"],L4=()=>["/dosage-correction"],V4=()=>["/login"],U4=()=>["/register"],j4=()=>["/profile"];function B4(n,e){if(n&1&&(E(0,"div",14),w(1),v()),n&2){let t=X();x(),Se(" Welcome back, ",t.userEmail," ")}}function $4(n,e){n&1&&(E(0,"button",9),w(1,"Login"),v()),n&2&&F("routerLink",wt(1,V4))}function H4(n,e){n&1&&(E(0,"button",9),w(1,"Register"),v()),n&2&&F("routerLink",wt(1,U4))}function z4(n,e){n&1&&(E(0,"button",9),w(1,"Profile"),v()),n&2&&F("routerLink",wt(1,j4))}function q4(n,e){if(n&1){let t=Ln();E(0,"button",15),ue("click",function(){_n(t);let i=X();return En(i.signOut())}),w(1,"Sign Out"),v()}}var mf=class n{constructor(e,t){this.authService=e;this.router=t}currentYear=new Date().getFullYear();title="doseninja";isMenuOpen=!1;isDarkMode=!1;isLoggedIn=!1;userEmail=null;ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.isLoggedIn=!!e,this.userEmail=e?.email||null})}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,document.body.classList.toggle("dark",this.isDarkMode)}signOut(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(B(Tn),B(Pt))};static \u0275cmp=Me({type:n,selectors:[["app-root"]],decls:30,vars:17,consts:[[1,"app-container"],[1,"app-header"],[1,"app-header-container"],["href","/",1,"logo-link"],["src","assets/logo.png","alt","Dose Ninja Logo",1,"logo"],["class","welcome-message",4,"ngIf"],[1,"theme-toggle-btn",3,"click"],[1,"hamburger-menu",3,"click"],[1,"app-nav"],[3,"routerLink"],[3,"routerLink",4,"ngIf"],[3,"click",4,"ngIf"],[1,"app-content"],["routerLink","/privacy-policy"],[1,"welcome-message"],[3,"click"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"header",1)(2,"div",2)(3,"a",3),Oe(4,"img",4),v(),re(5,B4,2,1,"div",5),E(6,"button",6),ue("click",function(){return r.toggleDarkMode()}),w(7),v(),E(8,"button",7),ue("click",function(){return r.toggleMenu()}),w(9,"\u2630"),v(),E(10,"nav",8)(11,"button",9),w(12,"Dashboard"),v(),E(13,"button",9),w(14,"Medication Search"),v(),E(15,"button",9),w(16,"Tracking List"),v(),E(17,"button",9),w(18,"Dosage Correction"),v(),re(19,$4,2,2,"button",10)(20,H4,2,2,"button",10)(21,z4,2,2,"button",10)(22,q4,2,0,"button",11),v()()(),E(23,"div",12),Oe(24,"router-outlet"),v(),E(25,"footer")(26,"p"),w(27),v(),E(28,"a",13),w(29,"Privacy Policy"),v()()()),t&2&&(x(5),F("ngIf",r.isLoggedIn&&r.userEmail),x(2),Se(" ",r.isDarkMode?"\u2600\uFE0F Light Mode":"\u{1F319} Dark Mode"," "),x(3),Ls("active",r.isMenuOpen),x(),F("routerLink",wt(13,O4)),x(2),F("routerLink",wt(14,k4)),x(2),F("routerLink",wt(15,F4)),x(2),F("routerLink",wt(16,L4)),x(2),F("ngIf",!r.isLoggedIn),x(),F("ngIf",!r.isLoggedIn),x(),F("ngIf",r.isLoggedIn),x(),F("ngIf",r.isLoggedIn),x(5),Se("\xA9 ",r.currentYear," Dose Ninja. All rights reserved."))},dependencies:[jt,ou,xt,Re,He],styles:['@charset "UTF-8";.app-header[_ngcontent-%COMP%]{background:#ffffffbf;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 2px 12px #0000000a;position:sticky;top:0;z-index:999;padding:.5rem 0;transition:background-color .3s ease}body.dark[_ngcontent-%COMP%]   .app-header[_ngcontent-%COMP%]{background:#1e1e1ed9;box-shadow:0 2px 12px #0000004d}.app-header-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;max-width:1200px;margin:0 auto;padding:0 1rem}.logo-link[_ngcontent-%COMP%]{display:flex;align-items:center;text-decoration:none}.logo-link[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:110px;width:auto;margin-right:.75rem}.logo-link[_ngcontent-%COMP%] + .welcome-message[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:var(--color-muted)}@media (max-width: 768px){.logo-link[_ngcontent-%COMP%] + .welcome-message[_ngcontent-%COMP%]{margin-top:.5rem;text-align:center;display:block;width:100%}}body.dark[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{color:var(--text-color-light)}.hamburger-menu[_ngcontent-%COMP%]{display:none;background:none;border:none;font-size:1.5rem;cursor:pointer;color:var(--color-text)}.app-nav[_ngcontent-%COMP%]{display:flex;gap:1rem}.app-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;font-size:.95rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.app-nav[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--color-text)}.theme-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.theme-toggle-btn[_ngcontent-%COMP%]:hover{color:var(--color-text)}@media (max-width: 768px){.hamburger-menu[_ngcontent-%COMP%]{display:block}.app-nav[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background-color:var(--color-surface);flex-direction:column;align-items:center;display:none;padding:1rem 0;box-shadow:0 2px 10px #0000000d}body.dark[_ngcontent-%COMP%]   .app-nav[_ngcontent-%COMP%]{background-color:#222}.app-nav.active[_ngcontent-%COMP%]{display:flex}}']})};var G4=n=>["/drug-details",n];function W4(n,e){if(n&1&&(E(0,"tr")(1,"td"),w(2),v(),E(3,"td"),w(4),v(),E(5,"td"),w(6),v(),E(7,"td"),w(8),v(),E(9,"td")(10,"a",5),w(11," View Details "),v()()()),n&2){let t=e.$implicit;x(2),je(t.name),x(2),je(t.description),x(2),je(t.genericDosage),x(2),je(t.frequency),x(2),F("routerLink",vo(5,G4,t.id))}}var yf=class n{constructor(e){this.http=e}drugs=[{id:1,name:"Acetaminophen",description:"Used to treat pain and reduce fever",genericDosage:"325-650 mg",frequency:"Every 4-6 hours as needed",indications:"Pain, fever",sideEffects:"Rare",precautions:"Liver disease"},{id:2,name:"Ibuprofen",description:"Used to treat pain, fever, and inflammation",genericDosage:"200-400 mg",frequency:"Every 4-6 hours as needed",indications:"Pain, fever, inflammation",sideEffects:"Upset stomach, headache",precautions:"Stomach ulcers, kidney disease"},{id:3,name:"Amoxicillin",description:"Used to treat bacterial infections",genericDosage:"250-500 mg",frequency:"Every 8 hours",indications:"Bacterial infections",sideEffects:"Diarrhea, nausea",precautions:"Penicillin allergy"},{id:4,name:"Levothyroxine",description:"Used to treat hypothyroidism",genericDosage:"25-300 mcg",frequency:"Once daily",indications:"Hypothyroidism",sideEffects:"Weight loss, anxiety, tremors",precautions:"Heart disease"},{id:5,name:"Amlodipine",description:"Used to treat high blood pressure and chest pain",genericDosage:"2.5-10 mg",frequency:"Once daily",indications:"Hypertension, angina",sideEffects:"Swelling, dizziness, headache",precautions:"Heart failure"},{id:6,name:"Metoprolol",description:"Used to treat high blood pressure and heart problems",genericDosage:"25-450 mg",frequency:"1-3 times daily",indications:"Hypertension, angina, heart failure",sideEffects:"Dizziness, fatigue, slow heart rate",precautions:"Asthma"},{id:7,name:"Simvastatin",description:"Used to lower cholesterol",genericDosage:"5-40 mg",frequency:"Once daily",indications:"High cholesterol, prevention of cardiovascular disease",sideEffects:"Muscle pain, nausea, headache",precautions:"Liver disease"},{id:8,name:"Omeprazole",description:"Used to treat heartburn and acid reflux",genericDosage:"10-40 mg",frequency:"Once daily",indications:"GERD, ulcers",sideEffects:"Headache, diarrhea, stomach pain",precautions:"Long-term use"},{id:9,name:"Losartan",description:"Used to treat high blood pressure",genericDosage:"25-100 mg",frequency:"Once daily",indications:"Hypertension",sideEffects:"Dizziness, headache",precautions:"Pregnancy"},{id:10,name:"Albuterol",description:"Used to treat asthma and breathing problems",genericDosage:"2-4 mg",frequency:"3-4 times daily",indications:"Asthma, COPD",sideEffects:"Tremors, nervousness, increased heart rate",precautions:"Heart disease"},{id:11,name:"Gabapentin",description:"Used to treat seizures and nerve pain",genericDosage:"300-3600 mg",frequency:"3 times daily",indications:"Seizures, nerve pain",sideEffects:"Dizziness, drowsiness, fatigue",precautions:"Kidney disease"},{id:12,name:"Hydrochlorothiazide",description:"Used to treat high blood pressure and fluid retention",genericDosage:"12.5-50 mg",frequency:"Once daily",indications:"Hypertension, edema",sideEffects:"Dizziness, headache, dehydration",precautions:"Kidney disease, diabetes"}];displayedDrugs=[];currentIndex=0;pageSize=3;ngOnInit(){this.loadPage()}loadPage(){let e=this.currentIndex*this.pageSize,t=e+this.pageSize;this.displayedDrugs=this.drugs.slice(e,t)}nextPage(){this.currentIndex<this.getTotalPages()-1&&(this.currentIndex++,this.loadPage())}prevPage(){this.currentIndex>0&&(this.currentIndex--,this.loadPage())}getTotalPages(){return Math.ceil(this.drugs.length/this.pageSize)}static \u0275fac=function(t){return new(t||n)(B(Ei))};static \u0275cmp=Me({type:n,selectors:[["app-dashboard"]],decls:38,vars:1,consts:[[1,"dashboard-container"],[1,"card","in-view"],["routerLink","/medication-search"],[1,"drug-table"],[4,"ngFor","ngForOf"],[1,"view-details-button",3,"routerLink"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"div",1)(2,"h2"),w(3,"Welcome to Dose Ninja"),v(),E(4,"p"),w(5,"This is your medication dashboard."),v(),E(6,"button",2),w(7,"Track a Medication"),v()(),E(8,"div",1)(9,"h2"),w(10,"Dashboard Overview"),v(),E(11,"p"),w(12,"Welcome to Dose Ninja! Here you can:"),v(),E(13,"ul")(14,"li"),w(15,"Search for medications"),v(),E(16,"li"),w(17,"Add medications to your tracking list"),v(),E(18,"li"),w(19,"Correct the dosage of your medications"),v()()(),E(20,"div",1)(21,"h3"),w(22,"Medication Summary"),v(),E(23,"table",3)(24,"thead")(25,"tr")(26,"th"),w(27,"Name"),v(),E(28,"th"),w(29,"Description"),v(),E(30,"th"),w(31,"Generic Dosage"),v(),E(32,"th"),w(33,"Frequency"),v(),E(34,"th"),w(35,"Details"),v()()(),E(36,"tbody"),re(37,W4,12,7,"tr",4),v()()()()),t&2&&(x(37),F("ngForOf",r.drugs))},dependencies:[Re,bn,jt,xt,Io],styles:['@charset "UTF-8";.drug-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;border-radius:8px;overflow:hidden;box-shadow:0 0 20px #0000001a}.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .drug-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:.75rem 1rem;text-align:left;font-size:.95rem}.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-color-light);font-weight:700}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:var(--color-bg)}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#ffffff08}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ffffff14}.drug-table[_ngcontent-%COMP%]   a.view-details-button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border:none;padding:6px 16px;border-radius:999px;cursor:pointer;text-decoration:none;display:inline-block;font-size:.85rem;font-weight:600;text-align:center;transition:background-color .2s ease,transform .2s ease;box-shadow:0 2px 6px #00000014}.drug-table[_ngcontent-%COMP%]   a.view-details-button[_ngcontent-%COMP%]:hover{background-color:#1565c0;transform:scale(1.05)}.drug-table[_ngcontent-%COMP%]   a.view-details-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.drug-table[_ngcontent-%COMP%]   body.dark[_ngcontent-%COMP%]   a.view-details-button[_ngcontent-%COMP%]{background-color:var(--color-accent);color:#000}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--color-primary);color:var(--text-color-light)}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:var(--text-color)}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#2a2a2a}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#1f1f1f}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#333}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   a.view-details-button[_ngcontent-%COMP%]{background-color:var(--accent-color, #90caf9);color:#000}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   a.view-details-button[_ngcontent-%COMP%]:hover{background-color:#a8d6fa}']})};function K4(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Warnings:"),v(),w(3),v()),n&2){let t=X().ngIf;x(3),Se(" ",t.warnings,"")}}function Q4(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Interactions:"),v(),w(3),v()),n&2){let t=X().ngIf;x(3),Se(" ",t.interactions.join(", ")," ")}}function Y4(n,e){if(n&1&&(E(0,"li")(1,"strong"),w(2,"Drug Class:"),v(),w(3),v()),n&2){let t=X().ngIf;x(3),Se(" ",t.drugClass.join(", ")," ")}}function Z4(n,e){if(n&1&&(E(0,"div",3)(1,"h2",4),w(2),v(),E(3,"ul",5)(4,"li")(5,"strong"),w(6,"Description:"),v(),w(7),v(),E(8,"li")(9,"strong"),w(10,"Generic Dosage:"),v(),w(11),v(),E(12,"li")(13,"strong"),w(14,"Frequency:"),v(),w(15),v(),E(16,"li")(17,"strong"),w(18,"Indications:"),v(),w(19),v(),E(20,"li")(21,"strong"),w(22,"Side Effects:"),v(),w(23),v(),E(24,"li")(25,"strong"),w(26,"Precautions:"),v(),w(27),v(),re(28,K4,4,1,"li",6)(29,Q4,4,1,"li",6)(30,Y4,4,1,"li",6),v()()),n&2){let t=e.ngIf;x(2),je(t.name),x(5),Se(" ",t.description,""),x(4),Se(" ",t.genericDosage,""),x(4),Se(" ",t.frequency,""),x(4),Se(" ",t.indications,""),x(4),Se(" ",t.sideEffects,""),x(4),Se(" ",t.precautions,""),x(),F("ngIf",t.warnings),x(),F("ngIf",t.interactions==null?null:t.interactions.length),x(),F("ngIf",t.drugClass==null?null:t.drugClass.length)}}function J4(n,e){n&1&&(E(0,"h2"),w(1,"\u274C Error"),v())}function X4(n,e){if(n&1&&(E(0,"p"),w(1),v()),n&2){let t=X(2);x(),je(t.errorMessage)}}function eq(n,e){n&1&&(E(0,"h2"),w(1,"\u{1F504} Loading..."),v())}function tq(n,e){if(n&1&&(E(0,"div",3),re(1,J4,2,0,"h2",6)(2,X4,2,1,"p",6)(3,eq,2,0,"h2",6),v()),n&2){let t=X();x(),F("ngIf",t.errorMessage),x(),F("ngIf",t.errorMessage),x(),F("ngIf",!t.errorMessage)}}var vf=class n{constructor(e){this.route=e}drugId=null;drug=null;errorMessage=null;ngOnInit(){this.drugId=this.route.snapshot.paramMap.get("rxcui"),this.drugId?this.drug={id:this.drugId,name:"Ibuprofen",description:"Pain relief and anti-inflammatory",genericDosage:"200mg",frequency:"Every 6-8 hours",indications:"Pain, fever, inflammation",sideEffects:"Nausea, dizziness, GI upset",precautions:"Avoid alcohol and prolonged use",warnings:"Not for use in late pregnancy or kidney issues",interactions:["Aspirin","Warfarin"],drugClass:["NSAID","Analgesic"]}:this.errorMessage="Drug ID not found."}static \u0275fac=function(t){return new(t||n)(B(Dn))};static \u0275cmp=Me({type:n,selectors:[["app-drug-details"]],decls:4,vars:2,consts:[["loadingOrError",""],[1,"drug-details-container"],["class","card in-view",4,"ngIf","ngIfElse"],[1,"card","in-view"],[1,"drug-name"],[1,"drug-info-list"],[4,"ngIf"]],template:function(t,r){if(t&1&&(E(0,"div",1),re(1,Z4,31,10,"div",2)(2,tq,4,3,"ng-template",null,0,KT),v()),t&2){let i=BT(3);x(),F("ngIf",r.drug)("ngIfElse",i)}},dependencies:[Re,He],styles:[".drug-details-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:1rem;margin-top:2rem}.drug-details-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;max-width:800px;padding:2rem;background:#ffffff0d;backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.15);border-radius:16px;color:var(--text-color);box-shadow:0 8px 30px #0000001a;animation:_ngcontent-%COMP%_fadeInUp .6s ease forwards;opacity:0;transform:translateY(20px)}.drug-details-container[_ngcontent-%COMP%]   .card.in-view[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.drug-name[_ngcontent-%COMP%]{font-size:2.2rem;color:var(--color-primary);margin-bottom:1.2rem;text-align:center}.drug-info-list[_ngcontent-%COMP%]{list-style:none;padding:0;font-size:1.1rem}.drug-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.75rem;line-height:1.5}.drug-info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--color-secondary)}.section[_ngcontent-%COMP%]{margin-top:2rem}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-accent);margin-bottom:.5rem;font-size:1.2rem}.section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{font-size:1rem;line-height:1.5}.section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1.25rem;list-style:disc}.section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.4rem}.chip-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:.5rem}.chip-group[_ngcontent-%COMP%]   .chip[_ngcontent-%COMP%]{background-color:var(--color-secondary);color:#fff;padding:.4rem .75rem;border-radius:999px;font-size:.85rem;font-weight:500;box-shadow:0 2px 5px #0000001a}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})};var FR=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(B(ar),B(ft))};static \u0275dir=$e({type:n})}return n})(),xu=(()=>{class n extends FR{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(n)))(i||n)}})();static \u0275dir=$e({type:n,features:[Qt]})}return n})(),jo=new $(""),nq={provide:jo,useExisting:yn(()=>gE),multi:!0},gE=(()=>{class n extends xu{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(n)))(i||n)}})();static \u0275dir=$e({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[cr([nq]),Qt]})}return n})(),rq={provide:jo,useExisting:yn(()=>gt),multi:!0};function iq(){let n=In()?In().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var oq=new $(""),gt=(()=>{class n extends FR{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!iq())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(B(ar),B(ft),B(oq,8))};static \u0275dir=$e({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ue("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[cr([rq]),Qt]})}return n})();function mE(n){return n==null||yE(n)===0}function yE(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Sf=new $(""),vE=new $(""),sq=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,De=class{static min(e){return aq(e)}static max(e){return cq(e)}static required(e){return LR(e)}static requiredTrue(e){return uq(e)}static email(e){return lq(e)}static minLength(e){return dq(e)}static maxLength(e){return hq(e)}static pattern(e){return fq(e)}static nullValidator(e){return Ef()}static compose(e){return HR(e)}static composeAsync(e){return qR(e)}};function aq(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function cq(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function LR(n){return mE(n.value)?{required:!0}:null}function uq(n){return n.value===!0?null:{required:!0}}function lq(n){return mE(n.value)||sq.test(n.value)?null:{email:!0}}function dq(n){return e=>{let t=e.value?.length??yE(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function hq(n){return e=>{let t=e.value?.length??yE(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function fq(n){if(!n)return Ef;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(mE(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Ef(n){return null}function VR(n){return n!=null}function UR(n){return yo(n)?Ne(n):n}function jR(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function BR(n,e){return e.map(t=>t(n))}function pq(n){return!n.validate}function $R(n){return n.map(e=>pq(e)?e:t=>e.validate(t))}function HR(n){if(!n)return null;let e=n.filter(VR);return e.length==0?null:function(t){return jR(BR(t,e))}}function zR(n){return n!=null?HR($R(n)):null}function qR(n){if(!n)return null;let e=n.filter(VR);return e.length==0?null:function(t){let r=BR(t,e).map(UR);return qg(r).pipe(te(jR))}}function GR(n){return n!=null?qR($R(n)):null}function SR(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function WR(n){return n._rawValidators}function KR(n){return n._rawAsyncValidators}function uE(n){return n?Array.isArray(n)?n:[n]:[]}function wf(n,e){return Array.isArray(n)?n.includes(e):n===e}function AR(n,e){let t=uE(e);return uE(n).forEach(i=>{wf(t,i)||t.push(i)}),t}function MR(n,e){return uE(e).filter(t=>!wf(n,t))}var If=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=zR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=GR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Uo=class extends If{name;get formDirective(){return null}get path(){return null}},Li=class extends If{_parent=null;name=null;valueAccessor=null},bf=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},gq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Hne=he(U({},gq),{"[class.ng-submitted]":"isSubmitted"}),Nt=(()=>{class n extends bf{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(Li,2))};static \u0275dir=$e({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ls("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Qt]})}return n})(),Sn=(()=>{class n extends bf{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(Uo,10))};static \u0275dir=$e({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ls("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Qt]})}return n})();var Su="VALID",_f="INVALID",oa="PENDING",Au="DISABLED",Vi=class{},Cf=class extends Vi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Mu=class extends Vi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ru=class extends Vi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},sa=class extends Vi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},lE=class extends Vi{source;constructor(e){super(),this.source=e}},dE=class extends Vi{source;constructor(e){super(),this.source=e}};function _E(n){return(Af(n)?n.validators:n)||null}function mq(n){return Array.isArray(n)?zR(n):n||null}function EE(n,e){return(Af(e)?e.asyncValidators:n)||null}function yq(n){return Array.isArray(n)?GR(n):n||null}function Af(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function QR(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[t])throw new q(1001,"")}function YR(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new q(1002,"")})}var aa=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ur(this.statusReactive)}set status(e){ur(()=>this.statusReactive.set(e))}_status=js(()=>this.statusReactive());statusReactive=ks(void 0);get valid(){return this.status===Su}get invalid(){return this.status===_f}get pending(){return this.status==oa}get disabled(){return this.status===Au}get enabled(){return this.status!==Au}errors;get pristine(){return ur(this.pristineReactive)}set pristine(e){ur(()=>this.pristineReactive.set(e))}_pristine=js(()=>this.pristineReactive());pristineReactive=ks(!0);get dirty(){return!this.pristine}get touched(){return ur(this.touchedReactive)}set touched(e){ur(()=>this.touchedReactive.set(e))}_touched=js(()=>this.touchedReactive());touchedReactive=ks(!1);get untouched(){return!this.touched}_events=new Je;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(AR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(MR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(MR(e,this._rawAsyncValidators))}hasValidator(e){return wf(this._rawValidators,e)}hasAsyncValidator(e){return wf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ru(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ru(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mu(!0,r))}markAsPending(e={}){this.status=oa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new sa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Au,this.errors=null,this._forEachChild(i=>{i.disable(he(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cf(this.value,r)),this._events.next(new sa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Su,this._forEachChild(r=>{r.enable(he(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Su||this.status===oa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cf(this.value,t)),this._events.next(new sa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Au:Su}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=oa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=UR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new sa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new tt,this.statusChanges=new tt}_calculateStatus(){return this._allControlsDisabled()?Au:this.errors?_f:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oa)?oa:this._anyControlsHaveStatus(_f)?_f:Su}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Mu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ru(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Af(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=mq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=yq(this._rawAsyncValidators)}},ca=class extends aa{constructor(e,t,r){super(_E(t),EE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){YR(this,!0,e),Object.keys(e).forEach(r=>{QR(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hE=class extends ca{};var Nu=new $("",{providedIn:"root",factory:()=>Ou}),Ou="always";function ZR(n,e){return[...e.path,n]}function fE(n,e,t=Ou){wE(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),_q(n,e),wq(n,e),Eq(n,e),vq(n,e)}function RR(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Tf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Df(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vq(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function wE(n,e){let t=WR(n);e.validator!==null?n.setValidators(SR(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=KR(n);e.asyncValidator!==null?n.setAsyncValidators(SR(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Df(e._rawValidators,i),Df(e._rawAsyncValidators,i)}function Tf(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=WR(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=KR(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Df(e._rawValidators,r),Df(e._rawAsyncValidators,r),t}function _q(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&JR(n,e)})}function Eq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&JR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function JR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wq(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Iq(n,e){n==null,wE(n,e)}function bq(n,e){return Tf(n,e)}function XR(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Cq(n){return Object.getPrototypeOf(n.constructor)===xu}function Dq(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function eP(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===gt?t=o:Cq(o)?r=o:i=o}),i||r||t||null}function Tq(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function PR(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Pu=class extends aa{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(_E(t),EE(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Af(t)&&(t.nonNullable||t.initialValueIsDefault)&&(xR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){PR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){PR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Sq=n=>n instanceof Pu;var Aq={provide:Li,useExisting:yn(()=>ku)},NR=Promise.resolve(),ku=(()=>{class n extends Li{_changeDetectorRef;callSetDisabledState;control=new Pu;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new tt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=eP(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),XR(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){fE(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){NR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&vi(r);NR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?ZR(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(B(Uo,9),B(Sf,10),B(vE,10),B(jo,10),B(_o,8),B(Nu,8))};static \u0275dir=$e({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[cr([Aq]),Qt,nr]})}return n})();var An=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var Mq={provide:jo,useExisting:yn(()=>IE),multi:!0};var Rq=(()=>{class n{_accessors=[];add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IE=(()=>{class n extends xu{_registry;_injector;_state;_control;_fn;setDisabledStateFired=!1;onChange=()=>{};name;formControlName;value;callSetDisabledState=k(Nu,{optional:!0})??Ou;constructor(t,r,i,o){super(t,r),this._registry=i,this._injector=o}ngOnInit(){this._control=this._injector.get(Li),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}static \u0275fac=function(r){return new(r||n)(B(ar),B(ft),B(Rq),B(We))};static \u0275dir=$e({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(){return i.onChange()})("blur",function(){return i.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},standalone:!1,features:[cr([Mq]),Qt]})}return n})();var tP=new $("");var Pq={provide:Uo,useExisting:yn(()=>un)},un=(()=>{class n extends Uo{callSetDisabledState;get submitted(){return ur(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=js(()=>this._submittedReactive());_submittedReactive=ks(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new tt;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Tf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return fE(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){RR(t.control||null,t,!1),Tq(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Dq(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new lE(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new dE(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(RR(r||null,t),Sq(i)&&(fE(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Iq(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&bq(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wE(this.form,this),this._oldForm&&Tf(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(B(Sf,10),B(vE,10),B(Nu,8))};static \u0275dir=$e({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&ue("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[cr([Pq]),Qt,nr]})}return n})();var xq={provide:Li,useExisting:yn(()=>ln)},ln=(()=>{class n extends Li{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new tt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=eP(this,o)}ngOnChanges(t){this._added||this._setUpControl(),XR(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ZR(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(B(Uo,13),B(Sf,10),B(vE,10),B(jo,10),B(tP,8))};static \u0275dir=$e({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[cr([xq]),Qt,nr]})}return n})();var Nq={provide:jo,useExisting:yn(()=>ua),multi:!0};function nP(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Oq(n){return n.split(":")[0]}var ua=(()=>{class n extends xu{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=nP(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Oq(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(n)))(i||n)}})();static \u0275dir=$e({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[cr([Nq]),Qt]})}return n})(),Mf=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(nP(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(B(ft),B(ar),B(ua,9))};static \u0275dir=$e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),kq={provide:jo,useExisting:yn(()=>rP),multi:!0};function OR(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Fq(n){return n.split(":")[0]}var rP=(()=>{class n extends xu{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Fq(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(n)))(i||n)}})();static \u0275dir=$e({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[cr([kq]),Qt]})}return n})(),Rf=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(OR(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(OR(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(B(ft),B(ar),B(rP,9))};static \u0275dir=$e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var Lq=(()=>{class n{_validator=Ef;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ef,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=$e({type:n,features:[nr]})}return n})();var Vq={provide:Sf,useExisting:yn(()=>bE),multi:!0};var bE=(()=>{class n extends Lq{required;inputName="required";normalizeInput=vi;createValidator=t=>LR;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Hr(n)))(i||n)}})();static \u0275dir=$e({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Rc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[cr([Vq]),Qt]})}return n})();var iP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=wn({type:n});static \u0275inj=vn({})}return n})(),pE=class extends aa{constructor(e,t,r){super(_E(t),EE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){YR(this,!1,e),e.forEach((r,i)=>{QR(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function kR(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Mn=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return kR(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new ca(i,o)}record(t,r=null){let i=this._reduceControls(t);return new hE(i,r)}control(t,r,i){let o={};return this.useNonNullable?(kR(r)?o=r:(o.validators=r,o.asyncValidators=i),new Pu(t,he(U({},o),{nonNullable:!0}))):new Pu(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new pE(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Pu)return t;if(t instanceof aa)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ui=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Nu,useValue:t.callSetDisabledState??Ou}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=wn({type:n});static \u0275inj=vn({imports:[iP]})}return n})(),Jt=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:tP,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Nu,useValue:t.callSetDisabledState??Ou}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=wn({type:n});static \u0275inj=vn({imports:[iP]})}return n})();function Uq(n,e){n&1&&(E(0,"div"),w(1,"Email is required."),v())}function jq(n,e){n&1&&(E(0,"div"),w(1,"Please enter a valid email address."),v())}function Bq(n,e){if(n&1&&(E(0,"div",15),re(1,Uq,2,0,"div",16)(2,jq,2,0,"div",16),v()),n&2){let t,r,i=X();x(),F("ngIf",(t=i.loginForm.get("email"))==null||t.errors==null?null:t.errors.required),x(),F("ngIf",(r=i.loginForm.get("email"))==null||r.errors==null?null:r.errors.email)}}function $q(n,e){n&1&&(E(0,"div"),w(1,"Password is required."),v())}function Hq(n,e){n&1&&(E(0,"div"),w(1,"Password must be at least 6 characters."),v())}function zq(n,e){if(n&1&&(E(0,"div",15),re(1,$q,2,0,"div",16)(2,Hq,2,0,"div",16),v()),n&2){let t,r,i=X();x(),F("ngIf",(t=i.loginForm.get("password"))==null||t.errors==null?null:t.errors.required),x(),F("ngIf",(r=i.loginForm.get("password"))==null||r.errors==null?null:r.errors.minlength)}}function qq(n,e){if(n&1&&(E(0,"div",15),w(1),v()),n&2){let t=X();x(),je(t.errorMessage)}}function Gq(n,e){if(n&1&&(E(0,"div",17),w(1),v()),n&2){let t=X();x(),je(t.resendSuccessMessage)}}function Wq(n,e){if(n&1){let t=Ln();E(0,"div",18)(1,"p"),w(2,"Didn't receive the email?"),v(),E(3,"button",19),ue("click",function(){_n(t);let i=X();return En(i.resendVerification())}),w(4,"Resend Verification Email"),v()()}}var Pf=class n{constructor(e,t,r,i){this.fb=e;this.router=t;this.authService=r;this.elRef=i;this.loginForm=this.fb.group({email:["",[De.required,De.email]],password:["",[De.required,De.minLength(6)]]})}loginForm;errorMessage="";showResend=!1;unverifiedUser=null;resendSuccessMessage="";ngAfterViewInit(){let e=this.elRef.nativeElement.querySelector(".card");if(e){let t=new IntersectionObserver(([r])=>{r.isIntersecting&&(e.classList.add("in-view"),t.unobserve(e))},{threshold:.1});t.observe(e)}}onSubmit(){if(this.errorMessage="",this.resendSuccessMessage="",this.showResend=!1,this.loginForm.valid){let{email:e,password:t}=this.loginForm.value;this.authService.login(e,t).then(r=>{let i=r.user;i.emailVerified?this.router.navigate(["/dashboard"]):(this.unverifiedUser=i,this.showResend=!0,this.errorMessage="\u{1F4E9} Please verify your email address before logging in.",this.authService.logout())}).catch(r=>{this.errorMessage=r.message||"An error occurred during login."})}else this.markFormGroupTouched(this.loginForm)}resendVerification(){this.unverifiedUser&&this.authService.sendVerificationEmail(this.unverifiedUser).then(()=>{this.resendSuccessMessage="\u2705 Verification email resent. Please check your inbox.",this.showResend=!1}).catch(e=>{this.errorMessage="\u26A0\uFE0F Failed to resend email. Try again later."})}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t.markAsTouched()})}static \u0275fac=function(t){return new(t||n)(B(Mn),B(Pt),B(Tn),B(ft))};static \u0275cmp=Me({type:n,selectors:[["app-login"]],decls:27,vars:7,consts:[[1,"login-container","card"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email"],["class","error-message",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password"],["class","success-message",4,"ngIf"],["class","resend-container",4,"ngIf"],["type","submit",3,"disabled"],[1,"forgot-link"],["routerLink","/forgot-password"],[1,"register-link"],["routerLink","/register"],[1,"error-message"],[4,"ngIf"],[1,"success-message"],[1,"resend-container"],["type","button",3,"click"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"Login"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",2)(5,"label",3),w(6,"Email"),v(),Oe(7,"input",4),re(8,Bq,3,2,"div",5),v(),E(9,"div",2)(10,"label",6),w(11,"Password"),v(),Oe(12,"input",7),re(13,zq,3,2,"div",5),v(),re(14,qq,2,1,"div",5)(15,Gq,2,1,"div",8)(16,Wq,5,0,"div",9),E(17,"button",10),w(18,"Login"),v(),E(19,"p",11)(20,"a",12),w(21,"Forgot your password?"),v()(),E(22,"div",13)(23,"p"),w(24,"Don't have an account? "),E(25,"a",14),w(26,"Register here"),v()()()()()),t&2){let i,o;x(3),F("formGroup",r.loginForm),x(5),F("ngIf",((i=r.loginForm.get("email"))==null?null:i.invalid)&&(((i=r.loginForm.get("email"))==null?null:i.dirty)||((i=r.loginForm.get("email"))==null?null:i.touched))),x(5),F("ngIf",((o=r.loginForm.get("password"))==null?null:o.invalid)&&(((o=r.loginForm.get("password"))==null?null:o.dirty)||((o=r.loginForm.get("password"))==null?null:o.touched))),x(),F("ngIf",r.errorMessage),x(),F("ngIf",r.resendSuccessMessage),x(),F("ngIf",r.showResend),x(),F("disabled",r.loginForm.invalid)}},dependencies:[Re,He,Jt,An,gt,Nt,Sn,un,ln,jt,xt],styles:["[_nghost-%COMP%]{color:var(--text-color)}.login-container[_ngcontent-%COMP%]{max-width:500px;margin:4rem auto;padding:2rem;background-color:var(--color-card-bg, #f9f9f9);border-radius:12px;box-shadow:0 0 20px #0003}h2[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;font-size:1.75rem;font-weight:600;color:var(--text-color)}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.95rem;color:var(--text-color)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:1rem;border-radius:8px;border:1px solid #ccc;background-color:var(--input-bg, #fff);color:var(--text-color)}.login-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.85rem;color:red}.login-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;text-align:center;margin-top:-1rem}.login-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:green;font-size:.9rem;text-align:center;margin-top:-1rem}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:var(--color-muted)}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;color:var(--color-primary);border:none;font-weight:500;cursor:pointer;text-decoration:underline;transition:color .2s ease}.login-form[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#1565c0}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;border-radius:999px;background-color:var(--color-primary);color:#fff;border:none;cursor:pointer;transition:background-color .2s ease}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#1565c0}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#aaa;cursor:not-allowed}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.95rem;color:var(--color-muted)}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;font-weight:500}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}body.dark[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{background-color:#222}body.dark[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], body.dark[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:var(--text-color-light)}body.dark[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#2a2a2a;border-color:#555}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]{color:#ccc}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#90caf9}body.dark[_ngcontent-%COMP%]   .resend-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#42a5f5}"]})};var Kq=["cardRef"],Qq=()=>({id:"firstName",label:"First Name",type:"text"}),Yq=()=>({id:"lastName",label:"Last Name",type:"text"}),Zq=()=>({id:"birthDate",label:"Birth Date",type:"date"}),Jq=()=>({id:"username",label:"Username",type:"text"}),Xq=()=>({id:"email",label:"Email",type:"email"}),e3=n=>({id:"password",label:"Password",type:n}),t3=n=>({id:"confirmPassword",label:"Confirm Password",type:n}),n3=(n,e,t,r,i,o,s)=>[n,e,t,r,i,o,s];function r3(n,e){if(n&1){let t=Ln();E(0,"div",11),Oe(1,"input",12),E(2,"button",13),ue("click",function(){_n(t);let i=X(2);return En(i.togglePasswordVisibility())}),w(3),v()()}if(n&2){let t=X().$implicit,r=X();x(),F("type",r.passwordVisible?"text":"password")("id",t.id)("formControlName",t.id),x(2),Se(" ",r.passwordVisible?"\u{1F648}":"\u{1F441}\uFE0F"," ")}}function i3(n,e){if(n&1){let t=Ln();E(0,"div",11),Oe(1,"input",12),E(2,"button",13),ue("click",function(){_n(t);let i=X(2);return En(i.toggleConfirmPasswordVisibility())}),w(3),v()()}if(n&2){let t=X().$implicit,r=X();x(),F("type",r.confirmPasswordVisible?"text":"password")("id",t.id)("formControlName",t.id),x(2),Se(" ",r.confirmPasswordVisible?"\u{1F648}":"\u{1F441}\uFE0F"," ")}}function o3(n,e){if(n&1&&Oe(0,"input",14),n&2){let t=X().$implicit;F("type",t.type)("id",t.id)("formControlName",t.id)}}function s3(n,e){if(n&1&&(E(0,"div"),w(1),v()),n&2){let t=X(2).$implicit;x(),Se(" ",t.label," is required. ")}}function a3(n,e){n&1&&(E(0,"div"),w(1," Please enter a valid email address. "),v())}function c3(n,e){n&1&&(E(0,"div"),w(1," Password must be at least 6 characters. "),v())}function u3(n,e){n&1&&(E(0,"div"),w(1," You must be at least 18 years old. "),v())}function l3(n,e){if(n&1&&(E(0,"div",15),re(1,s3,2,1,"div",16)(2,a3,2,0,"div",16)(3,c3,2,0,"div",16)(4,u3,2,0,"div",16),v()),n&2){let t,r,i,o,s=X().$implicit,a=X();x(),F("ngIf",(t=a.registerForm.get(s.id))==null||t.errors==null?null:t.errors.required),x(),F("ngIf",s.id==="email"&&((r=a.registerForm.get(s.id))==null||r.errors==null?null:r.errors.email)),x(),F("ngIf",s.id==="password"&&((i=a.registerForm.get(s.id))==null||i.errors==null?null:i.errors.minlength)),x(),F("ngIf",s.id==="birthDate"&&((o=a.registerForm.get(s.id))==null||o.errors==null?null:o.errors.underage))}}function d3(n,e){if(n&1&&(E(0,"div",7)(1,"label",8),w(2),v(),re(3,r3,4,4,"div",9)(4,i3,4,4,"div",9)(5,o3,1,3,"input",10)(6,l3,5,4,"div",3),v()),n&2){let t,r=e.$implicit,i=X();x(),F("for",r.id),x(),je(r.label),x(),F("ngIf",r.id==="password"),x(),F("ngIf",r.id==="confirmPassword"),x(),F("ngIf",r.id!=="password"&&r.id!=="confirmPassword"),x(),F("ngIf",((t=i.registerForm.get(r.id))==null?null:t.invalid)&&(((t=i.registerForm.get(r.id))==null?null:t.dirty)||((t=i.registerForm.get(r.id))==null?null:t.touched)))}}function h3(n,e){n&1&&(E(0,"div",15),w(1," Passwords must match. "),v())}var xf=class n{constructor(e,t,r){this.fb=e;this.authService=t;this.router=r;this.registerForm=this.fb.group({firstName:["",De.required],lastName:["",De.required],birthDate:["",[De.required,this.validateAge]],username:["",De.required],email:["",[De.required,De.email]],password:["",[De.required,De.minLength(6)]],confirmPassword:["",De.required]},{validators:this.mustMatchValidator})}registerForm;cardRef;passwordVisible=!1;confirmPasswordVisible=!1;errorMessage="";successMessage="";ngAfterViewInit(){let e=new IntersectionObserver(([t])=>{t.isIntersecting&&this.cardRef?.nativeElement&&(this.cardRef.nativeElement.classList.add("in-view"),e.disconnect())},{threshold:.3});this.cardRef?.nativeElement&&e.observe(this.cardRef.nativeElement)}onSubmit(){if(this.registerForm.valid){let{email:e,password:t}=this.registerForm.value;this.authService.signUp(e,t).then(r=>this.authService.sendVerificationEmail(r.user).then(()=>{this.successMessage="\u{1F4E7} Verification email sent! Please check your inbox.",this.errorMessage="",this.router.navigate(["/login"])})).catch(r=>{console.error("\u274C Firebase Registration Error:",r),this.errorMessage=r.message||"Registration failed."})}else this.markFormGroupTouched(this.registerForm)}markFormGroupTouched(e){Object.values(e.controls).forEach(t=>{t instanceof ca?this.markFormGroupTouched(t):t.markAsTouched()})}validateAge(e){let t=new Date(e.value),r=new Date,i=r.getFullYear()-t.getFullYear(),o=r.getMonth()-t.getMonth();return(o<0||o===0&&r.getDate()<t.getDate())&&i--,i<18?{underage:!0}:null}mustMatchValidator(e){let t=e.get("password")?.value,r=e.get("confirmPassword")?.value;return t===r?null:{mustMatch:!0}}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}toggleConfirmPasswordVisibility(){this.confirmPasswordVisible=!this.confirmPasswordVisible}static \u0275fac=function(t){return new(t||n)(B(Mn),B(Tn),B(Pt))};static \u0275cmp=Me({type:n,selectors:[["app-register"]],viewQuery:function(t,r){if(t&1&&Gd(Kq,5),t&2){let i;Pc(i=xc())&&(r.cardRef=i.first)}},decls:12,vars:21,consts:[[1,"card","in-view","register-container"],[1,"register-form",3,"ngSubmit","formGroup"],["class","form-group",4,"ngFor","ngForOf"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[1,"login-link"],["routerLink","/login"],[1,"form-group"],[3,"for"],["class","password-wrapper",4,"ngIf"],["class","form-control",3,"type","id","formControlName",4,"ngIf"],[1,"password-wrapper"],[3,"type","id","formControlName"],["type","button",1,"toggle-icon",3,"click"],[1,"form-control",3,"type","id","formControlName"],[1,"error-message"],[4,"ngIf"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"Register"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),re(4,d3,7,6,"div",2)(5,h3,2,0,"div",3),E(6,"button",4),w(7," Register "),v(),E(8,"div",5),w(9," Already have an account? "),E(10,"a",6),w(11,"Login here"),v()()()()),t&2){let i;x(3),F("formGroup",r.registerForm),x(),F("ngForOf",zT(13,n3,wt(4,Qq),wt(5,Yq),wt(6,Zq),wt(7,Jq),wt(8,Xq),vo(9,e3,r.passwordVisible?"text":"password"),vo(11,t3,r.confirmPasswordVisible?"text":"password"))),x(),F("ngIf",(r.registerForm.errors==null?null:r.registerForm.errors.mustMatch)&&((i=r.registerForm.get("confirmPassword"))==null?null:i.touched)),x(),F("disabled",r.registerForm.invalid)}},dependencies:[Re,bn,He,Jt,An,gt,Nt,Sn,un,ln,jt,xt],styles:[".register-container[_ngcontent-%COMP%]{max-width:600px;margin:4rem auto;padding:2.5rem;background-color:var(--color-card-bg);border-radius:12px;box-shadow:0 0 20px #0003}.register-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem;font-size:1.75rem;font-weight:600;color:var(--color-text);text-align:center}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;font-size:.95rem;color:var(--text-color)}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:1rem;border-radius:8px;background-color:var(--input-bg);border:1px solid #ccc;color:var(--text-color)}.register-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:.25rem;color:red;font-size:.875rem}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;font-size:1.2rem;cursor:pointer;color:var(--color-muted);transition:color .2s ease}.register-form[_ngcontent-%COMP%]   .password-wrapper[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]:hover{color:var(--color-primary)}.register-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.9rem;text-align:left}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:1rem;background-color:var(--color-primary);color:#fff;padding:.75rem 1.5rem;border-radius:999px;font-weight:500;font-size:1rem;border:none;cursor:pointer;transition:background-color .2s ease}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.register-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#aaa;cursor:not-allowed}.login-link[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:.95rem;text-align:center;color:var(--color-muted)}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none;font-weight:500}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var f3=()=>[],p3=()=>["/dosage-correction"];function g3(n,e){if(n&1&&(E(0,"div",4),w(1),v()),n&2){let t=X();x(),Gy(" \u{1F9FE} ",t.trackedDrugs.length," medication",t.trackedDrugs.length>1?"s":"",` being tracked
`)}}function m3(n,e){if(n&1){let t=Ln();E(0,"tr")(1,"td"),w(2),v(),E(3,"td"),w(4),v(),E(5,"td")(6,"button",8),ue("click",function(){let i=_n(t).$implicit,o=X(2);return En(o.removeFromTrackingList(i))}),w(7," Remove "),v()(),E(8,"td")(9,"a",9),w(10,"Correct Dosage"),v()()()}if(n&2){let t=e.$implicit;x(2),je(t.name),x(2),je(t.description),x(5),F("routerLink",wt(3,p3))}}function y3(n,e){if(n&1&&(E(0,"div",5)(1,"table",6)(2,"thead")(3,"tr")(4,"th"),w(5,"Name"),v(),E(6,"th"),w(7,"Description"),v(),E(8,"th"),w(9,"Remove"),v(),E(10,"th"),w(11,"Correct Dosage"),v()()(),E(12,"tbody"),re(13,m3,11,4,"tr",7),v()()()),n&2){let t,r=X();x(13),F("ngForOf",(t=r.trackedDrugs)!==null&&t!==void 0?t:wt(1,f3))}}function v3(n,e){n&1&&(E(0,"p",10),w(1," You haven't added any medications to your tracking list yet. "),v())}var Nf=class n{trackedDrugs=[{id:1,name:"Acetaminophen",description:"Used to treat pain and reduce fever",genericDosage:"325-650 mg",frequency:"Every 4-6 hours as needed",indications:"Pain, fever",sideEffects:"Rare",precautions:"Liver disease"},{id:2,name:"Ibuprofen",description:"Used to treat pain, fever, and inflammation",genericDosage:"200-400 mg",frequency:"Every 4-6 hours as needed",indications:"Pain, fever, inflammation",sideEffects:"Upset stomach, headache",precautions:"Stomach ulcers, kidney disease"},{id:3,name:"Amoxicillin",description:"Used to treat bacterial infections",genericDosage:"250-500 mg",frequency:"Every 8 hours",indications:"Bacterial infections",sideEffects:"Diarrhea, nausea",precautions:"Penicillin allergy"},{id:4,name:"Levothyroxine",description:"Used to treat hypothyroidism",genericDosage:"25-300 mcg",frequency:"Once daily",indications:"Hypothyroidism",sideEffects:"Weight loss, anxiety, tremors",precautions:"Heart disease"},{id:5,name:"Amlodipine",description:"Used to treat high blood pressure and chest pain",genericDosage:"2.5-10 mg",frequency:"Once daily",indications:"Hypertension, angina",sideEffects:"Swelling, dizziness, headache",precautions:"Heart failure"},{id:6,name:"Metoprolol",description:"Used to treat high blood pressure and heart problems",genericDosage:"25-450 mg",frequency:"1-3 times daily",indications:"Hypertension, angina, heart failure",sideEffects:"Dizziness, fatigue, slow heart rate",precautions:"Asthma"},{id:7,name:"Simvastatin",description:"Used to lower cholesterol",genericDosage:"5-40 mg",frequency:"Once daily",indications:"High cholesterol, prevention of cardiovascular disease",sideEffects:"Muscle pain, nausea, headache",precautions:"Liver disease"},{id:8,name:"Omeprazole",description:"Used to treat heartburn and acid reflux",genericDosage:"10-40 mg",frequency:"Once daily",indications:"GERD, ulcers",sideEffects:"Headache, diarrhea, stomach pain",precautions:"Long-term use"},{id:9,name:"Losartan",description:"Used to treat high blood pressure",genericDosage:"25-100 mg",frequency:"Once daily",indications:"Hypertension",sideEffects:"Dizziness, headache",precautions:"Pregnancy"},{id:10,name:"Albuterol",description:"Used to treat asthma and breathing problems",genericDosage:"2-4 mg",frequency:"3-4 times daily",indications:"Asthma, COPD",sideEffects:"Tremors, nervousness, increased heart rate",precautions:"Heart disease"},{id:11,name:"Gabapentin",description:"Used to treat seizures and nerve pain",genericDosage:"300-3600 mg",frequency:"3 times daily",indications:"Seizures, nerve pain",sideEffects:"Dizziness, drowsiness, fatigue",precautions:"Kidney disease"},{id:12,name:"Hydrochlorothiazide",description:"Used to treat high blood pressure and fluid retention",genericDosage:"12.5-50 mg",frequency:"Once daily",indications:"Hypertension, edema",sideEffects:"Dizziness, headache, dehydration",precautions:"Kidney disease, diabetes"}];constructor(){}ngOnInit(){}removeFromTrackingList(e){this.trackedDrugs=this.trackedDrugs.filter(t=>t.id!==e.id)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Me({type:n,selectors:[["app-tracking-list"]],decls:6,vars:3,consts:[[1,"card","in-view","tracking-container"],["class","summary-badge",4,"ngIf"],["class","tracking-list",4,"ngIf"],["class","empty-msg",4,"ngIf"],[1,"summary-badge"],[1,"tracking-list"],[1,"drug-table"],[4,"ngFor","ngForOf"],[1,"pill-button","danger",3,"click"],[1,"pill-button",3,"routerLink"],[1,"empty-msg"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"Tracking List"),v(),re(3,g3,2,2,"div",1)(4,y3,14,2,"div",2)(5,v3,2,0,"p",3),v()),t&2){let i,o;x(3),F("ngIf",r.trackedDrugs==null?null:r.trackedDrugs.length),x(),F("ngIf",((i=r.trackedDrugs==null?null:r.trackedDrugs.length)!==null&&i!==void 0?i:0)>0),x(),F("ngIf",((o=r.trackedDrugs==null?null:r.trackedDrugs.length)!==null&&o!==void 0?o:0)===0)}},dependencies:[Re,bn,He,jt,xt],styles:[".tracking-container[_ngcontent-%COMP%]{padding:2rem;animation:_ngcontent-%COMP%_fadeInUp .5s ease both}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.tracking-summary[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:1rem;color:var(--text-color-light);text-align:right}.drug-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1rem;border-radius:10px;overflow:hidden;box-shadow:0 4px 12px #00000026}.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .drug-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.05);padding:12px;text-align:left;font-size:.95rem;transition:background-color .3s ease}.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;font-weight:600}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ffffff0d}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#ffffff05}body[_ngcontent-%COMP%]:not(.dark)   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#1976d21a}body.dark[_ngcontent-%COMP%]   .drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#90caf926}.drug-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .25s ease}.pill-button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border:none;padding:6px 14px;border-radius:999px;cursor:pointer;font-size:.85rem;font-weight:500;transition:background-color .25s ease,transform .15s ease;box-shadow:0 2px 6px #00000014;text-decoration:none;display:inline-block}.pill-button[_ngcontent-%COMP%]:hover{background-color:#1565c0;transform:scale(1.05)}.pill-button.danger[_ngcontent-%COMP%]{background-color:#e74c3c}.pill-button.danger[_ngcontent-%COMP%]:hover{background-color:#c0392b}.empty-msg[_ngcontent-%COMP%]{margin-top:1rem;font-style:italic;color:var(--text-color-muted);text-align:center}@media (max-width: 768px){.drug-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .drug-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 6px;font-size:.85rem}.pill-button[_ngcontent-%COMP%]{font-size:.8rem;padding:4px 10px}}"]})};var _3=n=>["/drug-details",n];function E3(n,e){if(n&1&&(E(0,"li")(1,"a",9)(2,"strong"),w(3),v(),Oe(4,"br"),E(5,"span",10),w(6),v()()()),n&2){let t=e.$implicit;x(),F("routerLink",vo(3,_3,t.rxcui)),x(2),je(t.name),x(3),je(t.description)}}function w3(n,e){if(n&1&&(E(0,"div",6)(1,"h3"),w(2,"Search Results"),v(),E(3,"ul",7),re(4,E3,7,5,"li",8),v()()),n&2){let t=X();x(4),F("ngForOf",t.searchResults)}}function I3(n,e){if(n&1&&(E(0,"div",11)(1,"p"),w(2,'No results found for "'),E(3,"em"),w(4),v(),w(5,'".'),v()()),n&2){let t=X();x(4),je(t.searchTerm)}}var Of=class n{constructor(e){this.http=e}searchTerm="";searchResults=[];apiUrl="https://rxnav.nlm.nih.gov/REST/drugs";ngOnInit(){}searchDrugs(){if(console.log("Search drugs method called with the term: ",this.searchTerm),this.searchTerm){let e=`${this.apiUrl}?name=${this.searchTerm}`;console.log("API Url: ",e),this.http.get(e,{responseType:"text"}).pipe(te(t=>{if(console.log("API response: ",t),t.startsWith("<")){let i=new DOMParser().parseFromString(t,"text/xml");return this.parseXmlResponse(i)}else{let r=JSON.parse(t);return this.parseJsonResponse(r)}})).subscribe(t=>{console.log("API Results: ",t),this.searchResults=t,console.log("Search Results: ",this.searchResults)})}else this.searchResults=[]}parseXmlResponse(e){let t=e.querySelectorAll("conceptProperties"),r=[];return t.forEach(i=>{let o=i.querySelector("name")?.textContent,s=i.querySelector("synonym")?.textContent,a=i.querySelector("rxcui")?.textContent;o&&s&&a&&r.push({name:o,description:s,rxcui:a})}),r}parseJsonResponse(e){return e&&e.drugGroup&&e.drugGroup.conceptGroup?e.drugGroup.conceptGroup.flatMap(t=>t&&t.conceptProperties?t.conceptProperties.map(r=>({name:r.name,description:r.synonym,rxcui:r.rxcui})):[]):[]}static \u0275fac=function(t){return new(t||n)(B(Ei))};static \u0275cmp=Me({type:n,selectors:[["app-medication-search"]],decls:9,vars:3,consts:[[1,"card","in-view","med-search-container"],[1,"search-bar"],["type","text","placeholder","Enter drug name",3,"ngModelChange","input","ngModel"],[3,"click"],["class","results-section",4,"ngIf"],["class","no-results",4,"ngIf"],[1,"results-section"],[1,"results-list"],[4,"ngFor","ngForOf"],[1,"pill-button",3,"routerLink"],[1,"result-description"],[1,"no-results"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"Search for Medications"),v(),E(3,"div",1)(4,"input",2),Us("ngModelChange",function(o){return Nc(r.searchTerm,o)||(r.searchTerm=o),o}),ue("input",function(){return r.searchDrugs()}),v(),E(5,"button",3),ue("click",function(){return r.searchDrugs()}),w(6,"Search"),v()(),re(7,w3,5,1,"div",4)(8,I3,6,1,"div",5),v()),t&2&&(x(4),Vs("ngModel",r.searchTerm),x(3),F("ngIf",r.searchResults.length>0),x(),F("ngIf",r.searchResults.length===0&&r.searchTerm!==""))},dependencies:[Re,bn,He,Ui,gt,Nt,ku,jt,xt,Io],styles:[".med-search-container[_ngcontent-%COMP%]{max-width:700px;margin:2rem auto;padding:2rem}.search-bar[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.7rem 1rem;font-size:1rem;border-radius:8px;border:1px solid #ccc}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;border:none;border-radius:999px;padding:.6rem 1.5rem;font-weight:500;cursor:pointer;transition:background-color .2s ease}.search-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.results-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:1rem}.results-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:1rem}.results-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-decoration:none;background-color:#ffffff0d;border-radius:8px;padding:1rem;color:var(--text-color);box-shadow:0 2px 4px #0000000d;transition:all .2s ease}.results-list[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--secondary-color);color:#fff}.results-list[_ngcontent-%COMP%]   .result-description[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-color-light)}"]})};function b3(n,e){if(n&1&&(E(0,"option",15),w(1),v()),n&2){let t=e.$implicit;F("ngValue",t),x(),Se(" ",t.name," ")}}function C3(n,e){n&1&&(E(0,"div"),w(1," Dosage is required. "),v())}function D3(n,e){if(n&1&&(E(0,"div",16),re(1,C3,2,0,"div",17),v()),n&2){let t,r=X();x(),F("ngIf",(t=r.correctionForm.get("dosage"))==null||t.errors==null?null:t.errors.required)}}function T3(n,e){n&1&&(E(0,"div",18),w(1," \u2705 Dosage correction submitted successfully! "),v())}var kf=class n{constructor(e){this.fb=e;this.correctionForm=this.fb.group({drugName:["",De.required],patientWeight:["",De.required],patientAge:["",De.required],patientCreatinine:["",De.required]})}correctionForm;submitted=!1;allDrugs=[];ngOnInit(){this.allDrugs=[{id:1,name:"Acetaminophen",description:"Used to treat pain and reduce fever",genericDosage:"325-650 mg",frequency:"Every 4-6 hours as needed",indications:"Pain, fever",sideEffects:"Rare",precautions:"Liver disease"},{id:2,name:"Ibuprofen",description:"Used to treat pain, fever, and inflammation",genericDosage:"200-400 mg",frequency:"Every 4-6 hours as needed",indications:"Pain, fever, inflammation",sideEffects:"Upset stomach, headache",precautions:"Stomach ulcers, kidney disease"},{id:3,name:"Amoxicillin",description:"Used to treat bacterial infections",genericDosage:"250-500 mg",frequency:"Every 8 hours",indications:"Bacterial infections",sideEffects:"Diarrhea, nausea",precautions:"Penicillin allergy"},{id:4,name:"Levothyroxine",description:"Used to treat hypothyroidism",genericDosage:"25-300 mcg",frequency:"Once daily",indications:"Hypothyroidism",sideEffects:"Weight loss, anxiety, tremors",precautions:"Heart disease"},{id:5,name:"Amlodipine",description:"Used to treat high blood pressure and chest pain",genericDosage:"2.5-10 mg",frequency:"Once daily",indications:"Hypertension, angina",sideEffects:"Swelling, dizziness, headache",precautions:"Heart failure"},{id:6,name:"Metoprolol",description:"Used to treat high blood pressure and heart problems",genericDosage:"25-450 mg",frequency:"1-3 times daily",indications:"Hypertension, angina, heart failure",sideEffects:"Dizziness, fatigue, slow heart rate",precautions:"Asthma"},{id:7,name:"Simvastatin",description:"Used to lower cholesterol",genericDosage:"5-40 mg",frequency:"Once daily",indications:"High cholesterol, prevention of cardiovascular disease",sideEffects:"Muscle pain, nausea, headache",precautions:"Liver disease"},{id:8,name:"Omeprazole",description:"Used to treat heartburn and acid reflux",genericDosage:"10-40 mg",frequency:"Once daily",indications:"GERD, ulcers",sideEffects:"Headache, diarrhea, stomach pain",precautions:"Long-term use"},{id:9,name:"Losartan",description:"Used to treat high blood pressure",genericDosage:"25-100 mg",frequency:"Once daily",indications:"Hypertension",sideEffects:"Dizziness, headache",precautions:"Pregnancy"},{id:10,name:"Albuterol",description:"Used to treat asthma and breathing problems",genericDosage:"2-4 mg",frequency:"3-4 times daily",indications:"Asthma, COPD",sideEffects:"Tremors, nervousness, increased heart rate",precautions:"Heart disease"},{id:11,name:"Gabapentin",description:"Used to treat seizures and nerve pain",genericDosage:"300-3600 mg",frequency:"3 times daily",indications:"Seizures, nerve pain",sideEffects:"Dizziness, drowsiness, fatigue",precautions:"Kidney disease"},{id:12,name:"Hydrochlorothiazide",description:"Used to treat high blood pressure and fluid retention",genericDosage:"12.5-50 mg",frequency:"Once daily",indications:"Hypertension, edema",sideEffects:"Dizziness, headache, dehydration",precautions:"Kidney disease, diabetes"}]}onSubmit(){this.submitted=!0,this.correctionForm.valid&&console.log("Form submitted:",this.correctionForm.value)}static \u0275fac=function(t){return new(t||n)(B(Mn))};static \u0275cmp=Me({type:n,selectors:[["app-dosage-correction"]],decls:25,vars:5,consts:[[1,"card","in-view","correction-form-container"],[1,"correction-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","drug"],["id","drug","formControlName","drug",1,"form-control"],[3,"ngValue",4,"ngFor","ngForOf"],["for","medicationName"],["type","text","id","medicationName","formControlName","medicationName","readonly","",1,"form-control"],["for","dosage"],["type","text","id","dosage","formControlName","dosage",1,"form-control"],["class","error-message",4,"ngIf"],["for","notes"],["id","notes","formControlName","notes",1,"form-control"],["type","submit",3,"disabled"],["class","success-message",4,"ngIf"],[3,"ngValue"],[1,"error-message"],[4,"ngIf"],[1,"success-message"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"Dosage Correction"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",2)(5,"label",3),w(6,"Select Medication"),v(),E(7,"select",4),re(8,b3,2,2,"option",5),v()(),E(9,"div",2)(10,"label",6),w(11,"Medication Name"),v(),Oe(12,"input",7),v(),E(13,"div",2)(14,"label",8),w(15,"Dosage"),v(),Oe(16,"input",9),re(17,D3,2,1,"div",10),v(),E(18,"div",2)(19,"label",11),w(20,"Notes"),v(),Oe(21,"textarea",12),v(),E(22,"button",13),w(23," Submit Correction "),v()(),re(24,T3,2,0,"div",14),v()),t&2){let i;x(3),F("formGroup",r.correctionForm),x(5),F("ngForOf",r.allDrugs),x(9),F("ngIf",((i=r.correctionForm.get("dosage"))==null?null:i.invalid)&&(((i=r.correctionForm.get("dosage"))==null?null:i.dirty)||((i=r.correctionForm.get("dosage"))==null?null:i.touched))),x(5),F("disabled",r.correctionForm.invalid),x(2),F("ngIf",r.submitted)}},dependencies:[Jt,An,Mf,Rf,gt,ua,Nt,Sn,un,ln,Ui,Re,bn,He],styles:[".correction-form-container[_ngcontent-%COMP%]{max-width:600px;margin:3rem auto;padding:2rem;text-align:center}.correction-form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:2rem}.correction-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{text-align:left}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;display:block;margin-bottom:.25rem}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.6rem 1rem;border-radius:8px;border:1px solid #ccc;font-size:1rem}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.correction-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:red;font-size:.85rem;margin-top:.3rem}.correction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;padding:.6rem 1.5rem;font-size:1rem;font-weight:500;border-radius:999px;border:none;cursor:pointer;transition:background-color .2s ease}.correction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.correction-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.success-message[_ngcontent-%COMP%]{margin-top:1.5rem;color:green;font-weight:500}"]})};var S3=["animatedCard"];function A3(n,e){n&1&&(E(0,"p",13),w(1,"Welcome back, Ninja \u{1F44B}"),v())}function M3(n,e){n&1&&(E(0,"a",14,0)(2,"div",10),w(3,"\u{1F4DD}"),v(),E(4,"div",11),w(5,"Register"),v(),E(6,"div",12),w(7,"Create a Dose Ninja account"),v()())}function R3(n,e){n&1&&(E(0,"a",15,0)(2,"div",10),w(3,"\u{1F510}"),v(),E(4,"div",11),w(5,"Login"),v(),E(6,"div",12),w(7,"Access your personalized dashboard"),v()())}function P3(n,e){n&1&&(E(0,"a",16,0)(2,"div",10),w(3,"\u{1F4CA}"),v(),E(4,"div",11),w(5,"Dashboard"),v(),E(6,"div",12),w(7,"View trends and recent activity"),v()())}var Ff=class n{searchQuery="";searchResults=[];isLoggedIn=!0;cards;ngAfterViewInit(){let e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&(r.target.classList.add("in-view"),e.unobserve(r.target))})},{threshold:.1});this.cards.forEach(t=>e.observe(t.nativeElement))}searchDrugs(){this.searchQuery.trim()?this.searchResults=[{name:"Acetaminophen",description:"Pain reliever and fever reducer"},{name:"Ibuprofen",description:"Anti-inflammatory used to treat pain and swelling"}].filter(e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())):this.searchResults=[]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Me({type:n,selectors:[["app-home"]],viewQuery:function(t,r){if(t&1&&Gd(S3,5,ft),t&2){let i;Pc(i=xc())&&(r.cards=i)}},decls:19,vars:4,consts:[["animatedCard",""],[1,"home-layout"],[1,"hero-header"],[1,"subtext"],["class","welcome-msg",4,"ngIf"],[1,"module-grid"],["routerLink","/register","class","module-card register-card","title","Create a new account",4,"ngIf"],["routerLink","/login","class","module-card login-card","title","Log in to your profile",4,"ngIf"],["routerLink","/dashboard","class","module-card dashboard-card","title","Your full medication overview",4,"ngIf"],["routerLink","/tracking-list","title","See what's currently being tracked",1,"module-card","tracking-card"],[1,"card-icon"],[1,"card-title"],[1,"card-subtext"],[1,"welcome-msg"],["routerLink","/register","title","Create a new account",1,"module-card","register-card"],["routerLink","/login","title","Log in to your profile",1,"module-card","login-card"],["routerLink","/dashboard","title","Your full medication overview",1,"module-card","dashboard-card"]],template:function(t,r){t&1&&(E(0,"div",1)(1,"div",2)(2,"h1"),w(3,"Dose Ninja"),v(),E(4,"p",3),w(5,"Never forget if you took that pill"),v(),re(6,A3,2,0,"p",4),v(),E(7,"div",5),re(8,M3,8,0,"a",6)(9,R3,8,0,"a",7)(10,P3,8,0,"a",8),E(11,"a",9,0)(13,"div",10),w(14,"\u{1F48A}"),v(),E(15,"div",11),w(16,"Tracking List"),v(),E(17,"div",12),w(18,"Your current medication list"),v()()()()),t&2&&(x(6),F("ngIf",r.isLoggedIn),x(2),F("ngIf",!r.isLoggedIn),x(),F("ngIf",!r.isLoggedIn),x(),F("ngIf",r.isLoggedIn))},dependencies:[Ui,Re,He],styles:['@charset "UTF-8";.home-layout[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4rem 1rem;text-align:center;min-height:100vh}.hero-header[_ngcontent-%COMP%]{margin-bottom:3rem}.hero-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:.5rem;color:var(--color-primary)}.hero-header[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--color-muted)}.hero-header[_ngcontent-%COMP%]   .welcome-msg[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--color-secondary);margin-top:1rem}.module-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;margin-top:2rem}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.module-card[_ngcontent-%COMP%]{width:180px;height:180px;display:inline-flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;border:2px solid var(--color-primary);border-radius:16px;font-weight:600;text-decoration:none;color:var(--color-primary);background-color:#1976d20d;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInUp .5s ease both;cursor:pointer}.module-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem}.module-card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600}.module-card[_ngcontent-%COMP%]   .card-subtext[_ngcontent-%COMP%]{font-size:.85rem;color:var(--color-muted);margin-top:.25rem;text-align:center;max-width:140px;line-height:1.3}.module-card[_ngcontent-%COMP%]:hover{background-color:var(--color-primary);color:#fff;transform:scale(1.05)}.module-card[_ngcontent-%COMP%]:hover   .card-subtext[_ngcontent-%COMP%]{color:#e0e0e0}.module-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.module-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.module-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.module-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.register-card[_ngcontent-%COMP%]{background-color:#4caf501a}.login-card[_ngcontent-%COMP%]{background-color:#2196f31a}.dashboard-card[_ngcontent-%COMP%]{background-color:#ff98001a}.tracking-card[_ngcontent-%COMP%]{background-color:#9c27b01a}@media (max-width: 600px){.home-layout[_ngcontent-%COMP%]{padding:2rem 1rem}.hero-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.2rem}.hero-header[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:1rem}.module-grid[_ngcontent-%COMP%]{gap:1.5rem}.module-card[_ngcontent-%COMP%]{width:140px;height:140px;font-size:.9rem}.module-card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:2rem}.module-card[_ngcontent-%COMP%]   .card-subtext[_ngcontent-%COMP%]{font-size:.75rem}}']})};var oP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sP={};var Zr,CE;(function(){var n;function e(T,I){function C(){}C.prototype=I.prototype,T.D=I.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(D,S,R){for(var b=Array(arguments.length-2),Rr=2;Rr<arguments.length;Rr++)b[Rr-2]=arguments[Rr];return I.prototype[S].apply(D,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,I,C){C||(C=0);var D=Array(16);if(typeof I=="string")for(var S=0;16>S;++S)D[S]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(S=0;16>S;++S)D[S]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=T.g[0],C=T.g[1],S=T.g[2];var R=T.g[3],b=I+(R^C&(S^R))+D[0]+3614090360&4294967295;I=C+(b<<7&4294967295|b>>>25),b=R+(S^I&(C^S))+D[1]+3905402710&4294967295,R=I+(b<<12&4294967295|b>>>20),b=S+(C^R&(I^C))+D[2]+606105819&4294967295,S=R+(b<<17&4294967295|b>>>15),b=C+(I^S&(R^I))+D[3]+3250441966&4294967295,C=S+(b<<22&4294967295|b>>>10),b=I+(R^C&(S^R))+D[4]+4118548399&4294967295,I=C+(b<<7&4294967295|b>>>25),b=R+(S^I&(C^S))+D[5]+1200080426&4294967295,R=I+(b<<12&4294967295|b>>>20),b=S+(C^R&(I^C))+D[6]+2821735955&4294967295,S=R+(b<<17&4294967295|b>>>15),b=C+(I^S&(R^I))+D[7]+4249261313&4294967295,C=S+(b<<22&4294967295|b>>>10),b=I+(R^C&(S^R))+D[8]+1770035416&4294967295,I=C+(b<<7&4294967295|b>>>25),b=R+(S^I&(C^S))+D[9]+2336552879&4294967295,R=I+(b<<12&4294967295|b>>>20),b=S+(C^R&(I^C))+D[10]+4294925233&4294967295,S=R+(b<<17&4294967295|b>>>15),b=C+(I^S&(R^I))+D[11]+2304563134&4294967295,C=S+(b<<22&4294967295|b>>>10),b=I+(R^C&(S^R))+D[12]+1804603682&4294967295,I=C+(b<<7&4294967295|b>>>25),b=R+(S^I&(C^S))+D[13]+4254626195&4294967295,R=I+(b<<12&4294967295|b>>>20),b=S+(C^R&(I^C))+D[14]+2792965006&4294967295,S=R+(b<<17&4294967295|b>>>15),b=C+(I^S&(R^I))+D[15]+1236535329&4294967295,C=S+(b<<22&4294967295|b>>>10),b=I+(S^R&(C^S))+D[1]+4129170786&4294967295,I=C+(b<<5&4294967295|b>>>27),b=R+(C^S&(I^C))+D[6]+3225465664&4294967295,R=I+(b<<9&4294967295|b>>>23),b=S+(I^C&(R^I))+D[11]+643717713&4294967295,S=R+(b<<14&4294967295|b>>>18),b=C+(R^I&(S^R))+D[0]+3921069994&4294967295,C=S+(b<<20&4294967295|b>>>12),b=I+(S^R&(C^S))+D[5]+3593408605&4294967295,I=C+(b<<5&4294967295|b>>>27),b=R+(C^S&(I^C))+D[10]+38016083&4294967295,R=I+(b<<9&4294967295|b>>>23),b=S+(I^C&(R^I))+D[15]+3634488961&4294967295,S=R+(b<<14&4294967295|b>>>18),b=C+(R^I&(S^R))+D[4]+3889429448&4294967295,C=S+(b<<20&4294967295|b>>>12),b=I+(S^R&(C^S))+D[9]+568446438&4294967295,I=C+(b<<5&4294967295|b>>>27),b=R+(C^S&(I^C))+D[14]+3275163606&4294967295,R=I+(b<<9&4294967295|b>>>23),b=S+(I^C&(R^I))+D[3]+4107603335&4294967295,S=R+(b<<14&4294967295|b>>>18),b=C+(R^I&(S^R))+D[8]+1163531501&4294967295,C=S+(b<<20&4294967295|b>>>12),b=I+(S^R&(C^S))+D[13]+2850285829&4294967295,I=C+(b<<5&4294967295|b>>>27),b=R+(C^S&(I^C))+D[2]+4243563512&4294967295,R=I+(b<<9&4294967295|b>>>23),b=S+(I^C&(R^I))+D[7]+1735328473&4294967295,S=R+(b<<14&4294967295|b>>>18),b=C+(R^I&(S^R))+D[12]+2368359562&4294967295,C=S+(b<<20&4294967295|b>>>12),b=I+(C^S^R)+D[5]+4294588738&4294967295,I=C+(b<<4&4294967295|b>>>28),b=R+(I^C^S)+D[8]+2272392833&4294967295,R=I+(b<<11&4294967295|b>>>21),b=S+(R^I^C)+D[11]+1839030562&4294967295,S=R+(b<<16&4294967295|b>>>16),b=C+(S^R^I)+D[14]+4259657740&4294967295,C=S+(b<<23&4294967295|b>>>9),b=I+(C^S^R)+D[1]+2763975236&4294967295,I=C+(b<<4&4294967295|b>>>28),b=R+(I^C^S)+D[4]+1272893353&4294967295,R=I+(b<<11&4294967295|b>>>21),b=S+(R^I^C)+D[7]+4139469664&4294967295,S=R+(b<<16&4294967295|b>>>16),b=C+(S^R^I)+D[10]+3200236656&4294967295,C=S+(b<<23&4294967295|b>>>9),b=I+(C^S^R)+D[13]+681279174&4294967295,I=C+(b<<4&4294967295|b>>>28),b=R+(I^C^S)+D[0]+3936430074&4294967295,R=I+(b<<11&4294967295|b>>>21),b=S+(R^I^C)+D[3]+3572445317&4294967295,S=R+(b<<16&4294967295|b>>>16),b=C+(S^R^I)+D[6]+76029189&4294967295,C=S+(b<<23&4294967295|b>>>9),b=I+(C^S^R)+D[9]+3654602809&4294967295,I=C+(b<<4&4294967295|b>>>28),b=R+(I^C^S)+D[12]+3873151461&4294967295,R=I+(b<<11&4294967295|b>>>21),b=S+(R^I^C)+D[15]+530742520&4294967295,S=R+(b<<16&4294967295|b>>>16),b=C+(S^R^I)+D[2]+3299628645&4294967295,C=S+(b<<23&4294967295|b>>>9),b=I+(S^(C|~R))+D[0]+4096336452&4294967295,I=C+(b<<6&4294967295|b>>>26),b=R+(C^(I|~S))+D[7]+1126891415&4294967295,R=I+(b<<10&4294967295|b>>>22),b=S+(I^(R|~C))+D[14]+2878612391&4294967295,S=R+(b<<15&4294967295|b>>>17),b=C+(R^(S|~I))+D[5]+4237533241&4294967295,C=S+(b<<21&4294967295|b>>>11),b=I+(S^(C|~R))+D[12]+1700485571&4294967295,I=C+(b<<6&4294967295|b>>>26),b=R+(C^(I|~S))+D[3]+2399980690&4294967295,R=I+(b<<10&4294967295|b>>>22),b=S+(I^(R|~C))+D[10]+4293915773&4294967295,S=R+(b<<15&4294967295|b>>>17),b=C+(R^(S|~I))+D[1]+2240044497&4294967295,C=S+(b<<21&4294967295|b>>>11),b=I+(S^(C|~R))+D[8]+1873313359&4294967295,I=C+(b<<6&4294967295|b>>>26),b=R+(C^(I|~S))+D[15]+4264355552&4294967295,R=I+(b<<10&4294967295|b>>>22),b=S+(I^(R|~C))+D[6]+2734768916&4294967295,S=R+(b<<15&4294967295|b>>>17),b=C+(R^(S|~I))+D[13]+1309151649&4294967295,C=S+(b<<21&4294967295|b>>>11),b=I+(S^(C|~R))+D[4]+4149444226&4294967295,I=C+(b<<6&4294967295|b>>>26),b=R+(C^(I|~S))+D[11]+3174756917&4294967295,R=I+(b<<10&4294967295|b>>>22),b=S+(I^(R|~C))+D[2]+718787259&4294967295,S=R+(b<<15&4294967295|b>>>17),b=C+(R^(S|~I))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+I&4294967295,T.g[1]=T.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.u=function(T,I){I===void 0&&(I=T.length);for(var C=I-this.blockSize,D=this.B,S=this.h,R=0;R<I;){if(S==0)for(;R<=C;)i(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<I;)if(D[S++]=T.charCodeAt(R++),S==this.blockSize){i(this,D),S=0;break}}else for(;R<I;)if(D[S++]=T[R++],S==this.blockSize){i(this,D),S=0;break}}this.h=S,this.o+=I},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var I=1;I<T.length-8;++I)T[I]=0;var C=8*this.o;for(I=T.length-8;I<T.length;++I)T[I]=C&255,C/=256;for(this.u(T),T=Array(16),I=C=0;4>I;++I)for(var D=0;32>D;D+=8)T[C++]=this.g[I]>>>D&255;return T};function o(T,I){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=I(T)}function s(T,I){this.h=I;for(var C=[],D=!0,S=T.length-1;0<=S;S--){var R=T[S]|0;D&&R==I||(C[S]=R,D=!1)}this.g=C}var a={};function u(T){return-128<=T&&128>T?o(T,function(I){return new s([I|0],0>I?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return O(l(-T));for(var I=[],C=1,D=0;T>=C;D++)I[D]=T/C|0,C*=4294967296;return new s(I,0)}function h(T,I){if(T.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T.charAt(0)=="-")return O(h(T.substring(1),I));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(I,8)),D=p,S=0;S<T.length;S+=8){var R=Math.min(8,T.length-S),b=parseInt(T.substring(S,S+R),I);8>R?(R=l(Math.pow(I,R)),D=D.j(R).add(l(b))):(D=D.j(C),D=D.add(l(b)))}return D}var p=u(0),y=u(1),m=u(16777216);n=s.prototype,n.m=function(){if(N(this))return-O(this).m();for(var T=0,I=1,C=0;C<this.g.length;C++){var D=this.i(C);T+=(0<=D?D:4294967296+D)*I,I*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(M(this))return"0";if(N(this))return"-"+O(this).toString(T);for(var I=l(Math.pow(T,6)),C=this,D="";;){var S=xe(C,I).g;C=z(C,S.j(I));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=S,M(C))return R+D;for(;6>R.length;)R="0"+R;D=R+D}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function M(T){if(T.h!=0)return!1;for(var I=0;I<T.g.length;I++)if(T.g[I]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=z(this,T),N(T)?-1:M(T)?0:1};function O(T){for(var I=T.g.length,C=[],D=0;D<I;D++)C[D]=~T.g[D];return new s(C,~T.h).add(y)}n.abs=function(){return N(this)?O(this):this},n.add=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],D=0,S=0;S<=I;S++){var R=D+(this.i(S)&65535)+(T.i(S)&65535),b=(R>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);D=b>>>16,R&=65535,b&=65535,C[S]=b<<16|R}return new s(C,C[C.length-1]&-2147483648?-1:0)};function z(T,I){return T.add(O(I))}n.j=function(T){if(M(this)||M(T))return p;if(N(this))return N(T)?O(this).j(O(T)):O(O(this).j(T));if(N(T))return O(this.j(O(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var I=this.g.length+T.g.length,C=[],D=0;D<2*I;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(var S=0;S<T.g.length;S++){var R=this.i(D)>>>16,b=this.i(D)&65535,Rr=T.i(S)>>>16,Va=T.i(S)&65535;C[2*D+2*S]+=b*Va,ce(C,2*D+2*S),C[2*D+2*S+1]+=R*Va,ce(C,2*D+2*S+1),C[2*D+2*S+1]+=b*Rr,ce(C,2*D+2*S+1),C[2*D+2*S+2]+=R*Rr,ce(C,2*D+2*S+2)}for(D=0;D<I;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=I;D<2*I;D++)C[D]=0;return new s(C,0)};function ce(T,I){for(;(T[I]&65535)!=T[I];)T[I+1]+=T[I]>>>16,T[I]&=65535,I++}function K(T,I){this.g=T,this.h=I}function xe(T,I){if(M(I))throw Error("division by zero");if(M(T))return new K(p,p);if(N(T))return I=xe(O(T),I),new K(O(I.g),O(I.h));if(N(I))return I=xe(T,O(I)),new K(O(I.g),I.h);if(30<T.g.length){if(N(T)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var C=y,D=I;0>=D.l(T);)C=vt(C),D=vt(D);var S=Te(C,1),R=Te(D,1);for(D=Te(D,2),C=Te(C,2);!M(D);){var b=R.add(D);0>=b.l(T)&&(S=S.add(C),R=b),D=Te(D,1),C=Te(C,1)}return I=z(T,S.j(I)),new K(S,I)}for(S=p;0<=T.l(I);){for(C=Math.max(1,Math.floor(T.m()/I.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),R=l(C),b=R.j(I);N(b)||0<b.l(T);)C-=D,R=l(C),b=R.j(I);M(R)&&(R=y),S=S.add(R),T=z(T,b)}return new K(S,T)}n.A=function(T){return xe(this,T).h},n.and=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],D=0;D<I;D++)C[D]=this.i(D)&T.i(D);return new s(C,this.h&T.h)},n.or=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],D=0;D<I;D++)C[D]=this.i(D)|T.i(D);return new s(C,this.h|T.h)},n.xor=function(T){for(var I=Math.max(this.g.length,T.g.length),C=[],D=0;D<I;D++)C[D]=this.i(D)^T.i(D);return new s(C,this.h^T.h)};function vt(T){for(var I=T.g.length+1,C=[],D=0;D<I;D++)C[D]=T.i(D)<<1|T.i(D-1)>>>31;return new s(C,T.h)}function Te(T,I){var C=I>>5;I%=32;for(var D=T.g.length-C,S=[],R=0;R<D;R++)S[R]=0<I?T.i(R+C)>>>I|T.i(R+C+1)<<32-I:T.i(R+C);return new s(S,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,CE=sP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Zr=sP.Integer=s}).apply(typeof oP<"u"?oP:typeof self<"u"?self:typeof window<"u"?window:{});var Lf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jr={};var DE,x3,la,TE,Fu,Vf,SE,AE,ME;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lf=="object"&&Lf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var A=c[g];if(!(A in f))break e;f=f[A]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,A={next:function(){if(!g&&f<c.length){var P=f++;return{value:d(P,c[P]),done:!1}}return g=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,g),c.apply(d,A)}}return function(){return c.apply(d,arguments)}}function y(c,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,y.apply(null,arguments)}function m(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function M(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,A,P){for(var j=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)j[Le-2]=arguments[Le];return d.prototype[A].apply(g,j)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function O(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let A=c.length||0,P=g.length||0;c.length=A+P;for(let j=0;j<P;j++)c[A+j]=g[j]}else c.push(g)}}class z{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function ce(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function xe(c){return xe[" "](c),c}xe[" "]=function(){};var vt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function Te(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function I(c){let d={};for(let f in c)d[f]=c[f];return d}let C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,d){let f,g;for(let A=1;A<arguments.length;A++){g=arguments[A];for(f in g)c[f]=g[f];for(let P=0;P<C.length;P++)f=C[P],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function S(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function R(c){a.setTimeout(()=>{throw c},0)}function b(){var c=$p;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Rr{constructor(){this.h=this.g=null}add(d,f){let g=Va.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Va=new z(()=>new WN,c=>c.reset());class WN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ua,ja=!1,$p=new Rr,ZI=()=>{let c=a.Promise.resolve(void 0);Ua=()=>{c.then(KN)}};var KN=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(f){R(f)}var d=Va;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}ja=!1};function oi(){this.s=this.s,this.C=this.C}oi.prototype.s=!1,oi.prototype.ma=function(){this.s||(this.s=!0,this.N())},oi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var QN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ba(c,d){if(Dt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(vt){e:{try{xe(d.nodeName);var A=!0;break e}catch{}A=!1}A||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:YN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ba.aa.h.call(this)}}M(Ba,Dt);var YN={2:"touch",3:"pen",4:"mouse"};Ba.prototype.h=function(){Ba.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var $a="closure_listenable_"+(1e6*Math.random()|0),ZN=0;function JN(c,d,f,g,A){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=A,this.key=++ZN,this.da=this.fa=!1}function rl(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function il(c){this.src=c,this.g={},this.h=0}il.prototype.add=function(c,d,f,g,A){var P=c.toString();c=this.g[P],c||(c=this.g[P]=[],this.h++);var j=zp(c,d,g,A);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new JN(d,this.src,P,!!g,A),d.fa=f,c.push(d)),d};function Hp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],A=Array.prototype.indexOf.call(g,d,void 0),P;(P=0<=A)&&Array.prototype.splice.call(g,A,1),P&&(rl(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function zp(c,d,f,g){for(var A=0;A<c.length;++A){var P=c[A];if(!P.da&&P.listener==d&&P.capture==!!f&&P.ha==g)return A}return-1}var qp="closure_lm_"+(1e6*Math.random()|0),Gp={};function JI(c,d,f,g,A){if(g&&g.once)return e0(c,d,f,g,A);if(Array.isArray(d)){for(var P=0;P<d.length;P++)JI(c,d[P],f,g,A);return null}return f=Yp(f),c&&c[$a]?c.K(d,f,l(g)?!!g.capture:!!g,A):XI(c,d,f,!1,g,A)}function XI(c,d,f,g,A,P){if(!d)throw Error("Invalid event type");var j=l(A)?!!A.capture:!!A,Le=Kp(c);if(Le||(c[qp]=Le=new il(c)),f=Le.add(d,f,g,j,P),f.proxy)return f;if(g=XN(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)QN||(A=j),A===void 0&&(A=!1),c.addEventListener(d.toString(),g,A);else if(c.attachEvent)c.attachEvent(n0(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function XN(){function c(f){return d.call(c.src,c.listener,f)}let d=eO;return c}function e0(c,d,f,g,A){if(Array.isArray(d)){for(var P=0;P<d.length;P++)e0(c,d[P],f,g,A);return null}return f=Yp(f),c&&c[$a]?c.L(d,f,l(g)?!!g.capture:!!g,A):XI(c,d,f,!0,g,A)}function t0(c,d,f,g,A){if(Array.isArray(d))for(var P=0;P<d.length;P++)t0(c,d[P],f,g,A);else g=l(g)?!!g.capture:!!g,f=Yp(f),c&&c[$a]?(c=c.i,d=String(d).toString(),d in c.g&&(P=c.g[d],f=zp(P,f,g,A),-1<f&&(rl(P[f]),Array.prototype.splice.call(P,f,1),P.length==0&&(delete c.g[d],c.h--)))):c&&(c=Kp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=zp(d,f,g,A)),(f=-1<c?d[c]:null)&&Wp(f))}function Wp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[$a])Hp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(n0(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Kp(d))?(Hp(f,c),f.h==0&&(f.src=null,d[qp]=null)):rl(c)}}}function n0(c){return c in Gp?Gp[c]:Gp[c]="on"+c}function eO(c,d){if(c.da)c=!0;else{d=new Ba(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Wp(c),c=f.call(g,d)}return c}function Kp(c){return c=c[qp],c instanceof il?c:null}var Qp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yp(c){return typeof c=="function"?c:(c[Qp]||(c[Qp]=function(d){return c.handleEvent(d)}),c[Qp])}function Tt(){oi.call(this),this.i=new il(this),this.M=this,this.F=null}M(Tt,oi),Tt.prototype[$a]=!0,Tt.prototype.removeEventListener=function(c,d,f,g){t0(this,c,d,f,g)};function Ft(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Dt(d,c);else if(d instanceof Dt)d.target=d.target||c;else{var A=d;d=new Dt(g,c),D(d,A)}if(A=!0,f)for(var P=f.length-1;0<=P;P--){var j=d.g=f[P];A=ol(j,g,!0,d)&&A}if(j=d.g=c,A=ol(j,g,!0,d)&&A,A=ol(j,g,!1,d)&&A,f)for(P=0;P<f.length;P++)j=d.g=f[P],A=ol(j,g,!1,d)&&A}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)rl(f[g]);delete c.g[d],c.h--}}this.F=null},Tt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Tt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function ol(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var A=!0,P=0;P<d.length;++P){var j=d[P];if(j&&!j.da&&j.capture==f){var Le=j.listener,_t=j.ha||j.src;j.fa&&Hp(c.i,j),A=Le.call(_t,g)!==!1&&A}}return A&&!g.defaultPrevented}function r0(c,d,f){if(typeof c=="function")f&&(c=y(c,f));else if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function i0(c){c.g=r0(()=>{c.g=null,c.i&&(c.i=!1,i0(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class tO extends oi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:i0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ha(c){oi.call(this),this.h=c,this.g={}}M(Ha,oi);var o0=[];function s0(c){Te(c.g,function(d,f){this.g.hasOwnProperty(f)&&Wp(d)},c),c.g={}}Ha.prototype.N=function(){Ha.aa.N.call(this),s0(this)},Ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zp=a.JSON.stringify,nO=a.JSON.parse,rO=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Jp(){}Jp.prototype.h=null;function a0(c){return c.h||(c.h=c.i())}function c0(){}var za={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xp(){Dt.call(this,"d")}M(Xp,Dt);function eg(){Dt.call(this,"c")}M(eg,Dt);var Gi={},u0=null;function sl(){return u0=u0||new Tt}Gi.La="serverreachability";function l0(c){Dt.call(this,Gi.La,c)}M(l0,Dt);function qa(c){let d=sl();Ft(d,new l0(d))}Gi.STAT_EVENT="statevent";function d0(c,d){Dt.call(this,Gi.STAT_EVENT,c),this.stat=d}M(d0,Dt);function Lt(c){let d=sl();Ft(d,new d0(d,c))}Gi.Ma="timingevent";function h0(c,d){Dt.call(this,Gi.Ma,c),this.size=d}M(h0,Dt);function Ga(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Wa(){this.g=!0}Wa.prototype.xa=function(){this.g=!1};function iO(c,d,f,g,A,P){c.info(function(){if(c.g)if(P)for(var j="",Le=P.split("&"),_t=0;_t<Le.length;_t++){var Ce=Le[_t].split("=");if(1<Ce.length){var St=Ce[0];Ce=Ce[1];var At=St.split("_");j=2<=At.length&&At[1]=="type"?j+(St+"="+Ce+"&"):j+(St+"=redacted&")}}else j=null;else j=P;return"XMLHTTP REQ ("+g+") [attempt "+A+"]: "+d+`
`+f+`
`+j})}function oO(c,d,f,g,A,P,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+A+"]: "+d+`
`+f+`
`+P+" "+j})}function Xo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+aO(c,f)+(g?" "+g:"")})}function sO(c,d){c.info(function(){return"TIMEOUT: "+d})}Wa.prototype.info=function(){};function aO(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var A=g[1];if(Array.isArray(A)&&!(1>A.length)){var P=A[0];if(P!="noop"&&P!="stop"&&P!="close")for(var j=1;j<A.length;j++)A[j]=""}}}}return Zp(f)}catch{return d}}var al={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},f0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tg;function cl(){}M(cl,Jp),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},tg=new cl;function si(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new p0}function p0(){this.i=null,this.g="",this.h=!1}var g0={},ng={};function rg(c,d,f){c.L=1,c.v=hl(Pr(d)),c.m=f,c.P=!0,m0(c,null)}function m0(c,d){c.F=Date.now(),ul(c),c.A=Pr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),R0(f.i,"t",g),c.C=0,f=c.j.J,c.h=new p0,c.g=K0(c.j,f?d:null,!c.m),0<c.O&&(c.M=new tO(y(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var A="readystatechange";Array.isArray(A)||(A&&(o0[0]=A.toString()),A=o0);for(var P=0;P<A.length;P++){var j=JI(f,A[P],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),qa(),iO(c.i,c.u,c.A,c.l,c.R,c.m)}si.prototype.ca=function(c){c=c.target;let d=this.M;d&&xr(c)==3?d.j():this.Y(c)},si.prototype.Y=function(c){try{if(c==this.g)e:{let At=xr(this.g);var d=this.g.Ba();let ns=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||L0(this.g)))){this.J||At!=4||d==7||(d==8||0>=ns?qa(3):qa(2)),ig(this);var f=this.g.Z();this.X=f;t:if(y0(this)){var g=L0(this.g);c="";var A=g.length,P=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wi(this),Ka(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<A;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(P&&d==A-1)});g.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,oO(this.i,this.u,this.A,this.l,this.R,At,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,_t=this.g;if((Le=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ce(Le)){var Ce=Le;break t}}Ce=null}if(f=Ce)Xo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,og(this,f);else{this.o=!1,this.s=3,Lt(12),Wi(this),Ka(this);break e}}if(this.P){f=!0;let Pn;for(;!this.J&&this.C<j.length;)if(Pn=cO(this,j),Pn==ng){At==4&&(this.s=4,Lt(14),f=!1),Xo(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==g0){this.s=4,Lt(15),Xo(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Xo(this.i,this.l,Pn,null),og(this,Pn);if(y0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||j.length!=0||this.h.h||(this.s=1,Lt(16),f=!1),this.o=this.o&&f,!f)Xo(this.i,this.l,j,"[Invalid Chunked Response]"),Wi(this),Ka(this);else if(0<j.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),dg(St),St.M=!0,Lt(11))}}else Xo(this.i,this.l,j,null),og(this,j);At==4&&Wi(this),this.o&&!this.J&&(At==4?z0(this.j,this):(this.o=!1,ul(this)))}else DO(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Wi(this),Ka(this)}}}catch{}finally{}};function y0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function cO(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?ng:(f=Number(d.substring(f,g)),isNaN(f)?g0:(g+=1,g+f>d.length?ng:(d=d.slice(g,g+f),c.C=g+f,d)))}si.prototype.cancel=function(){this.J=!0,Wi(this)};function ul(c){c.S=Date.now()+c.I,v0(c,c.I)}function v0(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ga(y(c.ba,c),d)}function ig(c){c.B&&(a.clearTimeout(c.B),c.B=null)}si.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(sO(this.i,this.A),this.L!=2&&(qa(),Lt(17)),Wi(this),this.s=2,Ka(this)):v0(this,this.S-c)};function Ka(c){c.j.G==0||c.J||z0(c.j,c)}function Wi(c){ig(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,s0(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function og(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||sg(f.h,c))){if(!c.K&&sg(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var A=g;if(A[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)yl(f),gl(f);else break e;lg(f),Lt(18)}}else f.za=A[1],0<f.za-f.T&&37500>A[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ga(y(f.Za,f),6e3));if(1>=w0(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Qi(f,11)}else if((c.K||f.g==c)&&yl(f),!ce(d))for(A=f.Da.g.parse(d),d=0;d<A.length;d++){let Ce=A[d];if(f.T=Ce[0],Ce=Ce[1],f.G==2)if(Ce[0]=="c"){f.K=Ce[1],f.ia=Ce[2];let St=Ce[3];St!=null&&(f.la=St,f.j.info("VER="+f.la));let At=Ce[4];At!=null&&(f.Aa=At,f.j.info("SVER="+f.Aa));let ns=Ce[5];ns!=null&&typeof ns=="number"&&0<ns&&(g=1.5*ns,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Pn=c.g;if(Pn){let _l=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_l){var P=g.h;P.g||_l.indexOf("spdy")==-1&&_l.indexOf("quic")==-1&&_l.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(ag(P,P.h),P.h=null))}if(g.D){let hg=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;hg&&(g.ya=hg,Be(g.I,g.D,hg))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var j=c;if(g.qa=W0(g,g.J?g.ia:null,g.W),j.K){I0(g.h,j);var Le=j,_t=g.L;_t&&(Le.I=_t),Le.B&&(ig(Le),ul(Le)),g.g=j}else $0(g);0<f.i.length&&ml(f)}else Ce[0]!="stop"&&Ce[0]!="close"||Qi(f,7);else f.G==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?Qi(f,7):ug(f):Ce[0]!="noop"&&f.l&&f.l.ta(Ce),f.v=0)}}qa(4)}catch{}}var uO=class{constructor(c,d){this.g=c,this.map=d}};function _0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function E0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function w0(c){return c.h?1:c.g?c.g.size:0}function sg(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function ag(c,d){c.g?c.g.add(d):c.h=d}function I0(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}_0.prototype.cancel=function(){if(this.i=b0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function b0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function lO(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function dO(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function C0(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=dO(c),g=lO(c),A=g.length,P=0;P<A;P++)d.call(void 0,g[P],f&&f[P],c)}var D0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hO(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),A=null;if(0<=g){var P=c[f].substring(0,g);A=c[f].substring(g+1)}else P=c[f];d(P,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Ki(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ki){this.h=c.h,ll(this,c.j),this.o=c.o,this.g=c.g,dl(this,c.s),this.l=c.l;var d=c.i,f=new Za;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),T0(this,f),this.m=c.m}else c&&(d=String(c).match(D0))?(this.h=!1,ll(this,d[1]||"",!0),this.o=Qa(d[2]||""),this.g=Qa(d[3]||"",!0),dl(this,d[4]),this.l=Qa(d[5]||"",!0),T0(this,d[6]||"",!0),this.m=Qa(d[7]||"")):(this.h=!1,this.i=new Za(null,this.h))}Ki.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ya(d,S0,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ya(d,S0,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ya(f,f.charAt(0)=="/"?gO:pO,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ya(f,yO)),c.join("")};function Pr(c){return new Ki(c)}function ll(c,d,f){c.j=f?Qa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function dl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function T0(c,d,f){d instanceof Za?(c.i=d,vO(c.i,c.h)):(f||(d=Ya(d,mO)),c.i=new Za(d,c.h))}function Be(c,d,f){c.i.set(d,f)}function hl(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Qa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ya(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,fO),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function fO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var S0=/[#\/\?@]/g,pO=/[#\?:]/g,gO=/[#\?]/g,mO=/[#\?@]/g,yO=/#/g;function Za(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ai(c){c.g||(c.g=new Map,c.h=0,c.i&&hO(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Za.prototype,n.add=function(c,d){ai(this),this.i=null,c=es(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function A0(c,d){ai(c),d=es(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function M0(c,d){return ai(c),d=es(c,d),c.g.has(d)}n.forEach=function(c,d){ai(this),this.g.forEach(function(f,g){f.forEach(function(A){c.call(d,A,g,this)},this)},this)},n.na=function(){ai(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let A=c[g];for(let P=0;P<A.length;P++)f.push(d[g])}return f},n.V=function(c){ai(this);let d=[];if(typeof c=="string")M0(this,c)&&(d=d.concat(this.g.get(es(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return ai(this),this.i=null,c=es(this,c),M0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function R0(c,d,f){A0(c,d),0<f.length&&(c.i=null,c.g.set(es(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let P=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var A=P;j[g]!==""&&(A+="="+encodeURIComponent(String(j[g]))),c.push(A)}}return this.i=c.join("&")};function es(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function vO(c,d){d&&!c.j&&(ai(c),c.i=null,c.g.forEach(function(f,g){var A=g.toLowerCase();g!=A&&(A0(this,g),R0(this,A,f))},c)),c.j=d}function _O(c,d){let f=new Wa;if(a.Image){let g=new Image;g.onload=m(ci,f,"TestLoadImage: loaded",!0,d,g),g.onerror=m(ci,f,"TestLoadImage: error",!1,d,g),g.onabort=m(ci,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=m(ci,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function EO(c,d){let f=new Wa,g=new AbortController,A=setTimeout(()=>{g.abort(),ci(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(P=>{clearTimeout(A),P.ok?ci(f,"TestPingServer: ok",!0,d):ci(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(A),ci(f,"TestPingServer: error",!1,d)})}function ci(c,d,f,g,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),g(f)}catch{}}function wO(){this.g=new rO}function IO(c,d,f){let g=f||"";try{C0(c,function(A,P){let j=A;l(A)&&(j=Zp(A)),d.push(g+P+"="+encodeURIComponent(j))})}catch(A){throw d.push(g+"type="+encodeURIComponent("_badmap")),A}}function Ja(c){this.l=c.Ub||null,this.j=c.eb||!1}M(Ja,Jp),Ja.prototype.g=function(){return new fl(this.l,this.j)},Ja.prototype.i=function(c){return function(){return c}}({});function fl(c,d){Tt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(fl,Tt),n=fl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ec(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xa(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ec(this)),this.g&&(this.readyState=3,ec(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;P0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function P0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Xa(this):ec(this),this.readyState==3&&P0(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Xa(this))},n.Qa=function(c){this.g&&(this.response=c,Xa(this))},n.ga=function(){this.g&&Xa(this)};function Xa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ec(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ec(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function x0(c){let d="";return Te(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function cg(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=x0(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Be(c,d,f))}function Ke(c){Tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Ke,Tt);var bO=/^https?$/i,CO=["POST","PUT"];n=Ke.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tg.g(),this.v=this.o?a0(this.o):a0(tg),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(P){N0(this,P);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var A in g)f.set(A,g[A]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let P of g.keys())f.set(P,g.get(P));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),A=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CO,d,void 0))||g||A||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,j]of f)this.g.setRequestHeader(P,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{F0(this),this.u=!0,this.g.send(c),this.u=!1}catch(P){N0(this,P)}};function N0(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,O0(c),pl(c)}function O0(c){c.A||(c.A=!0,Ft(c,"complete"),Ft(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ft(this,"complete"),Ft(this,"abort"),pl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pl(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?k0(this):this.bb())},n.bb=function(){k0(this)};function k0(c){if(c.h&&typeof s<"u"&&(!c.v[1]||xr(c)!=4||c.Z()!=2)){if(c.u&&xr(c)==4)r0(c.Ea,0,c);else if(Ft(c,"readystatechange"),xr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=j===0){var A=String(c.D).match(D0)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),g=!bO.test(A?A.toLowerCase():"")}f=g}if(f)Ft(c,"complete"),Ft(c,"success");else{c.m=6;try{var P=2<xr(c)?c.g.statusText:""}catch{P=""}c.l=P+" ["+c.Z()+"]",O0(c)}}finally{pl(c)}}}}function pl(c,d){if(c.g){F0(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ft(c,"ready");try{f.onreadystatechange=g}catch{}}}function F0(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function xr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),nO(d)}};function L0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function DO(c){let d={};c=(c.g&&2<=xr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(ce(c[g]))continue;var f=S(c[g]);let A=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let P=d[A]||[];d[A]=P,P.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function V0(c){this.Aa=0,this.i=[],this.j=new Wa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tc("baseRetryDelayMs",5e3,c),this.cb=tc("retryDelaySeedMs",1e4,c),this.Wa=tc("forwardChannelMaxRetries",2,c),this.wa=tc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new _0(c&&c.concurrentRequestLimit),this.Da=new wO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=V0.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Lt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=W0(this,null,this.W),ml(this)};function ug(c){if(U0(c),c.G==3){var d=c.U++,f=Pr(c.I);if(Be(f,"SID",c.K),Be(f,"RID",d),Be(f,"TYPE","terminate"),nc(c,f),d=new si(c,c.j,d),d.L=2,d.v=hl(Pr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=K0(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ul(d)}G0(c)}function gl(c){c.g&&(dg(c),c.g.cancel(),c.g=null)}function U0(c){gl(c),c.u&&(a.clearTimeout(c.u),c.u=null),yl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ml(c){if(!E0(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ua||ZI(),ja||(Ua(),ja=!0),$p.add(d,c),c.B=0}}function TO(c,d){return w0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ga(y(c.Ga,c,d),q0(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let A=new si(this,this.j,c),P=this.o;if(this.S&&(P?(P=I(P),D(P,this.S)):P=this.S),this.m!==null||this.O||(A.H=P,P=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=B0(this,A,d),f=Pr(this.I),Be(f,"RID",c),Be(f,"CVER",22),this.D&&Be(f,"X-HTTP-Session-Id",this.D),nc(this,f),P&&(this.O?d="headers="+encodeURIComponent(String(x0(P)))+"&"+d:this.m&&cg(f,this.m,P)),ag(this.h,A),this.Ua&&Be(f,"TYPE","init"),this.P?(Be(f,"$req",d),Be(f,"SID","null"),A.T=!0,rg(A,f,null)):rg(A,f,d),this.G=2}}else this.G==3&&(c?j0(this,c):this.i.length==0||E0(this.h)||j0(this))};function j0(c,d){var f;d?f=d.l:f=c.U++;let g=Pr(c.I);Be(g,"SID",c.K),Be(g,"RID",f),Be(g,"AID",c.T),nc(c,g),c.m&&c.o&&cg(g,c.m,c.o),f=new si(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=B0(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ag(c.h,f),rg(f,g,d)}function nc(c,d){c.H&&Te(c.H,function(f,g){Be(d,g,f)}),c.l&&C0({},function(f,g){Be(d,g,f)})}function B0(c,d,f){f=Math.min(c.i.length,f);var g=c.l?y(c.l.Na,c.l,c):null;e:{var A=c.i;let P=-1;for(;;){let j=["count="+f];P==-1?0<f?(P=A[0].g,j.push("ofs="+P)):P=0:j.push("ofs="+P);let Le=!0;for(let _t=0;_t<f;_t++){let Ce=A[_t].g,St=A[_t].map;if(Ce-=P,0>Ce)P=Math.max(0,A[_t].g-100),Le=!1;else try{IO(St,j,"req"+Ce+"_")}catch{g&&g(St)}}if(Le){g=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function $0(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ua||ZI(),ja||(Ua(),ja=!0),$p.add(d,c),c.v=0}}function lg(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ga(y(c.Fa,c),q0(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,H0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ga(y(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),gl(this),H0(this))};function dg(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function H0(c){c.g=new si(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Pr(c.qa);Be(d,"RID","rpc"),Be(d,"SID",c.K),Be(d,"AID",c.T),Be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(d,"TO",c.ja),Be(d,"TYPE","xmlhttp"),nc(c,d),c.m&&c.o&&cg(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=hl(Pr(d)),f.m=null,f.P=!0,m0(f,c)}n.Za=function(){this.C!=null&&(this.C=null,gl(this),lg(this),Lt(19))};function yl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function z0(c,d){var f=null;if(c.g==d){yl(c),dg(c),c.g=null;var g=2}else if(sg(c.h,d))f=d.D,I0(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var A=c.B;g=sl(),Ft(g,new h0(g,f)),ml(c)}else $0(c);else if(A=d.s,A==3||A==0&&0<d.X||!(g==1&&TO(c,d)||g==2&&lg(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),A){case 1:Qi(c,5);break;case 4:Qi(c,10);break;case 3:Qi(c,6);break;default:Qi(c,2)}}}function q0(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Qi(c,d){if(c.j.info("Error code "+d),d==2){var f=y(c.fb,c),g=c.Xa;let A=!g;g=new Ki(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ll(g,"https"),hl(g),A?_O(g.toString(),f):EO(g.toString(),f)}else Lt(2);c.G=0,c.l&&c.l.sa(d),G0(c),U0(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function G0(c){if(c.G=0,c.ka=[],c.l){let d=b0(c.h);(d.length!=0||c.i.length!=0)&&(O(c.ka,d),O(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function W0(c,d,f){var g=f instanceof Ki?Pr(f):new Ki(f);if(g.g!="")d&&(g.g=d+"."+g.g),dl(g,g.s);else{var A=a.location;g=A.protocol,d=d?d+"."+A.hostname:A.hostname,A=+A.port;var P=new Ki(null);g&&ll(P,g),d&&(P.g=d),A&&dl(P,A),f&&(P.l=f),g=P}return f=c.D,d=c.ya,f&&d&&Be(g,f,d),Be(g,"VER",c.la),nc(c,g),g}function K0(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ke(new Ja({eb:f})):new Ke(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Q0(){}n=Q0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function vl(){}vl.prototype.g=function(c,d){return new en(c,d)};function en(c,d){Tt.call(this),this.g=new V0(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!ce(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!ce(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new ts(this)}M(en,Tt),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){ug(this.g)},en.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Zp(c),c=f);d.i.push(new uO(d.Ya++,c)),d.G==3&&ml(d)},en.prototype.N=function(){this.g.l=null,delete this.j,ug(this.g),delete this.g,en.aa.N.call(this)};function Y0(c){Xp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}M(Y0,Xp);function Z0(){eg.call(this),this.status=1}M(Z0,eg);function ts(c){this.g=c}M(ts,Q0),ts.prototype.ua=function(){Ft(this.g,"a")},ts.prototype.ta=function(c){Ft(this.g,new Y0(c))},ts.prototype.sa=function(c){Ft(this.g,new Z0)},ts.prototype.ra=function(){Ft(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,ME=Jr.createWebChannelTransport=function(){return new vl},AE=Jr.getStatEventTarget=function(){return sl()},SE=Jr.Event=Gi,Vf=Jr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},al.NO_ERROR=0,al.TIMEOUT=8,al.HTTP_ERROR=6,Fu=Jr.ErrorCode=al,f0.COMPLETE="complete",TE=Jr.EventType=f0,c0.EventType=za,za.OPEN="a",za.CLOSE="b",za.ERROR="c",za.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,la=Jr.WebChannel=c0,x3=Jr.FetchXmlHttpFactory=Ja,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,DE=Jr.XhrIo=Ke}).apply(typeof Lf<"u"?Lf:typeof self<"u"?self:typeof window<"u"?window:{});var aP="@firebase/firestore",cP="4.7.10";var mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");var Na="11.5.0";var Ho=new mr("@firebase/firestore");function da(){return Ho.logLevel}function G(n,...e){if(Ho.logLevel<=me.DEBUG){let t=e.map(_I);Ho.debug(`Firestore (${Na}): ${n}`,...t)}}function Xr(n,...e){if(Ho.logLevel<=me.ERROR){let t=e.map(_I);Ho.error(`Firestore (${Na}): ${n}`,...t)}}function ya(n,...e){if(Ho.logLevel<=me.WARN){let t=e.map(_I);Ho.warn(`Firestore (${Na}): ${n}`,...t)}}function _I(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ee(n="Unexpected state"){let e=`FIRESTORE (${Na}) INTERNAL ASSERTION FAILED: `+n;throw Xr(e),new Error(e)}function Pe(n,e){n||ee()}function ie(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Q=class extends Bt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Cr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var qf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},OE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mt.UNAUTHENTICATED))}shutdown(){}},kE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},FE=class{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Cr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>_(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Cr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new qf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new mt(e)}},LE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},VE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new LE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Gf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},UE=class{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,bt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0);let r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Gf(this.V));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pe(typeof t.token=="string"),this.R=t.token,new Gf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function N3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function QP(){return new TextEncoder}var Wf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=N3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function jE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return ge(r,i);{let o=QP(),s=O3(o.encode(uP(n,t)),o.encode(uP(e,t)));return s!==0?s:ge(r,i)}}t+=r>65535?2:1}return ge(n.length,e.length)}function uP(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function O3(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return ge(n[t],e[t]);return ge(n.length,e.length)}function va(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var lP=-62135596800,dP=1e6,Ct=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*dP);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lP)throw new Q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dP}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-lP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ct(0,0))}static max(){return new n(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hP="__name__",Kf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ee(),r===void 0?r=e.length-t:r>e.length-t&&ee(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ge(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):jE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zr.fromString(e.substring(4,e.length-2))}},Ye=class n extends Kf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Q(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},k3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dn=class n extends Kf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return k3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===hP}static keyField(){return new n([hP])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new Q(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Q(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Q(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var J=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ye.fromString(e))}static fromName(e){return new n(Ye.fromString(e).popFirst(5))}static empty(){return new n(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ye(e.slice()))}};var $u=-1,BE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};BE.UNKNOWN_ID=-1;function F3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new Ct(t+1,0):new Ct(t,r));return new zo(i,J.empty(),e)}function L3(n){return new zo(n.readTime,n.key,$u)}var zo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),J.empty(),$u)}static max(){return new n(se.max(),J.empty(),$u)}};function V3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=J.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var U3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$E=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Oa(n){return _(this,null,function*(){if(n.code!==V.FAILED_PRECONDITION||n.message!==U3)throw n;G("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function j3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ka(n){return n.name==="IndexedDbTransactionError"}var EI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this._e&&this._e(t),t}}n.ae=-1;return n})(),wI=-1;function Cp(n){return n==null}function Hu(n){return n===0&&1/n==-1/0}function B3(n){return typeof n=="number"&&Number.isInteger(n)&&!Hu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var YP="";function $3(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fP(e)),e=H3(n.get(t),e);return fP(e)}function H3(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case YP:t+="";break;default:t+=o}}return t}function fP(n){return n+YP+""}var z3="remoteDocuments",ZP="owner";var JP="mutationQueues";var XP="mutations";var ex="documentMutations",q3="remoteDocumentsV14";var tx="remoteDocumentGlobal";var nx="targets";var rx="targetDocuments";var ix="targetGlobal",ox="collectionParents";var sx="clientMetadata";var ax="bundles";var cx="namedQueries";var G3="indexConfiguration";var W3="indexState";var K3="indexEntries";var ux="documentOverlays";var Q3="globals";var Y3=[JP,XP,ex,z3,nx,ZP,ix,rx,sx,tx,ox,ax,cx],Hre=[...Y3,ux],Z3=[JP,XP,ex,q3,nx,ZP,ix,rx,sx,tx,ox,ax,cx,ux],J3=Z3,X3=[...J3,G3,W3,K3];var zre=[...X3,Q3];function pP(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ze=class n{constructor(e,t){this.comparator=e,this.root=t||Dr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ga(this.root,e,this.comparator,!0)}},ga=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Dr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();let e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}};Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1;Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Dr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var yt=class n{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qf(this.data.getIterator())}getIteratorFrom(e){return new Qf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Qf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var br=class n{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new n([])}unionWith(e){let t=new yt(dn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Yf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var kt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Yf("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};kt.EMPTY_BYTE_STRING=new kt("");var e5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ei(n){if(Pe(!!n),typeof n=="string"){let e=0,t=e5.exec(n);if(Pe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(n.seconds),nanos:Ge(n.nanos)}}function Ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ti(n){return typeof n=="string"?kt.fromBase64String(n):kt.fromUint8Array(n)}var dx="server_timestamp",hx="__type__",fx="__previous_value__",px="__local_write_time__";function II(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[hx])===null||t===void 0?void 0:t.stringValue)===dx}function Dp(n){let e=n.mapValue.fields[fx];return II(e)?Dp(e):e}function zu(n){let e=ei(n.mapValue.fields[px].timestampValue);return new Ct(e.seconds,e.nanos)}var HE=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Zf="(default)",Jf=class n{constructor(e,t){this.projectId=e,this.database=t||Zf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Zf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var bI="__type__",gx="__max__",Uf={mapValue:{fields:{__type__:{stringValue:gx}}}},CI="__vector__",_a="value";function Hi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?II(n)?4:yx(n)?9007199254740991:mx(n)?10:11:ee()}function Ar(n,e){if(n===e)return!0;let t=Hi(n);if(t!==Hi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zu(n).isEqual(zu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ei(i.timestampValue),a=ei(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ti(i.bytesValue).isEqual(ti(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Ge(i.geoPointValue.latitude)===Ge(o.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ge(i.integerValue)===Ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ge(i.doubleValue),a=Ge(o.doubleValue);return s===a?Hu(s)===Hu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return va(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(pP(s)!==pP(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Ar(s[u],a[u])))return!1;return!0}(n,e);default:return ee()}}function qu(n,e){return(n.values||[]).find(t=>Ar(t,e))!==void 0}function Ea(n,e){if(n===e)return 0;let t=Hi(n),r=Hi(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ge(o.integerValue||o.doubleValue),u=Ge(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return gP(n.timestampValue,e.timestampValue);case 4:return gP(zu(n),zu(e));case 5:return jE(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ti(o),u=ti(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ge(a[l],u[l]);if(h!==0)return h}return ge(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ge(Ge(o.latitude),Ge(s.latitude));return a!==0?a:ge(Ge(o.longitude),Ge(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mP(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},y=s.fields||{},m=(a=p[_a])===null||a===void 0?void 0:a.arrayValue,M=(u=y[_a])===null||u===void 0?void 0:u.arrayValue,N=ge(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((h=M?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:mP(m,M)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Uf.mapValue&&s===Uf.mapValue)return 0;if(o===Uf.mapValue)return 1;if(s===Uf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let y=jE(u[p],h[p]);if(y!==0)return y;let m=Ea(a[u[p]],l[h[p]]);if(m!==0)return m}return ge(u.length,h.length)}(n.mapValue,e.mapValue);default:throw ee()}}function gP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=ei(n),r=ei(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function mP(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ea(t[i],r[i]);if(o)return o}return ge(t.length,r.length)}function wa(n){return zE(n)}function zE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ei(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ti(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return J.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=zE(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${zE(t.fields[s])}`;return i+"}"}(n.mapValue):ee()}function $f(n){switch(Hi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Dp(n);return e?16+$f(e):16;case 5:return 2*n.stringValue.length;case 6:return ti(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+$f(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Qo(r.fields,(o,s)=>{i+=o.length+$f(s)}),i}(n.mapValue);default:throw ee()}}function qE(n){return!!n&&"integerValue"in n}function DI(n){return!!n&&"arrayValue"in n}function yP(n){return!!n&&"nullValue"in n}function vP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hf(n){return!!n&&"mapValue"in n}function mx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[bI])===null||t===void 0?void 0:t.stringValue)===CI}function Vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Qo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===gx}var Gre={mapValue:{fields:{[bI]:{stringValue:CI},[_a]:{arrayValue:{}}}}};var Gn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=dn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Vu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Qo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Vu(this.value))}};function vx(n){let e=[];return Qo(n.fields,(t,r)=>{let i=new dn([t]);if(Hf(r)){let o=vx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new br(e)}var Wn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),Gn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ia=class{constructor(e,t){this.position=e,this.inclusive=t}};function _P(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=J.comparator(J.fromName(s.referenceValue),t.key):r=Ea(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function EP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}var ba=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function t5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Xf=class{},ut=class n extends Xf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new WE(e,t,r):t==="array-contains"?new YE(e,r):t==="in"?new ZE(e,r):t==="not-in"?new JE(e,r):t==="array-contains-any"?new XE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new KE(e,r):new QE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ea(t,this.value)):t!==null&&Hi(this.value)===Hi(t)&&this.matchesComparison(Ea(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Mr=class n extends Xf{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new n(e,t)}matches(e){return _x(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}};function _x(n){return n.op==="and"}function Ex(n){return n5(n)&&_x(n)}function n5(n){for(let e of n.filters)if(e instanceof Mr)return!1;return!0}function GE(n){if(n instanceof ut)return n.field.canonicalString()+n.op.toString()+wa(n.value);if(Ex(n))return n.filters.map(e=>GE(e)).join(",");{let e=n.filters.map(t=>GE(t)).join(",");return`${n.op}(${e})`}}function wx(n,e){return n instanceof ut?function(r,i){return i instanceof ut&&r.op===i.op&&r.field.isEqual(i.field)&&Ar(r.value,i.value)}(n,e):n instanceof Mr?function(r,i){return i instanceof Mr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&wx(s,i.filters[a]),!0):!1}(n,e):void ee()}function Ix(n){return n instanceof ut?function(t){return`${t.field.canonicalString()} ${t.op} ${wa(t.value)}`}(n):n instanceof Mr?function(t){return t.op.toString()+" {"+t.getFilters().map(Ix).join(" ,")+"}"}(n):"Filter"}var WE=class extends ut{constructor(e,t,r){super(e,t,r),this.key=J.fromName(r.referenceValue)}matches(e){let t=J.comparator(e.key,this.key);return this.matchesComparison(t)}},KE=class extends ut{constructor(e,t){super(e,"in",t),this.keys=bx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},QE=class extends ut{constructor(e,t){super(e,"not-in",t),this.keys=bx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bx(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>J.fromName(r.referenceValue))}var YE=class extends ut{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return DI(t)&&qu(t.arrayValue,this.value)}},ZE=class extends ut{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&qu(this.value.arrayValue,t)}},JE=class extends ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!qu(this.value.arrayValue,t)}},XE=class extends ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!DI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>qu(this.value.arrayValue,r))}};var ew=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.le=null}};function wP(n,e=null,t=[],r=[],i=null,o=null,s=null){return new ew(n,e,t,r,i,o,s)}function TI(n){let e=ie(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>GE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Cp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wa(r)).join(",")),e.le=t}return e.le}function SI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!t5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!wx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EP(n.startAt,e.startAt)&&EP(n.endAt,e.endAt)}function tw(n){return J.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ca=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}};function r5(n,e,t,r,i,o,s,a){return new Ca(n,e,t,r,i,o,s,a)}function AI(n){return new Ca(n)}function IP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function i5(n){return n.collectionGroup!==null}function Uu(n){let e=ie(n);if(e.he===null){e.he=[];let t=new Set;for(let o of e.explicitOrderBy)e.he.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new yt(dn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.he.push(new ba(o,r))}),t.has(dn.keyField().canonicalString())||e.he.push(new ba(dn.keyField(),r))}return e.he}function Tr(n){let e=ie(n);return e.Pe||(e.Pe=o5(e,Uu(n))),e.Pe}function o5(n,e){if(n.limitType==="F")return wP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ba(i.field,o)});let t=n.endAt?new Ia(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ia(n.startAt.position,n.startAt.inclusive):null;return wP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function nw(n,e,t){return new Ca(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tp(n,e){return SI(Tr(n),Tr(e))&&n.limitType===e.limitType}function Cx(n){return`${TI(Tr(n))}|lt:${n.limitType}`}function ha(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ix(i)).join(", ")}]`),Cp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>wa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>wa(i)).join(",")),`Target(${r})`}(Tr(n))}; limitType=${n.limitType})`}function Sp(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):J.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Uu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=_P(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Uu(r),i)||r.endAt&&!function(s,a,u){let l=_P(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Uu(r),i))}(n,e)}function s5(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Dx(n){return(e,t)=>{let r=!1;for(let i of Uu(n)){let o=a5(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function a5(n,e,t){let r=n.field.isKeyField()?J.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ea(u,l):ee()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}var ni=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return lx(this.inner)}size(){return this.innerSize}};var c5=new Ze(J.comparator);function ri(){return c5}var Tx=new Ze(J.comparator);function Lu(...n){let e=Tx;for(let t of n)e=e.insert(t.key,t);return e}function Sx(n){let e=Tx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Bo(){return ju()}function Ax(){return ju()}function ju(){return new ni(n=>n.toString(),(n,e)=>n.isEqual(e))}var u5=new Ze(J.comparator),l5=new yt(J.comparator);function _e(...n){let e=l5;for(let t of n)e=e.add(t);return e}var d5=new yt(ge);function h5(){return d5}function MI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function Mx(n){return{integerValue:""+n}}function f5(n,e){return B3(e)?Mx(e):MI(n,e)}var Da=class{constructor(){this._=void 0}};function p5(n,e,t){return n instanceof Ta?function(i,o){let s={fields:{[hx]:{stringValue:dx},[px]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&II(o)&&(o=Dp(o)),o&&(s.fields[fx]=o),{mapValue:s}}(t,e):n instanceof qo?Px(n,e):n instanceof Go?xx(n,e):function(i,o){let s=Rx(i,o),a=bP(s)+bP(i.Ie);return qE(s)&&qE(i.Ie)?Mx(a):MI(i.serializer,a)}(n,e)}function g5(n,e,t){return n instanceof qo?Px(n,e):n instanceof Go?xx(n,e):t}function Rx(n,e){return n instanceof Sa?function(r){return qE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ta=class extends Da{},qo=class extends Da{constructor(e){super(),this.elements=e}};function Px(n,e){let t=Nx(e);for(let r of n.elements)t.some(i=>Ar(i,r))||t.push(r);return{arrayValue:{values:t}}}var Go=class extends Da{constructor(e){super(),this.elements=e}};function xx(n,e){let t=Nx(e);for(let r of n.elements)t=t.filter(i=>!Ar(i,r));return{arrayValue:{values:t}}}var Sa=class extends Da{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function bP(n){return Ge(n.integerValue||n.doubleValue)}function Nx(n){return DI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function m5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof qo&&i instanceof qo||r instanceof Go&&i instanceof Go?va(r.elements,i.elements,Ar):r instanceof Sa&&i instanceof Sa?Ar(r.Ie,i.Ie):r instanceof Ta&&i instanceof Ta}(n.transform,e.transform)}var rw=class{constructor(e,t){this.version=e,this.transformResults=t}},Bi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Aa=class{};function Ox(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ep(n.key,Bi.none()):new Wo(n.key,n.data,Bi.none());{let t=n.data,r=Gn.empty(),i=new yt(dn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ii(n.key,r,new br(i.toArray()),Bi.none())}}function y5(n,e,t){n instanceof Wo?function(i,o,s){let a=i.value.clone(),u=DP(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ii?function(i,o,s){if(!zf(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=DP(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(kx(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Bu(n,e,t,r){return n instanceof Wo?function(o,s,a,u){if(!zf(o.precondition,s))return a;let l=o.value.clone(),h=TP(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof ii?function(o,s,a,u){if(!zf(o.precondition,s))return a;let l=TP(o.fieldTransforms,u,s),h=s.data;return h.setAll(kx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return zf(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function v5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Rx(r.transform,i||null);o!=null&&(t===null&&(t=Gn.empty()),t.set(r.field,o))}return t||null}function CP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&va(r,i,(o,s)=>m5(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Wo=class extends Aa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ii=class extends Aa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function kx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function DP(n,e,t){let r=new Map;Pe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,g5(s,a,t[i]))}return r}function TP(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,p5(o,s,e))}return r}var ep=class extends Aa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},iw=class extends Aa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ow=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&y5(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Bu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Bu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Ax();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=Ox(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(t,r)=>CP(t,r))&&va(this.baseMutations,e.baseMutations,(t,r)=>CP(t,r))}},sw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pe(e.mutations.length===r.length);let i=function(){return u5}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var aw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var cw=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var rt,Ie;function _5(n){switch(n){case V.OK:return ee();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ee()}}function Fx(n){if(n===void 0)return Xr("GRPC error has no .code"),V.UNKNOWN;switch(n){case rt.OK:return V.OK;case rt.CANCELLED:return V.CANCELLED;case rt.UNKNOWN:return V.UNKNOWN;case rt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case rt.INTERNAL:return V.INTERNAL;case rt.UNAVAILABLE:return V.UNAVAILABLE;case rt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case rt.NOT_FOUND:return V.NOT_FOUND;case rt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case rt.ABORTED:return V.ABORTED;case rt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case rt.DATA_LOSS:return V.DATA_LOSS;default:return ee()}}(Ie=rt||(rt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var SP=null;var E5=new Zr([4294967295,4294967295],0);function AP(n){let e=QP().encode(n),t=new CE;return t.update(e),new Uint8Array(t.digest())}function MP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Zr([t,r],0),new Zr([i,o],0)]}var uw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $o(`Invalid padding: ${t}`);if(r<0)throw new $o(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $o(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new $o(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Zr.fromNumber(this.Ee)}Ae(e,t,r){let i=e.add(t.multiply(Zr.fromNumber(r)));return i.compare(E5)===1&&(i=new Zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;let t=AP(e),[r,i]=MP(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);if(!this.Re(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ee===0)return;let t=AP(e),[r,i]=MP(t);for(let o=0;o<this.hashCount;o++){let s=this.Ae(r,i,o);this.Ve(s)}}Ve(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},$o=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var tp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new Ze(ge),ri(),_e())}},Gu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,_e(),_e(),_e())}};var ma=class{constructor(e,t,r,i){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=i}},np=class{constructor(e,t){this.targetId=e,this.ge=t}},rp=class{constructor(e,t,r=kt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ip=class{constructor(){this.pe=0,this.ye=RP(),this.we=kt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=_e(),t=_e(),r=_e();return this.ye.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new Gu(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=RP()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Pe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}},lw=class{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ri(),this.$e=jf(),this.Ue=jf(),this.Ke=new Ze(ge)}We(e){for(let t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(let t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{let r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:ee()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,i)=>{this.Je(i)&&t(i)})}Ze(e){let t=e.targetId,r=e.ge.count,i=this.Xe(t);if(i){let o=i.target;if(tw(o))if(r===0){let s=new J(o.path);this.ze(t,s,Wn.newNoDocument(s,se.min()))}else Pe(r===1);else{let s=this.et(t);if(s!==r){let a=this.tt(e),u=a?this.nt(a,e,s):1;if(u!==0){this.Ye(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}SP?.rt(function(h,p,y,m,M){var N,O,z,ce,K,xe;let vt={localCacheCount:h,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},Te=p.unchangedNames;return Te&&(vt.bloomFilter={applied:M===0,hashCount:(N=Te?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(ce=(z=(O=Te?.bits)===null||O===void 0?void 0:O.bitmap)===null||z===void 0?void 0:z.length)!==null&&ce!==void 0?ce:0,padding:(xe=(K=Te?.bits)===null||K===void 0?void 0:K.padding)!==null&&xe!==void 0?xe:0,mightContain:T=>{var I;return(I=m?.mightContain(T))!==null&&I!==void 0&&I}}),vt}(s,e.ge,this.ke.it(),a,u))}}}}tt(e){let t=e.ge.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ti(r).toUint8Array()}catch(u){if(u instanceof Yf)return ya("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new uw(s,i,o)}catch(u){return ya(u instanceof $o?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ee===0?null:a}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){let r=this.ke.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ke.it(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,o,null),i++)}),i}ot(e){let t=new Map;this.qe.forEach((o,s)=>{let a=this.Xe(s);if(a){if(o.current&&tw(a.target)){let u=new J(a.target.path);this._t(u).has(s)||this.ut(s,u)||this.ze(s,u,Wn.newNoDocument(u,e))}o.ve&&(t.set(s,o.Fe()),o.Me())}});let r=_e();this.Ue.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Xe(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.Qe.forEach((o,s)=>s.setReadTime(e));let i=new tp(e,t,this.Ke,this.Qe,r);return this.Qe=ri(),this.$e=jf(),this.Ue=jf(),this.Ke=new Ze(ge),i}Ge(e,t){if(!this.Je(e))return;let r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;let i=this.He(e);this.ut(e,t)?i.xe(t,1):i.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){let t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new ip,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new yt(ge),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new yt(ge),this.$e=this.$e.insert(e,t)),t}Je(e){let t=this.Xe(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){let t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new ip),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}};function jf(){return new Ze(J.comparator)}function RP(){return new Ze(J.comparator)}var w5={asc:"ASCENDING",desc:"DESCENDING"},I5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b5={and:"AND",or:"OR"},dw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function hw(n,e){return n.useProto3Json||Cp(e)?e:{value:e}}function op(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function C5(n,e){return op(n,e.toTimestamp())}function Sr(n){return Pe(!!n),se.fromTimestamp(function(t){let r=ei(t);return new Ct(r.seconds,r.nanos)}(n))}function RI(n,e){return fw(n,e).canonicalString()}function fw(n,e){let t=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Vx(n){let e=Ye.fromString(n);return Pe(Hx(e)),e}function pw(n,e){return RI(n.databaseId,e.path)}function RE(n,e){let t=Vx(e);if(t.get(1)!==n.databaseId.projectId)throw new Q(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Q(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new J(jx(t))}function Ux(n,e){return RI(n.databaseId,e)}function D5(n){let e=Vx(n);return e.length===4?Ye.emptyPath():jx(e)}function gw(n){return new Ye(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jx(n){return Pe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function PP(n,e,t){return{name:pw(n,e),fields:t.value.mapValue.fields}}function T5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Pe(h===void 0||typeof h=="string"),kt.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),kt.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?V.UNKNOWN:Fx(l.code);return new Q(h,l.message||"")}(s);t=new rp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=RE(n,r.document.name),o=Sr(r.document.updateTime),s=r.document.createTime?Sr(r.document.createTime):se.min(),a=new Gn({mapValue:{fields:r.document.fields}}),u=Wn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ma(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=RE(n,r.document),o=r.readTime?Sr(r.readTime):se.min(),s=Wn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ma([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=RE(n,r.document),o=r.removedTargetIds||[];t=new ma([],o,i,null)}else{if(!("filter"in e))return ee();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new cw(i,o),a=r.targetId;t=new np(a,s)}}return t}function S5(n,e){let t;if(e instanceof Wo)t={update:PP(n,e.key,e.value)};else if(e instanceof ep)t={delete:pw(n,e.key)};else if(e instanceof ii)t={update:PP(n,e.key,e.data),updateMask:F5(e.fieldMask)};else{if(!(e instanceof iw))return ee();t={verify:pw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ta)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Go)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sa)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ee()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:C5(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee()}(n,e.precondition)),t}function A5(n,e){return n&&n.length>0?(Pe(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Sr(i.updateTime):Sr(o);return s.isEqual(se.min())&&(s=Sr(o)),new rw(s,i.transformResults||[])}(t,e))):[]}function M5(n,e){return{documents:[Ux(n,e.path)]}}function R5(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ux(n,i);let o=function(l){if(l.length!==0)return $x(Mr.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(y){return{field:fa(y.field),direction:N5(y.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=hw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ht:t,parent:i}}function P5(n){let e=D5(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Pe(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let y=Bx(p);return y instanceof Mr&&Ex(y)?y.getFilters():[y]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(y=>function(M){return new ba(pa(M.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(y))}(t.orderBy));let a=null;t.limit&&(a=function(p){let y;return y=typeof p=="object"?p.value:p,Cp(y)?null:y}(t.limit));let u=null;t.startAt&&(u=function(p){let y=!!p.before,m=p.values||[];return new Ia(m,y)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let y=!p.before,m=p.values||[];return new Ia(m,y)}(t.endAt)),r5(e,i,s,o,a,"F",u,l)}function x5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Bx(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=pa(t.unaryFilter.field);return ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=pa(t.unaryFilter.field);return ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=pa(t.unaryFilter.field);return ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=pa(t.unaryFilter.field);return ut.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(n):n.fieldFilter!==void 0?function(t){return ut.create(pa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Mr.create(t.compositeFilter.filters.map(r=>Bx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(t.compositeFilter.op))}(n):ee()}function N5(n){return w5[n]}function O5(n){return I5[n]}function k5(n){return b5[n]}function fa(n){return{fieldPath:n.canonicalString()}}function pa(n){return dn.fromServerFormat(n.fieldPath)}function $x(n){return n instanceof ut?function(t){if(t.op==="=="){if(vP(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NAN"}};if(yP(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(vP(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NAN"}};if(yP(t.value))return{unaryFilter:{field:fa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fa(t.field),op:O5(t.op),value:t.value}}}(n):n instanceof Mr?function(t){let r=t.getFilters().map(i=>$x(i));return r.length===1?r[0]:{compositeFilter:{op:k5(t.op),filters:r}}}(n):ee()}function F5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Hx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wu=class n{constructor(e,t,r,i,o=se.min(),s=se.min(),a=kt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var mw=class{constructor(e){this.Tt=e}};function L5(n){let e=P5({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nw(e,e.limit,"L"):e}var sp=class{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(Ge(e.integerValue));else if("doubleValue"in e){let r=Ge(e.doubleValue);isNaN(r)?this.ft(t,13):(this.ft(t,15),Hu(r)?t.gt(0):t.gt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.ft(t,20),typeof r=="string"&&(r=ei(r)),t.yt(`${r.seconds||""}`),t.gt(r.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(ti(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.ft(t,45),t.gt(r.latitude||0),t.gt(r.longitude||0)}else"mapValue"in e?yx(e)?this.ft(t,Number.MAX_SAFE_INTEGER):mx(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):ee()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){let r=e.fields||{};this.ft(t,55);for(let i of Object.keys(r))this.wt(i,t),this.Rt(r[i],t)}vt(e,t){var r,i;let o=e.fields||{};this.ft(t,53);let s=_a,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.ft(t,15),t.gt(Ge(a)),this.wt(s,t),this.Rt(o[s],t)}Ft(e,t){let r=e.values||[];this.ft(t,50);for(let i of r)this.Rt(i,t)}Dt(e,t){this.ft(t,37),J.fromName(e).path.forEach(r=>{this.ft(t,60),this.Mt(r,t)})}ft(e,t){e.gt(t)}St(e){e.gt(2)}};sp.xt=new sp;var yw=class{constructor(){this.Tn=new vw}addToCollectionParentIndex(e,t){return this.Tn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(zo.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(zo.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},vw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yt(Ye.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yt(Ye.comparator)).toArray()}};var Wre=new Uint8Array(0);var xP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zx=41943040,Rn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(zx,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);var Ku=class n{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new n(0)}static Kn(){return new n(-1)}};var NP="LruGarbageCollector",V5=1048576;function OP([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var _w=class{constructor(e){this.Hn=e,this.buffer=new yt(OP),this.Jn=0}Yn(){return++this.Jn}Zn(e){let t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();OP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Ew=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){G(NP,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Xn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ka(t)?G(NP,"Ignoring IndexedDB error during garbage collection: ",t):yield Oa(t)}yield this.er(3e5)}))}},ww=class{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return L.resolve(EI.ae);let r=new _w(t);return this.tr.forEachTarget(e,i=>r.Zn(i.sequenceNumber)).next(()=>this.tr.rr(e,i=>r.Zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(xP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xP):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),da()<=me.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function U5(n,e){return new ww(n,e)}var Iw=class{constructor(){this.changes=new ni(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var bw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Cw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Bu(r.mutation,i,br.empty(),Ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){let i=Bo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Lu();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Bo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ri(),s=ju(),a=function(){return ju()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof ii)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Bu(h.mutation,l,h.mutation.getFieldMask(),Ct.now())):s.set(l.key,br.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new bw(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ju(),i=new Ze((s,a)=>s-a),o=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||br.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||_e()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Ax();h.forEach(y=>{if(!o.has(y)){let m=Ox(t.get(y),r.get(y));m!==null&&p.set(y,m),o=o.add(y)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return L.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return J.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):i5(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):L.resolve(Bo()),a=$u,u=o;return s.next(l=>L.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(y=>{u=u.insert(h,y)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,_e())).next(h=>({batchId:a,changes:Sx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(r=>{let i=Lu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Lu();return this.indexManager.getCollectionParents(e,o).next(a=>L.forEach(a,u=>{let l=function(p,y){return new Ca(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,y)=>{s=s.insert(p,y)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,Wn.newInvalidDocument(h)))});let a=Lu();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&Bu(h.mutation,l,br.empty(),Ct.now()),Sp(t,l)&&(a=a.insert(u,l))}),a})}};var Dw=class{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return L.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Sr(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(i){return{name:i.name,query:L5(i.bundledQuery),readTime:Sr(i.readTime)}}(t)),L.resolve()}};var Tw=class{constructor(){this.overlays=new Ze(J.comparator),this.Rr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Bo();return L.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Et(e,t,o)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Rr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=Bo(),o=t.length+1,s=new J(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ze((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Bo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Bo(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return L.resolve(a)}Et(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Rr.get(i.largestBatchId).delete(r.key);this.Rr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new aw(t,r));let o=this.Rr.get(t);o===void 0&&(o=_e(),this.Rr.set(t,o)),this.Rr.set(t,o.add(r.key))}};var Sw=class{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Qu=class{constructor(){this.Vr=new yt(it.mr),this.gr=new yt(it.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){let r=new it(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new it(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){let t=new J(new Ye([])),r=new it(t,e),i=new it(t,e+1),o=[];return this.gr.forEachInRange([r,i],s=>{this.wr(s),o.push(s.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){let t=new J(new Ye([])),r=new it(t,e),i=new it(t,e+1),o=_e();return this.gr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new it(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},it=class{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return J.comparator(e.key,t.key)||ge(e.Cr,t.Cr)}static pr(e,t){return ge(e.Cr,t.Cr)||J.comparator(e.key,t.key)}};var Aw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new yt(it.mr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ow(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Mr=this.Mr.add(new it(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(s)}lookupMutationBatch(e,t){return L.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Nr(r),o=i<0?0:i;return L.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?wI:this.Fr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new it(t,0),i=new it(t,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([r,i],s=>{let a=this.Or(s.Cr);o.push(a)}),L.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yt(ge);return t.forEach(i=>{let o=new it(i,0),s=new it(i,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,s],a=>{r=r.add(a.Cr)})}),L.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;J.isDocumentKey(o)||(o=o.child(""));let s=new it(new J(o),0),a=new yt(ge);return this.Mr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Cr)),!0)},s),L.resolve(this.Br(a))}Br(e){let t=[];return e.forEach(r=>{let i=this.Or(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Pe(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return L.forEach(t.mutations,i=>{let o=new it(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){let r=new it(t,0),i=this.Mr.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){let t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Mw=class{constructor(e){this.kr=e,this.docs=function(){return new Ze(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=ri();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Wn.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ri(),s=t.path,a=new J(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||V3(L3(h),r)<=0||(i.has(h.key)||Sp(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return L.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ee()}qr(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Rw(this)}getSize(e){return L.resolve(this.size)}},Rw=class extends Iw{constructor(e){super(),this.Ir=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Ir.addEntry(e,i)):this.Ir.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}};var Pw=class{constructor(e){this.persistence=e,this.Qr=new ni(t=>TI(t),SI),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Qu,this.targetCount=0,this.Kr=Ku.Un()}forEachTarget(e,t){return this.Qr.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),L.resolve()}zn(e){this.Qr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Kr=new Ku(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.zn(t),L.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Qr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Qr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(o).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.Qr.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),L.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Ur.vr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.Ur.containsKey(t))}};var ap=class{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new EI(0),this.zr=!1,this.zr=!0,this.jr=new Sw,this.referenceDelegate=e(this),this.Hr=new Pw(this),this.indexManager=new yw,this.remoteDocumentCache=function(i){return new Mw(i)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new mw(t),this.Yr=new Dw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new Aw(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new xw(this.Gr.next());return this.referenceDelegate.Zr(),r(i).next(o=>this.referenceDelegate.Xr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}ei(e,t){return L.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}},xw=class extends $E{constructor(e){super(),this.currentSequenceNumber=e}},Nw=class n{constructor(e){this.persistence=e,this.ti=new Qu,this.ni=null}static ri(e){return new n(e)}get ii(){if(this.ni)return this.ni;throw ee()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),L.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(i=>this.ii.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ii.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.ii,r=>{let i=J.fromPath(r);return this.si(e,i).next(o=>{o||t.removeEntry(i,se.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return L.or([()=>L.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}},cp=class n{constructor(e,t){this.persistence=e,this.oi=new ni(r=>$3(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=U5(this,t)}static ri(e,t){return new n(e,t)}Zr(){}Xr(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){let t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return L.forEach(this.oi,(r,i)=>this.ar(e,r,i).next(o=>o?L.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.qr(e,s=>this.ar(e,s,t).next(a=>{a||(r++,o.removeEntry(s,se.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),L.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$f(e.data.value)),t}ar(e,t,r){return L.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.oi.get(t);return L.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Ow=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=i}static Yi(e,t){let r=_e(),i=_e();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var kw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Fw=class{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return jA()?8:j3(pt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ss(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new kw;return this._s(e,t,s).next(a=>{if(o.result=a,this.Xi)return this.us(e,t,s,a.size)})}).next(()=>o.result)}us(e,t,r,i){return r.documentReadCount<this.es?(da()<=me.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",ha(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),L.resolve()):(da()<=me.DEBUG&&G("QueryEngine","Query:",ha(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ts*i?(da()<=me.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",ha(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(t))):L.resolve())}rs(e,t){if(IP(t))return L.resolve(null);let r=Tr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=nw(t,null,"F"),r=Tr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=_e(...o);return this.ns.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.cs(t,a);return this.ls(t,l,s,u.readTime)?this.rs(e,nw(t,null,"F")):this.hs(e,l,t,u)}))})))}ss(e,t,r,i){return IP(t)||i.isEqual(se.min())?L.resolve(null):this.ns.getDocuments(e,r).next(o=>{let s=this.cs(t,o);return this.ls(t,s,r,i)?L.resolve(null):(da()<=me.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ha(t)),this.hs(e,s,t,F3(i,$u)).next(a=>a))})}cs(e,t){let r=new yt(Dx(e));return t.forEach((i,o)=>{Sp(e,o)&&(r=r.add(o))}),r}ls(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}_s(e,t,r){return da()<=me.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",ha(t)),this.ns.getDocumentsMatchingQuery(e,t,zo.min(),r)}hs(e,t,r,i){return this.ns.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var PI="LocalStore",j5=3e8,Lw=class{constructor(e,t,r,i){this.persistence=e,this.Ps=t,this.serializer=i,this.Ts=new Ze(ge),this.Is=new ni(o=>TI(o),SI),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cw(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}};function B5(n,e,t,r){return new Lw(n,e,t,r)}function qx(n,e){return _(this,null,function*(){let t=ie(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=_e();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Rs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function $5(n,e){let t=ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,y=p.keys(),m=L.resolve();return y.forEach(M=>{m=m.next(()=>h.getEntry(u,M)).next(N=>{let O=l.docVersions.get(M);Pe(O!==null),N.version.compareTo(O)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=_e();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Gx(n){let e=ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function H5(n,e){let t=ie(n),r=e.snapshotVersion,i=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.ds.newChangeBuffer({trackRemovals:!0});i=t.Ts;let a=[];e.targetChanges.forEach((h,p)=>{let y=i.get(p);if(!y)return;a.push(t.Hr.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(o,h.addedDocuments,p)));let m=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?m=m.withResumeToken(kt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(p,m),function(N,O,z){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=j5?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(y,m,h)&&a.push(t.Hr.updateTargetData(o,m))});let u=ri(),l=_e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(z5(o,s,e.documentUpdates).next(h=>{u=h.Vs,l=h.fs})),!r.isEqual(se.min())){let h=t.Hr.getLastRemoteSnapshotVersion(o).next(p=>t.Hr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ts=i,o))}function z5(n,e,t){let r=_e(),i=_e();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ri();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):G(PI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Vs:s,fs:i}})}function q5(n,e){let t=ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wI),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function G5(n,e){let t=ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Hr.getTargetData(r,e).next(o=>o?(i=o,L.resolve(i)):t.Hr.allocateTargetId(r).next(s=>(i=new Wu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}function Vw(n,e,t){return _(this,null,function*(){let r=ie(n),i=r.Ts.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ka(s))throw s;G(PI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ts=r.Ts.remove(e),r.Is.delete(i.target)})}function kP(n,e,t){let r=ie(n),i=se.min(),o=_e();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=ie(u),y=p.Is.get(h);return y!==void 0?L.resolve(p.Ts.get(y)):p.Hr.getTargetData(l,h)}(r,s,Tr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ps.getDocumentsMatchingQuery(s,e,t?i:se.min(),t?o:_e())).next(a=>(W5(r,s5(e),a),{documents:a,gs:o})))}function W5(n,e,t){let r=n.Es.get(e)||se.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Es.set(e,r)}var up=class{constructor(){this.activeTargetIds=h5()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Uw=class{constructor(){this.ho=new up,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new up,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var jw=class{To(e){}shutdown(){}};var FP="ConnectivityMonitor",lp=class{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){G(FP,"Network connectivity changed: AVAILABLE");for(let e of this.Vo)e(0)}Ro(){G(FP,"Network connectivity changed: UNAVAILABLE");for(let e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bf=null;function Bw(){return Bf===null?Bf=function(){return 268435456+Math.round(2147483648*Math.random())}():Bf++,"0x"+Bf.toString(16)}var PE="RestConnection",K5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},$w=class{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${i}`,this.wo=this.databaseId.database===Zf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}So(e,t,r,i,o){let s=Bw(),a=this.bo(e,t.toUriEncodedString());G(PE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,i,o),this.vo(e,a,u,r).then(l=>(G(PE,`Received RPC '${e}' ${s}: `,l),l),l=>{throw ya(PE,`RPC '${e}' ${s} failed with error: `,l,"url: ",a,"request:",r),l})}Co(e,t,r,i,o,s){return this.So(e,t,r,i,o)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Na}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}bo(e,t){let r=K5[e];return`${this.po}/v1/${t}:${r}`}terminate(){}};var Hw=class{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}};var Ot="WebChannelConnection",zw=class extends $w{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,i){let o=Bw();return new Promise((s,a)=>{let u=new DE;u.setWithCredentials(!0),u.listenOnce(TE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Fu.NO_ERROR:let h=u.getResponseJson();G(Ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case Fu.TIMEOUT:G(Ot,`RPC '${e}' ${o} timed out`),a(new Q(V.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:let p=u.getStatus();if(G(Ot,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let m=y?.error;if(m&&m.status&&m.message){let M=function(O){let z=O.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(z)>=0?z:V.UNKNOWN}(m.status);a(new Q(M,m.message))}else a(new Q(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Q(V.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{G(Ot,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);G(Ot,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Wo(e,t,r){let i=Bw(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ME(),a=AE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");G(Ot,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),y=!1,m=!1,M=new Hw({Fo:O=>{m?G(Ot,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(y||(G(Ot,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),G(Ot,`RPC '${e}' stream ${i} sending:`,O),p.send(O))},Mo:()=>p.close()}),N=(O,z,ce)=>{O.listen(z,K=>{try{ce(K)}catch(xe){setTimeout(()=>{throw xe},0)}})};return N(p,la.EventType.OPEN,()=>{m||(G(Ot,`RPC '${e}' stream ${i} transport opened.`),M.Qo())}),N(p,la.EventType.CLOSE,()=>{m||(m=!0,G(Ot,`RPC '${e}' stream ${i} transport closed`),M.Uo())}),N(p,la.EventType.ERROR,O=>{m||(m=!0,ya(Ot,`RPC '${e}' stream ${i} transport errored:`,O),M.Uo(new Q(V.UNAVAILABLE,"The operation could not be completed")))}),N(p,la.EventType.MESSAGE,O=>{var z;if(!m){let ce=O.data[0];Pe(!!ce);let K=ce,xe=K?.error||((z=K[0])===null||z===void 0?void 0:z.error);if(xe){G(Ot,`RPC '${e}' stream ${i} received error:`,xe);let vt=xe.status,Te=function(C){let D=rt[C];if(D!==void 0)return Fx(D)}(vt),T=xe.message;Te===void 0&&(Te=V.INTERNAL,T="Unknown error status: "+vt+" with message "+xe.message),m=!0,M.Uo(new Q(Te,T)),p.close()}else G(Ot,`RPC '${e}' stream ${i} received:`,ce),M.Ko(ce)}}),N(a,SE.STAT_EVENT,O=>{O.stat===Vf.PROXY?G(Ot,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Vf.NOPROXY&&G(Ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{M.$o()},0),M}};function xE(){return typeof document<"u"?document:null}function Ap(n){return new dw(n,!0)}var dp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=i,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();let t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,i,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}};var LP="PersistentStream",hp=class{constructor(e,t,r,i,o,s,a,u){this.Ti=e,this.n_=r,this.r_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new dp(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}stop(){return _(this,null,function*(){this.u_()&&(yield this.close(0))})}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}T_(){return _(this,null,function*(){if(this.c_())return this.close(0)})}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}close(e,t){return _(this,null,function*(){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Lo(t)})}A_(){}auth(){this.state=1;let e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.i_===t&&this.V_(r,i)},r=>{e(()=>{let i=new Q(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(i)})})}V_(e,t){let r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(i=>{r(()=>this.m_(i))}),this.stream.onMessage(i=>{r(()=>++this.__==1?this.g_(i):this.onNext(i))})}l_(){this.state=5,this.a_.Xo(()=>_(this,null,function*(){this.state=0,this.start()}))}m_(e){return G(LP,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(G(LP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},qw=class extends hp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();let t=T5(this.serializer,e),r=function(o){if(!("targetChange"in o))return se.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?Sr(s.readTime):se.min()}(e);return this.listener.p_(t,r)}y_(e){let t={};t.database=gw(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=tw(u)?{documents:M5(o,u)}:{query:R5(o,u).ht},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Lx(o,s.resumeToken);let l=hw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(se.min())>0){a.readTime=op(o,s.snapshotVersion.toTimestamp());let l=hw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=x5(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){let t={};t.database=gw(this.serializer),t.removeTarget=e,this.I_(t)}},Gw=class extends hp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();let t=A5(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.v_(r,t)}C_(){let e={};e.database=gw(this.serializer),this.I_(e)}b_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>S5(this.serializer,r))};this.I_(t)}};var Ww=class{},Kw=class extends Ww{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.F_=!1}M_(){if(this.F_)throw new Q(V.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,fw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(V.UNKNOWN,o.toString())})}Co(e,t,r,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Co(e,fw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(V.UNKNOWN,s.toString())})}terminate(){this.F_=!0,this.connection.terminate()}},Qw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Xr(t),this.N_=!1):G("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}};var Ko="RemoteStore",Yw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Yo(this)&&(G(Ko,"Restarting streams for network reachability change."),yield function(u){return _(this,null,function*(){let l=ie(u);l.W_.add(4),yield el(l),l.j_.set("Unknown"),l.W_.delete(4),yield Mp(l)})}(this))}))}),this.j_=new Qw(r,i)}};function Mp(n){return _(this,null,function*(){if(Yo(n))for(let e of n.G_)yield e(!0)})}function el(n){return _(this,null,function*(){for(let e of n.G_)yield e(!1)})}function Wx(n,e){let t=ie(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),kI(t)?OI(t):Fa(t).c_()&&NI(t,e))}function xI(n,e){let t=ie(n),r=Fa(t);t.K_.delete(e),r.c_()&&Kx(t,e),t.K_.size===0&&(r.c_()?r.P_():Yo(t)&&t.j_.set("Unknown"))}function NI(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fa(n).y_(e)}function Kx(n,e){n.H_.Ne(e),Fa(n).w_(e)}function OI(n){n.H_=new lw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Fa(n).start(),n.j_.B_()}function kI(n){return Yo(n)&&!Fa(n).u_()&&n.K_.size>0}function Yo(n){return ie(n).W_.size===0}function Qx(n){n.H_=void 0}function Q5(n){return _(this,null,function*(){n.j_.set("Online")})}function Y5(n){return _(this,null,function*(){n.K_.forEach((e,t)=>{NI(n,e)})})}function Z5(n,e){return _(this,null,function*(){Qx(n),kI(n)?(n.j_.q_(e),OI(n)):n.j_.set("Unknown")})}function J5(n,e,t){return _(this,null,function*(){if(n.j_.set("Online"),e instanceof rp&&e.state===2&&e.cause)try{yield function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.K_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.K_.delete(a),i.H_.removeTarget(a))})}(n,e)}catch(r){G(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield fp(n,r)}else if(e instanceof ma?n.H_.We(e):e instanceof np?n.H_.Ze(e):n.H_.je(e),!t.isEqual(se.min()))try{let r=yield Gx(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.H_.ot(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.K_.get(l);h&&o.K_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.K_.get(u);if(!h)return;o.K_.set(u,h.withResumeToken(kt.EMPTY_BYTE_STRING,h.snapshotVersion)),Kx(o,u);let p=new Wu(h.target,u,l,h.sequenceNumber);NI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){G(Ko,"Failed to raise snapshot:",r),yield fp(n,r)}})}function fp(n,e,t){return _(this,null,function*(){if(!ka(e))throw e;n.W_.add(1),yield el(n),n.j_.set("Offline"),t||(t=()=>Gx(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){G(Ko,"Retrying IndexedDB access"),yield t(),n.W_.delete(1),yield Mp(n)}))})}function Yx(n,e){return e().catch(t=>fp(n,t,e))}function Rp(n){return _(this,null,function*(){let e=ie(n),t=zi(e),r=e.U_.length>0?e.U_[e.U_.length-1].batchId:wI;for(;X5(e);)try{let i=yield q5(e.localStore,r);if(i===null){e.U_.length===0&&t.P_();break}r=i.batchId,eG(e,i)}catch(i){yield fp(e,i)}Zx(e)&&Jx(e)})}function X5(n){return Yo(n)&&n.U_.length<10}function eG(n,e){n.U_.push(e);let t=zi(n);t.c_()&&t.S_&&t.b_(e.mutations)}function Zx(n){return Yo(n)&&!zi(n).u_()&&n.U_.length>0}function Jx(n){zi(n).start()}function tG(n){return _(this,null,function*(){zi(n).C_()})}function nG(n){return _(this,null,function*(){let e=zi(n);for(let t of n.U_)e.b_(t.mutations)})}function rG(n,e,t){return _(this,null,function*(){let r=n.U_.shift(),i=sw.from(r,e,t);yield Yx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Rp(n)})}function iG(n,e){return _(this,null,function*(){e&&zi(n).S_&&(yield function(r,i){return _(this,null,function*(){if(function(s){return _5(s)&&s!==V.ABORTED}(i.code)){let o=r.U_.shift();zi(r).h_(),yield Yx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Rp(r)}})}(n,e)),Zx(n)&&Jx(n)})}function VP(n,e){return _(this,null,function*(){let t=ie(n);t.asyncQueue.verifyOperationInProgress(),G(Ko,"RemoteStore received new credentials");let r=Yo(t);t.W_.add(3),yield el(t),r&&t.j_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),yield Mp(t)})}function oG(n,e){return _(this,null,function*(){let t=ie(n);e?(t.W_.delete(2),yield Mp(t)):e||(t.W_.add(2),yield el(t),t.j_.set("Unknown"))})}function Fa(n){return n.J_||(n.J_=function(t,r,i){let o=ie(t);return o.M_(),new qw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:Q5.bind(null,n),No:Y5.bind(null,n),Lo:Z5.bind(null,n),p_:J5.bind(null,n)}),n.G_.push(e=>_(this,null,function*(){e?(n.J_.h_(),kI(n)?OI(n):n.j_.set("Unknown")):(yield n.J_.stop(),Qx(n))}))),n.J_}function zi(n){return n.Y_||(n.Y_=function(t,r,i){let o=ie(t);return o.M_(),new Gw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:tG.bind(null,n),Lo:iG.bind(null,n),D_:nG.bind(null,n),v_:rG.bind(null,n)}),n.G_.push(e=>_(this,null,function*(){e?(n.Y_.h_(),yield Rp(n)):(yield n.Y_.stop(),n.U_.length>0&&(G(Ko,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))}))),n.Y_}var Zw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function FI(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),ka(n))return new Q(V.UNAVAILABLE,`${e}: ${n}`);throw n}var pp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||J.comparator(t.key,r.key):(t,r)=>J.comparator(t.key,r.key),this.keyedMap=Lu(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var gp=class{constructor(){this.Z_=new Ze(J.comparator)}track(e){let t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):ee():this.Z_=this.Z_.insert(t,e)}X_(){let e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ma=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,pp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Jw=class{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}},Xw=class{constructor(){this.queries=UP(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){let i=ie(t),o=i.queries;i.queries=UP(),o.forEach((s,a)=>{for(let u of a.ta)u.onError(r)})})(this,new Q(V.ABORTED,"Firestore shutting down"))}};function UP(){return new ni(n=>Cx(n),Tp)}function sG(n,e){return _(this,null,function*(){let t=ie(n),r=3,i=e.query,o=t.queries.get(i);o?!o.na()&&e.ra()&&(r=2):(o=new Jw,r=e.ra()?0:1);try{switch(r){case 0:o.ea=yield t.onListen(i,!0);break;case 1:o.ea=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=FI(s,`Initialization of query '${ha(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.ta.push(e),e.sa(t.onlineState),o.ea&&e.oa(o.ea)&&LI(t)})}function aG(n,e){return _(this,null,function*(){let t=ie(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.ta.indexOf(e);s>=0&&(o.ta.splice(s,1),o.ta.length===0?i=e.ra()?0:1:!o.na()&&e.ra()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function cG(n,e){let t=ie(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.ta)a.oa(i)&&(r=!0);s.ea=i}}r&&LI(t)}function uG(n,e,t){let r=ie(n),i=r.queries.get(e);if(i)for(let o of i.ta)o.onError(t);r.queries.delete(e)}function LI(n){n.ia.forEach(e=>{e.next()})}var eI,jP;(jP=eI||(eI={}))._a="default",jP.Cache="cache";var tI=class{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ma(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;let r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;let t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==eI.Cache}};var mp=class{constructor(e){this.key=e}},yp=class{constructor(e){this.key=e}},nI=class{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=_e(),this.mutatedKeys=_e(),this.ya=Dx(e),this.wa=new pp(this.ya)}get Sa(){return this.fa}ba(e,t){let r=t?t.Da:new gp,i=t?t.wa:this.wa,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let y=i.get(h),m=Sp(this.query,p)?p:null,M=!!y&&this.mutatedKeys.has(y.key),N=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),O=!1;y&&m?y.data.isEqual(m.data)?M!==N&&(r.track({type:3,doc:m}),O=!0):this.va(y,m)||(r.track({type:2,doc:m}),O=!0,(u&&this.ya(m,u)>0||l&&this.ya(m,l)<0)&&(a=!0)):!y&&m?(r.track({type:0,doc:m}),O=!0):y&&!m&&(r.track({type:1,doc:y}),O=!0,(u||l)&&(a=!0)),O&&(m?(s=s.add(m),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{wa:s,Da:r,ls:a,mutatedKeys:o}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;let s=e.Da.X_();s.sort((h,p)=>function(m,M){let N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return N(m)-N(M)}(h.type,p.type)||this.ya(h.doc,p.doc)),this.Ca(r),i=i!=null&&i;let a=t&&!i?this.Fa():[],u=this.pa.size===0&&this.current&&!i?1:0,l=u!==this.ga;return this.ga=u,s.length!==0||l?{snapshot:new Ma(this.query,e.wa,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new gp,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];let e=this.pa;this.pa=_e(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});let t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new yp(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new mp(r))}),t}Oa(e){this.fa=e.gs,this.pa=_e();let t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Ma.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}},VI="SyncEngine",rI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},iI=class{constructor(e){this.key=e,this.Ba=!1}},oI=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new ni(a=>Cx(a),Tp),this.qa=new Map,this.Qa=new Set,this.$a=new Ze(J.comparator),this.Ua=new Map,this.Ka=new Qu,this.Wa={},this.Ga=new Map,this.za=Ku.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}};function lG(n,e,t=!0){return _(this,null,function*(){let r=iN(n),i,o=r.ka.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Na()):i=yield Xx(r,e,t,!0),i})}function dG(n,e){return _(this,null,function*(){let t=iN(n);yield Xx(t,e,!0,!1)})}function Xx(n,e,t,r){return _(this,null,function*(){let i=yield G5(n.localStore,Tr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield hG(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Wx(n.remoteStore,i),a})}function hG(n,e,t,r,i){return _(this,null,function*(){n.Ha=(p,y,m)=>function(N,O,z,ce){return _(this,null,function*(){let K=O.view.ba(z);K.ls&&(K=yield kP(N.localStore,O.query,!1).then(({documents:T})=>O.view.ba(T,K)));let xe=ce&&ce.targetChanges.get(O.targetId),vt=ce&&ce.targetMismatches.get(O.targetId)!=null,Te=O.view.applyChanges(K,N.isPrimaryClient,xe,vt);return $P(N,O.targetId,Te.Ma),Te.snapshot})}(n,p,y,m);let o=yield kP(n.localStore,e,!0),s=new nI(e,o.gs),a=s.ba(o.documents),u=Gu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);$P(n,t,l.Ma);let h=new rI(e,t,s);return n.ka.set(e,h),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),l.snapshot})}function fG(n,e,t){return _(this,null,function*(){let r=ie(n),i=r.ka.get(e),o=r.qa.get(i.targetId);if(o.length>1)return r.qa.set(i.targetId,o.filter(s=>!Tp(s,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Vw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&xI(r.remoteStore,i.targetId),sI(r,i.targetId)}).catch(Oa))):(sI(r,i.targetId),yield Vw(r.localStore,i.targetId,!0))})}function pG(n,e){return _(this,null,function*(){let t=ie(n),r=t.ka.get(e),i=t.qa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xI(t.remoteStore,r.targetId))})}function gG(n,e,t){return _(this,null,function*(){let r=IG(n);try{let i=yield function(s,a){let u=ie(s),l=Ct.now(),h=a.reduce((m,M)=>m.add(M.key),_e()),p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let M=ri(),N=_e();return u.ds.getEntries(m,h).next(O=>{M=O,M.forEach((z,ce)=>{ce.isValidDocument()||(N=N.add(z))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,M)).next(O=>{p=O;let z=[];for(let ce of a){let K=v5(ce,p.get(ce.key).overlayedDocument);K!=null&&z.push(new ii(ce.key,K,vx(K.value.mapValue),Bi.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,z,a)}).next(O=>{y=O;let z=O.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(m,O.batchId,z)})}).then(()=>({batchId:y.batchId,changes:Sx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Wa[s.currentUser.toKey()];l||(l=new Ze(ge)),l=l.insert(a,u),s.Wa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield tl(r,i.changes),yield Rp(r.remoteStore)}catch(i){let o=FI(i,"Failed to persist write");t.reject(o)}})}function eN(n,e){return _(this,null,function*(){let t=ie(n);try{let r=yield H5(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Ua.get(o);s&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ba=!0:i.modifiedDocuments.size>0?Pe(s.Ba):i.removedDocuments.size>0&&(Pe(s.Ba),s.Ba=!1))}),yield tl(t,r,e)}catch(r){yield Oa(r)}})}function BP(n,e,t){let r=ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ka.forEach((o,s)=>{let a=s.view.sa(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=ie(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let y of p.ta)y.sa(a)&&(l=!0)}),l&&LI(u)}(r.eventManager,e),i.length&&r.La.p_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function mG(n,e,t){return _(this,null,function*(){let r=ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Ua.get(e),o=i&&i.key;if(o){let s=new Ze(J.comparator);s=s.insert(o,Wn.newNoDocument(o,se.min()));let a=_e().add(o),u=new tp(se.min(),new Map,new Ze(ge),s,a);yield eN(r,u),r.$a=r.$a.remove(o),r.Ua.delete(e),UI(r)}else yield Vw(r.localStore,e,!1).then(()=>sI(r,e,t)).catch(Oa)})}function yG(n,e){return _(this,null,function*(){let t=ie(n),r=e.batch.batchId;try{let i=yield $5(t.localStore,e);nN(t,r,null),tN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield tl(t,i)}catch(i){yield Oa(i)}})}function vG(n,e,t){return _(this,null,function*(){let r=ie(n);try{let i=yield function(s,a){let u=ie(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Pe(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);nN(r,e,t),tN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield tl(r,i)}catch(i){yield Oa(i)}})}function tN(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function nN(n,e,t){let r=ie(n),i=r.Wa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Wa[r.currentUser.toKey()]=i}}function sI(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||rN(n,r)})}function rN(n,e){n.Qa.delete(e.path.canonicalString());let t=n.$a.get(e);t!==null&&(xI(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),UI(n))}function $P(n,e,t){for(let r of t)r instanceof mp?(n.Ka.addReference(r.key,e),_G(n,r)):r instanceof yp?(G(VI,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||rN(n,r.key)):ee()}function _G(n,e){let t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(G(VI,"New document in limbo: "+t),n.Qa.add(r),UI(n))}function UI(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){let e=n.Qa.values().next().value;n.Qa.delete(e);let t=new J(Ye.fromString(e)),r=n.za.next();n.Ua.set(r,new iI(t)),n.$a=n.$a.insert(t,r),Wx(n.remoteStore,new Wu(Tr(AI(t.path)),r,"TargetPurposeLimboResolution",EI.ae))}}function tl(n,e,t){return _(this,null,function*(){let r=ie(n),i=[],o=[],s=[];r.ka.isEmpty()||(r.ka.forEach((a,u)=>{s.push(r.Ha(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=Ow.Yi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.La.p_(i),yield function(u,l){return _(this,null,function*(){let h=ie(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(l,y=>L.forEach(y.Hi,m=>h.persistence.referenceDelegate.addReference(p,y.targetId,m)).next(()=>L.forEach(y.Ji,m=>h.persistence.referenceDelegate.removeReference(p,y.targetId,m)))))}catch(p){if(!ka(p))throw p;G(PI,"Failed to update sequence numbers: "+p)}for(let p of l){let y=p.targetId;if(!p.fromCache){let m=h.Ts.get(y),M=m.snapshotVersion,N=m.withLastLimboFreeSnapshotVersion(M);h.Ts=h.Ts.insert(y,N)}}})}(r.localStore,o))})}function EG(n,e){return _(this,null,function*(){let t=ie(n);if(!t.currentUser.isEqual(e)){G(VI,"User change. New user:",e.toKey());let r=yield qx(t.localStore,e);t.currentUser=e,function(o,s){o.Ga.forEach(a=>{a.forEach(u=>{u.reject(new Q(V.CANCELLED,s))})}),o.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield tl(t,r.Rs)}})}function wG(n,e){let t=ie(n),r=t.Ua.get(e);if(r&&r.Ba)return _e().add(r.key);{let i=_e(),o=t.qa.get(e);if(!o)return i;for(let s of o){let a=t.ka.get(s);i=i.unionWith(a.view.Sa)}return i}}function iN(n){let e=ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mG.bind(null,e),e.La.p_=cG.bind(null,e.eventManager),e.La.Ja=uG.bind(null,e.eventManager),e}function IG(n){let e=ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vG.bind(null,e),e}var oN=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=Ap(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),yield this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)})}tu(t,r){return null}nu(t,r){return null}eu(t){return B5(this.persistence,new Fw,t.initialUser,this.serializer)}Xa(t){return new ap(Nw.ri,this.serializer)}Za(t){return new Uw}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),aI=class extends oN{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Pe(this.persistence.referenceDelegate instanceof cp);let r=this.persistence.referenceDelegate.garbageCollector;return new Ew(r,e.asyncQueue,t)}Xa(e){let t=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new ap(r=>cp.ri(r,t),this.serializer)}};var bG=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>BP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=EG.bind(null,this.syncEngine),yield oG(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Xw}()}createDatastore(t){let r=Ap(t.databaseInfo.databaseId),i=function(s){return new zw(s)}(t.databaseInfo);return function(s,a,u,l){return new Kw(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new Yw(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>BP(this.syncEngine,r,0),function(){return lp.D()?new lp:new jw}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let y=new oI(o,s,a,u,l,h);return p&&(y.ja=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(o){return _(this,null,function*(){let s=ie(o);G(Ko,"RemoteStore shutting down."),s.W_.add(5),yield el(s),s.z_.shutdown(),s.j_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var cI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Xr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var qi="FirestoreClient",uI=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=mt.UNAUTHENTICATED,this.clientId=Wf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){G(qi,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(G(qi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=FI(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function NE(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),G(qi,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield qx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function HP(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield CG(n);G(qi,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>VP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>VP(e.remoteStore,i)),n._onlineComponents=e})}function CG(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G(qi,"Using user provided OfflineComponentProvider");try{yield NE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ya("Error using user provided cache. Falling back to memory cache: "+t),yield NE(n,new oN)}}else G(qi,"Using default OfflineComponentProvider"),yield NE(n,new aI(void 0));return n._offlineComponents})}function sN(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(G(qi,"Using user provided OnlineComponentProvider"),yield HP(n,n._uninitializedComponentsProvider._online)):(G(qi,"Using default OnlineComponentProvider"),yield HP(n,new bG))),n._onlineComponents})}function DG(n){return sN(n).then(e=>e.syncEngine)}function TG(n){return _(this,null,function*(){let e=yield sN(n),t=e.eventManager;return t.onListen=lG.bind(null,e.syncEngine),t.onUnlisten=fG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pG.bind(null,e.syncEngine),t})}function SG(n,e,t={}){let r=new Cr;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,u,l){let h=new cI({next:y=>{h.su(),s.enqueueAndForget(()=>aG(o,p));let m=y.docs.has(a);!m&&y.fromCache?l.reject(new Q(V.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&y.fromCache&&u&&u.source==="server"?l.reject(new Q(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(y)},error:y=>l.reject(y)}),p=new tI(AI(a.path),h,{includeMetadataChanges:!0,Ta:!0});return sG(o,p)}(yield TG(n),n.asyncQueue,e,t,r)})),r.promise}function aN(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var zP=new Map;function cN(n,e,t){if(!t)throw new Q(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AG(n,e,t,r){if(e===!0&&r===!0)throw new Q(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qP(n){if(!J.isDocumentKey(n))throw new Q(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function GP(n){if(J.isDocumentKey(n))throw new Q(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jI(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ee()}function Ra(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Q(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=jI(n);throw new Q(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var uN="firestore.googleapis.com",WP=!0,vp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uN,this.ssl=WP}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:WP;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<V5)throw new Q(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Pa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new OE;switch(r.type){case"firstParty":return new VE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=zP.get(t);r&&(G("ComponentProvider","Removing Datastore"),zP.delete(t),r.terminate())}(this),Promise.resolve()}};function lN(n,e,t,r={}){var i;let o=(n=Ra(n,Pa))._getSettings(),s=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;o.host!==uN&&o.host!==a&&ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},o),{host:a,ssl:!1,emulatorOptions:r});if(!gr(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=mt.MOCK_USER;else{l=OA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Q(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mt(p)}n._authCredentials=new kE(new qf(l,h))}}var lI=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},hn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},$i=class n extends lI{constructor(e,t,r){super(e,t,AI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new J(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function dN(n,e,...t){if(n=ze(n),cN("collection","path",e),n instanceof Pa){let r=Ye.fromString(e,...t);return GP(r),new $i(n,null,r)}{if(!(n instanceof hn||n instanceof $i))throw new Q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return GP(r),new $i(n.firestore,null,r)}}function BI(n,e,...t){if(n=ze(n),arguments.length===1&&(e=Wf.newId()),cN("doc","path",e),n instanceof Pa){let r=Ye.fromString(e,...t);return qP(r),new hn(n,null,new J(r))}{if(!(n instanceof hn||n instanceof $i))throw new Q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ye.fromString(e,...t));return qP(r),new hn(n.firestore,n instanceof $i?n.converter:null,new J(r))}}var KP="AsyncQueue",_p=class{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new dp(this,"async_queue_retry"),this.Su=()=>{let r=xE();r&&G(KP,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;let t=xE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;let t=xE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});let t=new Cr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}Cu(){return _(this,null,function*(){if(this.Vu.length!==0){try{yield this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ka(e))throw e;G(KP,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}})}vu(e){let t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Xr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);let i=Zw.createAndSchedule(this,e,t,r,o=>this.Fu(o));return this.fu.push(i),i}Du(){this.gu&&ee()}verifyOperationInProgress(){}Mu(){return _(this,null,function*(){let e;do e=this.bu,yield e;while(e!==this.bu)})}xu(e){for(let t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){let t=this.fu.indexOf(e);this.fu.splice(t,1)}};var xa=class extends Pa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new _p,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new _p(e),this._firestoreClient=void 0,yield e}})}};function hN(n,e){let t=typeof n=="object"?n:Gr(),r=typeof n=="string"?n:e||Zf,i=Ai(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Bh("firestore");o&&lN(i,...o)}return i}function fN(n){if(n._terminated)throw new Q(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MG(n),n._firestoreClient}function MG(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new HE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,aN(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new uI(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var Yu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(kt.fromBase64String(e))}catch(t){throw new Q(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Zu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Q(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ep=class{constructor(e){this._methodName=e}};var Ju=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Q(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Q(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var Xu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var RG=/^__.*__$/,dI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ii(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wo(e,this.data,t,this.fieldTransforms)}};function pN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}var hI=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.$u(e),i}Uu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ku({path:r,Qu:!1});return i.Bu(),i}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return wp(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(pN(this.Lu)&&RG.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}},fI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ap(e)}ju(e,t,r,i=!1){return new hI({Lu:e,methodName:t,zu:r,path:dn.emptyPath(),Qu:!1,Gu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function gN(n){let e=n._freezeSettings(),t=Ap(n._databaseId);return new fI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mN(n,e,t,r,i,o={}){let s=n.ju(o.merge||o.mergeFields?2:0,e,t,i);EN("Data must be an object, but it was:",s,r);let a=vN(r,s),u,l;if(o.merge)u=new br(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let y=PG(e,p,t);if(!s.contains(y))throw new Q(V.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);NG(h,y)||h.push(y)}u=new br(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new dI(new Gn(a),u,l)}function yN(n,e){if(_N(n=ze(n)))return EN("Unsupported field value:",e,n),vN(n,e);if(n instanceof Ep)return function(r,i){if(!pN(i.Lu))throw i.Wu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Wu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=yN(a,i.Ku(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ct.fromDate(r);return{timestampValue:op(i.serializer,o)}}if(r instanceof Ct){let o=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:op(i.serializer,o)}}if(r instanceof Ju)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yu)return{bytesValue:Lx(i.serializer,r._byteString)};if(r instanceof hn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Wu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xu)return function(s,a){return{mapValue:{fields:{[bI]:{stringValue:CI},[_a]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Wu("VectorValues must only contain numeric values.");return MI(a.serializer,l)})}}}}}}(r,i);throw i.Wu(`Unsupported field value: ${jI(r)}`)}(n,e)}function vN(n,e){let t={};return lx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qo(n,(r,i)=>{let o=yN(i,e.qu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function _N(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ct||n instanceof Ju||n instanceof Yu||n instanceof hn||n instanceof Ep||n instanceof Xu)}function EN(n,e,t){if(!_N(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=jI(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function PG(n,e,t){if((e=ze(e))instanceof Zu)return e._internalPath;if(typeof e=="string")return wN(n,e);throw wp("Field path arguments must be of type string or ",n,!1,void 0,t)}var xG=new RegExp("[~\\*/\\[\\]]");function wN(n,e,t){if(e.search(xG)>=0)throw wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zu(...e.split("."))._internalPath}catch{throw wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new Q(V.INVALID_ARGUMENT,a+n+u)}function NG(n,e){return n.some(t=>t.isEqual(e))}var Ip=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new pI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(IN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},pI=class extends Ip{data(){return super.data()}};function IN(n,e){return typeof e=="string"?wN(n,e):e instanceof Zu?e._internalPath:e._delegate._internalPath}var gI=class{convertValue(e,t="none"){switch(Hi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Qo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[_a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ge(s.doubleValue));return new Xu(o)}convertGeoPoint(e){return new Ju(Ge(e.latitude),Ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Dp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){let t=ei(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ye.fromString(e);Pe(Hx(r));let i=new Jf(r.get(1),r.get(3)),o=new J(r.popFirst(5));return i.isEqual(t)||Xr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function bN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var mI=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bp=class extends Ip{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new yI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(IN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},yI=class extends bp{data(e={}){return super.data(e)}};function CN(n){n=Ra(n,hn);let e=Ra(n.firestore,xa);return SG(fN(e),n._key).then(t=>OG(e,n,t))}var vI=class extends gI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,t)}};function DN(n,e,t){n=Ra(n,hn);let r=Ra(n.firestore,xa),i=bN(n.converter,e,t);return SN(r,[mN(gN(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Bi.none())])}function TN(n,e){let t=Ra(n.firestore,xa),r=BI(n),i=bN(n.converter,e);return SN(t,[mN(gN(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Bi.exists(!1))]).then(()=>r)}function SN(n,e){return function(r,i){let o=new Cr;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return gG(yield DG(r),i,o)})),o.promise}(fN(n),e)}function OG(n,e,t){let r=t.docs.get(e._key),i=new vI(n);return new bp(n,i,e._key,r,new mI(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Na=i})(Mi),an(new It("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new xa(new FE(r.getProvider("auth-internal")),new UE(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Q(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jf(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ue(aP,cP,e),Ue(aP,cP,"esm2017")})();var Zo=class{constructor(e){return e}},AN="firestore",$I=class{constructor(){return Ri(AN)}};var HI=new $("angularfire2.firestore-instances");function kG(n,e){let t=No(AN,n,e);return t&&new Zo(t)}function FG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zo(r)}}var LG={provide:$I,deps:[[new dt,HI]]},VG={provide:Zo,useFactory:kG,deps:[[new dt,HI],$n]};function MN(n,...e){return Ue("angularfire",vr.full,"fst"),rn([VG,LG,{provide:HI,useFactory:FG(n),multi:!0,deps:[be,We,_r,Wr,[new dt,Vo],[new dt,xi],...e]}])}var RN=qe(TN,!0,2);var PN=qe(dN,!0,2);var zI=qe(BI,!0,2);var xN=qe(CN,!0);var Pp=qe(hN,!0);var NN=qe(DN,!0,2);var xp=class n{constructor(e,t){this.firestore=e;this.auth=t}saveReminderSettings(e){return _(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("User not logged in");let r=zI(this.firestore,`reminders/${t.uid}`);yield NN(r,e,{merge:!0})})}getReminderSettings(e){return _(this,null,function*(){let t=zI(this.firestore,`reminders/${e}`),r=yield xN(t);return r.exists()?r.data():null})}static \u0275fac=function(t){return new(t||n)(W(Zo),W(qn))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function BG(n,e){if(n&1&&(E(0,"div",23),w(1),v()),n&2){let t=X();x(),Se(" ",t.successMessage," ")}}function $G(n,e){if(n&1&&(E(0,"div",24),w(1),v()),n&2){let t=X();x(),Se(" ",t.errorMessage," ")}}function HG(n,e){n&1&&(E(0,"div",4)(1,"label",25),w(2,"Reminder Time"),v(),Oe(3,"input",26),v())}var Np=class n{constructor(e,t,r){this.fb=e;this.authService=t;this.reminderService=r;this.profileForm=this.fb.group({username:["",De.required],email:["",[De.required,De.email]],notifications:["enabled"],dailyRemindersEnabled:[!0],reminderTime:["08:00"],contactMethod:["email"]})}profileForm;currentUser=null;successMessage="";errorMessage="";ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.currentUser=e,e&&(this.profileForm.patchValue({username:e.displayName||"",email:e.email||""}),this.reminderService.getReminderSettings(e.uid).then(t=>{t&&this.profileForm.patchValue({dailyRemindersEnabled:t.dailyRemindersEnabled,reminderTime:t.reminderTime,contactMethod:t.contactMethod})}).catch(t=>{console.warn("No reminder settings found or error:",t)}))})}onSubmit(){if(this.profileForm.valid&&this.currentUser){let{username:e,email:t,dailyRemindersEnabled:r,reminderTime:i,contactMethod:o}=this.profileForm.value;this.authService.updateUserProfile(e,t).then(()=>this.reminderService.saveReminderSettings({dailyRemindersEnabled:r,reminderTime:i,contactMethod:o})).then(()=>{this.successMessage="\u2705 Profile and reminder settings updated!",this.errorMessage=""}).catch(s=>{console.error("Error:",s),this.errorMessage=s.message||"Failed to save changes.",this.successMessage=""})}}toggleDarkMode(){document.body.classList.toggle("dark")}static \u0275fac=function(t){return new(t||n)(B(Mn),B(Tn),B(xp))};static \u0275cmp=Me({type:n,selectors:[["app-user-profile"]],decls:41,vars:5,consts:[[1,"card","user-profile-container"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"profile-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","username"],["for","email"],["type","email","id","email","formControlName","email"],["for","notifications"],["id","notifications","formControlName","notifications"],["value","enabled"],["value","disabled"],["type","checkbox","formControlName","dailyRemindersEnabled"],["class","form-group",4,"ngIf"],["for","contactMethod"],["id","contactMethod","formControlName","contactMethod"],["value","email"],["value","sms"],[1,"form-group","toggle-group"],["for","themeToggle"],["type","checkbox","id","themeToggle",3,"change"],["type","submit",3,"disabled"],[1,"success-message"],[1,"error-message"],["for","reminderTime"],["type","time","id","reminderTime","formControlName","reminderTime"]],template:function(t,r){if(t&1&&(E(0,"div",0)(1,"h2"),w(2,"User Profile"),v(),re(3,BG,2,1,"div",1)(4,$G,2,1,"div",2),E(5,"form",3),ue("ngSubmit",function(){return r.onSubmit()}),E(6,"div",4)(7,"label",5),w(8,"Username"),v(),Oe(9,"input",6),v(),E(10,"div",4)(11,"label",7),w(12,"Email"),v(),Oe(13,"input",8),v(),E(14,"div",4)(15,"label",9),w(16,"Notifications"),v(),E(17,"select",10)(18,"option",11),w(19,"Enabled"),v(),E(20,"option",12),w(21,"Disabled"),v()()(),E(22,"div",4)(23,"label"),Oe(24,"input",13),w(25," Enable Daily Reminders "),v()(),re(26,HG,4,0,"div",14),E(27,"div",4)(28,"label",15),w(29,"Preferred Contact Method"),v(),E(30,"select",16)(31,"option",17),w(32,"Email"),v(),E(33,"option",18),w(34,"SMS (future)"),v()()(),E(35,"div",19)(36,"label",20),w(37,"Dark Mode"),v(),E(38,"input",21),ue("change",function(){return r.toggleDarkMode()}),v()(),E(39,"button",22),w(40,"Save Changes"),v()()()),t&2){let i;x(3),F("ngIf",r.successMessage),x(),F("ngIf",r.errorMessage),x(),F("formGroup",r.profileForm),x(21),F("ngIf",(i=r.profileForm.get("dailyRemindersEnabled"))==null?null:i.value),x(13),F("disabled",r.profileForm.invalid)}},dependencies:[Re,He,Jt,An,Mf,Rf,gt,gE,ua,Nt,Sn,un,ln],styles:['@charset "UTF-8";.user-profile-container[_ngcontent-%COMP%]{max-width:600px;margin:3rem auto;padding:2rem;border-radius:16px;background:#ffffff0d;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:inset 0 0 .5px #ffffff0d,0 8px 20px #00000014;animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards;color:var(--text-color)}h2[_ngcontent-%COMP%]{text-align:center;color:var(--color-primary);margin-bottom:1.5rem}.success-message[_ngcontent-%COMP%]{background-color:#d0f0d8;color:#2e7d32;padding:.75rem 1rem;border-radius:8px;border-left:4px solid #43a047;margin-bottom:1rem;font-weight:500}.error-message[_ngcontent-%COMP%]{background-color:#fdecea;color:#c62828;padding:.75rem 1rem;border-radius:8px;border-left:4px solid #e53935;margin-bottom:1rem;font-weight:500}.profile-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.2rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.4rem;font-weight:500;color:var(--text-color)}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem 1rem;border-radius:8px;border:1px solid #ccc;font-size:1rem;background-color:#fff;color:#000}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px #6495ed4d}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]{flex-direction:row;align-items:center;justify-content:space-between}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0}.profile-form[_ngcontent-%COMP%]   .form-group.toggle-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-primary);color:#fff;padding:.75rem;font-size:1rem;border:none;border-radius:999px;cursor:pointer;transition:background-color .3s ease}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 600px){.user-profile-container[_ngcontent-%COMP%]{padding:1.5rem;margin:2rem 1rem}.profile-form[_ngcontent-%COMP%]{gap:1rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem}.profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .profile-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.95rem;padding:.5rem .8rem}.profile-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.95rem;padding:.6rem 1rem}}']})};function zG(n,e){if(n&1&&(E(0,"div",11),w(1),v()),n&2){let t=X();x(),Se(" ",t.toastMessage," ")}}function qG(n,e){if(n&1){let t=Ln();E(0,"div",12)(1,"div",13)(2,"h3"),w(3,"Confirm Deletion Request"),v(),E(4,"p"),w(5,"Are you sure you want to submit this request?"),v(),E(6,"div",14)(7,"button",15),ue("click",function(){_n(t);let i=X();return En(i.confirmRequest())}),w(8,"Yes, Confirm"),v(),E(9,"button",15),ue("click",function(){_n(t);let i=X();return En(i.cancelRequest())}),w(10,"Cancel"),v()()()()}}var Op=class n{constructor(e){this.fb=e;this.requestForm=this.fb.group({email:["",[De.required,De.email]],reason:[""]});let t=this.auth.currentUser;t?.email&&this.requestForm.patchValue({email:t.email})}requestForm;toastMessage="";showConfirmModal=!1;db=Pp();auth=gf();onDeleteRequest(){this.requestForm.invalid||(this.showConfirmModal=!0)}confirmRequest(){return _(this,null,function*(){let{email:e,reason:t}=this.requestForm.value;try{yield RN(PN(this.db,"deletionRequests"),{email:e,reason:t,timestamp:new Date().toISOString()}),this.toastMessage="\u2705 Your deletion request has been received.",this.requestForm.reset()}catch(r){console.error("\u274C Firestore error:",r),this.toastMessage="\u274C Failed to submit request. Try again later."}this.showConfirmModal=!1,setTimeout(()=>this.toastMessage="",5e3)})}cancelRequest(){this.showConfirmModal=!1}static \u0275fac=function(t){return new(t||n)(B(Mn))};static \u0275cmp=Me({type:n,selectors:[["app-privacy-policy"]],decls:106,vars:4,consts:[[1,"privacy-container"],["class","toast success-toast",4,"ngIf"],["href","https://policies.google.com/technologies/ads","target","_blank","rel","noopener"],["href","mailto:privacy@doseninja.com"],[1,"deletion-request-section"],[1,"deletion-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","reason"],["id","reason","formControlName","reason","rows","3"],["type","submit",3,"disabled"],["class","modal-overlay",4,"ngIf"],[1,"toast","success-toast"],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-buttons"],[3,"click"]],template:function(t,r){t&1&&(E(0,"div",0),re(1,zG,2,1,"div",1),E(2,"h1"),w(3,"Privacy Policy"),v(),E(4,"p")(5,"strong"),w(6,"Last Updated:"),v(),w(7," April 15, 2025"),v(),E(8,"h2"),w(9,"1. Information We Collect"),v(),E(10,"ul")(11,"li"),w(12,"Name, email address, and optional birth date"),v(),E(13,"li"),w(14,"Medication data, reminder preferences, and usage logs"),v(),E(15,"li"),w(16,"Device info such as IP address, browser type, and OS"),v()(),E(17,"h2"),w(18,"2. How We Use Your Data"),v(),E(19,"ul")(20,"li"),w(21,"To personalize your reminders and medication tracking"),v(),E(22,"li"),w(23,"To analyze feature usage and improve app functionality"),v(),E(24,"li"),w(25,"To display non-personalized ads in the free version"),v()(),E(26,"h2"),w(27,"3. Email Communications"),v(),E(28,"p"),w(29," We may send medication reminders and system updates. You can manage communication preferences in your profile settings. "),v(),E(30,"h2"),w(31,"4. Ads and Monetization"),v(),E(32,"p"),w(33," Dose Ninja displays "),E(34,"strong"),w(35,"non-personalized ads"),v(),w(36," through networks such as Google AdSense. These ads do not use health data for targeting. Upgrade to a paid plan to remove ads. "),Oe(37,"br"),w(38," \u{1F517} "),E(39,"a",2),w(40,"Learn more about Google's ad practices"),v()(),E(41,"h2"),w(42,"5. Third-Party Services"),v(),E(43,"p"),w(44," We use the following trusted services: "),v(),E(45,"ul")(46,"li")(47,"strong"),w(48,"Firebase"),v(),w(49," \u2013 authentication, cloud storage, and analytics"),v(),E(50,"li")(51,"strong"),w(52,"Stripe"),v(),w(53," \u2013 payment processing"),v(),E(54,"li")(55,"strong"),w(56,"Google AdSense"),v(),w(57," \u2013 ad delivery"),v()(),E(58,"h2"),w(59,"6. HIPAA Alignment"),v(),E(60,"p"),w(61," Dose Ninja is not a HIPAA Covered Entity, but we align with HIPAA best practices: "),v(),E(62,"ul")(63,"li"),w(64,"End-to-end encryption of sensitive data"),v(),E(65,"li"),w(66,"Strict access controls and secure authentication"),v(),E(67,"li"),w(68,"No PHI is transmitted to third-party services"),v()(),E(69,"h2"),w(70,"7. Your Data Rights"),v(),E(71,"ul")(72,"li"),w(73,"Access, export, or delete your data any time"),v(),E(74,"li"),w(75,"Request assistance at "),E(76,"strong")(77,"a",3),w(78,"privacy@doseninja.com"),v()()()(),E(79,"h2"),w(80,"8. Data Retention"),v(),E(81,"p"),w(82,"We delete your data within 30 days of confirmed deletion request or account closure."),v(),E(83,"h2"),w(84,"9. Children\u2019s Privacy"),v(),E(85,"p"),w(86," Dose Ninja is intended for users aged 18 and older. We do not knowingly collect information from children under 13. "),v(),E(87,"h2"),w(88,"10. Contact Us"),v(),E(89,"p"),w(90," \u{1F4E9} "),E(91,"strong"),w(92,"Email:"),v(),E(93,"a",3),w(94,"privacy@doseninja.com"),v()()(),E(95,"div",4)(96,"h3"),w(97,"\u{1F5D1}\uFE0F Request Data Deletion"),v(),E(98,"form",5),ue("ngSubmit",function(){return r.onDeleteRequest()}),E(99,"div",6)(100,"label",7),w(101,"Reason (optional)"),v(),Oe(102,"textarea",8),v(),E(103,"button",9),w(104,"Submit Request"),v()()(),re(105,qG,11,0,"div",10)),t&2&&(x(),F("ngIf",r.toastMessage),x(97),F("formGroup",r.requestForm),x(5),F("disabled",r.requestForm.invalid),x(2),F("ngIf",r.showConfirmModal))},dependencies:[Re,He,Jt,An,gt,Nt,Sn,un,ln,Io],styles:['@charset "UTF-8";.privacy-container[_ngcontent-%COMP%]{max-width:800px;margin:3rem auto;padding:2rem;border-radius:16px;background:#ffffff0d;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.15);box-shadow:inset 0 0 .5px #ffffff0d,0 8px 20px #00000014;animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards;color:var(--text-color)}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:var(--color-primary);margin-bottom:1rem}p[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{color:var(--text-color);font-size:1rem;line-height:1.6}ul[_ngcontent-%COMP%]{margin-left:1.5rem;margin-bottom:1.5rem;list-style-type:disc}a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}hr[_ngcontent-%COMP%]{border:none;border-top:1px solid rgba(255,255,255,.1);margin:2rem 0}.toast[_ngcontent-%COMP%]{padding:1rem;border-radius:12px;margin-bottom:1.5rem;font-size:1rem;font-weight:500;animation:_ngcontent-%COMP%_fadeSlideDown .4s ease-in-out;box-shadow:0 4px 16px #00000014;background:#ffffff1a;color:var(--text-color)}.success-toast[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-left:6px solid #28a745}.deletion-request-section[_ngcontent-%COMP%]{margin-top:3rem;padding:2rem;background:#ffffff0d;border-radius:16px;box-shadow:0 4px 20px #0000000d;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)}.deletion-request-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--color-primary);margin-bottom:1.5rem;display:flex;align-items:center;gap:.5rem}.deletion-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;margin-bottom:.5rem}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border:1px solid #ccc;border-radius:8px;font-size:1rem;background-color:#fff;color:#000}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--color-primary);box-shadow:0 0 0 2px #6495ed4d}.deletion-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:100px;resize:vertical}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-start;background-color:var(--color-primary);color:#fff;border:none;border-radius:999px;padding:.75rem 1.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:background-color .3s ease}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0006;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:16px;max-width:400px;width:90%;color:#000;box-shadow:0 4px 20px #0003;animation:_ngcontent-%COMP%_fadeInUp .3s ease-in-out;text-align:center}.modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.25rem;color:var(--color-primary)}.modal-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem;margin-top:1.5rem}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.6rem 1.2rem;font-size:.95rem;border-radius:8px;border:none;cursor:pointer;font-weight:600;transition:all .3s ease}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background-color:var(--color-primary);color:#fff}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child:hover{background-color:#1565c0}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#eee;color:#333}.modal-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{background-color:#ddd}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeSlideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 600px){.privacy-container[_ngcontent-%COMP%]{padding:1.5rem;margin:2rem 1rem}h1[_ngcontent-%COMP%]{font-size:1.5rem}p[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{font-size:.95rem}.deletion-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']})};var nl={production:!0,drugBankBaseUrl:"https://api.drugbank.com/v1",drugBankToken:"YOUR_TOKEN_HERE",firebase:{apiKey:"AIzaSyDdUtaYxgkH4TxX2XDxfCtEcklUuPSXihQ",authDomain:"dose-ninja-final.firebaseapp.com",projectId:"dose-ninja-final",storageBucket:"dose-ninja-final.appspot.com",messagingSenderId:"155512503267",appId:"1:155512503267:web:1def1b0853badaa0417ed6",measurementId:"G-J10TWQ7STL"}};var kp=class n{constructor(e){this.http=e}baseUrl=nl.drugBankBaseUrl;token=nl.drugBankToken;getHeaders(){return new lr({Authorization:`Bearer ${this.token}`})}searchByName(e){return this.http.get(`${this.baseUrl}/us/drug_names?q=${encodeURIComponent(e)}`,{headers:this.getHeaders()})}searchByIngredient(e){return this.http.get(`${this.baseUrl}/us/ingredient_names?q=${encodeURIComponent(e)}`,{headers:this.getHeaders()})}getDrugById(e){return this.http.get(`${this.baseUrl}/us/drugs/${e}`,{headers:this.getHeaders()})}static \u0275fac=function(t){return new(t||n)(W(Ei))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function WG(n,e){if(n&1&&(E(0,"div",4),w(1),v()),n&2){let t=X();x(),Se(" \u26A0\uFE0F ",t.errorMessage," ")}}function KG(n,e){if(n&1&&(E(0,"div",5)(1,"h3"),w(2,"Response:"),v(),E(3,"pre"),w(4),GT(5,"json"),v()()),n&2){let t=X();x(4),je(WT(5,1,t.testResult))}}var Fp=class n{constructor(e){this.drugbank=e}testResult=null;errorMessage="";ngOnInit(){}runTest(){this.errorMessage="",this.testResult=null,this.drugbank.searchByName("aspirin").subscribe({next:e=>this.testResult=e,error:e=>this.errorMessage=e.message||"Unknown error"})}static \u0275fac=function(t){return new(t||n)(B(kp))};static \u0275cmp=Me({type:n,selectors:[["app-admin-test"]],decls:7,vars:2,consts:[[1,"admin-test-container"],[3,"click"],["class","error-message",4,"ngIf"],["class","result",4,"ngIf"],[1,"error-message"],[1,"result"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"DrugBank API Test"),v(),E(3,"button",1),ue("click",function(){return r.runTest()}),w(4,"Search \u201Caspirin\u201D"),v(),re(5,WG,2,1,"div",2)(6,KG,6,3,"div",3),v()),t&2&&(x(5),F("ngIf",r.errorMessage),x(),F("ngIf",r.testResult))},dependencies:[Re,He,Xy,Jt],styles:['@charset "UTF-8";.admin-test-container[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:1.5rem;background:var(--color-surface);color:var(--text-color);border-radius:8px;box-shadow:0 2px 8px #0000001a}.admin-test-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--color-primary)}.admin-test-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--color-primary);color:#fff;border:none;border-radius:4px;cursor:pointer;margin-bottom:1rem;transition:filter .2s ease}.admin-test-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{filter:brightness(.95)}.admin-test-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#c00;margin-bottom:1rem}.admin-test-container[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#f5f5f5;padding:1rem;border-radius:4px;overflow:auto;max-height:400px;color:var(--text-color)}body.dark[_ngcontent-%COMP%]   .admin-test-container[_ngcontent-%COMP%]{background:var(--color-surface);color:var(--text-color-light);box-shadow:0 2px 8px #00000080}body.dark[_ngcontent-%COMP%]   .admin-test-container[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#2a2a2a;color:var(--text-color)}']})};function QG(n,e){if(n&1&&(E(0,"div",9),w(1),v()),n&2){let t=X();x(),je(t.message)}}function YG(n,e){if(n&1&&(E(0,"div",10),w(1),v()),n&2){let t=X();x(),je(t.error)}}var Lp=class n{constructor(e,t){this.fb=e;this.auth=t;this.form=this.fb.group({email:["",[De.required,De.email]]})}form;message="";error="";onSubmit(){return _(this,null,function*(){if(this.message="",this.error="",this.form.invalid){this.error="Please enter a valid email.";return}try{yield this.auth.sendPasswordReset(this.form.value.email),this.message="\u2705 Password reset email sent. Please check your inbox.",this.form.reset()}catch(e){console.error("Password Reset Error:",e),this.error="\u274C Failed to send reset email. Try again later."}})}static \u0275fac=function(t){return new(t||n)(B(Mn),B(Tn))};static \u0275cmp=Me({type:n,selectors:[["app-forgot-password"]],decls:14,vars:4,consts:[[1,"forgot-password-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","required",""],["type","submit",3,"disabled"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["routerLink","/login",1,"back-link"],[1,"success-message"],[1,"error-message"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h2"),w(2,"Forgot Password"),v(),E(3,"form",1),ue("ngSubmit",function(){return r.onSubmit()}),E(4,"div",2)(5,"label",3),w(6,"Email Address"),v(),Oe(7,"input",4),v(),E(8,"button",5),w(9,"Send Reset Link"),v()(),re(10,QG,2,1,"div",6)(11,YG,2,1,"div",7),E(12,"a",8),w(13,"Back to Login"),v()()),t&2&&(x(3),F("formGroup",r.form),x(5),F("disabled",r.form.invalid),x(2),F("ngIf",r.message),x(),F("ngIf",r.error))},dependencies:[Re,He,Jt,An,gt,Nt,Sn,bE,un,ln,jt,xt],styles:[".forgot-password-container[_ngcontent-%COMP%]{max-width:400px;margin:3rem auto;padding:2rem;background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;box-shadow:0 4px 20px #0000001a}.forgot-password-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--color-primary)}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.forgot-password-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border-radius:8px;border:1px solid #ccc;font-size:1rem}.forgot-password-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:var(--color-primary);color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer}.forgot-password-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#1565c0}.forgot-password-container[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{margin-top:1rem;color:green;font-size:.95rem}.forgot-password-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{margin-top:1rem;color:red;font-size:.95rem}.forgot-password-container[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{display:block;margin-top:2rem;text-align:center;color:var(--color-primary);text-decoration:none}.forgot-password-container[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var ZG="type.googleapis.com/google.protobuf.Int64Value",JG="type.googleapis.com/google.protobuf.UInt64Value";function LN(n,e){let t={};for(let r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Vp(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Vp(e));if(typeof n=="function"||typeof n=="object")return LN(n,e=>Vp(e));throw new Error("Data cannot be encoded in JSON: "+n)}function La(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case ZG:case JG:{let e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>La(e)):typeof n=="function"||typeof n=="object"?LN(n,e=>La(e)):n}var KI="functions";var ON={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xt=class n extends Bt{constructor(e,t,r){super(`${KI}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,n.prototype)}};function XG(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Up(n,e){let t=XG(n),r=t,i;try{let o=e&&e.error;if(o){let s=o.status;if(typeof s=="string"){if(!ON[s])return new Xt("internal","internal");t=ON[s],r=s}let a=o.message;typeof a=="string"&&(r=a),i=o.details,i!==void 0&&(i=La(i))}}catch{}return t==="ok"?null:new Xt(t,r,i)}var qI=class{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,bt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i?.get().then(o=>this.appCheck=o,()=>{})}getAuthToken(){return _(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return _(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return _(this,null,function*(){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return _(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var GI="us-central1",e9=/^data: (.*?)(?:\n|$)/;function t9(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Xt("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}var WI=class{constructor(e,t,r,i,o=GI,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new qI(e,t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=GI}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function n9(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function r9(n,e,t){let r=i=>o9(n,e,i,t||{});return r.stream=(i,o)=>a9(n,e,i,o),r}function i9(n,e,t,r){return _(this,null,function*(){t["Content-Type"]="application/json";let i;try{i=yield r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let o=null;try{o=yield i.json()}catch{}return{status:i.status,json:o}})}function VN(n,e){return _(this,null,function*(){let t={},r=yield n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t})}function o9(n,e,t,r){let i=n._url(e);return s9(n,i,t,r)}function s9(n,e,t,r){return _(this,null,function*(){t=Vp(t);let i={data:t},o=yield VN(n,r),s=r.timeout||7e4,a=t9(s),u=yield Promise.race([i9(e,i,o,n.fetchImpl),a.promise,n.cancelAllRequests]);if(a.cancel(),!u)throw new Xt("cancelled","Firebase Functions instance was deleted.");let l=Up(u.status,u.json);if(l)throw l;if(!u.json)throw new Xt("internal","Response is not valid JSON object.");let h=u.json.data;if(typeof h>"u"&&(h=u.json.result),typeof h>"u")throw new Xt("internal","Response is missing data field.");return{data:La(h)}})}function a9(n,e,t,r){let i=n._url(e);return c9(n,i,t,r||{})}function c9(n,e,t,r){return _(this,null,function*(){var i;t=Vp(t);let o={data:t},s=yield VN(n,r);s["Content-Type"]="application/json",s.Accept="text/event-stream";let a;try{a=yield n.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:s,signal:r?.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){let N=new Xt("cancelled","Request was cancelled.");return{data:Promise.reject(N),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(N)}}}}}}let M=Up(0,null);return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}let u,l,h=new Promise((m,M)=>{u=m,l=M});(i=r?.signal)===null||i===void 0||i.addEventListener("abort",()=>{let m=new Xt("cancelled","Request was cancelled.");l(m)});let p=a.body.getReader(),y=u9(p,u,l,r?.signal);return{stream:{[Symbol.asyncIterator](){let m=y.getReader();return{next(){return _(this,null,function*(){let{value:N,done:O}=yield m.read();return{value:N,done:O}})},return(){return _(this,null,function*(){return yield m.cancel(),{done:!0,value:void 0}})}}}},data:h}})}function u9(n,e,t,r){let i=(s,a)=>{let u=s.match(e9);if(!u)return;let l=u[1];try{let h=JSON.parse(l);if("result"in h){e(La(h.result));return}if("message"in h){a.enqueue(La(h.message));return}if("error"in h){let p=Up(0,h);a.error(p),t(p);return}}catch(h){if(h instanceof Xt){a.error(h),t(h);return}}},o=new TextDecoder;return new ReadableStream({start(s){let a="";return u();function u(){return _(this,null,function*(){if(r?.aborted){let l=new Xt("cancelled","Request was cancelled");return s.error(l),t(l),Promise.resolve()}try{let{value:l,done:h}=yield n.read();if(h){a.trim()&&i(a.trim(),s),s.close();return}if(r?.aborted){let y=new Xt("cancelled","Request was cancelled");s.error(y),t(y),yield n.cancel();return}a+=o.decode(l,{stream:!0});let p=a.split(`
`);a=p.pop()||"";for(let y of p)y.trim()&&i(y.trim(),s);return u()}catch(l){let h=l instanceof Xt?l:Up(0,null);s.error(h),t(h)}})}},cancel(){return n.cancel()}})}var kN="@firebase/functions",FN="0.12.3";var l9="auth-internal",d9="app-check-internal",h9="messaging-internal";function f9(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(l9),s=t.getProvider(h9),a=t.getProvider(d9);return new WI(i,o,s,a,r)};an(new It(KI,e,"PUBLIC").setMultipleInstances(!0)),Ue(kN,FN,n),Ue(kN,FN,"esm2017")}function UN(n=Gr(),e=GI){let r=Ai(ze(n),KI).getImmediate({identifier:e}),i=Bh("functions");return i&&jN(r,...i),r}function jN(n,e,t){n9(ze(n),e,t)}function BN(n,e,t){return r9(ze(n),e,t)}f9();var Jo=class{constructor(e){return e}},$N="functions",QI=class{constructor(){return Ri($N)}};var YI=new $("angularfire2.functions-instances");function p9(n,e){let t=No($N,n,e);return t&&new Jo(t)}function g9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Jo(r)}}var m9={provide:QI,deps:[[new dt,YI]]},y9={provide:Jo,useFactory:p9,deps:[[new dt,YI],$n]};function HN(n,...e){return Ue("angularfire",vr.full,"fn"),rn([y9,m9,{provide:YI,useFactory:g9(n),multi:!0,deps:[be,We,_r,Wr,[new dt,Vo],[new dt,xi],...e]}])}var zN=qe(UN,!0),qN=qe(BN,!0);var jp=class n{functions=k(Jo);createCheckoutSession(e,t){let r=qN(this.functions,"createCheckoutSession");return Ne(r({email:e,billingPeriod:t})).pipe(te(i=>i.data.url))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bp=class n{constructor(e){this.stripeService=e}billingPeriod="monthly";loading=!1;auth=k(qn);get priceLabel(){return this.billingPeriod==="yearly"?"$49.99/year":"$4.99/month"}upgrade(){alert("Upgrade function started"),this.loading=!0,yR(this.auth).pipe(Nn(1)).subscribe(e=>{e?.email?(console.log("\u2705 Logged in as:",e.email),this.stripeService.createCheckoutSession(e.email,this.billingPeriod).subscribe({next:t=>{console.log("\u{1F517} Stripe session URL received:",t),t?window.location.href=t:(alert("No URL returned from Stripe."),this.loading=!1)},error:t=>{console.error("\u274C Stripe checkout error:",t),this.loading=!1,alert("There was an issue with Stripe checkout.")}})):(console.warn("\u26A0\uFE0F No user is currently logged in."),this.loading=!1,alert("Please log in to upgrade."))})}static \u0275fac=function(t){return new(t||n)(B(jp))};static \u0275cmp=Me({type:n,selectors:[["app-upgrade"]],decls:50,vars:4,consts:[[1,"upgrade-container"],[1,"billing-toggle"],["type","radio","name","billing","value","monthly",3,"ngModelChange","ngModel"],["type","radio","name","billing","value","yearly",3,"ngModelChange","ngModel"],[1,"discount"],[1,"plan-comparison"],[1,"plan-card","free"],[1,"included"],[1,"excluded"],["disabled",""],[1,"plan-card","premium"],[3,"click","disabled"],[1,"faq-link"],["routerLink","/faq"]],template:function(t,r){t&1&&(E(0,"div",0)(1,"h1"),w(2,"Upgrade to Dose Ninja Premium"),v(),E(3,"p"),w(4,"Unlock powerful features to stay on top of your medications."),v(),E(5,"div",1)(6,"label")(7,"input",2),Us("ngModelChange",function(o){return Nc(r.billingPeriod,o)||(r.billingPeriod=o),o}),v(),w(8," Monthly "),v(),E(9,"label")(10,"input",3),Us("ngModelChange",function(o){return Nc(r.billingPeriod,o)||(r.billingPeriod=o),o}),v(),w(11," Yearly "),E(12,"span",4),w(13,"(Save 20%)"),v()()(),E(14,"div",5)(15,"div",6)(16,"h2"),w(17,"Free"),v(),E(18,"ul")(19,"li",7),w(20,"\u2714\uFE0F Medication search"),v(),E(21,"li",7),w(22,"\u2714\uFE0F Daily reminders"),v(),E(23,"li",7),w(24,"\u2714\uFE0F Basic dashboard"),v(),E(25,"li",8),w(26,"\u274C No history tracking"),v(),E(27,"li",8),w(28,"\u274C Ads shown"),v()(),E(29,"button",9),w(30,"Current Plan"),v()(),E(31,"div",10)(32,"h2"),w(33,"Premium"),v(),E(34,"ul")(35,"li",7),w(36,"\u2714\uFE0F No ads"),v(),E(37,"li",7),w(38,"\u2714\uFE0F Unlimited tracking"),v(),E(39,"li",7),w(40,"\u2714\uFE0F Smart drug interactions"),v(),E(41,"li",7),w(42,"\u2714\uFE0F Export logs (PDF/CSV)"),v(),E(43,"li",7),w(44,"\u2714\uFE0F Streak tracking"),v()(),E(45,"button",11),ue("click",function(){return r.upgrade()}),w(46),v()()(),E(47,"div",12)(48,"a",13),w(49,"Learn more in our FAQ"),v()()()),t&2&&(x(7),Vs("ngModel",r.billingPeriod),x(3),Vs("ngModel",r.billingPeriod),x(35),F("disabled",r.loading),x(),Se(" ",r.loading?"Processing...":r.billingPeriod==="yearly"?"Upgrade \u2013 $49.99/year":"Upgrade \u2013 $4.99/month"," "))},dependencies:[Re,Ui,gt,IE,Nt,ku],styles:[".upgrade-container[_ngcontent-%COMP%]{text-align:center;padding:3rem 1.5rem 5rem;color:#222;background:transparent}.upgrade-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:700;margin-bottom:.5rem;color:inherit}.upgrade-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#555;margin-bottom:2rem}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]{background:#0000000f;border-radius:50px;padding:.75rem 1.5rem;display:inline-flex;gap:2rem;align-items:center;justify-content:center;box-shadow:0 0 12px #0000001a;margin-bottom:2.5rem;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#333;font-weight:500;font-size:1rem;cursor:pointer;display:flex;align-items:center}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:.5rem}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .discount[_ngcontent-%COMP%]{color:#2e7d32;font-size:.9rem;margin-left:6px}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:center}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:20px;padding:2rem;width:320px;box-shadow:0 10px 25px #00000026;border:1px solid #ddd;transition:transform .3s,border-color .3s;color:#222}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]:hover{transform:scale(1.03);border-color:#4caf50}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.6rem;margin-bottom:1rem;display:flex;justify-content:center;align-items:center;gap:.5rem;color:#111}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin-bottom:1.5rem;font-size:1rem}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.6rem 0;display:flex;align-items:center;gap:.5rem}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.included[_ngcontent-%COMP%]{color:#2e7d32;font-weight:600}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.excluded[_ngcontent-%COMP%]{color:#c62828;text-decoration:line-through;font-weight:500}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#4caf50;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:10px;font-weight:700;font-size:1rem;cursor:pointer;transition:background .3s}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background:#43a047}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#888;cursor:not-allowed}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card.free[_ngcontent-%COMP%]{border:1px solid #aaa}.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]   .plan-card.premium[_ngcontent-%COMP%]{border:1px solid #4caf50}.upgrade-container[_ngcontent-%COMP%]   .faq-link[_ngcontent-%COMP%]{margin-top:2rem}.upgrade-container[_ngcontent-%COMP%]   .faq-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1976d2;text-decoration:underline;font-size:.95rem}@media screen and (max-width: 768px){.upgrade-container[_ngcontent-%COMP%]   .plan-comparison[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.upgrade-container[_ngcontent-%COMP%]   .billing-toggle[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}}"]})};var GN=[{path:"",component:Ff},{path:"dashboard",component:yf},{path:"drug-details/:rxcui",component:vf},{path:"login",component:Pf},{path:"register",component:xf},{path:"profile",component:Np},{path:"tracking-list",component:Nf},{path:"medication-search",component:Of},{path:"dosage-correction",component:kf},{path:"upgrade",component:Bp},{path:"privacy-policy",component:Op},{path:"admin-test",component:Fp},{path:"forgot-password",component:Lp},{path:"**",redirectTo:""}];uv(mf,{providers:[Hv(GN),sM(()=>aM(nl.firebase)),mR(()=>gf()),MN(()=>Pp()),HN(()=>zN())]});
